[
    {
        "subreddit": "GoogleTagManager",
        "created": 1754678807.0,
        "title": "Cookies GTM",
        "author": "Beyond92",
        "id": "1ml3iwy",
        "selftext": "How do you manage cookies acceptance via GTM? What do you use? Does GTM actually blocks the cookies before acceptance?\n\nI'm afraid I'm not having a correct GDPR compliance",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ml3iwy/cookies_gtm/",
        "num_comments": 15,
        "comments": [
            {
                "body": "In principle you should be setting the consent to denied by default when a page loads in, you then use your CMP of choice to update those preferences based on either previous consent response (stored in cookie) or the choice made at that point in time and then stored.\n\nFor GA4 tags they have built in consent and will obey accordingly, for most others you need to specify only to fire on the appropriate consent choice (or not)\n\nIt's a lot better than it used to be trying to manage convoluted trigger combinations to manage consent. Consent these allows you to have secondary trigger conditions in a way.",
                "author": "Tagnetica",
                "score": 4
            },
            {
                "body": "I've used CookieBot, CookieYes, TrustArc, OneTrust, UserCentrics, Enzuzo and others.\n\nYes, GTM does block cookies before acceptance when properly configured.\n\nIf you're concerned about your compliance, what have you done to check? Do you know what and how to check?",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I know you're technically correct, but in this case you're not practically correct. Every commercial website that uses GTM for user data collection does not and likely will not do it this way.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "There are different approaches, personally I prefer having the consentv defaults set and then loading the CMP in before the GTM container script, but most also support loading in the CMP via GTM as GTM does accommodate the need for earlier activity using the earlier built in triggers such as consent initialisation trigger.",
                "author": "Tagnetica",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "GTM must be combined with a CMP (cookie management platform).\nYou can/should push the default consent states yourself (before GTM script code).\n\nDepending on your page size and traffic you can start with something free like CookieBot or something open source and scalable (a bit harder to manage), you can use tools such as Klaro.",
                "author": "BackYx",
                "score": 1
            },
            {
                "body": "Agree to the other comments. Make sure You’re not loading GTM before consent because GTM itself needs consent even if it doesn‘t load anything\n\nSee ➡️ https://www.reddit.com/r/gdpr/s/paDb9J42ON",
                "author": "philipp_roth",
                "score": 1
            },
            {
                "body": "So by instance my CMP should give me the ability to inject scripts that sets cookies on consent given, right? That's why I was asking about GTM, because usually GTM is the \"script injector\", if you get what I'm trying to say. So what's the right way? Either is fine until the GDPR requirement is met? Or I should be sticking to GTM and use a certified Google CMP ?",
                "author": "Beyond92",
                "score": 1
            },
            {
                "body": "I see that browser sets cookies data and my programmer said that it does delete them immediately and resets them only after consent.\n\nBasically user lands, cookies are sets by script, gets deleted by JS if no consent given and are sets back only if consent is given. My programmer developed its own way which I know it's not correct. So I was asking away",
                "author": "Beyond92",
                "score": 1
            },
            {
                "body": "Also, since you used many, what's the easiest to use, according to you?",
                "author": "Beyond92",
                "score": 1
            },
            {
                "body": "Cookiebot is acquired by usercentric so far I know. I used only cookieyes and cookiebot, both of them are great. If you use programmer to set this up, it takes a lot of effort and being compliant is not easy. So, going for any of the cookie management platform would be the best using Google tag manager.",
                "author": "ResearcherNaive8623",
                "score": 1
            },
            {
                "body": "I find CookieBot easy to work with, but also that is the first one I worked with. Enzuzo is a good option and I believe you can get started with Enzuzo for free.\n\nI do not like the approach of \"delete the cookies\". You should not be in a situation where you have to delete cookies. It's not really compliant and it's not an elegant or correct way to do it.\n\nWhen properly set up, any CMP integration with GTM will just not fire any of the 3rd-party tracking or analytics tags until there is consent, which means no 3rd-party platforms will receive any data and no cookies associated with those platforms will be set.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Can I throw one on for good measure. \n\nTry GetTerms CMP. Its the easiest to setup and does all of what you would need for a business.",
                "author": "CheeryRipe",
                "score": 1
            },
            {
                "body": "UserCentrics does own CookieBot. CookieBot can be thought of as their entry-level service and the main UserCentrics consent platform is more enterprise level and a likely direct competitor to OneTrust.\n\nOneTrust is easy to work with and has excellent support, but it's expensive.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Using a certified CMP and staying compliant is the decision to stay safe.\n\nGTM not only helps you inject scripts but also helps you manage all the tags the right way so events fire with consent changes, and you get the data when the audience agrees to the consent.\n\nHere is the process that will give you a clear idea if you want to set up Cookiebot CMP using Google Tag Manager.  \n  \nGo to the Cookiebot CMP website, log in for free, organize the banner, and set it up manually with Google Tag Manager. There you will find a code to set up manually.  \n  \n\\- Then go to Google Tag Manager:  \n\\- Search and select Cookiebot CMP Tag  \n\\- Trigger is Consent Initialization on all pages  \n\\- From Container Settings, enable Consent Overview  \n\\- Click on Consent Overview  \n\\- Select the GA4 Tags and Google Ads Tags  \n\\- Click on Consent Settings  \n\\- Select “No additional consent required”  \n  \nAdditional setup to ensure maximum consent:  \n\\- Create a JavaScript Tag for the View Content to track events when the audience comes from an ad to the View Content landing page.  \n  \nSo, by this way you can set up cookie consent mode v2.",
                "author": "Fazle__",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1759273089.0,
        "title": "ad_storage still denied after consent was accepted (WP & Usercentrics CookieBot)",
        "author": "AwareCauliflower7635",
        "id": "1nurz0t",
        "selftext": "All my settings enable Google Consent Mode V2 and I all my tags are loaded in <head> and <body> with default denied settings. \n\nI use custom functions for the Tag placement and usercentric cookiebot for the consent. \n\nafter accepting the consent - no tags a fired?   \nI tried all the claude suggestion without any success \n\ncan it be that the trigger for \"consent\\_status\" has to be added to Google Tags?\n\nI currently have no access to the Google Tag Manager. What else can i try? ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nurz0t/ad_storage_still_denied_after_consent_was/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Are your tags deployed directly to the website, or via GTM? Cookiebot and Consent mode are fairly easy to implement via GTM or even via Cookiebot WordPress plugin + GTM. With Cookiebot, tags are not supposed to fire on `consent_status`, but either on Initialization (for advanced consent mode for google tags) or on `cookie_consent_update` (for basic consent mode + all non-google tags).",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "The fact that your tags aren't firing after consent acceptance tells me the consent update signals aren't reaching GTM properly. Usercentrics on WordPress has a gap where the consent status changes but GTM doesn't receive the proper trigger events.\n\nYou can verify this by checking your browser's Network tab after accepting consent - you probably won't see the gtag('consent', 'update') calls that should be firing. The dataLayer isn't getting\nthe consent status changes that would trigger your tags.\n\nThe plugin fires its own consent events but doesn't translate them into the GTM consent signals your tags are waiting for. This creates a disconnect where consent is granted but tags never know about it.\n\nI am a wordpress developer and if you would like some help with that plugin, I can assist. My diagnostic approach would be to verify whether consent update events are reaching the dataLayer after acceptance, and check if the tags have proper consent status triggers configured. \n\nThe systematic 4 layer troubleshooting I use points to a consent signal transmission problem rather than tag configuration or platform processing issues.",
                "author": "vscodr",
                "score": 1
            },
            {
                "body": "It sounds like your tags aren’t firing because the consent update isn’t reaching Google after users accept. You need to hook into Cookiebot/Usercentrics’ consent callback and call gtag('consent', 'update', { ad_storage: 'granted', analytics_storage: 'granted' }), then re-fire your tags.\n\nI can set this up properly for you so everything tracks correctly. If you want, contact me on WhatsApp: +8801639846857.",
                "author": "abdullahadsbd",
                "score": 1
            },
            {
                "body": "If you don’t have GTM access, the main reason `ad_storage` stays denied is that the consent signal isn’t actually reaching the tags. Your tag scripts need to wait for the consent event before firing. Check in the console that Cookiebot or Usercentrics is updating the consent state. Then wrap your tag initialization in a callback that only runs when `ad_storage` is granted. For Cookiebot:\n\n    document.addEventListener('CookieConsentDeclaration', function() {\n      if (Cookiebot.consents.ad_storage) {\n        // fire Google tags here\n      }\n    });\n    \n\nFor Usercentrics:\n\n    window.addEventListener('UC_UI_Update', function() {\n      if (Usercentrics.getConsentStatus().consents.ad_storage) {\n        // fire your tags here\n      }\n    });\n    \n\nbasically, make sure the tags load after consent, not before. If they still don’t fire, the consent event isn’t propagating or the script runs too early.",
                "author": "AdhesivenessLow7173",
                "score": 1
            },
            {
                "body": "So, the default consent is set to denied. After a user accepts consent or with any other choice, does a consent update event fire? with correct implementation of cookiebot this should be the case. Also, are you using advanced consent mode? This means that any Google related tag is allowed to fire with or without consent. If consent is denied, Google will send cookieless pings, if consent was accepted, all events that fired before accepting will still get the consent accepted. \n\nAnother thing, the consent update event should trigger on EVERY page. Again, with the correct cookie bot setup this should work. \n\nVisit your site, accepts cookies, in the console from dev tools type dataLayer and enter, check if you see a cookie consent update event with the assigned value for every category. Also check if it fires really early, because if you have consent for specific cookies as blocking triggers then this might be an issue. But with advanced consent mode Google related tabs are allowed to fire at all times whether consent is granted or not. One note, very privacy aware companies don’t use advanced consent mode and don’t want tags to fire at all when consent hasn’t been given since it’s still some kind of a grey area if Google actually removes enough data so that no user identifiable data is collected at all.\n\n\n\nBy they way, not sure if this is mandatory, but in GTM in the container settings there’s an option to apply consent mode to the container.",
                "author": "Pretty-Appearance226",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754131236.0,
        "title": "How many of you have had problems setting up Cookie Solution and Consent Mode with Iubenda + Wordpress + GTM?",
        "author": "Equivalent_River_870",
        "id": "1mfngdw",
        "selftext": "I did it recently and found it really chaotic. The Iubenda guides are scattered and got me drunk but fortunately I followed several Youtube videos that explained everything easily.\n\nHow many of you have been in my situation?",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mfngdw/how_many_of_you_have_had_problems_setting_up/",
        "num_comments": 12,
        "comments": [
            {
                "body": "I *have* worked with Iubenda and it is definitely not one I would look forward to working with again, although it's perfectly functional.\n\nGTM + Wordpress + Any CMP is already a challenge, so working with a not-great CMP just makes it frustrating.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Ah, I feel you that combo (WordPress + GTM + Consent Mode + Cookie Solution) can definitely get messy. I actually work on the content team at iubenda, and you're right: we’ve got a lot of guides, but not all of them are as streamlined or centralized as they should be. It's something we’re actively trying to improve.\n\nOut of curiosity, do you remember which YouTube videos helped the most? We’re exploring ways to simplify the setup process and maybe even collaborate with creators who explain it better than we do.\n\nReally appreciate you bringing this up, feedback like this is gold for us.",
                "author": "Reasonable-Newt-7926",
                "score": 2
            },
            {
                "body": "u/Equivalent_River_870 I feel you. Over the years, I’ve shed plenty of tears over major CMPs too… which is exactly why we built our own - [Cooki.fi](https://cooki.fi). It's straightforward to configure and designed for freelancers and agencies. Feel free to give it a try if you ever feel stuck with OneTrust again.",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "I completely agree with you.  \nAs I was setting up the whole system, I had the rage several times to abandon Iubenda, request refund and switch to another CMP.   \nWhen I finished the setup, however, I thought it was worth it (the subscription price is not really excessive for a new website).",
                "author": "Equivalent_River_870",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What so you use for handling the GTM code on WordPress?",
                "author": "Neinhalt_Sieger",
                "score": 1
            },
            {
                "body": "I placed the GTM snippet directly on my website via File Manager.",
                "author": "Equivalent_River_870",
                "score": 1
            },
            {
                "body": "CookieYes was great, last time I tried it. CookieBot is mostly OK, but they are squeezing features and pricing and are single-user focused.\n\nOneTrust is turning into an expensive option, but they have some decidedly “enterprise” level features in case they are needed.\n\nUserCentrics is on my radar if I need a OneTrust alternative.\n\nAvoid TrustArc though. Their product works, but their technical level support is dire.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thank you very much for your suggestions!",
                "author": "Equivalent_River_870",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1751544573.0,
        "title": "How to push UTM parameters from parent site to iframe using GTM and cookies?",
        "author": "Sensitive_Idea_3974",
        "id": "1lqnxkp",
        "selftext": "Hey everyone, I’m stuck on what should be a simple tracking setup and could really use some help.\n\nHere’s my situation:\n\n* I have a website (parent domain) and a form embedded via iframe (on the same domain).\n* Both the parent page and the iframe use the **same GTM container**.\n* On the parent page, I store UTM parameters in a cookie named \\_\\_gtm\\_campaign\\_url.\n* I want to **send those UTM values into the iframe** so they can be picked up and sent with a GA4 conversion event when someone submits the form inside the iframe.\n\n",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lqnxkp/how_to_push_utm_parameters_from_parent_site_to/",
        "num_comments": 11,
        "comments": [
            {
                "body": "This is why one should apply the opposite methodology of what OP is trying to do. Send a postMessage from the child to the parent window instead. User and session context is preserved, it's less complex and no need to pass and override URL parameters or stitching.",
                "author": "brannefterlasning",
                "score": 4
            },
            {
                "body": "Hi! I can recommend you to look at this article of Simo Ahava.\n\n[https://www.teamsimmer.com/2023/05/02/how-do-i-use-the-postmessage-method-with-cross-site-iframes/](https://www.teamsimmer.com/2023/05/02/how-do-i-use-the-postmessage-method-with-cross-site-iframes/)\n\nYou could grab the cookie values in the parent window and send it with the event data with the postMessage method to the iframe. \n\nIf you still run into issues don't hesitate to contact me.",
                "author": "newnorth-digital",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Be careful with iFrames. \n\nInside the iFrame, GA4 configuration will essentially act like another website. So also **another user**. The risk here is that tracking inside an iFrame will artificially inflate the number of users on your website.\n\nSo when and if you will pass parameters, I would recommend you also pass the cid - maybe even the sid - and manually configure the configuration tag to use those. This way the session inside the iframe will also be stitched togheder with the one in the website, so you will have the same traffic source.\n\nI found it less of a hassle to send the event from the measurement protocol directly to Server Side (if you have one). But that has other hassles as well:)) Can't have it all.",
                "author": "ok_boomer_110",
                "score": 1
            },
            {
                "body": "You could use a variation on Julius' technique to decorate the iframe URL. \n\n\nhttps://www.analyticsmania.com/post/transfer-utm-parameters-google-tag-manager/",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Use  window messaging to pass data between iframe and parent page. DM if you need anything very specific.\n\nYou will be better off sending this conversion events from the parent page. Otherwise you might have broken user journeys. \n\nI avoid sending any events from an iframe directly if it can be avoided",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "u/Sensitive\\_Idea\\_3974 as others suggested, it's better to send event data from child frame to parent frame using the postMessage API. Create a listener inside the parent frame and then send the event to GA4 once it triggers. That way, you don't need to store any UTM parameters in a cookie, and you'll also ensure the user and session information remains intact. Here's an article I recently wrote about this (even though it's about a GHL iFrame form, the same principles and steps apply to other iFrames): [https://karolkrajcir.com/post/how-to-track-go-high-level-iframe-forms-with-google-tag-manager](https://karolkrajcir.com/post/how-to-track-go-high-level-iframe-forms-with-google-tag-manager)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "This is a very neat idea!",
                "author": "ok_boomer_110",
                "score": 1
            },
            {
                "body": "You should gather more knowledge on iFrames so Be careful with iFrames.😊",
                "author": "ripon_ads",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1751005567.0,
        "title": "Any way to overwrite the 7 days lifespan of cookies in Safari on client side?",
        "author": "Nice_Pen_8054",
        "id": "1llmvbx",
        "selftext": "Hello,\n\nIs there any way to overwrite the 7 days lifespan of cookies in Safari on client side?\n\nThanks.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1llmvbx/any_way_to_overwrite_the_7_days_lifespan_of/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Have you tried Google Tag Manager Server Side and Stape Cookie Extender? [https://github.com/stape-io/cookie-extender-tag](https://github.com/stape-io/cookie-extender-tag)\n\nThere might be a solution there.",
                "author": "enrico-chiolo",
                "score": 2
            },
            {
                "body": "Pointless to even try it. We (colleague of mine, not me directly) did some experiments with server-side to extend cookie lifetimes. It worked, but it's a huge thing and ultimately it's an arms race that can never be won. Doesn't matter what strategy yuo try, Apple has the ultimate upper hand at all times.\n\nTrying to achieve it solely client side is going to be less effective.\n\nPlaying the game against Apple will just result in wide swings in your collected data as you sidestep and then Apple counters.\n\nJust do all the things you're supposed to do like implement 1st-party data on the platforms you're collecting data for and, if you are able, implement first-party mode with server-side GTM. Then revisit your UTM strategy so that youre reliance on gclid, fbclid and other click identifiers is reduced to minimum.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Too many issues with Shopify + cookie extender in CMP setups. ",
                "author": "Affectionate_Fee_605",
                "score": 2
            },
            {
                "body": "u/Affectionate_Fee_605 Try reaching out to Stape directly. They’ve generally been very open to feedback and eager to improve their product.",
                "author": "enrico-chiolo",
                "score": 2
            },
            {
                "body": "So did ours, but at some point nobody can predict, it won’t.\n\nIt’s also of dubious legality.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Ok, we need to follow what will happend in the future.\nThat's not a reason to give minus on my message.\n\nBy the way are you developer?\n\nI see you wrote \"colleague of mine\" did something.\n\nAlso you wrote \"it worked\" past tense...",
                "author": "Programer_Marktech",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can, but not with JS-set cookies. Apple's ITP spec simply won't allow it.",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "I left that company in March. Hence past tense.\n\nI do a little dev work.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Can you explain how you and your colleague did it?",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "probably not, at this point. It was done quite a long time ago and I never revisited it. It was explored as a project for a specific client, but with a view that it had potential to have a wider roll-out, essentially a product that could be sold.\n\nThe gist was to send the content of potentially affected cookies to sGTM and then essentially remember them and restore them back in the browser if they were overwritten (by e.g. Apple ITP).\n\nIt was a \"simple\" task that required some complexity to achieve. I wasn't wholly on board with it because of the ultimate futility. Apple (or privacy browsers, extensions etc) could still figure out how to thwart it.\n\nThe fact that it was never productised spoke volumes, in my mind.\n\nThen Facebook just developed their own option and unearthed it with an innocuous \"extend cookie lifetimes\" tickbox.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Sorry but I do not agree.\nI ve built inhouse solution and it's working fine.",
                "author": "Programer_Marktech",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747864242.0,
        "title": "High Direct Traffic in GA4 Due to CookieYes and Google Tag Manager Configuration",
        "author": "microwave-2025",
        "id": "1ksa7y5",
        "selftext": "Hi @cookieyesHQ \n\nI'm currently implementing CookieYes via Google Tag Manager, but I'm running into a significant issue with traffic attribution in Google Analytics 4 (GA4). Here's a summary of my setup and the problem:\n\nMy GA4 config tag has built-in consent checks and triggers on 'Initialization - All Pages'.\n\nThe CookieYes configuration tag in GTM has default consent settings set to 'disabled' and triggers on 'Consent Initialization - All Pages'.\n\nThe Problem:\nIn Google DebugView, I see that CookieYes sends an automatic cookie consent update to GTM. After the user interacts with the cookie banner, a second consent update is sent. This seems to cause GA4 to incorrectly classify over 90% of traffic as 'Direct', which is obviously not correct.\n\nPreviously, with other CMPs, I triggered the GA4 tag on 'cookie consent update' and it worked with a single event when the user actually updated their consent.\n\nCould anyone provide step-by-step instructions on how to set up the GA4 tag and the CookieYes tag to work together properly? I need to troubleshoot this to ensure accurate traffic attribution.\n\nThanks in advance for your help!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ksa7y5/high_direct_traffic_in_ga4_due_to_cookieyes_and/",
        "num_comments": 14,
        "comments": [
            {
                "body": "A lot of this information is incorrect.\n\n\n> So it’s not that GA4 is blocked from firing it’s that it fires before consent is granted, and once consent is updated, GA4 starts collecting but by then the attribution info has already been lost. \n\n\nWhile it is true that url parameters are lost after you navigate away from the landing page, loading the Google Tag with consent set to \"denied\" and then updating it to \"granted\" while still on the same page will not cause attribution to be lost. This is the whole point of \"advanced consent mode\".\n\n\nIn fact, attribution will not be lost even if the user grants consent after navigating away from the landing page, as long as you loaded your Google tag on the first page and you don't have the \"redact ads data\" flag enabled.",
                "author": "brannefterlasning",
                "score": 7
            },
            {
                "body": "ChatGPT lies. Sort of. If you ask ChatGPT a question in a way that presupposes an answer, it will give you an answer that includes your supposition. In other words ChatGPT will sometimes tell you what you want to hear, whether true or not. Had a boss once who told me that links in YouTube descriptions hurt SEO. I asked him who told him that. He said SEO experts - but I knew he got it from ChatGPT - he was always spouting nonsense he got from ChatGPT. I told him that YouTube descriptions links were nofollow and we should fire those SEO experts.",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "You might want to try this: [https://github.com/tudorhoriadaniel/persist-original-traffic-source?tab=readme-ov-file](https://github.com/tudorhoriadaniel/persist-original-traffic-source?tab=readme-ov-file)",
                "author": "zenith66",
                "score": 2
            },
            {
                "body": "I put a JSON file in the below Google Drive link that you can import into a scratch/sandbox workspace. just import / merge / rename conflicts. it includes a few things. had someone import it and they told me it worked. there is a folder for referral source (why? because i get marketers who put garbage into utm\\_source and the site landing referral source helps be figure out what happened). there is an example of capturing the site landing URL (why? start of user journey across domains when there is a multi domain site and all the subdomains have a '/' path). there is an Analytics folder that has the shared event settings. you'll want to turn the shared event settings into event and user custom definitions in GA4 [https://drive.google.com/drive/folders/1l-f-e9IfycLa-73pzBJR0a1s1aKTzfA3?usp=sharing](https://drive.google.com/drive/folders/1l-f-e9IfycLa-73pzBJR0a1s1aKTzfA3?usp=sharing)",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, I’ve asked ChatGPT and it helped me piece this together more clearly.\n\nTo clarify: my GA4 config tag isn’t blocked initially it fires with an Initialization trigger on all pages, which is actually correct for setups using Google Consent Mode v2. CookieYes sends an initial consent state (defaulted to “denied”) and then updates it once the user interacts with the banner. So GA4 respects that and adjusts accordingly.\n\nNow here’s where the issue comes in:\n\nOn first page load, GA4 fires but sees consent as “denied,” so it doesn’t collect identifiable data. UTM parameters like source/medium/campaign do appear in DebugView, which tells me they’re being passed but they don’t carry over into real-time or standard reports unless the user accepts cookies and then refreshes or navigates to another page.\n\nThis seems to be because UTM data is only available via document.location and document.referrer on the first page load. If the user consents after that first load, and GA4 only starts collecting data then, the original attribution context is gone so the session is marked as Direct.\n\nSo it’s not that GA4 is blocked from firing it’s that it fires before consent is granted, and once consent is updated, GA4 starts collecting but by then the attribution info has already been lost.\n\nSession counts seem fine, it’s just that the quality of attribution is poor unless the user refreshes or navigates after accepting. It’s a timing issue, really.\n\nAnd yes, defaulting to “denied” is required to stay GDPR-compliant for first-time users.",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "Let pageview fire only after consent update is fired",
                "author": "Interesting-Plan-618",
                "score": 1
            },
            {
                "body": "Since UTMs were initially showing in DebugView and now they’re not, and I’ve confirmed my GA4 config tag fires on all pages (Initialization trigger), I’m wondering if there’s something off with either how CookieYes is updating consent or the tag timing.\n\nIn your opinion, what would be the best way to fix this setup? Should I be changing how consent is handled in GTM or adjusting how UTMs are captured?\n\nWould really appreciate your take on what I might need to do to get this tracking working properly again.",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "Thanks for this!",
                "author": "Strict-Basil5133",
                "score": 1
            },
            {
                "body": "Haha funny! ITotally agree with you ChatGPT can be useful, but it definitely has a habit of confidently suggesting overcomplicated solutions, especially when you’re trying to debug consent or tagging issues.\n\nFor example, in my case, ChatGPT suggested I disable the default page view by setting send_page_view: false in the GA4 config tag. Then, I was supposed to create a separate GA4 page_view event tag that would only trigger when analytics_storage = granted, using a custom event like cookie_consent_update and a Data Layer Variable {{dlv - analytics consent}} set to granted.\n\nIn theory, that would delay the page view until after consent and preserve UTM parameters but the issue was that CookieYes wasn’t pushing any analytics_storage consent updates into the Data Layer. The DataLayer variable just stayed \"undefined\" even after users accepted cookies. So the trigger never fired, and no page_view was sent at all.\n\nWhat’s strange is that I couldsee in GTM's Consent tab that the consent status was updated to \"granted\", but since CookieYes was handling it internally and not pushing that to the Data Layer, it broke ChatGPT’s whole approach.\n\nSo yeah, I’m struggling a bit here. I’ve spent hours trying to get UTM parameters to persist correctly. I can see in GTM Debug Mode that the initial page view is being sent before consent is granted, and I’m pretty sure that’s where the UTM data is captured and lost.\n\nOnly after users accept cookies and navigate to another page does a new page view get triggered and that shows up as the first page view in GA4’s DebugView, which confirms that attribution is getting lost right at the start.\n\nCan anyone confirm if that’s likely the root cause? And if so, what’s the best way to solve it?\n\nReally appreciate any insight this one's been driving me mad for days!!",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "all the talk about persisting UTM parameters - google is handling that 'on the fly' in the reporting API. you should not need to do anything. any of the 9 legitimate UTMs that come in on site landing, GTM/GA4 will automatically 'handle' them with no effort on your part. that you see them show up correctly as 'first user medium' or 'session medium' etc in GA4 is something that GA4 is addressing without assistance. yes - i have written code to persist both first user and current UTM URL query strings using 1st party cookies. but there are only really 2 reasons to do that. 1) something peculiar with how your subdomains are set up with different GA4 measurement streams (not a good reason) or some sort of server side URL query string parameter truncation, or 2) needing to pass on the UTM values to something else like HubSpot or Salesforce as a form input.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "That’s good to know, and I really appreciate the explanation.\n\nBut here’s where I’m still stuck: when I preview my website in GTM using a URL with UTM parameters (e.g. https://mywebsite.com/?utm_source=test&utm_medium=test&utm_campaign=test), and then open GA4 DebugView, I don’t see the source, medium, or campaign in the page view event. They’re missing completely even though I understand they should be auto-handled by GA4.\n\nThis is also why they’re not showing up in my real-time reports under Page view → Source / Medium / Campaign, and why I’m getting 90+% Direct traffic in reports. So it seems like GA4 isn’t picking them up at all.\n\nThe strange part: if a user accepts cookies and then hard-refreshes the page, then the UTM parameters appear in DebugView and Real-Time  so that seems to be the key moment where the UTM data actually gets captured and passed through.\n\nSo it looks like the initial page view is happening before consent is granted, and GA4 is either not allowed to collect attribution info at that point or isn’t persisting it and then by the time consent is granted, the UTM data is already lost from the URL.\n\nAny idea why that’s happening? That’s the crux of the issue, and I’d really appreciate any thoughts or direction on what to try next.\n\nThanks again for taking the time!",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "Have you asked ChatGPT? Seriously, it’s made exceedingly quick work of every third party integration I’ve thrown at it. \n\nAt a glance, if you’re defaulting to opt out, and then a user accepts, I can imagine initiating an anonymous session pre banner interaction if it somehow qualifies as engaged, and then initiating a second direct cookie’d session when the user consents. Even if it’s not splitting the session, I’d guess that the interaction would drop the cookie, initiate a session, and that session would be direct since it starts on the site. Are your session counts normal? Is there a specific reason you're defaulting to opt out?",
                "author": "Strict-Basil5133",
                "score": 0
            },
            {
                "body": "Hi,\n\nWhen you implement CookieYes, it blocks third-party analytics (like GA4) from firing until the user accepts the relevant cookies. That means GA4 doesn't capture source/medium data unless consent is given, so traffic that *should* be attributed ends up labelled as ‘Direct’.\n\nTo address this:\n\n* **Google’s Advanced Consent Mode V2** can help. It allows tags to send cookieless pings *before* consent is given. These are used by Google to model user behaviour but aren’t shown in your actual GA4 reports, they just help fill in the gaps.  \n* Full tracking only kicks in once the user accepts analytics cookies. If most visitors don't consent, GA4 ends up labeling a big chunk of traffic as 'Direct'.\n\n\n\nEven with these features in place, you may still see major gaps in reported traffic if users don’t accept tracking cookies. To stay GDPR compliant, analytics tools must respect user consent, so you can’t collect complete tracking data without explicit permission.\n\nRefer: [https://www.cookieyes.com/documentation/drop-in-traffic-on-google-analytics-after-adding-cookieyes/](https://www.cookieyes.com/documentation/drop-in-traffic-on-google-analytics-after-adding-cookieyes/)\n\nIf you need help troubleshooting your setup or setting the tag behavior correctly, feel free to email us at [support@cookieyes.com](mailto:support@cookieyes.com).",
                "author": "cookieyesHQ",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746291497.0,
        "title": "analytics_storage stays denied with new cookie banner?",
        "author": "LightTheFerkUp",
        "id": "1kdxl7q",
        "selftext": "Hi all, not quite sure where to look for this solution.\n\n\n\nI was using a cookiebot banner from Usercentrics for a year with no issue, but switched it for the same, but on another account with Usercentrics. Since then, no more traffic is being sent to Google Analytics, and analytics\\_storage stays denied after consenting on the banner.\n\n\n\nAll other aspects, Google ads etc, are fine, but for some reason something is blocking the analytics\\_storage cookie?\n\n\n\nAnyone experienced something similar?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kdxl7q/analytics_storage_stays_denied_with_new_cookie/",
        "num_comments": 14,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This was my annoyance with that CMP. If it has scanned the site and not found any analytics cookies, it provides no way to consent to analytics_storage.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Try rescan. If that doesn't work, create a new dummy marketing cookie in your Cookie it account.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Could you share a container preview link? It’s easier to see what’s going on.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Feel free to give Consent Studio a go. Might as well save you from the pricing drama…",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I think your new cookie banner is blocking the data being sent to GA4. Go through the consent settings inside the cookie bot once again. Turn on the necessary cookies (analytics cookies) this could solve ur issue ig",
                "author": "Main-ITops77",
                "score": 1
            },
            {
                "body": "u/LightTheFerkUp you're definitely not alone - I ran into the same issue with a client recently... we ended up switching to [Cooki.fi](https://www.cooki.fi/), which is much simpler and more affordable... and I haven't experienced any issues whatsoever with things like Consent Mode v2 or data layer pushes",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "I am experiencing the exact same issue with a new CMP on Usercentrics. analytics_storage remains denied despite granting consent on the banner. I have reached out to support and am now awaiting their reply.",
                "author": "Greedy-Towel152",
                "score": 1
            },
            {
                "body": "Do you have a link to your website? Also, sometimes it wouldn't hurt to give another CMP a go too, like Axeptio, OneTrust, Consent Studio or others.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I fixed this by ticking \"Category Consent\" under \"Configuration > Legal Specifications\"  This takes away ability for users to disable individual services but was the only way I could fix it... Users can still control cookie categories.",
                "author": "Karlos_shift",
                "score": 1
            },
            {
                "body": "It's weird because I installed it on two other clients websites the exact same way and it does find it...",
                "author": "LightTheFerkUp",
                "score": 1
            },
            {
                "body": "I fixed this by moving all _ga cookies to the 'Google Analytics 4' DPS from their database. This DPS seems to fire the correct signals for analytics_storage consent.",
                "author": "Greedy-Towel152",
                "score": 1
            },
            {
                "body": "Perhaps engage with Usercentrics support. I'd be interested to find out how responsive and good their support is.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Can you help me set it up please ? It sounds correct but I don't know the steps you take to fix the issue",
                "author": "Escrobaria1997",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754994807.0,
        "title": "Blocking Third-Party Cookies in iframes Before Consent",
        "author": "CountDirect5522",
        "id": "1mo53yw",
        "selftext": "I’m working on a website that has an iframe in it, and I’ve noticed some cookies are being set from a different domain inside that iframe. The problem is, I can’t figure out the script URL pattern for them.\n\nApparently, I need to block these cookies until the user gives consent, but without identifying the script pattern, I’m stuck.\n\nHas anyone dealt with this before? How do you block cross-domain iframe cookies before consent when the script URL isn’t obvious?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mo53yw/blocking_thirdparty_cookies_in_iframes_before/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I guess you can’t reliably stop a third-party inside an iframe from setting cookies & stuff unless you don’t load the iframe before consent. Parent-page scripts and CSP don’t reach into a cross-origin iframe - or am I wrong? If it loads, that server can send Set-Cookie in its response.\n\nIsn´t that the reason for two-click-solutions and placeholders? (that suck). Don’t set `src` until consent. Use `data-src` (or a stub `srcdoc`) and swap it in after opt-in.",
                "author": "philipp_roth",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746783103.0,
        "title": "All cookies denied with Usercentrics",
        "author": "Chateausi",
        "id": "1kiecr6",
        "selftext": "I’ve added the usercentrics cookiebanner with GTM and it’s showing on the website so it seems to be working. The problem is when I accept all cookies in the preview mode, I get a cookie consent update in GTM showing all cookies as ‘denied’. This is causing problems for tags that need cookie consent. \n\nAnyone else who experienced this and knows a solution? \n\nMany thanks!",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kiecr6/all_cookies_denied_with_usercentrics/",
        "num_comments": 13,
        "comments": [
            {
                "body": "You can use Tag Assistant to troubleshoot if Consent Mode V2 works correctly. If Consent Mode V2 is integrated correctly, the consent status must be \\`denied\\`  on page load until you click I Agree, after that the consent status is updated to \\`accepted\\`. The \\_ga cookie should appear in Dev Tools after you provide consent.",
                "author": "termsfeed",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you using their official google consent mode template for GTM?",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "Have you added any data processing services to your Usercentrics account yet? Are they categorised correctly?\n\nI think they only update the specific consent categories that you've applied to your DPS list. \n\nI've had a similar issue where I added a LinkedIn remarketing tag but it didn't classify it correctly. Accepting marketing cookies only granted analytics\\_storage consent when it should've also granted ad\\_storage consent.  The GTM events that relied on ad\\_storage consent therefore weren't firing at all.",
                "author": "alex_webdev",
                "score": 1
            },
            {
                "body": "What do you think about their pricing? Feel free to check out our more affordable alternative — Consent Studio!",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I'm having the same problem . First time doing something like this. It's the worst timing cuase i think they changed something recenetly. all the yt videos don't match the current ux. Something is wrong on their side :(",
                "author": "Natural-Book6847",
                "score": 1
            },
            {
                "body": "Yes, I am!",
                "author": "Chateausi",
                "score": 1
            },
            {
                "body": "Okay and what data processing services should be added?",
                "author": "Chateausi",
                "score": 1
            },
            {
                "body": "They changed the interface about 1 or 2 months ago so indeed there is barely anything to find online. I just switched to Cookiescript and it works flawlessly.",
                "author": "Chateausi",
                "score": 1
            },
            {
                "body": "Check if the site is loading multiple usercentrics scripts.",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "Add a bunch of DPS that comes under the \"Marketing\" category that requires \"Analytics\" or \"Advertising\" just to see if it works. You can create you own custom one if you need to like this [https://help.leadinfo.com/en/how-to-set-up-leadinfo-in-usercentrics](https://help.leadinfo.com/en/how-to-set-up-leadinfo-in-usercentrics)",
                "author": "alex_webdev",
                "score": 1
            },
            {
                "body": "u/Chateausi sounds like something might be misconfigured — but honestly, issues like this happen far too often, and it’s not always your fault. That’s exactly why we built [Cooki.fi](https://www.cooki.fi) — a lightweight, fairly priced alternative to the bloated CMPs out there. It’s currently free for early adopters, so you might want to give it a try",
                "author": "puk789",
                "score": -2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742293949.0,
        "title": "GTM creates third party cookie problem. How to solve?",
        "author": "Despite55",
        "id": "1je1ve0",
        "selftext": "I have a website with a near perfect Google Lighthouse score (all 4 areas>95).\n\nBut when I put the GTM code snippet on my site, my score on \"Best Practices\" immediately drops to 78. Due to problems with thrid-party cookies.\n\n  \nIs there away to prevent this problem? I have searched the web but have not found anything.",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1je1ve0/gtm_creates_third_party_cookie_problem_how_to/",
        "num_comments": 19,
        "comments": [
            {
                "body": "GTM doesn’t set third-party cookies. The problem must be one of your tags in the container.",
                "author": "nakfil",
                "score": 3
            },
            {
                "body": "I'm not sure this is true in all situations. If you implement a few different platforms e.g. Facebook, Reddit, GA4 and LinkedIn, if you hardcode all those scripts it will have the same or worse impact than implementing a single GTM script and then adding those platforms via tags within the GTM container.\n\nThere haven't been many measurements made on this topic, but there's a few years old article somewhere that explained this. Essentially GTM can be more efficient at initialising multiple platforms versus each platform script being hardcoded.\n\nGTM isn't perfect, but Google did a good job on the performance aspect.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "You're loading ad  code it looks like:\n\n[https://imgur.com/a/B6vCYhD](https://imgur.com/a/B6vCYhD)\n\nProbably that is the source.\n\nSide note your cookie banner allows cookies even if you opt out. Big no-no if you care about GDPR.",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Forget the Lighthouse score if you are using GTM. It will always decrease performance, the only thing you can do is accept it (or minimize js loading times by hosting the container on your own cdn). Lighthouse points you in a direction where you can improve your site but there is nothing to be done about GTM.",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "That is a good advice.",
                "author": "Despite55",
                "score": 1
            },
            {
                "body": "I did some testing:\n\nif only my GA4 conversion tag is switched on, I do not have third party cookies problems\n\nBut once I switch on my Google Tag (which I need to trach my website in GA4), I'm back into problems again.",
                "author": "Despite55",
                "score": 1
            },
            {
                "body": "This is dependent on features you have enabled in your Google Analytics account such as Google Signals. If you don't need GA features that rely on third-party cookies, you can disable them.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "Agreed. You can also avoid using Custom HTML tags or implement server-side tagging so only a single GA4 tag runs in you client-side container.",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "I am a simple GA4 user. I only want to track page visits and 1 specific type of conversion (that is implemented in GTM as a tag that fires when visiting a \"thank you\"-page.\n\n  \nI just switched off Google Signals: but the third party cookie problem persists.",
                "author": "Despite55",
                "score": 1
            },
            {
                "body": "This is nonsense. Sorry, but Google Signals is not the defining factor of whether GA4 uses cookies or not. If you try to operate GA4 without 3rd-party cookies, you essentially don't get data.\n\nIf your analytics requirement is basic pageview counts, you can find a platform that can operate without cookies, but GA4 is not it.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "What is the cookie name and domain?",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "OP was referring to cookies set in third-party context - `.google.com` domain in the cookie domain attribute. Google uses first-party for GA, not third-party.\n\nBut you are right, Google Signals doesn't use third-party cookies, I misremembered that. Other Google services still though do set third-party cookies.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "[www.deijsmannetjes.nl](http://www.deijsmannetjes.nl)\n\n  \nDe cookies that seem to be the problem all start with \\_\\_SECURE-3P",
                "author": "Despite55",
                "score": 1
            },
            {
                "body": "Maybe I’m not understanding, but literally none of this makes sense.\n\nSource: have been implementing consent management for 3 years.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "In Google PageSpeed Insights if my site is `domain.com` and a third-party script (via an iframe for example) sets a cookie that has a domain attribute of `anotherdomain.com` it can show a failure in the \"Avoids third-party cookies\" audit.\n\nOP was trying to fix that that error. The test won't fail if you if it's just a basic GA4 tag, as GA sets the domain attribute as `.domain.com`",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "I use Google Ads. So is it Google ads that lods a third party cookie?",
                "author": "Despite55",
                "score": 1
            },
            {
                "body": "Yes. You can use Google Ads without third-party cookies though as the fundamental functionality of serving an ad isn't dependent on third-party cookies, but things like remarketing depend on them still. \n\nI would not worry about this impact on your page speed score though; At the point you are with your performance improvements it becomes a vanity metric and has no impact on SEO or UX, and if you have a properly configured consent banner there is no compliance issues either.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "OK. Thanx for the advice.\n\n  \nI'll take a look at the settings of my GDPR plugin",
                "author": "Despite55",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748360036.0,
        "title": "How to categorize unknown cookies?",
        "author": "Pickle0138",
        "id": "1kwqbas",
        "selftext": "OneTrust scan found 2 unknown cookies on my website: “www.domain.com” and “.www.domain.com”\n\nHow do I categorize these? And how can I find where these are coming from?\n\nAny tags on my site is implemented through GTM. I’m thinking they’re from third party ads, but don’t have a way to confirm..",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kwqbas/how_to_categorize_unknown_cookies/",
        "num_comments": 10,
        "comments": [
            {
                "body": "What's the name and value of these cookies? Maybe google them?",
                "author": "amlozek",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Likely, those cookies come from third-party GTM tags. Use browser dev tools to find which scripts set them, or disable GTM tags one by one to identify the source. Then categorize based on their purpose (necessary, functional, marketing).",
                "author": "Shot-Bumblebee-1914",
                "score": 1
            },
            {
                "body": "Check in your browser with Chrome DevTools. \nYou load your site with the inspector open. Then you click on the “application” tab. In the left menu you will select \"cookies\" then the name of your site (eg: mywebsite.com). On the right you will have the list of all cookies present, related queries and content. \nYou can check like this. Keep us informed here.",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "If I’m using the example “www.domain.com” as my website, the cookie name from the OneTrust scan is “www.domain.com” and “.www.domain.com”",
                "author": "Pickle0138",
                "score": 1
            },
            {
                "body": "Hi, thanks! I did try this and unfortunately these don’t show when I visit my site. But they were found on the One Trust cookie scan, that’s why not sure how to identify where they’re from",
                "author": "Pickle0138",
                "score": 1
            },
            {
                "body": "Can you verify that these cookies exist when you visit your site? How do they impact the site if you delete them? Will they be recreated again?\n\nHonestly since they don't contain any identifying information you can just mark them as \"necessary\".",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "So if you don't know what to expect, don't waste your time on it any more than necessary! These are functional cookies and that's it",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "When I visit my site, I don’t see these cookies listed, but they were found from OneTrust scan..",
                "author": "Pickle0138",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749843109.0,
        "title": "Cookie Consent Mode Setup for GA4",
        "author": "eduardol-eleve",
        "id": "1laovxk",
        "selftext": "If I set up the consent correctly, denied for everything at the start and granted in case of cookie acceptance, is it enough for GA4 to handle all cookie consent properly without affecting attribution?  \nI want to implement this by setting up consent correctly and then configuring all required permissions in the \"Require additional consent for tag to fire\" setting.  \nThen, I trigger an initial page\\_view event within consent (restricted data, only for modeling) and fire it again in case of cookie acceptance (non-restricted data sent through the tag).\n\nShould I do the same for all Google Ads tags as well?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1laovxk/cookie_consent_mode_setup_for_ga4/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Not for Google tags, just other ones",
                "author": "jb_dot",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sounds like you're looking to do \"Advanced Consent Mode\" (V2) - which will send a cookieless ping before consent is granted and then will automatically update when consent is given. You don't need to fire the pageview event again, for GA4 it'll happen automatically. All Google tags are consent mode aware, so you don't need to add any additional consent. Doing this will allow better modeling of conversions/events.",
                "author": "jb_dot",
                "score": 1
            },
            {
                "body": "If you put anything in \"require additional consent\", you're implementing basic consent mode - no pings, no modeling. If you leave it with only \"built in consent checks\", then you have advanced consent mode - pings and modeling until the user has consented.\n\nIn neither scenario should you ever re-fire the google tag or page view event. It's going to mess your data up big time, because it's not meant to be used that way.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "u/eduardol-eleve \n\n>*I want to implement this by setting up consent correctly and then configuring all required permissions in the \"Require additional consent for tag to fire\" setting.* \n\n\\- Configuring 'Additional consent checks':\n\n**'Not set'** and **'No additional consent required'** \\-> both of these options mean the tag will fire regardless of the visitor's consent choice... if you/your CMP correctly sets the defaults to denied, Google tags (GA4, GAds, ...) will automatically adjust their data collection behaviour based on the consent status... This is what's known as **Advanced Consent Mode**, and only applies to Google tags. Keep in mind though that the legality of this setup is debatable despite Google promoting this as compliant. \n\nNon-Google tags (like Meta) don't support this behaviour - they can't adapt automatically to Google Consent Mode signals. For these, you need to select 'Require additional consent for tag to fire'.\n\n**'Require additional consent for tag to fire'** \\-> this option ensures the tag only fires when the required consent type has actually been granted, and is mandatory for non-Google tags. You can also apply it to Google tags - this approach is called **Basic Consent Mode**. While you may lose some data (since tags won’t fire without consent), this approach is far more safer from a compliance perspective.\n\n>Then, I trigger an initial page\\_view event within consent (restricted data, only for modeling) and fire it again in case of cookie acceptance (non-restricted data sent through the tag).\n\nDon't trigger the page\\_view twice manually (once for restricted data and once after consent).\n\nIn Advanced Consent Mode, when Google tags fire before consent (with a GCS value of G100), Google’s backend will automatically retroactively upgrade those hits to G111 (fully consented) once consent is granted - as long as you’ve properly implemented the update consent command. \n\nWhile many CMPs support sending this command, not all of them send it at the right time, which is crucial for this to work properly. So be sure to verify. If I can recommend one CMP that does this well, it's [Cooki.fi](https://www.cooki.fi)\n\nIn Basic Consent Mode, you should only trigger page\\_view after consent is granted. This typically means relying on your CMP’s “consent update” data layer event.\n\nFeel free to check out this [Consent Mode guide](https://docs.cooki.fi/concepts/google-consent-mode/) if you want a deeper dive.",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "As others said, no need to adjust firing based on additional, since it’s integrated in google tags, what you need to make sure is that no actions is made and sent to ga4 before user interacts banner. If user send data before and after, this will lead to not set or unassigned values. I also personally don’t like to send user_id as standart dimension but i prefer to let ga4 set it itself",
                "author": "Interesting-Plan-618",
                "score": 1
            },
            {
                "body": "So this \"Require additional consent for tag to fire\" won't be crucial?",
                "author": "eduardol-eleve",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748778751.0,
        "title": "Session Cookies & Google Consent Issue",
        "author": "ReadingMaleficent121",
        "id": "1l0n3sg",
        "selftext": "I have setup Cookiebot with GTM and it is working fine and updating the consent with no issues. However, when someone adds a product to their cart and it takes them to the cart page, the cart is then empty. It seems as though the consent initialisation is loading before the default consent or not remembering prior consent. Any help appreciated",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l0n3sg/session_cookies_google_consent_issue/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Do you mean that the user's actual shopping cart on the site is empty because the cookie that holds the items in it is being blocked on page load?\n\nI'm not sure about your region, but I would expect that a shopping cart cookie would be considered strictly necessary, and wouldn't require you to ask for permission or allow users to opt out. \n\nOr, even if you have to allow opt outs for it, could you set the consent default for functionality_storage to allowed, so it only gets blocked once consent settings are checked?\n\nIf you're talking about an ecommerce tracking issue, it's not possible to answer without seeing your site. Make sure that you've set everything up exactly as the documentation says.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you share your website url?",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "u/ReadingMaleficent121 have you checked all cookies detected by CookieBot? Verify the specific checkout/cart cookie hasn't been incorrectly classified as 'marketing' or 'analytics'.",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Perhaps the problem is resolved with another CMP. Try Axeptio, OneTrust, Consent Studio or others too, I'd say.",
                "author": "Yallone",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749210181.0,
        "title": "Microsoft Bing Stopped Tracking Conversions, UET or Cookie Issue?",
        "author": "Different-Goose-8367",
        "id": "1l4qaqp",
        "selftext": "I've been through a few posts on here and tried to apply the solutions but I cannot get my tracking issue fixed.\n\nBing used to track fine up until the end of 28th May, when tracking stopped working.  Events are still being recorded, but the data is not being passed back to the Bing dashboard. Going off what I've read, this is down to recent changes in the EEC now requiring ad\\_storage granted before allowing any tracking.\n\nI've used the UET tag helper in Chrome with no luck, so I reverted to using the dev tools.  \n\nOn page load asc=d, I click allow all cookies, a ping fires and asc=g.  I go to another page and asc=d appears.  It's like the cookie is not being read by Bing, only the click is registered, but then forgotten on the next page.\n\nCan anyone offer any insight??\n\n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l4qaqp/microsoft_bing_stopped_tracking_conversions_uet/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You have to send the positive consent signal on every page. If you have Google Consent Mode set up already, the native Microsoft UET tag does include an option to integrate with that.\n\nWhat trigger are you using for the tag?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "The trigger is set to all pages and the two experimental settings below are ticked;\n\nEnable consent updates from GTM \nInherit initial consent from GTM",
                "author": "Different-Goose-8367",
                "score": 1
            },
            {
                "body": "Do you have a CMP / Cookie Banner implemented (and which one, if so)?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I use Tag Concierge Consent Mode Banner in GTM",
                "author": "Different-Goose-8367",
                "score": 1
            },
            {
                "body": "It doesn’t work with al consent managers, for ours it didn’t. Follow this guide and you’ll be set up in a couple of minutes. You’ll just need a template to send Microsoft ads the consent signal! https://www.analyticsmania.com/post/microsoft-consent-mode/",
                "author": "Pretty-Appearance226",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746600135.0,
        "title": "How to verify your cookie consent is working",
        "author": "websecret_by",
        "id": "1kgqu1n",
        "selftext": "Got your cookie banner set up with Google Consent Mode? Now comes the critical step – verifying that it’s actually respecting user choices.\n\nHere’s how to ensure everything is working smoothly:\n\n1️⃣ Use Browser DevTools. Before and after consent, check cookies and requests to ensure compliance. Is Google Analytics firing only after consent? Are non-essential cookies blocked before? Make sure your users’ privacy is protected.\n\n2️⃣ Google Tag Assistant. This Chrome extension shows consent status changes in real time, so you can track whether analytics and ads are only enabled when users say \"yes\".\n\nAnd don’t forget about a detailed cookie policy that aligns with regional laws (GDPR, CCPA). \n\n📘 Learn more in [our full guide with examples](https://dev.family/blog/article/how-to-customize-the-consent-cookie-banner-to-comply-with-gdpr-google-consent-mode-and-country-specific-laws?utm_source=reddit&utm_medium=post&utm_campaign=dev-family&utm_content=how-to-customize-the-consent-cookie-banner-to-comply-with-gdpr-google-consent-mode-and-country-specific-laws) of cookie policy for EU and US",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kgqu1n/how_to_verify_your_cookie_consent_is_working/",
        "num_comments": 3,
        "comments": [
            {
                "body": "The irony of the *absolute state* of the consent management on the site you linked!",
                "author": "DigitalStefan",
                "score": 5
            },
            {
                "body": "There are errors in the article regarding the descriptions for the différents consent types.",
                "author": "Dam_",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738675905.0,
        "title": "OneTrust x GTM: Trigger blocked Cookies NOT firing in US after consent",
        "author": "Mysterious_Swan_9941",
        "id": "1ihhp91",
        "selftext": "The issue I am trying to solve is the first page that user lands on, and that user clicks accept all cookies. In a ideal world everything that was blocked before now fires, i am not able to come up with a efficient solution. \\[Mainly because the accept all cookies event occurs BEFORE the consent update event\\]\n\n\\- LOSS: Metadata, source, referall, UTM tags, Marketing tags etc.\n\nWhat are the most efficient ways you guys have deployed to trigger/fire the blocked cookies once the user clicks \"accept all cookies\".  The OneTrust support team main solution seems to be that you create specific triggers for your C0002, C0003, C0004, C0005. \\[This does not seem very optimal and requires maintenance\\]\n\nAlso have you guys had issues with the Autoblocker? (blocking out product images in specific)",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ihhp91/onetrust_x_gtm_trigger_blocked_cookies_not_firing/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Onetrust documentation used to be worse, but I am surprised they are still recommending adding C0003, C0004 etc checks into the firing triggers. You're right, it's absolutely not the best way.\n\nIf you want to use \"old school\" (non Google Consent Mode) consent control in GTM, the absolute best way to do this is by creating a Custom Event trigger with a regex match against \".\\*\" (i.e., all events) and a condition that looks for the presence of e.g. C0004 and if it's not there, the trigger will fire. Use this as an exception trigger added to every tag that requires C0004 consent.\n\nThere's a community gallery custom variable by \"taneli-salonen1\" that is possibly the best way to retrieve the C000X values because it looks at both the data layer and the relevant cookie. Super reliable.\n\nThus adding consent requirements to a tag is just adding the relevant exception trigger. Even works for tags that need both analytics and marketing consent, just add both exception triggers.\n\n  \nWhere you have existing tags firing on All Pages, DOM Ready, Initialization etc., you will have to move those to a Custom Event trigger of OneTrustGroupsUpdated. Doing this is a matter of editing the trigger, clicking on the trigger type and changing it to Custom Event. This way you keep any existing additional trigger conditions. Saves you having to create a new trigger and manually recreating the conditions, which is long-winded and prone to error.\n\nAll that being said, it's *so* much easier to implement Google Consent Mode!",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "Make sure you respond to the consent updated event. Even OneTrust themselves forgets to; I fixed this for a client who had them implement everything in GTM for them, and THEY forgot to handle the consent updated event. Then all your tags trigger based on normal trigger conditions + consent updated (use trigger groups). If that all makes sense.",
                "author": "hiscapness",
                "score": 2
            },
            {
                "body": "I have run out of time to work on this client but will try to test and see, thankyou for your suggestions.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you have consent update event? \n\na) you can use trigger groups -> consent update + event name = trigger for event\n\nb) you can use consent update event and then use consent mode settings (e.g. if analytics service add analytics\\_storage as condition), and if user accepts analytics cookies, consent update event happens and recognizes analytics\\_storage is allowed -> fire tag",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Several things here do not make sense.\n\n\n\"the accept all cookies event occurs BEFORE the consent update event\" - Correct, the visitor must make the choice to accept or reject before that update is ran. How could you know what to update before the choosing?\n\n\n\"firing in the US\" and \"everything that was blocked before now fires\" - Why is your initial state blocked? That is EU / GDPR - not US. US is opted in (not blocked) until explicitly opted out. \n\n\n\"OneTrust support team main solution seems to be that you create specific triggers\" - This has not been the correct/ modern way to configure OneTrust since October 2023. Use the GCM integration technique that OneTrust publishes on their web site. Following the instructions for using the tag template integrated with Google Consent Mode. On the individual tags set the consent settings. All CMPs (CookieYes, CookieBot, CookieHub, etc) work nearly identical to this.\n\n\n\"issues with the Autoblocker\" - The technique that OneTrust details on their web site does not employ the obsolete autoblocker.\n\n\n\"trigger/fire the blocked cookies\" - You do not trigger the cookies. You trigger the JavaScript tags. The cookies are just small tools that the tags use to 'remember' things - like PostIt notes. The tags are 'the thing'. All modern Consent Management Platforms (CMPs - the C stands for Consent not Cookie) including OneTrust control the firing of JavaScript tags and also the older image pixel tag technique.\n\n\n\"UTM tags\" - UTMs are not tags. UTMs are initial site landing URL query string parameters. Specifically URL query string parameters that trace their use back decades to the Urchin Tracking Module web analytics product offering.\n\nhttps://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7?language=en_US",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I think I avoided this solution because Consent update event occurs multiple times per page, and if a user goes to security center has another consent update, and you cant use fire once per page because it counts blocked tags as firing.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "Wait I think I might have missed something here, by trigger groups do you mean, I can dictate something to not cause a double firing",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "I appreciate the time you took for the feedback, you make some great points.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "All my clients are pushing for complacency with Opt-in solutions for US, I imagine they want to be all Opt-in compliant before it becomes law country wide",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "Opt in until explicitly opted out is the current state of legislation in the US. Go ahead and implement such a solution now. In the OneTrust administration console configure your geolocation rule accordingly for the pop up widget and privacy panel. Test for correctness using the &otreset= &otpreview= and &otgeo= URL query parameters. www.bankrate.com is a good example of what you want to achieve.",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741309838.0,
        "title": "How to create a persistent session cookie with GTM?",
        "author": "KingStonk69",
        "id": "1j5bjfn",
        "selftext": "I want to create a session cookie to store the origin source of the visit.\n\n**Quick project overview:**\n\nBasically, the value of the cookie is stored until a user fill out a form. \n\nWhen submitted, the cookie value is passed into an hidden field and sent with the form data to an external CRM.\n\n\n\n**Main Issue:**\n\nThe value of my custom cookie is not persistent throughout the visitor session.\n\nOn the destination page, the cookie catches the referre information: [https://i.imgur.com/Eblh9QI.png](https://i.imgur.com/Eblh9QI.png)\n\nBut when browsing the site, the cookie value changes every page load: [https://i.imgur.com/bqwcQsp.png](https://i.imgur.com/bqwcQsp.png)  \n\n\n  \n**What I tried to implement:**\n\nHere are the steps I created...\n\n**Step 1:** Custom Code to catch the referrer of the visitor\n\n    <script>\n    function getSourceName() {\n    \n      var cookieName = 'source_name';\n      var params = new URLSearchParams(window.location.search);\n      var sourceName = '';\n    \n      if (params.has('utm_source')) {\n        sourceName = params.get('utm_source');\n      } else {    var otherParams = ['gclid', 'fbclid', 'fbp', 'li_fat_id'];\n        for (var i = 0; i < otherParams.length; i++) {\n          if (params.has(otherParams[i])) {\n            sourceName = otherParams[i];\n            break;\n          }\n        }\n      }\n    \n      if (!sourceName && document.referrer) {\n        var parser = document.createElement('a');\n        parser.href = document.referrer;\n        sourceName = parser.hostname.replace(/^www\\./, '');\n      }\n    \n      return sourceName;\n    }\n    </script>\n\nThe goal is to check it the referrer is given through an url parameter or else, get the referrer domain name.\n\n\n\n**Step 2:** Check if the cookie already exists\n\n    function checkCookieSourceName() {\n    function cookieExists(name) {\n      var nameEQ = name + \"=\";\n      var cookies = document.cookie.split(';');\n      for (var i = 0; i < cookies.length; i++) {\n        var cookie = cookies[i].trim();\n        if (cookie.indexOf(nameEQ) === 0) {\n          return true;\n        }\n      }\n      return false;\n    }\n    if (cookieExists('source_name_2')) {\n      return \"true\";\n    } else {\n      return \"false\";\n    }\n    }\n\n  \n**Step 3:** If the cookie does not exist, then create the document.cookie (template from [analyticsmania.com](https://www.analyticsmania.com/post/cookies-with-google-tag-manager/))\n\n    <script>\n    (function(){\n        var cookieName = \"source_name_2\"; // Name of your cookie\n        var cookieValue = {{XTrack - Return Source Name 3}}; // Value of your cookie\n        var expirationTime = 2592000; // One month in seconds\n        expirationTime = expirationTime * 1000; // Converts expiration time to milliseconds\n        var date = new Date();\n        var dateTimeNow = date.getTime();\n    \n        date.setTime(dateTimeNow + expirationTime); // Sets expiration time (Time now + one month)\n        var date = date.toUTCString(); // Converts milliseconds to UTC time string\n    \n        // Extract base domain\n        var domainParts = location.hostname.split('.');\n        var baseDomain = domainParts.slice(-2).join('.'); // Get the last two parts of the domain\n    \n        document.cookie = cookieName + \"=\" + cookieValue + \"; SameSite=None; Secure; expires=\" + date + \"; path=/; domain=\" + baseDomain; // Sets cookie for all subdomains\n    })();\n    </script>\n\n  \nI also made a simpler script with the trigger condition that the function 'checkCookieSourceName' returns 'false'... but this is not setting the cookie on the page!\n\n    <script>\n    function setCookieSourceName() {\n         document.cookie = \"source_name=source_name_2; path=/\";\n      }\n    </script>\n\n  \n**Step 4:** I also intend to create a dataLayer retrieving the cookie values so its easier to fill out the hidden form fields.\n\nMaybe my setup is too complex for what I intend to do...  \n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j5bjfn/how_to_create_a_persistent_session_cookie_with_gtm/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Why not use session storage?",
                "author": "brekelbende",
                "score": 3
            },
            {
                "body": "Sounds like you want to do something like this.\n\n\nhttps://drewspen.weebly.com/blog/using-gtm-to-pass-your-utms-into-your-crm",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "I recently used this guide, which worked for me [https://measureschool.com/google-tag-manager-cookie/](https://measureschool.com/google-tag-manager-cookie/)",
                "author": "WenMoon-420",
                "score": 2
            },
            {
                "body": "And to get the initial document referral and landing page try this.\n\n\nhttps://drewspen.weebly.com/blog/sending-the-source-and-landing-page-to-a-crm",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "Thanks for the references… it will definitely help me.",
                "author": "KingStonk69",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I did with cookies on another site and it was working fine.\nBut you right, it might be more stable with session storage.",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "Thanks",
                "author": "KingStonk69",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1733741337.0,
        "title": "Google Consent Mode V2 - Which cookies should grant which consent",
        "author": "Mitsuoka123",
        "id": "1ha72y8",
        "selftext": "We have been struggling for quite some time with GCMv2 and Google Enhanced Conversions. \n\nWe have been using one plugin on site and I don't know if it is working right.   \nWhen you accept analytics cookies, it grants all permissions:\n\n|Type|On-page default|On-page update|\n|:-|:-|:-|\n|ad\\_storage|Denied|Granted|\n|analytics\\_storage|Denied|Granted|\n|ad\\_user\\_data|Denied|Granted|\n|ad\\_personalization|Denied|Granted|\n|functionality\\_storage|Denied|Granted|\n|security\\_storage|Denied|Granted|\n|personalization\\_storage|Denied|Granted|\n\n\n\nWhen you accept advertising and tracking cookies, but deny analytics cookies, all the consents are denied.\n\n|Type|On-page default|On-page update|\n|:-|:-|:-|\n|ad\\_storage|Denied|Denied|\n|analytics\\_storage|Denied|Denied|\n|ad\\_user\\_data|Denied|Denied|\n|ad\\_personalization|Denied|Denied|\n|functionality\\_storage|Denied|Denied|\n|security\\_storage|Denied|Denied|\n|personalization\\_storage|Denied|Denied|\n\nWhat should be the good setup, is there any difference in Google Tag Manager for these cookies, or it affects some other things?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ha72y8/google_consent_mode_v2_which_cookies_should_grant/",
        "num_comments": 15,
        "comments": [
            {
                "body": "Thanks, in general that answers my question. The site is oldy and uses Joomla that is waiting to be replaced, and we are fighting with plugin for some time now and we cannot get it to do different consents for different cookies...\n\nThe site is [Rustical Travel](http://www.rusticaltravel.com)",
                "author": "Mitsuoka123",
                "score": 2
            },
            {
                "body": "Thanks! Yes, we know that the banner is awful, but the thing is that developer is outsourced and everything complicates even more. \n\nI'll look into these and see how that goes with Joomla... But yeah, just wanted to confirm that something is not right and how should it really be...",
                "author": "Mitsuoka123",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It is now working right.\n\nIf you accept analytics cookies, how can that grant advertising cookies?",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Generally speaking, the configuration that seems to be acceptable in most instances would look like this:-\n\nad\\_storage = Marketing consent  \nanalytics\\_storage = Analytics consent (measurement)  \nad\\_user\\_data = Marketing consent  \nad\\_personalization = Marketing consent  \nfunctionality\\_storage = Not mapped to any consent  \nsecurity\\_storage = Always granted  \npersonalization\\_storage = No mapped to any consent\n\nIf you have tags that provide site functionality or personalization, then I would consider mapping those consent categories as appropriate, but most of the time these types of things are not implemented in GTM.\n\nConsent plugins are, generally speaking, utterly dreadful. If you share the URL with me either here or in a message I can have a look in a bit more detail.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Definitely something is not right. Which CMS are you using?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "I recommend using a CMP through Google Tag Manager. Suggestions are Cookiebot, Consent Studio and CookieYes.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I don't understand, then it is not working right if it grants all consents when you accept analytics cookies?\n\nWhat should be granted with analytics and what with advertising cookies?",
                "author": "Mitsuoka123",
                "score": 1
            },
            {
                "body": "It's Joomla that's waiting to be replaced.",
                "author": "Mitsuoka123",
                "score": 1
            },
            {
                "body": "I cannot find where in CMP I could request consent for these?  \n     \nfunctionality_storage\t  \nsecurity_storage\t  \npersonalization_storage",
                "author": "bytepursuits",
                "score": 1
            },
            {
                "body": "That depends on what you and your data officer decide...\n\nYou can have separate consent for each category or you can bulk them (e.g. advertising consent is good for advertising, personalization and user data), analytics is good for analytics, functional is good for functional and is always granted etc.).",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Thanks for sharing. Yes... that's a pretty bad implementation!\n\nHonestly your major problem is the banner is so tiny and easy to ignore. Most users on desktop will probably just navigate the site without ever granting consent.\n\nAlthough of course there is another issue where consent is done \"old school\" by reloading the current page when the user changes their consent setting. That used to be the workaround for how to track users on the landing page when they granted consent.\n\nI haven't checked, but if your marketing and analytics data collection is all handled within GTM, you could solve your problems quickly by removing the plugin currently providing that cookie banner and instead implementing e.g. CookieBot, OneTrust, Enzuzo or CookieYes via their officially supported GTM tag template.\n\nAll 4 will set up the Consent Mode default and will handle the update. Generally they all have good documentation as well, but there are a number of regulars in this subreddit who can help with a best practise implementation.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Uhm, I'm not sure that I really understand your question? In Consent Studio, these are covered by the \"Functional\" category.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "> Consent Studio  \n\nwhat's a Consent Studio? oh the CMP. yes - that's what I would expect from CMP - but google built-in CMP doesn't have that option it seems.",
                "author": "bytepursuits",
                "score": 1
            },
            {
                "body": "Thanks for saying thanks! It's so nice to see Redditors being grateful :)",
                "author": "TheGratitudeBot",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738071496.0,
        "title": "How Can We Track a User's Actual First Source When They Switch from Snapchat to Safari and we lost its client_id or cookie id ?",
        "author": "ecoKhaled",
        "id": "1ic1qkf",
        "selftext": "Hello, Reddit Folks ! 👋\n\nI’m currently working on analyzing user behavior for a project and ran into an interesting challenge:\n\nWe have a situation where a user starts their journey by clicking on a Snapchat ad (opens in Snapchat's in-app browser) and then later continues browsing the site using Safari (or another external browser in same device).\n\nWe’re trying to determine if there’s a way to accurately track and identify the same user across these two browsers. The goal is to attribute the user's journey to their **first source** (in this case, Snapchat).\n\n1. Have you dealt with a similar challenge?\n2. Is it even possible to know the **true first source** in this scenario without requiring user input (like a login)?\n\nThanks for your insights! 🙏",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ic1qkf/how_can_we_track_a_users_actual_first_source_when/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Nope its not possible unless you want to use third party plugins that will do this (in violation of a number of privacy policies!).   \n  \nHere are a couple of ways I can think of that I would use which could solve this  \n1. Use a tracking tool that captures IP Address. If the device is the Same, then the IP address most likely will be the same. GA4 does not do this. Motomo analytics does this and should by default identify the user as the same between both or at least you should be able to identify based on the IP address + Device data.  \n2. In GA you can try to create a similar fingerprint but without the IP address -> using the Device + location + time matching - this is going to be hard with GA4 web but very much possible with BigQuery (accuracy could be a little off!)\n\nDM me if you have any further questions on this.",
                "author": "ds_frm_timbuktu",
                "score": 3
            },
            {
                "body": "Lol, it won't help him as everything in browser (ie. safari) goes through web based gtm. Even server ones. Only in app you can use measurement protocol or sth (idk i stay away from apps tracking and my knowledge is bit outdated) to push data directly to server or ga4. And ip address - well... as far as i remember safari allows you to hide it. The only, kinda gdpr-illegal-thing is to push some kind of obfuscated (like base64) user\\_id / cookie\\_id or gclid or sth) either in outbound link parameter which won't look like gclid/cross domain tracking or utm parameter so only thing it comes in my mind it is.",
                "author": "patrykc",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can't you append a unique identifier to the URL when the user lands on your site via Snapchat? or maybe UTMs at the first touchpoint, in this case Snapchat.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "You can capture IP adress, but this will not be a perfect solution as IP adresses can change",
                "author": "Maleficent_Nail_572",
                "score": 1
            },
            {
                "body": "yes im using server. side but my situation is related with tracking cross devices & browsers \n\nwhen user start session in snap ads and after 4 days see another ad in facebook and add to cart for example \n\nhow can i identify this same person ?",
                "author": "ecoKhaled",
                "score": 1
            },
            {
                "body": "Amen, not sure why people believe server side tracking suddenly solves everything. Plenty of flaws in it also.",
                "author": "goodgoaj",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723633588.0,
        "title": "GA Cookie not deleted after consent is withdrawn in Cookiebot",
        "author": "Denalovicz",
        "id": "1erysgz",
        "selftext": "I've recently started using GTM and have integrated the Google Tag on my website. For consent management, I use Cookiebot. My Google Ads and Analytics accounts are linked with GTM/Google Tag. The default consent state I've set in the Cookiebot CMP Tag is set to \"denied\" for all options. When I visit my website for the first time, no cookies are set. If I select \"accept all\" in the cookie banner, some cookies are set, which are automatically deleted when I withdraw consent. However, one cookie is not deleted and remains stored. The cookie starts with *ga* and has the target ID of the Analytics account attached. Does anyone know why this cookie isn't being deleted and how to fix it? I'm happy to provide more information if needed. Thanks!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1erysgz/ga_cookie_not_deleted_after_consent_is_withdrawn/",
        "num_comments": 23,
        "comments": [
            {
                "body": "I live in France and am a legal expert (GDPR) for my company; there is no need for cookies to be deleted when consent is withdrawn, very few tools do this. The law requires that tools no longer use them, so that means that as long as your Google analytics returns to denied and is no longer triggered, it's OK. On the other hand, the advanced consent mode v2 (hit denied and triggered even when no consent is given) is legally \"restricted\" to date because the legislative organisms have said nothing about it. But consent mode v2 standard is rgpd friendly.\nLet's put that aside: Cookiebot does have the ability to delete cookies, it's pretty top-notch in this respect, and it's one of the only ones to do so (which proves that if the others don't do it, it's because it's not compulsory).\n As far as the ga cookie not being deleted is concerned, it's probably only because cookiebot can't delete it if you're connected to a Google account on your browser (especially if it's Google Chrome with the Google account linked to the browser). A ga cookie remains persistent on all the sites you visit. Try using private browsing, it should no longer be there ;)\nMore info :\nhttps://complianz.io/withdrawing-consent/",
                "author": "Fun_Ad_2011",
                "score": 5
            },
            {
                "body": "I would assume this is caused by the user_engagement event that triggers when you leave the page. Once you revoke consent the mentioned cookie is probably deleted with all the others but since your GA script has already loaded it sends an automatic user_engagement event when the page is unloading. Since there is no ga-cookie at that point a new one is set.\n\n\n\n\nThis is tricky to get around unless you are using a server-side implementation as you would have to manually delete the cookie as proposed by /u/DigitalStefan",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Can you show where GDPR or any law mandates removal of cookies in this scenario?\n\nTo my knowledge, GDPR does not mandate cookie deletion if a user grants consent and then revokes it. Any cookies that are left are essentially just artifacts and no longer are used as the associated tags in GTM are not firing them or in the case of GA4 only using cookieless pings.\n\nI think you're overthinking this and I would not bother. Other CMPs I've seen behave this exact way, like OneTrust. If this was a requirement, the CMPs would handle it or provide guidance for it.",
                "author": "nakfil",
                "score": 3
            },
            {
                "body": "I’m not familiar with German specific laws, but GDPR does not require cookies to be actively deleted when a user withdraws consent.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "The solution would likely be to fire a Custom HTML tag containing a script to manually delete the cookie.\n\nA little of of JavaScript to identify any cookie name beginning _ga and setting it to expire at the date and time of the UNIX epoch (1 second past midnight GMT, Thursday 1st January 1970)",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Please can you quote the specific regulation mandating the deletion of cookies?",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "I live in Germany and run the website under the GDPR/DSGVO compliance. When a user withdraws all consent every tracking cookie has to be deleted, I guess.",
                "author": "Denalovicz",
                "score": 2
            },
            {
                "body": "looks like some CMPs have introduced tools to help remove cookies actually after consent is withdrawn:\n\n  \n[https://complianz.io/introducing-the-cookieshredder/](https://complianz.io/introducing-the-cookieshredder/)\n\nProbably to address your exact concern",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Why would it need to be deleted?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Ok, will try! Thanks.",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Also on an unrelated not, try to steer away from CookieBot, they're one of the worst in the business.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Hello! For the best support, reach out directly to our team at [support@cookiebot.com](). We’d love to help and get everything running smoothly!",
                "author": "UsercentricsOfficial",
                "score": 1
            },
            {
                "body": "Have you received any guidance that cookies must be deleted once consent is withdrawn? In most implementation for a cookie consent solution or CMP solution once the consent is withdrawn, the third-party vendor script is no longer loaded and any previously set cookies cannot be used by such script (since it's no longer loaded).\n\nIf it's a third-party domain cookie, you may not be able delete third-party domain cookies. See https://developer.mozilla.org/en-US/docs/Web/Privacy/Third-party\\_cookies , https://stackoverflow.com/questions/52775617/how-to-delete-third-party-domain-cookies-from-gdpr-compliant-website",
                "author": "termsfeed",
                "score": 1
            },
            {
                "body": "I‘m definitely overthinking this, since I don’t wanna be fined for unallowed user tracking. It’s probably the pings because the tags sending g100 values when the consent has been withdrawn. Still, I read that the pings don’t need a cookie to send info about events. Other than that I find it weird that all cookies are being deleted automatically except for this one. The GDPR says, that the removal of cookies must be as easy as accepting them so I assumed they have to be deleted automatically as well. I implemented the GA script directly into my HTML and not via the GTM.",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Could you please elaborate on this? We are web developers from the Netherlands that have built their own CMP and we want to steer clear of any pitfall, so I figured it would be interesting to pick your brain on this.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "huh, interesting. Is there a reason you're not deploying GA through GTM? That might be part of your issue, but I'm not sure.\n\nAlso to clarify GDPR says the *withdrawal of consent* should be as easy as giving consent, not the removal of cookies, which is an important distinction here. If a script is blocked from firing by a CMP user data can not be processed / used regardless if there is a cookie set.  It's a useless artifact.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "They have horrible business practices. They count pages multiple times. Every tag or category a post is in counts as a new page for them. Like tag1/page1, tag2/page1, category1/page1 is the same page counted 3 times.\nThey count pages that are not public or published.\n\nWhen you cancel the subscription after they bill more on this overcounting, they completely cut access to the account even though they already took money for an entire month.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Thanks for the link. I forgot to mention that the GA tracking is implemented in the Google Tag which I put into my website. I found some articles about a special GA configuration tag but couldn’t find it in the tag list.",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Yes, they have to be automatically deleted. All cookies are being deleted automatically except for the _ga_ cookie. Do you have a solution for this?",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Ah. I see. Are you looking for an alternative?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "It GTM if you just use the \"Google Tag\" and fire it on Initialization trigger that is the \"config.\" It automatically fires a `page_view` event as well. And, it automatically inherits the consent mode categories like `analytics_storage` etc so it should work well with CookieYes and your existing configuration right out-of-the-box.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "If you have Consent Mode V2 enabled GA will send an anonymous ping. It's GDPR compliant as far as I know.\n\nTry using Consent Mode V1 and see if the cookie still persists.\n\nAlthough cookies shouldn't be deleted, it's enough if the tags don't load when consent is denied.",
                "author": "zenith66",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740442621.0,
        "title": "Webflow & Cookiehub new to tagmanger: JavaScript CSP Error Blocking Consent Tracking after user consents to cookies.",
        "author": "daveinarmstrong",
        "id": "1ixhi10",
        "selftext": "Has anyone else encountered problems with consent mode when using Cookiehub with Webflow? I've been battling this for a month, trying to get form tracking working for Google Search Ads, but I'm running into a frustrating error.\n\nI'm seeing this Content Security Policy (CSP) violation in my browser console:\n\n**Refused to run the JavaScript URL because it violates the following Content Security Policy directive:** \"script-src 'nonce-MYNONCE CODE' 'unsafe-eval'\". Either the 'unsafe-inline' keyword, a hash ('sha256-...'), or a nonce ('nonce-...') is required to enable inline execution. Note that hashes do not apply to event handlers, style attributes and javascript: navigations unless the 'unsafe-hashes' keyword is present.\n\nAdditionally, when I try to check the consent status by typing tag('consent', 'get'); into the console, I get this error:\n\nVM101:1 Uncaught ReferenceError: tag is not defined at <anonymous>:1:1\n\nIt seems like Cookiehub or webflow isn't properly registering consent, and the CSP is blocking necessary scripts. I'm looking for any solutions or workarounds. Has anyone else experienced these issues, and if so, how did you resolve them?\"\n\n**If i manually set all consent modes to granted in the cookiehub tag, then I get all granted in the console message in tag assistant for cookie hub:** data = {\"ad\\_user\\_data\\_default\":\"granted\",\"wait\\_for\\_update\":\"1000\",\"linker\":\"\",\"code\":\"631bfe6e\",\"iab\\_tcf\":false,\"consent\\_mode\":true,\"production\":true,\"ad\\_personalization\\_default\":\"granted\",\"security\\_storage\\_default\":\"granted\",\"show\\_ui\":true,\"url\\_passthrough\":false,\"iab\\_gpp\":false,\"ad\\_storage\\_default\":\"granted\",\"analytics\\_storage\\_default\":\"granted\",\"functional\\_storage\\_default\":\"granted\",\"expiry\\_days\":\"365\",\"render\\_position\":\"\",\"gtmOnSuccess\":\"Function\",\"gtmOnFailure\":\"Function\",\"gtmTagId\":14,\"gtmEventId\":1}\n\nIn tag assistant, the container summary console message shows denied multiple times after the user consenting to cookies and leaving the coockiehub tag consent mode to default (dinied for everything but Necessary (security\\_storage) and Preferences (functionality\\_storage and personalization\\_storage) ): here is the log message for this mode:\n\n    data = {\"ad_user_data_default\":\"denied\",\"wait_for_update\":\"1000\",\"linker\":\"\",\"code\":\"631bfe6e\",\"iab_tcf\":false,\"consent_mode\":true,\"production\":true,\"ad_personalization_default\":\"denied\",\"security_storage_default\":\"granted\",\"show_ui\":true,\"url_passthrough\":false,\"iab_gpp\":false,\"ad_storage_default\":\"denied\",\"analytics_storage_default\":\"denied\",\"functional_storage_default\":\"granted\",\"expiry_days\":\"365\",\"render_position\":\"\",\"gtmOnSuccess\":\"Function\",\"gtmOnFailure\":\"Function\",\"gtmTagId\":14,\"gtmEventId\":1}",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ixhi10/webflow_cookiehub_new_to_tagmanger_javascript_csp/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Thanks i'll give this a try.\n\nA Webflow upgrade to enterprise is required to access the Webflow CSP configuration, this is beyond my current budget.",
                "author": "daveinarmstrong",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Hi! At Consent Studio we’re having an MVP going where Webflow users can design/build their own banners while still leveraging our APIs and SDK. Would you like to try it out? Let me know!",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Yes. I'm sidetracked with other issues now. But will try this out in a few day.",
                "author": "daveinarmstrong",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723893830.0,
        "title": "Consent Mode on Shopify via GTM & CookieBot",
        "author": "puk789",
        "id": "1eufej6",
        "selftext": "I'm trying to set up conversion tracking (sending ecommerce data to the data layer via Customer Events custom pixel, and retrieving and sending it to the respective vendors like GA4 through GTM) and Consent Mode (via CookieBot) on Shopify.\n\n\n\nHowever, I'm struggling with passing the consent data from the top JavaScript context (since CookieBot is installed via theme.liquid file) to the Sandbox context (that's where all the conversion events are happening via Customer Events).\n\n\n\nI've tried using postMessageAPI for the theme.liquid to send consent data to sandbox context, and addEventListener() method in Customer Events to listen for those messages. However, I'm getting the following warning in console:\n\nIn a sandboxed environment, addEventListener may not behave as expected.\n\nDue to which this is not working.\n\nDoes anybody know of a workaround?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1eufej6/consent_mode_on_shopify_via_gtm_cookiebot/",
        "num_comments": 20,
        "comments": [
            {
                "body": "Easiest route will be to just deploy cookiebot via gtm and set up gtm via the customer event as pixel and handle everything in gtm.",
                "author": "dowmi12",
                "score": 4
            },
            {
                "body": "I've reached out, but not heard back :')",
                "author": "Interesting-Rub-1896",
                "score": 3
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Installing Cookiebot directly in the source code is considered best practice. The main reason is auto cookie blocking on your non GTM scripts that deploy cookies that need to blocked by consent (you cannot have this feature if you deploy it via GTM). Otherwise devs will manually have to mark these up and if there are a lot and new ones constantly being installed this makes their lives a lot easier. There are other positives of hardcoding cookiebot and inparticular if you do it correctly such as quicker deployment of consent\\_update dataLayer calls (also using consent initialization slows down tracking a bit as other tags have to wait for cookiebot to fully be deployed via your GTM) which will guarantee more robust & accurate tracking.",
                "author": "dowmi12",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hello! For the best support, reach out directly to our team at [support@cookiebot.com](). We’d love to help and get everything running smoothly!",
                "author": "UsercentricsOfficial",
                "score": 1
            },
            {
                "body": "I'm dumbfounded why people would want to do it outside GTM in this day and age. I'm guessing OP is, was or has spoken to a developer first, as their understanding is generally stuck in 2005.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "If I install CookieBot via GTM template, the banner doesn't show up",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Hi, I have done everything that was in the guide but the banner doesn't show up. I can't see it in preview mode either. Can u help?",
                "author": "Hiddeboy3000",
                "score": 1
            },
            {
                "body": "Did you add the URL of your website in Cookiebot? This even happens to me sometimes. Try checking if everything is correct.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Did you get it to work? I'm about to do this today aswell",
                "author": "classified18",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "u/Interesting-Rub-1896  finding a CMP with responsive and technical support feels like searching for a needle in a haystack... that's exactly why we built [Cookifi](https://www.cooki.fi/), the first no BS freelancer/agency-focused CMP, which works seamlessly with Shopify and custom pixels... it's currently free for early adopters... (and here's a comprehensive Shopify tutorial with ready-to-use code and GTM templates: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm) )",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Good point, we've switched the CookieBot from GTM to hard coding because Klaviyo placing its cookie from the Shopify-Klaviyo integration automatically.\n\nThe order is:\n\n1. gtag commands with defaults  \n2. GTM  \n3. CookieBot script with auto-blocking feature\n\nWe are struggling now to integrate CookieBot with the Shopify Customer Privacy API what's described [here](https://support.cookiebot.com/hc/en-us/articles/360006184253-Shopify-installation) in steps 3 and 6. But `window.Shopify.customerPrivacy` is not loading current visitor consent (i.e. gtag default consent we set up) on the landing page, only on subsequent pages after the user's choice it is capturing correct values.\n\nHowever, when installing CookieBot in GTM current visitor consent is loaded successfully even on the first page.\n\nHave you encountered such a behaviour if integrated Customer Privacy API?",
                "author": "WorldlyOpposite2842",
                "score": 1
            },
            {
                "body": "I have, but it's been a pain in the ass (took me few days)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "It'll be really useful if you could explain it in the comments# unless you're trying to sell something, we'd all appreciate it please",
                "author": "TheAlchemist2",
                "score": 1
            },
            {
                "body": "u/WorldlyOpposite2842  you may want to give this tutorial a read: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm) ... I've gone through the pain of figuring this out",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Allright, I've just setup everything aswell, cookiebot via gtm template. setup cookiebot account and everything, \"google & youtube\" app configured in shopify, but I cant get the banner showing up.. Do I have to enable/disable cookie banner in shopify \"customer privacy\" settings or is that just the standalone thing? Did you setup GTM through code, or through google & youtube app in shopify?",
                "author": "classified18",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736357649.0,
        "title": "Why conversion linker when gclid data is already stored in cookies?",
        "author": "Live_Armadillo_7756",
        "id": "1hwpt78",
        "selftext": "I have two websites: one with conversion linker in GTM and one without conversion linker. When I visit both websites and attach /?gclid=testabc123 to the links, I can see \"testabc123\" stored in the cookies. So why do I need the conversion linker? I'm Just trying to understand.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hwpt78/why_conversion_linker_when_gclid_data_is_already/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Let's say that the only place you have a Google Ads conversion tag firing is the order confirmation page. Without the linker tag running on all pages there would be no gclid cookie for attribution.\n\n\n\n\nSince the introduction of the \"new\" Google Tag, the linker has been integrated into gtag.js. This means that as long as you are loading the Google Tag on all pages the linker tag is not strictly necessary (as your tests have shown). With that said, the linker tag offers additional options for linker behavior.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "RemindMe! 2 days",
                "author": "MariusGMG",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Conversion linker is needed to accurately track conversions on a website by capturing and storing unique identifiers (like Google Click IDs) within website URLs",
                "author": null,
                "score": 1
            },
            {
                "body": "I will be messaging you in 2 days on [**2025-01-10 18:24:19 UTC**](http://www.wolframalpha.com/input/?i=2025-01-10%2018:24:19%20UTC%20To%20Local%20Time) to remind you of [**this link**](https://www.reddit.com/r/GoogleTagManager/comments/1hwpt78/why_conversion_linker_when_gclid_data_is_already/m6375yj/?context=3)\n\n[**CLICK THIS LINK**](https://www.reddit.com/message/compose/?to=RemindMeBot&subject=Reminder&message=%5Bhttps%3A%2F%2Fwww.reddit.com%2Fr%2FGoogleTagManager%2Fcomments%2F1hwpt78%2Fwhy_conversion_linker_when_gclid_data_is_already%2Fm6375yj%2F%5D%0A%0ARemindMe%21%202025-01-10%2018%3A24%3A19%20UTC) to send a PM to also be reminded and to reduce spam.\n\n^(Parent commenter can ) [^(delete this message to hide from others.)](https://www.reddit.com/message/compose/?to=RemindMeBot&subject=Delete%20Comment&message=Delete%21%201hwpt78)\n\n*****\n\n|[^(Info)](https://www.reddit.com/r/RemindMeBot/comments/e1bko7/remindmebot_info_v21/)|[^(Custom)](https://www.reddit.com/message/compose/?to=RemindMeBot&subject=Reminder&message=%5BLink%20or%20message%20inside%20square%20brackets%5D%0A%0ARemindMe%21%20Time%20period%20here)|[^(Your Reminders)](https://www.reddit.com/message/compose/?to=RemindMeBot&subject=List%20Of%20Reminders&message=MyReminders%21)|[^(Feedback)](https://www.reddit.com/message/compose/?to=Watchful1&subject=RemindMeBot%20Feedback)|\n|-|-|-|-|",
                "author": "RemindMeBot",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1728723231.0,
        "title": "Cookies? Hashing and retrieving",
        "author": "FullSpare1352",
        "id": "1g1vzgh",
        "selftext": "Hey,\n\nI am collecting first name/email and phone on a sign up and wanted to store them in the cookie so I can use on subsequent events later on. \n\nThe events are being fired in gtm server, and I was wondering if I should hash them in the cookie, and if so how to I unhash them to use in gtm server. \n\nBit new on the hashing/unhashing side ",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g1vzgh/cookies_hashing_and_retrieving/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Probably 15 years if we are honest… 😂",
                "author": "FullSpare1352",
                "score": 3
            },
            {
                "body": "Just store a user id and then a GCLID or FBCLID - your marketing programs will recognize those even better than PII",
                "author": "mr-nobody1992",
                "score": 2
            },
            {
                "body": "Yeah local could do it, but really I’m just going to set an ID and then write to a database and pull from that to enrich each request. Seems a little cleaner and I can further enrich by calling shopify and Klaviyo before sending sub requests.",
                "author": "FullSpare1352",
                "score": 2
            },
            {
                "body": "Wasn’t using it for GA4, planning to use across channel to enrich the customer params",
                "author": "FullSpare1352",
                "score": 2
            },
            {
                "body": "Yup exactly. I’ll whip something up.\n\nThanks for flagging the obvious PII issue, legit didn’t think of the should I do it… good pull up",
                "author": "FullSpare1352",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It's not good practice to store PII in cookies, so I wouldn't go down that route.\n\nWhy do you want to store them for later? Please can you give a real life example",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Try with local storage",
                "author": "Chjji22",
                "score": 1
            },
            {
                "body": "Do you use it as user id in GA4? In that case, only sending it once per user session should suffice because GA4 will stitch the user id with the GA4 client id.",
                "author": "RCoffee_mug",
                "score": 1
            },
            {
                "body": "Looking to enrich subsequent events with the data. \n\nActually quite a valid point, I might set a unique ID to the cookie and store in a database and retrieve against the id",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Yeah, as long as the ID is only known by you, that's an excellent solution.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It's easily done, I'm sure 30 years ago people wouldn't have worried 😂",
                "author": "Taca-F",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1730730887.0,
        "title": "Cookies being set to \"Denied\" for Default Global Consent in Google Tag Manager may be impacting my Google Ads conversion count?",
        "author": "trucker-123",
        "id": "1gjfobn",
        "selftext": "Hi.  I am using the Cookie Script consent banner (Cookie Script is a certified Google Ads CMP partner) only in the UK and EU for my website.  This means that for countries outside the UK and EU, the Cookie Script consent banner is not being shown on my website. I installed the Cookie Script consent banners with a tag in GTM (Google Tag Manager).\n\nNow the problem is, in Google Ads, the conversion count column on the Campaign Report is not counting some conversions for customers outside the UK and EU.  In fact, I did a test and I clicked on my own ad in Google outside the UK/EU (so I was not given the consent banner), registered on my own website, and I was not counted as a conversion in Google Ads.\n\nI asked Cookie Script support about this and they recommended in GTM, that I set \"Default Consent (Global)\" for my Cookie Script consent banners settings to \"Granted\", and then under \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"  \n\nI took a screenshot of Cookie Script support's answer, gave it to Google Ads customer support, and then asked Google Ads customer support if I could do this, and they said no, I can't do it, because setting \"Default Consent (Global)\" for my Cookie Script consent banners settings to \"Granted\" could violate customer privacy outside the UK and EU.  I then asked Google Ads support again if setting \"Default Consent (Global)\" being set to \"Denied\" in GTM is causing some of my customers to not being counted as conversions in Google Ads outside the UK and EU, but they repeated the same customer privacy issue and wouldn't answer my question.\n\nSo given that my consent banner only appears for customers inside the UK and EU, but the consent banner won't appear for customers outside the UK and EU, I have a few questions:\n\n1) Does anybody know if \"Default Consent (Global)\" being set to \"Denied\" would cause conversions to not be counted for customers outside the UK and EU, if my consent banner isn't shown to customers outside the UK and EU? (this is the question that Google Ads customer support refuses to answer directly)\n\n2) Is there a way in GTM where I can have the Cookie Script consent banner tag suppressed outside the UK and EU, so that the issue of consent isn't even on the table outside the UK and EU (would this make it legal outside the UK/EU if consent isn't even on the table like the old days?), and would this work with Google Ads conversion counting?  Before the Cookie Script consent banner and before I transitioned to GTM, I was just using the old Google Ads conversion tag script and conversion counting was working fine in Google Ads - I assume with the old Google Ads conversion tag script, the issue of consent isn't even on the table for outside the UK and EU, so I assume nothing is even violated?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gjfobn/cookies_being_set_to_denied_for_default_global/",
        "num_comments": 7,
        "comments": [
            {
                "body": "When you say you registered, do you mean you completed the cookie banner? Without a cookie banner or other consent mechanism, it's odd that the consent would change.\n\nIf you click on the 'container loaded' and 'DOM Ready' events in Tag Assistant, is your consent set to 'Denied' at those stages? If it's granted, this might not be affecting your tracking. Make sure you're clearing your cookies if you've already accepted tracking on the EU version of the site.\n\nNow, I obviously can't tell you this for certain, but it's very unlikely that Google would take action against your account for consent related stuff outside the European Economic Area, which is where they're mostly worried about. And they would most likely warn you before banning you. \n\nI've seen Google Ads threaten accounts in the past for accidentally collecting email addresses in URLs, and they gave the client a couple of months to fix it before they would disable the account. \n\nThat being said, if you were to implement the cookie banner for other regions, you could set it to opt-out rather than opt-in and you'd be fine under the majority of global privacy laws (disclaimer: this is not legal advice). Many users just ignore it completely, so it won't affect your tracking nearly as much as an opt-in banner.\n\nGoogle Support just can't risk recommending something that might violate some country's law, and it's pretty much impossible to know all of them.",
                "author": "winless",
                "score": 3
            },
            {
                "body": "Hey, thanks for your help. It's really appreciated. And thanks for your advice - maybe I'll see if it's possible to put up the consent banner for other regions outside the UK/EU and set it \"opt-out.\" You gave some good information and I'll have to digest the information you gave me over the next few days. Cheers!",
                "author": "trucker-123",
                "score": 3
            },
            {
                "body": "Yes, if your consent banner isn't being shown in some regions, then that could cause conversions not to be counted depending on how it's implemented. \n\nIf it's using Google Consent Mode and sending 'default' to set everything denied but 'update' never happens because the banner doesn't load then that would block cookies. \n\nYou could verify this in preview mode/tag assistant, assuming that you can view the non-EU version of the site. Just check to see if there are values in the Consent tab. \n\nTo your second question, it's theoretically possible but difficult (GTM doesn't inherently know where users are and consent values load before anything else) and I don't think there would be a legal difference between defaulting to granted vs not sending any consent values at all (though I'm not a lawyer).\n\nI'm guessing Google doesn't want to tell you to default to granted while not showing a banner because it would technically violate some privacy laws like CCPA (which requires a way for users to opt out). But whether cookies are granted in GTM just affects tag functionality; you're not using those values as a consent log or anything like that. \n\nI would go with Cookie Script's recommendation, and also consider showing the banner with opt-out defaults in other regions to make sure that you're generally compliant with other privacy laws.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "Hey, thanks for your answer!  I did a test on my own where the consent banner did not appear (because I was outside the UK and EU so I was viewing the non-EU version of the site) using the Google Tag Assistant debugger, and the cookies were all set to \"Denied\" at the beginning, but when I registered, all the cookies were set to \"Granted\" at the very end.  \n\n> I would go with Cookie Script's recommendation\n\nYeah, I wanted to go with Cookie Script's recommendation, but Google Ads support told me not do that (even when I showed them the snapshot of Cookie Script's response) so I probably won't, because it may get my account suspended.",
                "author": "trucker-123",
                "score": 2
            },
            {
                "body": ">When you say you registered, do you mean you completed the cookie banner? Without a cookie banner or other consent mechanism, it's odd that the consent would change.\n\nI meant I did a test registration on my website. I did a test registration just now without the consent banner. I am outside the UK/EU so the consent banner does not pop up for me.  When I did the test now with the Google Tag Assistant debugger, \"Container Loaded\" shows all the cookies start out as \"Denied\" (\"DOM Ready\" shows the same thing - that is all cookies are \"Denied\"):\n\nhttps://i.imgur.com/iLW1gWy.png\n\nAnd by the last \"Consent Update\" event, it shows \"Granted\" for the cookies in under the \"On-page Update\" column:\n\nhttps://i.imgur.com/yCDK6v3.png\n\n\n> Without a cookie banner or other consent mechanism, it's odd that the consent would change.\n\nYeah, it does change as you can see in the photos above, in the Google Tag Assistant debugger, even though the consent banner doesn't come up for me (because I am outside the UK/EU). I also cleared the cookies for my website before I did this test just now in the Google Tag Assistant debugger.",
                "author": "trucker-123",
                "score": 2
            },
            {
                "body": "Odd. I wonder what's causing the consent update. If they're still denied at container loaded then it's going to initially block a lot of tracking (anything that fires on page view), but if there is an update on the same page then any Google tags that were initially blocked should resend hits saying that they now have consent. \n\nMaybe it's some fallback in your CMP if the banner doesn't load.\n\nBasically, if that same thing happens for every non-EU user, then at least for Google tags it should be functionally the same as setting default to granted. \n\nBut for any tags that you manually set up consent checks for (e.g. if you have a Meta pixel), they won't typically know to send an update and the tag would have been blocked.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734516442.0,
        "title": "A tag read consent state before a default was set intermittent error. - GA4 form submission tag, using CookieYes CMP",
        "author": "ben_bgtDigital",
        "id": "1hgyiqe",
        "selftext": "Hi, I have a container that is using CookieYes CMP, and I get an intermittent error when the GA4 event tag for form submission fires. 'A tag read consent state before a default was set'As mentioned, this doesn't happen every time.  \n  \nCan anyone shed some light on this? Not sure if this is a CookieYes / CMP issue or something different. I took this container over with most of this in place, but can verify that the basics are set up just fine and mirroring other setups I've done.  \n  \nScreenshot link here: [https://loom.com/i/72e6c5df78d4414382535e2688e7a6cb](https://loom.com/i/72e6c5df78d4414382535e2688e7a6cb)  \nThanks",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hgyiqe/a_tag_read_consent_state_before_a_default_was_set/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Hello from CookieYes!\n\nWe’re happy to look into this for you. Could you please share the details with us?\n\nIt seems you’re already in touch with our support team. You can simply reply to the existing thread with the details, and we’ll work on resolving this for you right away.",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "Great, doing that now thanks",
                "author": "ben_bgtDigital",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719907583.0,
        "title": "Need help setting up Cookies consent for GA4 with GTM",
        "author": "Riccardomanci",
        "id": "1dtginm",
        "selftext": "Hi everyone,\n\nI'm working on website trackings, I need to set up consent mode for cookies, I need to track if users are accepting or declining cookies on my website and tell this information to google analytics with GTM.  \nI'm using a third party service that generates cookies (iubenda).\n\nCan someone help me figure it out what are the steps I should follow? I've been looking for videos explanation but it seems like they all using different methods, and i'm also confused about the new consent mode V2.  \nAny other info is welcome.\n\nThanks in advance!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dtginm/need_help_setting_up_cookies_consent_for_ga4_with/",
        "num_comments": 14,
        "comments": [
            {
                "body": "Generally if there's an existing implementation, it's best to stick with it. Iubenda isn't a bad platform by any means and can neatly integrate with GTM.\n\nMore neatly than Osano! Osano does work fine though. I've got one client that uses it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "The agency who build the website actually implemented Iubenda with all the GDPR requirements, I'm trying to setup everything strictly necessary regarding user activities tracking, the tool I will be using are clarity for heatmaps, Google ads / meta for adv and GA4 for the website activities.\n\nI think I can do all this via Tag Manager, with tags/variables but not sure it this will be enough and if I will find the right way to do it, since every tutorial im watching, have different cookie values and this gives a bit of confusion on the process. (for me cookie values look like this: {\"timestamp\":\"2024-07-02T09:24:22.065Z\",\"version\":\"1.62.0\",\"purposes\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true},\"id\":42743646,\"cons\":{\"rand\":\"bc0a6b\"}}",
                "author": "Riccardomanci",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Here is a GTM Osano implemention \nHave you considered Osano?\nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": ">...I need to track if users are accepting or declining cookies on my website and tell this information to google analytics with GTM.\n\nYou shouldn't try to do this. If you need to understand opt-in versus opt-out rate, Iubenda should be providing that as a report. You should not sent \"user has opted-out\" event data to GA4.\n\nI've worked with Iubenda previously. It was probably a year ago now. I remember it being a fairly good / capable platform. If you are able to share the sie URL here (or DM me if you need to keep that private) I can take a very quick look to see how it is set up and at least then be able to recommend a course of action or get into some details, if needed.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "As a web developer working for a Web Agency I can help with such problems, please DM me",
                "author": "Semboxsrl",
                "score": 1
            },
            {
                "body": "Are you still in need of help?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Yes sure would love to share so you can check it via DM, but my need is to tell Google Analytics 4 when he has the consent to track a user = he accepted the cookie policy / he didn't accept it so I shoudn't track him, does this makes sense?",
                "author": "Riccardomanci",
                "score": 1
            },
            {
                "body": "If you mean \"how do I configure a trigger in GTM to control when my GA4 tags can fire based on Iubenda consent\", then yes I do understand.\n\nIt's something I have done for / with a client previously. It's been a while, so I don't remember which client it was otherwise I'd probably see if I still had access to their GTM to refresh my memory!\n\nUltimately, it can be done by examining the content of the Iubenda consent cookie, but by checking your site I can see if there's a neater solution. Working with cookie values is fine, but sometimes cookies take a fraction of a second too long to have their value set and you end up trying to fire a tag and it fails because the check of the cookie's value is wrong because the cookie wasn't set in time.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707809704.0,
        "title": "Practical changes in GTM & GA when third party cookies goes away?",
        "author": "Informal-Praline4394",
        "id": "1apnyoq",
        "selftext": "I am still trying to wrap my head around how the cookieless future will actually affect Google Analytics and Google Tag Manager. Will a switch to Server Side GTM be enough to make it first party cookies as they it will be placed and stored by own servers? If anyone has a video or blog post that describes what we ACTUALLY have to do, and not just lots of fluff around it, I would appriciate that as well.",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1apnyoq/practical_changes_in_gtm_ga_when_third_party/",
        "num_comments": 20,
        "comments": [
            {
                "body": "GA is already first party cookie so it’s not impacted by the 3rd party cookie phase out.",
                "author": "moonsal71",
                "score": 3
            },
            {
                "body": "I know about this, I read about it from Simo Ahava's blog post but I wonder why gAds need to do it. Can't it rely upon gclid which can also uniquely identity the combination of user and ad?",
                "author": "GullibleEngineer4",
                "score": 2
            },
            {
                "body": "Third party cookies can uniquely identify the google account. For example, if you are logged in your google account, google will save a cookie on your browser. If third party cookies are enabled, when you visit any site and that site makes a request to Google's servers, the browser will send the third party cookie that google.com saved in your browser. This mechanism effectively allows google (and Facebook, LinkedIn, basically any ad platform) to track you across internet. \n\nFor conversion events, it allows google to see what do you buy and google feeds this data to their ML algorithms to show you relevant ads of products you are likely to buy based on your online activity. \n\nIf gclid AND third party cookies are disabled, it will make it a bit more convoluted for google to track you but not impossible through things like renaming click identifier or convincing gAds customers to install a pixel from their domain which does browser fingerprinting.",
                "author": "GullibleEngineer4",
                "score": 2
            },
            {
                "body": "It's under Admin -> Data streams -> \\[Your web data stream\\] -> Configure tag settings -> Allow user-provided data capabilities -> Automatically detect user-provided data",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "I mean looks like sharing PII precisely because a lot of people have accounts on Google.",
                "author": "GullibleEngineer4",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "THe main platform that relies on 3rd-party cookies is gAds. Even when you implement server-side, gAds still relies on 3rd-party cookies via a complex dance of server-side telling web GTM \"hey, I'm here now, but can you please go sort out a cookie for gAds? Let me know when you've done\".\n\nDon't quote me on that, but it's probably similar enough to this for the purpose of discussion.\n\nI'm sure the Google team responsible for looking after gAds and the Google team responsible for killing 3rd-party cookies in Chrome are communicating with each other. No panic needed.\n\nI'd still recommend implementing sGTM, but mostly because it's very cool and the more people using it, the more resource and attention Google will give to it because it does still need some development.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thank you!",
                "author": "Informal-Praline4394",
                "score": 1
            },
            {
                "body": "At [MetricsGate](https://www.metricsgate.com/) we created a click-click-finish wizard-like solution to automatically do the basic configuration of GA4 and GTM for the tagging server. And it's way cheaper then running this on GCP or AWS.",
                "author": "rlanyi",
                "score": 1
            },
            {
                "body": "I haven’t delved into the technical reason why gAds is so attached to using a 3rd-party cookie, but I do know that gclid is only ever going to become more and more unreliable.\n\nApple hate gclid, fbclid etc because they are per-user tracking values. Apple are OK with generic UTMs, because they are massively aggregate tracking values.\n\nGoogle already do special modelling in GA4 to combat ITP, but you can’t model gclid.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "That makes a heap of sense.\n\nGoogle are pushing *hard* for 1st-party data via e.g. Enhanced Conversions. They've even swtiched on automatic data scraping for new GA4 properties / streams. This is currently their way to ensure data quality for when every other option disappears.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I actually don't know what are enhanced conversions, I am learning about the whole tracking and analytics landscape. \n\nFrom my cursory google search, it looks like it's basically sharing hashed first party data with google. Is that correct? \n\nAssuming, it's correct, I don't see the point of hashing because while the hash can be irreversible, if google has access to both the hashed email AND the emails of users through google/gmail accounts, it's trivial to identify the emails. Same idea is applicable for other hashed PII information.",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "I wasn’t aware of this data scraping in new GA4 properties. Where is that feature managed ?",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "It’s more about not transmitting personal info. If Google didn’t have that specific user’s email address, they still won’t because they can’t reverse the hash.\n\nObviously the match rates are pretty high because so few people don’t have a Google account.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks !",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "I think it comes down to a legal distinction.\n\nI've done some experiments with this and it's pretty interesting. I've also had conversations with *big* clients and I hadn't realised how poorly understood data hashing is.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I agree and I think it wouldn't take long before it's realized by legal bodies imo especially in Europe. \n\nI mean it also sounds pretty obvious why is it PII, how else is google supposed to *match users* on its platform without being forwarded some user identifier?",
                "author": "GullibleEngineer4",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718152540.0,
        "title": "Cookie banner missing in preview",
        "author": "Nemesi_361",
        "id": "1ddts3l",
        "selftext": "Hi guys, i created a tag in GTM for cookiebot for consent mode v2 but when i click in preview open website, but without cookiebanner. How can i solve it? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ddts3l/cookie_banner_missing_in_preview/",
        "num_comments": 12,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are there any errors in your console? If not, maybe you have already given your consent, after which, of course, you won’t be asked again for a while. So if that is the case, clear your browser’s storage for that specific domain and you should be able to see your banner again. By the way, what trigger have you used for Cookiebot?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Also make sure you're testing on the same domain that you've entered in your Cookiebot account. Otherwise it won't show.\n\nPlease let us know what the solution was :-)",
                "author": "Drendo",
                "score": 1
            },
            {
                "body": "I've faced the same issue some times for my clients. Here are some things you can check:\n\n1. Ensure the tag is set up correctly and the domain matches in Cookiebot.\n\n2. In Cookiebot, check if it's set to \"Visible only in EU.\" If you are outside the EU, select \"All visitors.\"\n\n3. If you have given consent once it won't show again, you have to remove the cookiebot cookie to see it again.\n\n4. Sometimes the cookie banner takes time to appear due to old cached data. Clear your cache or try publishing the container and then use an incognito tab.\n\nThese steps should fix your problem. If you still face issues or need assistance, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Did you already select thr settings for the cookie banner? If yes, then you won’t see the banner again for 30 days or whatever timeframe u set it to appear again. Clear you cache when u want to test it. If that doesnt work, check the domain you set it with on the platform.",
                "author": "SparkScaler",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721765390.0,
        "title": "Third Party Cookies not being deprecated ",
        "author": "Specific-Wafer8426",
        "id": "1eahpem",
        "selftext": "Google is no longer doing away with third party cookies for the time being.  \nCheck out this article:\n\n[https://digiday.com/marketing/after-years-of-uncertainty-google-says-it-wont-be-deprecating-third-party-cookies-in-chrome/](https://digiday.com/marketing/after-years-of-uncertainty-google-says-it-wont-be-deprecating-third-party-cookies-in-chrome/)\n\n",
        "score": 12,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1eahpem/third_party_cookies_not_being_deprecated/",
        "num_comments": 8,
        "comments": [
            {
                "body": "No surprises here. They finally realized their ad-tech would become completely useless without them.",
                "author": "brannefterlasning",
                "score": 6
            },
            {
                "body": "Google is offering an olive branch to Adobe and other companies who still use 3rd party cookies.",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "Totally agree",
                "author": "coffeeandbags",
                "score": 3
            },
            {
                "body": "I do not use drugs. Are you speaking from experience?",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Original blog post from Google: [https://privacysandbox.com/intl/en\\_us/news/privacy-sandbox-update/](https://privacysandbox.com/intl/en_us/news/privacy-sandbox-update/)",
                "author": "fluffis",
                "score": 1
            },
            {
                "body": "Google preserves the lock on the market by eliminating support for 3rd party cookies, not maintaining support for it, and forcing everyone to engineer another way. Like Apple has already made companies start doing with ITP 2.3. Deprecating 3rd party cookies was simply matching the direction that Apple is already going. Google has already found another way of it's own. See link. Preserving 3rd party cookies does more for Google's competition than for Google. So why would Google do it? Conflict avoidance. Potentially very expensive conflict avoidance.\n\n\n[GA4] Create conversions in Google Ads based on Google Analytics key events\nhttps://support.google.com/analytics/answer/10632359?hl=en",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Are you high?\n\nno, nothing to do with clinging to a monopoly as long as possible because absolutely no reason to cut the flow of money without the government intervention\n\nPeople are lazy and don't like change, Chrome has lots of time to milk all that money...nothing to do with Adobe",
                "author": null,
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1725951794.0,
        "title": "The requestor does not support sending pixels from browser. Third party cookies will not be collected as a result.",
        "author": "FullSpare1352",
        "id": "1fdbubi",
        "selftext": "Hey, \n\n  \nI am getting this in my GTM server container, the google ads conversion tracking is a 302 response and for the life of me I just cant figure out what it is...\n\n  \nAny ideas what this means?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fdbubi/the_requestor_does_not_support_sending_pixels/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Same question here.\n\n  \n`The requestor does not support sending pixels from browser. Third party cookies will not be collected as a result.`\n\n  \nAnyone knows what this means?",
                "author": "pommoh",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709744697.0,
        "title": "How can I load cookie consent banner for specific region with Server Tag Manager",
        "author": "Dry-Apartment-4923",
        "id": "1b84yvp",
        "selftext": "Hi, I've recently implemented Consent Mode V2. So the cookie banner is enabled for all user. But the marketing team don't want show the banner for all region except EEA & US-CA (California).  \n\n\nServer tag manager does set the region header, but I can't use it from client. Did you guys implement any partial CMP solution. If so how did you do it?\n\n  \nI'd appreciate the help  \n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b84yvp/how_can_i_load_cookie_consent_banner_for_specific/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Which consent management platform are you using?",
                "author": "analyst_bappy",
                "score": 3
            },
            {
                "body": "This is the right question. It shouldn't be up to GTM to control banner visibility.\n\nOneTrust will give you the tools to do per-region configuration. Trying to shoe-horn this functionality into GTM is a recipe for disaster, not to mention annoying future maintainability.\n\nLet the consent management platform manage consent! GTM is there to listen to and respond to consent signals.",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "You need to pass users region in a JavaScript enabled cookie from your app's servers when the page loads. Then, define a variable in client side GTM based on this cookie. Now, you can use this variable to conditionally fire the consent banner. \n\nThis is a bit convoluted but it would solve your problem.",
                "author": "GullibleEngineer4",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Bappy vai, We are using cookieinformation. This CMP provider is quite basic compared to other. But our clients preference",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "Thanks for the suggestion , went with something similar",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "I agree, i was evaluating options. Went with fronted implementation. We already use Geo-location API in our project & region are well defined. So went with implementing our own solution based on that. We also have good system in place not to leak any analytical events or any other tag before consent resoulution",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "There is a way to set default value to eu regions as denied and set default value to other regions as accepted. But the banner of Cookie Information will be shown to all.",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "What did you go with?",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "Interesting, I couldn't find any option to configure it from cookie information. But they suggest customizing the SDK code to do so, which is bit challenging as cookieinformation doesn't provide geo data",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "Used geo-location API to determine whether to show the consent popup or not. Until the Geo-location resolved, blocked all tags & anaytics. The region request header set by server side GTM i used to adjust the consent mode in the server side",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "Just make sure your page load does not suffer which  can affect your web vitals.",
                "author": "GullibleEngineer4",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1700268822.0,
        "title": "Cookie consent banner and GTM tags",
        "author": "Monado_DaysoftheNew",
        "id": "17xu7tj",
        "selftext": "When setting up any GA4 and advertising tags in GTM, do they need to have any sort of consent attached to them if the website has a cookie consent banner? Or does the cookie consent banner cancel out the GTM tags if a user declines?\n\nAlso, what if the website doesn’t have a cookie consent banner?  \n\nLastly, if consent is needed for the Tags, any good resources/videos you recommend that show how to set this up properly in GTM?\n\nThank you!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/17xu7tj/cookie_consent_banner_and_gtm_tags/",
        "num_comments": 17,
        "comments": [
            {
                "body": "Here is a CMP implementation example.  https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "First thing I would do is check / ask what consent management platform the site Is using, then google like, \"OneTrust Google Tag Manager setup\" or \"CookiePro Google Tag manager setup\"  for example. There is usually clear instructions for that vendor. Also, many of them even have GTM templates already in the GTM template gallery, which you can just import into your GTM container. So, it wouldn't be just one document or video, it would vary by the vendor.",
                "author": "nakfil",
                "score": 3
            },
            {
                "body": "Thank you!",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "sorry I didn't answer all your questions clearly. If there IS a consent banner, you should respect a user's choice if they decline, and NOT fire GTM marketing / analytics tags. In that case you should check if the consent management platform has an integration with GTM.\n\nhowever if you do NOT have a consent banner then no, as long as the tags fired are inline with the website privacy policy, in my opinion.\n\nThat said, the privacy landscape is changing constantly and there state level laws in the US that are being passed regularly. Personally, if it's a small business,  it's probably fine. If it's a larger organization, I always defer to their legal team as there are varying levels of risk tolerance.\n\nMy Initial point was that the worst thing you can do is set ad/marketing/analytics cookies on a user's device from GTM if they have clicked \"decline\" on a cookie consent banner.\n\nhope that helps; interested in seeing if other people have different opinions.",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "Thanks that does help and makes sense.  Do you have any good videos or documents on how to set up consent for Tags for websites that do have a cookie consent banner?",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "If there's a chance the website is visited by EU nationals then you have to provide them with a cookie consent banner and the ability to opt out. Regardless of where your business is based.\n\nAs the previous poster mentioned, the likelihood of a large fine for a small business is going to be relatively small risk but is it worth it when consent products are pretty cheap and respecting user privacy should be the done thing.",
                "author": "mcockram85",
                "score": 2
            },
            {
                "body": "Small correction: For EU users you should be providing them the ability to opt-in, because you should be defaulting to them being opt-out.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Thanks!",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "Yes sorry I typed that in haste you're absolutely right that it's an explicit opt in.",
                "author": "mcockram85",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You should not fire gtm marketing tags without consent. However, it would be best if you follow the instructions provided by your consent management platform. Most of them have integrations and support for GTM.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Even the in the United States?  What if the website doesn’t have a cookie consent banner?  I’m most cases I don’t have access to the CMS either.  I’m just confused if this is absolutely necessary or recommended at this point?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Works for me. And I run Downnotifier so I know it is up. And works based on recorded traffic in Google Analytics. I cannot debug your Internet connectivity issues with so little information.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "All websites that have third party cookies in the US should have some sort of notice if only to avoid the privacy troll law suits re wiretapping, pen register, etc. The banner is the equivalent of the notice you hear when you call a call center--this call is being recorded, etc.",
                "author": "Individual_Race_8744",
                "score": 1
            },
            {
                "body": "Every other website works for me.  I'm on a corporate network with a proxy connection from home.  One of those things is the culprit. Many network admins block Weebly, and I think that's my case.",
                "author": "Firm_Sense9730",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723730556.0,
        "title": "Has anyone managed to get Consent Mode working with CookieBot and Shopify?",
        "author": "puk789",
        "id": "1esvzgd",
        "selftext": "I've followed the official CookieBot guide on adding the CookieBot script as well as the Default consent command directly into the theme's code. I've turned the consent mode option off (data-consentmode=\"disabled\") because I want to set everything up via GTM. \n\nI've enabled Consent Overview feature in GTM and set the GA4 tags to require additional consent (analytics\\_storage).\n\nI created the Consent Mode tag (template by Simo Ahava) for the Update command that fires on cookie\\_consent\\_statistics, cookie\\_consent\\_marketing or cookie\\_consent\\_preferences custom events, but for some reason it's not being triggered. (it's hard to tell as tag assistant is impossible to use with Shopify), but I'm not seeing the update event coming through in the data layer.\n\nAlso, the default consent state doesn't seem to get set properly (at least that's what the Consent Mode Inspector chrome extension says). \n\n\n\nAs a result of these not working, my GA4 tags get fired regardless of user consent and don't even contain the GCS parameter to indicate the consent.\n\n\n\nHas anyone figured this out? Thanks a lot!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1esvzgd/has_anyone_managed_to_get_consent_mode_working/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, I’ve done Cookiebot with Shopify. It’s challenging to answer all questions without checking the setup, but still, didn’t you use the official Cookiebot tag? For checking GA4 when you don’t have Tag Assistant, use the Analytics Debugger extension. Feel free to reach out if you need help with the setup.",
                "author": "MarketerErfan_",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709359812.0,
        "title": "Tags not firing after accepting all cookies until after refreshing the website",
        "author": "Kacay",
        "id": "1b4ha5o",
        "selftext": "As part of Google's changes around Consent Mode I recently implemented a CMP (Cookiebot) to a few of our domains via GTM. Everything looks to be working correctly, but the only thing I noticed is that no marketing tags fire until after someone refreshes the website. Given our 'websites' act more like Landing Pages with lengthy content promoting the product, this isn't ideal, as users don't find themselves navigating from sub-page to sub-page.\n\nI installed the Cookiebot tag via the official implementation guide on their website. I found solutions online suggesting adding a piece of code to the Cookiebot tag in GTM, that refreshes the website after accepting as follows:\n\n    function CookiebotCallback_OnAccept() {                                 \n    if (Cookiebot.changed) { document.location.reload(); } }\n\nI looked at adding this by editing the Cookiebot template, but I'm not a coder and not 100% sure where to add this, getting errors around 'Cookiebot' and 'document' not being defined, unable to save.\n\nHas anyone experienced this? Can anyone suggest where to add this code to get it working? Or other solutions to the issue?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b4ha5o/tags_not_firing_after_accepting_all_cookies_until/",
        "num_comments": 10,
        "comments": [
            {
                "body": "You sent me on the right path... I skipped a step from Cookiebots deployment instructions around switching the tags that used the 'All Pages' trigger to the newly created 'cookie\\_consent\\_update' trigger. 🤦‍♂️ Thanks for the help! /Solved\n\n  \nEdit: Typo",
                "author": "Kacay",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hey! I can help you with exactly this. We have built our own cookie banner, as an alternative to Cookiebot, and have tackled this issue. Let me know if you're interested.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How are your triggers looking? I've used Cookiebot a few years ago and the tags were firing straight away after consent without any extra code.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "If you had read the thread (3 whole comments!) instead of just replying to every thread with the \"Cookiebot\" keyword in it, you'd have seen this has been solved, with the solution being I'm a dumbass and skipped a step in the deployment instructions. There is no issue here for you to tackle. \n\nBut good job spamming your product on reddit, sure poeple are gonna love it and definitely switch over. /s",
                "author": "Kacay",
                "score": 1
            },
            {
                "body": "This made me laugh 😂. Glad it’s been solved and thank you for your best wishes.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "THANK YOU SO MUCH! I wish you all the best, my dear!",
                "author": "fabulousausage",
                "score": 1
            },
            {
                "body": "You're welcome, glad it worked out!",
                "author": "Etianen7",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1705843267.0,
        "title": "Third party cookies elimination",
        "author": "valeriervn",
        "id": "19c3a7k",
        "selftext": "As you might know, Google is eliminating third party cookies. I have clients who own a small business, most of them without much technical knowledge. I am thinking about what the best solution would be for them, so that they are still able to run their meta ads.\n\nI read about server side tagging, but that seems to be too complicated for those small businesses (or is it not?). I am able to set up the tagging but would rather not maintain it. \n\nWhat are you solutions to this developement? ",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/19c3a7k/third_party_cookies_elimination/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Nothing. There is nothing for your client  to do here. Meta and Google Analytics use first-party cookies for core functionality.\n\nSome have said that server-side GTM is some solution to this but that’s false. I use ssgtm and think it’s pretty cool but it won’t solve this. Worth investigating but for other reasons.\n\nThat said, to the extent that some types of advertising will be affected, like retargeting, ultimately the solutions will be provided by the vendors.\n\nYou’ll see some mention that the solution is to use “first-party data” as well, but I struggle to see how a small business could effectively use it, but maybe I am missing something.\n\nSo, TLDR: don’t worry about it :)",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "Ah that's good to know. Thank you so much for explaining!",
                "author": "valeriervn",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "you are conflating tools that use 3rd party cookies (like Adobe products) with tools that do not use 3rd party cookies (like Google products). the \"There is nothing for your client to do\" from earlier is the correct response.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Good to know, thanks!",
                "author": "valeriervn",
                "score": 1
            },
            {
                "body": "For sure!",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "Can you clarify further?  I am looking for an alternative to track conversions for Google Ad Manager since Google is sunsetting those next month with no alternative.",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Did not find something Volumen… did you want to say « Voluum.com »?\n\nIt’s like a data lake solution ?",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "It’s Google Ad Manager, not Google Ads.  Totally separate platforms :(",
                "author": "Monado_DaysoftheNew",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707951315.0,
        "title": "Client has cookie policy code within website, Google tags are within GTM - Can I still comply with Google Consent mode V2?",
        "author": "QuietMrFx977",
        "id": "1ar0cnb",
        "selftext": "The client is using the one trust cookie code, they have GA4 and google ads pixels and then also meta pixels. \n\nIs there a way to comply with the v2 consent mode using this setup?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ar0cnb/client_has_cookie_policy_code_within_website/",
        "num_comments": 9,
        "comments": [
            {
                "body": "have you considered modernizing the CMP installation? like so... https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "and here is an Osano example. https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I don’t know this for certain but I think OneTrust has added a toggle / switch within its interface that will apply the two required google consent mode parameters.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "It is possible. You have to read the cookie with a user defined variable and put it into the google tag template (idk the exact name)",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "If you need more help let me know",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "No I didn't consider that, but I will now. Very interesting read, thank you",
                "author": "QuietMrFx977",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1706127286.0,
        "title": "GTM not working when Cookie Preferences are set.",
        "author": "Affectionate_Golf581",
        "id": "19eq1jy",
        "selftext": "Hello, was just wondering what prevents GTM from firing when consent has been set on a cookie banner that has been implemented on a website?\n\nAt the moment, if certain cookies haven’t been accepted, GTM itself is prevented from working . As a result, regardless of how each tag is classified within GTM, none of them fire. \n\nTo be more specific here is an example:\n\nI have switched off functional and analytics cookies via the cookie banner however have left targeting cookies on. Furthermore, as and example, tags for Facebook have been set to required ad_storage. So these tags should fire but don’t seem to. My understanding is that since GTM is being prevented from firing, these tags aren’t firing either.\n\nAny solutions/recommendations as to what I should look into to have GTM fire regardless of what the consent granted by the user is?\n\nI would guess that since GTM is simply a tag management system having it fire regardless of consent state should be okay?\n\nAny suggestions/insight would be helpful!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/19eq1jy/gtm_not_working_when_cookie_preferences_are_set/",
        "num_comments": 8,
        "comments": [
            {
                "body": "This can happen if someone let's the CMP do \"auto blocking\". Sounds like a great feature, except often this blocks GTM entirely.\n\nGreat for complying with GDPR without much effort, but if you're doing anything sophisticated with consent management it will give you a bad day!\n\nIf you have any hardcoded marketing / analytics scripts, maybe retain the blocking but see if there's a way to add an attribute to the GTM script to ensure the CMP ignores it.\n\nEither that or turn off auto-blocking, but then add attributes to any hardcoded marketing / analytics tags to bring them under control of the CMP.\n\n&#x200B;\n\nIf you share the URL (either here or a DM) I can have a look and see what's going on.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "if it is set to not set then the built in consent defaults are ignored. if you chose no additional consent then you get the defaults. if you choose require additional you will get sort of 'append' another check to the defaults. [https://support.google.com/tagmanager/answer/10718549?hl=en#:\\~:text=Tags%20with%20built%2Din%20consent,click%20Advanced%20Settings%20%3E%20Consent%20Settings](https://support.google.com/tagmanager/answer/10718549?hl=en#:~:text=Tags%20with%20built%2Din%20consent,click%20Advanced%20Settings%20%3E%20Consent%20Settings).",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you are using OneTrust, you can change it to run entirely from inside GTM and not use AutoBlock. Here is how to set up consent mode with the OneTrust CMP\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Or you can switch to a more modern CMP like Osano. Here is how to set up consent mode with the Osano CMP\nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Hey! Thank you so much!!!! This defiiitely did the job. Saw an instant change. I did have a follow up question however, I can see that certain Google analytics tags do fire when consent for ad_storage is provided (only targeting cookies enabled basically). So my question is: do tags that have built in consent checks for ad_storage and analytics_storage work with the logic used by an AND operator or and OR operator?",
                "author": "Affectionate_Golf581",
                "score": 1
            },
            {
                "body": "Not Set does not ignore the built-in consent settings. Google did this on purpose presumably to make it difficult to override user consent.\n\nNot Set means your tag shows up in the \"I haven't bothered\" section of the Consent Overview report.\n\n\"No additional consent\" means you have agreed with the built-in consent and your tag shows up in the \"I've done the right thing\" section of the Consent Overview report.\n\n\"Require additional consent\" means you're either going to add a separate consent category, or if you \"double up\" on ad\\_storage / analytics\\_storage with the built-in consent, the tag will not send cookieless pings and will revert more to what happens if you use an exception trigger.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1699403192.0,
        "title": "Cookies not tracking",
        "author": "Janet135246",
        "id": "17q91q7",
        "selftext": "I have been trying to get GTM to auto fill in a form with a cookie that I have set up. I know that the cookie is working, but no matter what code I try it doesn't fill it in. Here is the HTML that I have curranty. \n\n<script>\r  \n   (function () {\r  \n  var value = \"{{cookie - \\_\\_gtm\\_campaign\\_url}}\" //fill with variable which information should be written into the field\r  \n  var selector = \"input\\[name='\\_\\_gtm\\_campaign\\_url'\\]\"  //fill with CSS Selector that identifies the form field\r  \n  var field = document.querySelector(selector)\r  \n  if(field){ field.value = value; }\r  \n})();\r  \n</script>\n\n&#x200B;\n\ncookie - \\_\\_gtm\\_campaign\\_url is the variable that I have set up in GTM\n\n\\_\\_gtm\\_campaign\\_url is the name of the parameter on the form\n\n&#x200B;\n\nAny advice would be greatly appreciated.\n\n&#x200B;",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/17q91q7/cookies_not_tracking/",
        "num_comments": 7,
        "comments": [
            {
                "body": "* Check if the script is executing after the form has loaded. If the script runs before the form exists in the DOM, it won’t find the field to populate. You can either place your script at the bottom of the body tag or, if it must be in the head, you could execute the function on DOMContentLoaded event to ensure the form is loaded.\n* Some forms have event listeners attached to their fields for handling data input. Setting the value via script may not trigger these events. You might need to dispatch an input or change event manually after setting the value.\n\n&#x200B;\n\nHere's how you might modify the script to include a check for the DOMContentLoaded event and to dispatch an event after setting the value:\n\n&#x200B;\n\ndocument.addEventListener('DOMContentLoaded', function() {  \n  var value = \"{{cookie - \\_\\_gtm\\_campaign\\_url}}\"; // Variable with the cookie value  \n  var selector = \"input\\[name='\\_\\_gtm\\_campaign\\_url'\\]\"; // CSS Selector for the form field  \n  var field = document.querySelector(selector);  \n  if (field) {  \nfield.value = value; // Set the value from the cookie  \nfield.dispatchEvent(new Event('change')); // Dispatch change event to trigger form updates  \n  }  \n});",
                "author": "blaff3687",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This has to do with the hidden field not being set with a default value. I set the hidden field with a default value of 0 and then replaced it with the utm\\_campaign URL and it works. Please see my [blog post](https://albanyanalytics.com/2023/10/06/pass-utm-parameters-to-a-crm-using-google-tag-managergtm/) on this subject.",
                "author": "Ordinary_Marzipan689",
                "score": 1
            },
            {
                "body": "I appreciated the help, however it didn't work. It is an embedded form on my website if that is part of the issue.",
                "author": "Janet135246",
                "score": 1
            },
            {
                "body": "Is it embedded using an iframe? If that is the case then what you are trying to do is not possible. Either way, this is definitely not a use case for GTM.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "The parent and the iframe both are in the same domain right? Otherwise, it is not possible, unless you set up postMessage() like this one: https://www.htmlgoodies.com/html5/display-cross-domain-data-using-postmessage/",
                "author": "fredy013",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1698301632.0,
        "title": "Third party cookies warnings after gtag consent update",
        "author": "roskam93",
        "id": "17gq4xb",
        "selftext": "When user set:`gtag(\"consent\", \"update\", {ad_storage: \"granted\",analytics_storage: \"granted\"});`\n\nas consent settings on our website, following warnings are thrown in google chrome console:\n\n[https://user-images.githubusercontent.com/28001613/277618924-92e90436-b950-4352-a157-7b2fb6673b74.png](https://user-images.githubusercontent.com/28001613/277618924-92e90436-b950-4352-a157-7b2fb6673b74.png)\n\nand\n\n[https://user-images.githubusercontent.com/28001613/277619004-1c1b4874-0529-4ae4-8043-7aef45b844a3.png](https://user-images.githubusercontent.com/28001613/277619004-1c1b4874-0529-4ae4-8043-7aef45b844a3.png)\n\nI've noticed that this happens only when ad\\_storage is \"granted\", analytics\\_storage can be set in any option and warnings are not shown.What do we have to do to fix these warnings, if we have? \n\nChange some settings in google ads or google tag manager, something else? Or this issue will be fixed by google itself, since these are google cookies?\n\nI've asked about this in google tag manager and google analytics help forums and stackoverflow but did not get any reply yet.\n\nHope someone can give me any information or help here.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/17gq4xb/third_party_cookies_warnings_after_gtag_consent/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Finally I got answer at github: https://github.com/GoogleChromeLabs/privacy-sandbox-dev-support/discussions/173#discussioncomment-7393749\n\nIn short: \"... I think you can ignore the warnings for this specific set of cookies. On our end, we're thinking about how we can reduce the noisiness of these warnings and make them more actionable. ...\"",
                "author": "roskam93",
                "score": 3
            },
            {
                "body": "Thanks for linking this answer!",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1694355321.0,
        "title": "How can i ensure, my tags won't fire before GDPR Cookie Policy?",
        "author": "QuietMrFx977",
        "id": "16f1cne",
        "selftext": "The website i'm working on has a cookie policy and it mentions the user needs to accept the policy before the tags will fire. If i am setting up a new tag, is there a setting i need to use to ensure the tags don't fire before acceptance?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/16f1cne/how_can_i_ensure_my_tags_wont_fire_before_gdpr/",
        "num_comments": 4,
        "comments": [
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Generally you want to have the cookie banner send a data layer event when consent has been \"decided\". This means you want to have an event when a user dismisses the banner (either they granted or denied consent) *and* that same or a similar event on every following page load, because the cookei script has to run on evey page and either show the banner or retrieve the user's preference, which takes a short moment.\n\nAre you able to share the URL?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Examples of CMP (consent management platform) that work nicely with GTM in this way:\n\n* CookieBot - Although an almost mandatory side-effect is you need to implement Google Consent Mode\n* OneTrust / CookiePro - The benchmark in how GTM integration should work\n* TrustArc - Only with a helper script implemented as a Custom HTML tag! (Google for \"TrustArc GTM Integration\")\n* Osano\n\nProbably many others, but these are the ones I've worked with relatively recently.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "here is an example for installing Osano. you can ensure Osano fires before anything else by using the 'consent initialization' trigger. https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1694626503.0,
        "title": "Help - IT/legal blocked all cookies and GA4 has no pageviews",
        "author": "ethibs",
        "id": "16htc9c",
        "selftext": "In an panic to get back into cookie compliance legal/IT went full block. Of course using a software company to get back into compliance is taking longer than expected and in the meantime GA4 is almost useless with no pageviews able to report so my job in marketing is a little difficult.\n\nCan you share any insights into what might be going on with the google tag below? I removed the tag id and website to hide which company I worked for.\n\n!-- Google tag (gtag.js) --> <script async src=\"https://www.googletagmanager.com/gtag/js?id= \"></script> <script> window.dataLayer = window.dataLayer || \\[\\]; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); <!---IDE block---> gtag('set', 'allow\\_ad\\_personalization\\_signals', false); gtag('config', 'G-S7F33GJY2V', { 'allow\\_google\\_signals': false }); </script><link rel=\"canonical\" /><link href=\"http://www. .com/\" rel=\"canonical\" /></head>",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/16htc9c/help_itlegal_blocked_all_cookies_and_ga4_has_no/",
        "num_comments": 3,
        "comments": [
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I'm just focusing on `allow_ad_personalization_signals` and `allow_google_signals` here. These parameters are telling GA4 to never enable Ads Personalization and Google Signals. However, you can enable and disable these things in GA4 as well. Especially Google Signals is something you have to actively activate in GA4 data collection settings. Furthermore, if these things are disabled, it shouldn't affect data collection much at all, I'd say. Ads Personalization is essentially for Google Ads and Google Signals adds *extra* data from logged-in Google users.  \n\n\nTry editing the IDE comment so it's proper HTML comment syntax: `<!-- IDE block -->` as opposed to having three dashes on each side, and having a space after and before the two dashes instead.\n\nApart from that, I don't think the code you've provided should block any pageviews? If IT has blocked all cookies in another way, what you need is a cookie banner which asks users for consent, and then allows cookies for whatever (if any) cookie types your user has consented to.",
                "author": "Palladog",
                "score": 1
            },
            {
                "body": "first party cookies are allowed. google uses first party cookies. in the US consent is permissive. you can default to 'track' until the visitor opts out of tracking. consent can be handled appropriately by locality by using a consent manager. a consent manager will comply with the restrictive / initial opt out requirement of GDPR. following is a link example for installing Osano. you might want to 'hire' a new legal department. the solution was not to 'turn off' all cookies. the solution is to install a CMP. [https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1682419583.0,
        "title": "Cookie consent implementation in GTM",
        "author": "Des1re_DK",
        "id": "12yfnza",
        "selftext": "I've setup the Cookie Information variables and triggers in GTM and applied the \"cookie\\_cat\\_statistic\" to the GA4 config tag and the UA tag and the \"cookie\\_cat\\_marketing\" to the facebook pixel.\n\nWhen I'm testing in GTM Preview Mode, my GA4 events are still being triggered (not the ga4 config tag, UA tag or Facebook pixel tag) when I'm choosing \"neccessary cookies\".\n\nBut my GA4 events (add\\_to\\_cart, view\\_item etc) are still being triggered. The **GA4 events are setup with the GA4 config tag in the tag settings.**\n\nAre these events still being sent to GA4, or will the **cookie\\_cat\\_statistic variable in the GA4 config tag** block this?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/12yfnza/cookie_consent_implementation_in_gtm/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If the tags are triggering they are being sent. Check your network tab in developer tools and you will see the outgoing requests. It doesn't matter that the config tag is blocked if your other events are not. The config tag just contains the initial information that is to be sent with an event that uses it. It doesn't block events (unless set up in a specific way).",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thanks!  \n\n\nI've implemented the cookie\\_cat\\_statistics for the GA4 event tags now and cookie\\_cat\\_marketing for my facebook pixel now, but my \"users in last 30 minutes\" are not dropping. Why is that?",
                "author": "Des1re_DK",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1651157328.0,
        "title": "Reliability of creating and setting a cookie in GTM?",
        "author": "UniqueNoise1494",
        "id": "udwqik",
        "selftext": "Hi! We have two separate websites on different domains and want to track whether a user is a visitor/member to one via a cookie , so we can use that to influence their experience on the other site. Currently, I have GTM setting a cookie based on whether the user has visited certain pages but I'm tracking the effectiveness of this with a combination of events in GTM and Google Analytics and there looks like a 10% error. I'm fairly new to both GA and GTM so it could be either errors on GTMs side or GAs side. I was wondering if anyone had any experience with setting cookies in GTM and if you think this is a safe way to set the cookie?\n\nEDIT: The sites are on subdomains",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/udwqik/reliability_of_creating_and_setting_a_cookie_in/",
        "num_comments": 9,
        "comments": [
            {
                "body": "How are you reading a cookie set on site A in site B? That very much much goes against the security model of cookies.\n\nEdit: in the Inspector you will only see cookies set with the domain of the currently shown website.\n\nYou can send a parameter in the link from site A to B, and then drop a cookie on site B. Is that what you are doing?\n\nIn answer to your actual question though, I've not had problems with reading or writing cookies from GTM. They seem to behave as expected.",
                "author": "spiteful-vengeance",
                "score": 2
            },
            {
                "body": "Why wouldn't you just set up GA cross domain tracking since that sounds like what you're trying to do?",
                "author": "dirtymonkey",
                "score": 1
            },
            {
                "body": "site A is a subdomain of site B so the cookie is there. and thank you for your reply - good to know!",
                "author": "UniqueNoise1494",
                "score": 1
            },
            {
                "body": "It is set up but I'm questioning the best way to track whether the cookie is getting set correctly. The cookie gets set if they visit site A, so to test it, I created a dummy element on site B that only shows if this cookie from site A is set. I'm then sending events from GTM to GA that saw which element on site B is shown. I segment this report based on whether the user visited site A then site B. It just seems like there should be a better way to test this.",
                "author": "UniqueNoise1494",
                "score": 1
            },
            {
                "body": "Oh okay. Your initial description seemed to suggest they were in completely different domains, which cookies won't work across.\n\nAs long as you're setting the domain of these cookies to the top level there shouldn't be any problem using GTM. A top level domain will allow you to read it in the subdomains.\n\neg domain=mydomain.org",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "You could just check the cookies in your developer console.   Type document.cookie and hit enter.\n\nThis article does a better job of explaining cross domain tracking than I can enter into a comment.  https://www.analyticsmania.com/post/google-analytics-cross-domain-tracking-with-google-tag-manager/",
                "author": "dirtymonkey",
                "score": 1
            },
            {
                "body": "Yeah I could hav explained the situation better. Do you have any thoughts on how you would test the cookie is getting set correctly?",
                "author": "UniqueNoise1494",
                "score": 1
            },
            {
                "body": "Just check in the Inspector.\n\nIt's usually under the Application tab > Cookies or something like that.\n\nThey should appear like any other committee you create with JS.\n\nhttps://www.cookieyes.com/blog/how-to-check-cookies-on-your-website-manually/",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "Yes I'm able to check for my individual cookie - but I mean for everyone else. I want to check not necessarily that cookie is getting set because I've set up an event in GTM to check that, but I want to verify that it is only getting set after they visit a certain page.",
                "author": "UniqueNoise1494",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1671798793.0,
        "title": "Do you know if these cookies (_ga_EJ7D14J32Z and _gcl_au) are okay to fire before accepting the cookies? I mean is this GDPR conform?",
        "author": "Ill-Growth230",
        "id": "zte6es",
        "selftext": "Thanks for any tips!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/zte6es/do_you_know_if_these_cookies_ga_ej7d14j32z_and/",
        "num_comments": 2,
        "comments": [
            {
                "body": "It's *not* compliant. The relevant part of the law covers *any* use of browser data storage, which includes cookies, local storage and session storage.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Pretty sure a user has to accept cookies before you drop any cookie.",
                "author": "NHRADeuce",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1666513591.0,
        "title": "Cookie Consent Management - need help with some basic concepts",
        "author": "griz_fan",
        "id": "ybc641",
        "selftext": "I'm struggling with what might be a very basic concept on how cookie consent management platforms (CMPs) work in conjunction with GTM, so I'm hoping someone here can help clear things up for me.\n\nI've used CMPs like OneTrust or CookieYes for GDPR-compliant cookie consent management, but I've always done this in conjunction with GTM, by setting trigger conditions that look to the first-party cookie set by the CMP to see if consent has been provided and only then firing the tag. \n\nWhere I get confused is that most of these CMPs also claim to work simply by deploying their JavaScript code to the website. This is where I get confused and could use some help. Here's what I think is happening; the CMP JavaScript code has a way to disable functionality in 3rd party tracking tag code, preventing that code from setting any cookies. This would require the CMP code to fire first, and would also require the CMP code to correctly identify and disable any subsequent code that could set a cookie. Am I correct in my understanding?\n\nIf so, this sounds like an easy to deploy process, but not very robust or performant, or am I missing something? \n\nthanks!",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/ybc641/cookie_consent_management_need_help_with_some/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Like you, I have dealt with consent management only within GTM. That being said, I have seen how some of them operate when there are hardcoded tags / scripts on the page that also need to be controlled.\n\nThere's usually an \"automatic\" mode, were the CMP script identifies scripts on the page and effectively blocks them from firing without consent.\n\nThe alternate is a \"manual\" mode, where you need to add attributes to the <script> HTML element to identify what (if any) specific consent is required and you also generally will change the script type to \"text/text\" (as opposed to <script type=\"application/javascript\">. The CMP will then handle dynamically changing this if it decides consent is present.\n\nIn general, I tell clients \"no hardcoded scripts. We need everything to be in GTM\" and also push to implement Google Consent Mode, because this is useful in terms of maintaining consent management without worrying about random scripts appearing as well as theoretically providing the balance of respecting user privacy whilst still collecting some data that can be useful.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Hey, we are happy that you are using CookieYes! Your understanding of how CMPs work with GTM is quite spot on.                                                                                                           For any help with GTM implementation for CookieYes, you can check out these guides:\n\n[Google Consent Mode with CookieYes](https://www.cookieyes.com/documentation/implementing-google-consent-mode-using-cookieyes/?ref=reddit)\n\n[Block third-party cookies with GTM](https://www.cookieyes.com/documentation/block-third-party-cookies-with-google-tag-manager-and-cookieyes/?ref=reddit)\n\nWe’d like to also point out that CookieYes allows you to block loading from a particular URL by adding a URL pattern for a cookie.                                                                                  If you have any further questions or concerns, please feel free to write to [support@cookieyes.com](mailto:support@cookieyes.com)",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "Thanks for the info. I also take the approach of making sure 100% of all tags/scripts go through GTM. I found an implementation article from CookieYes describing how their process works outside of GTM, where the instruct to add \"attribute “data-cookieyes” to cookie-setting script tag\" so their JavaScript can directly control scripts outside of GTM. \n\nI have a client who has an older site running on an in-house system, where all the original developers were replaced by off-shore devs, so no one really knows how some tags get set. Most are in GTM, and I think I've found the remaining. The devs are hesitant to touch any of the legacy code and move those script to GTM, so if I'm unable to talk them into doing things the right way, at least there's a fallback option.",
                "author": "griz_fan",
                "score": 2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1656638175.0,
        "title": "Showing cookie consent window based on geolocation",
        "author": "ChopperDave85",
        "id": "voo8d3",
        "selftext": "I have Google's GTM cookie consent manager implemented on our website, a company with locations in the US and Europe. As you would expect, since adding consent controls I've seen a large dip in traffic and other metrics in both Universal Analytics and GA4.\n\nDoesn't make for great conversations with my bosses when they ask about website metrics and effectiveness of campaigns with UTM tags.\n\nSo what I'm wondering is can I set up something to read a user's geolocation, then have the consent window not appear if they are in a country that doesn't require it, and appear if they're in a country under GDPR. Of course if the user is under GDPR, I'd still like to have their info blocked or removed if they don't accept.\n\nIs this something that can be done?\n\nJust some background info: I'm not a developer, coding isn't my strong suit. Most of our GTM setup was done by our web developers, but I'm trying to save some cash since we're a bit over budget for the year. Should I even try to do it myself if possible?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/voo8d3/showing_cookie_consent_window_based_on_geolocation/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Short answer is yes.\n\nThe longer answer is completely dependent on your technical architecture and infrastructure (as it exists today, and your willingness to change it)",
                "author": "bradatlarge",
                "score": 1
            },
            {
                "body": "At a city level IP geolocation isn't 100% accurate (my analysis suggests about 85% for our particular situation). \n\nI don't know if that translates to country level, but I'm willing to bet that while it's probably not as bad, it's not 100% either.\n\nBecause we're crossing into legal territory I would be asking whether even 99% accuracy is sufficient for this.\n\nI come from a country where GDPR isn't a requirement, but I see these pop-ups all the time. I assume these companies have simply gone down the path of \"ask everyone\", and I wonder if that's because they can't risk missing a few people from GDPR countries.",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "Thanks, what kind of arch and info changes might it take? I do have hreflangs in the mix to point to their local page already if that gives some insight.\n\nI'm open to changing things up.",
                "author": "ChopperDave85",
                "score": 1
            },
            {
                "body": "I see. I'm sure VPNs add a bit of a headache to the mix as well. About 80% of the traffic is from the US where I'm located, so we're missing out on a large number of the vanity metrics that give the CEO a warm & fuzzy feeling. CCPA will become a factor, but if I can do country-based, state level shouldn't be that difficult for me to figure out.",
                "author": "ChopperDave85",
                "score": 1
            },
            {
                "body": "You could go at this a variety of ways. Using a cookie consent solution that supports geo location via a CDN might be your least cost of implementation.",
                "author": "bradatlarge",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1648629537.0,
        "title": "Does every event need a cookie consent trigger or do I just need it once with the analytics tool integration?",
        "author": "LeBokLe",
        "id": "ts1w19",
        "selftext": "Basically the question in the title. \n\nWhen I have an event, which is dependent on the users cookie settings, does that need a cookie consent trigger (like \"Analytics cookie activated\").\n\nOr is it enough when I add this trigger only once to the analytics tool integration (like Google Analytics)? As far as I know, this should work, since even though an event might be triggered, nothing gets sent to Google Analytics, right?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/ts1w19/does_every_event_need_a_cookie_consent_trigger_or/",
        "num_comments": 6,
        "comments": [
            {
                "body": "I think it mostly depends on the CMP you are using and on the tag.\n\nFor instance, if I have the facebook base pixel set in one tag, and all the other facebook standard events in separate tags, I would take care only of the base pixel. (same for LinkedIn).\n\nAbout Google Tags, I usually let the consent mode take care of everything (at least if I am with Cookiebot or Cookiepro, I am having issues with other platforms)",
                "author": null,
                "score": 1
            },
            {
                "body": "For Google Analytics, it's enough to use Consent Mode in the GA4 tag only. But for all non-Google sources (Facebook, linkedIn,...) I would use it on each and every event, not only on the base pixel.\n\nCan indeed vary from CMP to CMP but usually it's pretty well documented.",
                "author": "Podbyrin92mm",
                "score": 1
            },
            {
                "body": "It will work either way but consent mode on each event is a bit more strict.\n\nYou'll see notifications too before you submit a new version of your container that some tags require additional consent so it depends how far you want to take things.",
                "author": "Podbyrin92mm",
                "score": 1
            },
            {
                "body": "Wait, now I'm confused. u/Podbyrin92mm says \n\n>I would use it on each and every event, not only on the base pixel.\n\nbut you\n\n>I would take care only of the base pixel.\n\nWhat is it now?",
                "author": "LeBokLe",
                "score": 1
            },
            {
                "body": "Thanks, exactly what I was looking for. \n\nHow can this be done properly? Does that mean I have to create a trigger group for every single event which need cookie consent? Because when using multiple triggers within an event they all have an OR operator, which would not work.",
                "author": "LeBokLe",
                "score": 1
            },
            {
                "body": "I think it depends on the implementation but either way is ok.\n\nI usually check for consent in the base facebook pixel, because this is the one setting the facebook cookie. For instance this will set the cookie and will send a pageview event.\n\n<!-- Facebook Pixel Code -->  \n<script>  \n  !function(f,b,e,v,n,t,s)  \n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?  \n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};  \n  if(!f.\\_fbq)f.\\_fbq=n;n.push=n;n.loaded=!0;n.version='2.0';  \n  n.queue=\\[\\];t=b.createElement(e);t.async=!0;  \n  t.src=v;s=b.getElementsByTagName(e)\\[0\\];  \n  s.parentNode.insertBefore(t,s)}(window, document,'script',  \n  'https://connect.facebook.net/en\\_US/fbevents.js');  \n  fbq('init', '{your-pixel-id-goes-here}');  \n  fbq('track', 'PageView');  \n</script>  \n<noscript>  \n  <img height=\"1\" width=\"1\" style=\"display:none\"   \nsrc=\"https://www.facebook.com/tr?id={your-pixel-id-goes-here}&ev=PageView&noscript=1\"/>  \n</noscript>  \n<!-- End Facebook Pixel Code -->\n\nLet's say that I blocked the above code due to missing consent, even if I fire this event no cookie will be set because the event needs the above code to be executed.\n\nfbq('track', 'Purchase', {value: 0.00, currency: 'USD'});\n\nu/Podbyrin92mm solution is indeed cleaner than mine, because console errors will be avoided.\n\n(not native english, I hope it's clear)\n\nPersonally, I love cookiebot how it manage consent with google tag manager. I can just set ad\\_storage as additional required consent without messing too much with the triggers.",
                "author": null,
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1632417370.0,
        "title": "Which trigger leaves time for cookie to get assigned?",
        "author": "itsJ92",
        "id": "ptzyua",
        "selftext": "Hello, I’m fetching the value of a cookie with a 1st-party cookie variable that I push into the data layer. My issue is that if no cookie is assigned already, the trigger DOM-ready fires before the cookie can be assigned. \n\nWhich trigger should I use to counter this issue?\n\nEdit: I have to push the value of the cookie with GTM for the client to access it with something else than GTM.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/ptzyua/which_trigger_leaves_time_for_cookie_to_get/",
        "num_comments": 8,
        "comments": [
            {
                "body": "When you set the cookie, also push an event to the data layer to fire the cookie reading tag. Better still combined the different parts into the same code.",
                "author": "rustyWhippet",
                "score": 2
            },
            {
                "body": "Why do you push the cookie value into the dl instead of using a 1st party cookie variable?",
                "author": null,
                "score": 1
            },
            {
                "body": "A client needs that data in the DL for something outside of GTM (3rd party). I’m using GTM to push the data, using a 1st party cookie variable to fetch and push it into the DL using a custom HTML tag.",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "Ah so you have a tag that fires on dom ready and writes the content of the cookie variable into the datalayer? And sometimes there is no cookie on dom ready but sometime later? \n\nTypically the last gtm event that happens on a page is window loaded, so maybe using this instead of dom ready could fix your problem?",
                "author": null,
                "score": 1
            },
            {
                "body": "Exactly that. I thought about it too and tried, but sometimes the cookie is still not assigned. I’m really breaking my head over this 😅",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "And how is the cookie set? Maybe you could have a dl push in the code that writes the cookie?",
                "author": null,
                "score": 1
            },
            {
                "body": "Trust me it’s been mentioned and suggested lol",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "Well tbh in that case I‘d tell the client that this is as good as it gets and if they want it better they have to ad that dl push logic",
                "author": null,
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1666224324.0,
        "title": "Trying to read a cookie on a different cookie domain using Google Tag Manager",
        "author": "misspinkxox",
        "id": "y8inam",
        "selftext": " My cookie domain is .mywebsite.com\n\nI also have cookies stored on the domain www.mywebsite.com\n\nI am trying to get Google Tag Manager to \"read\" a cookie on \"www.mywebsite.com\" in order to pass to Google Analytics.\n\nIs this possible?\n\nUsing the cookie variable, GTM is not able to read the cookie name.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/y8inam/trying_to_read_a_cookie_on_a_different_cookie/",
        "num_comments": 0,
        "comments": []
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1641860997.0,
        "title": "Cookies consent - current state in custom HTML as variable?",
        "author": "frosty22cz",
        "id": "s0zavz",
        "selftext": "Hi,\n\nI have cookie consent in GTM and every built-in tag work well (Analytics, etc). I know that I can make condition for \"**Custom HTML**\" via \"**Require additional consent for tag to fire**\" but I need add custom HTML as:\n\n`<script type=\"text/javascript\">` \n\n`var xyzSymbol = {{Symbol of order}};` \n\n`var xyzPrice = {{Total price of order}};` \n\n`var hasAdStorageConsent = ????? // true or false if has user allowed \"ad_storage\"` \n\n`</script>`\n\n`<script type=\"text/javascript\" src=\"//www.xyz.cz/rs/static/rc.js\"></script>`\n\nDoes exists a variable with current ad\\_storage state? Or has a callback for it? or something etc.\n\nThank you for any help.",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/s0zavz/cookies_consent_current_state_in_custom_html_as/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Simo (as always) has the answer: [https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#check-consent-state](https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#check-consent-state) and [https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#listen-for-changes-in-consent-state](https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#listen-for-changes-in-consent-state)",
                "author": "MediaWellDone",
                "score": 1
            },
            {
                "body": "Not sure if I understand your question correctly, but you can capture the consent using the gtag API.\n\nIt would look something like this:\n\n`window.dataLayer = window.dataLayer || [];`  \n`function gtag() { window.dataLayer.push(arguments); }`  \n`gtag('consent', 'default', {`  \n  `ad_storage: 'denied',`  \n  `analytics_storage: 'denied',`  \n  `wait_for_update: 500,`  \n  `region: ['US-CA', 'FI']`  \n`});`\n\nAfter the intial consent, you can use the \"update\" command to change the consent. This would look like the following:\n\n`gtag('consent', 'update', {`  \n  `ad_storage: 'denied',`  \n  `analytics_storage: 'granted'`  \n`});`\n\nYou can check the option \"require additional consent for tag to fire\" for non-google tags. Then you can fill in the consent options that are required.\n\nMaybe it helps you.",
                "author": "bubbleblub17",
                "score": 1
            },
            {
                "body": "Thank you, but I've already solved that part. The consent is updating correctly in Google Tag Manager. I am looking for a solution for the \"Custom HTML\" tag to which I need to pass the code that contains the consent status.",
                "author": "frosty22cz",
                "score": 1
            },
            {
                "body": "i only know of the option, to check the custom html tag wit additional consent, but im not sure if an in-html solution exists.",
                "author": "bubbleblub17",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1638663520.0,
        "title": "Cookie content across two domains through gtm.",
        "author": "Free_Morning_2643",
        "id": "r930tu",
        "selftext": "Hello guys, i am trying to solve problem for my client. He build angular app which is using two domains. I created mine cookie consent in JavaScript. I have on both domains same gtm. Is there possibility to store information about types of consent in gtm. I tried I frame but it’s security risk. If you could point me in some direction it will be awesome.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/r930tu/cookie_content_across_two_domains_through_gtm/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Sounds like you’re trying to find a work around to browser restrictions on 3rd party cookies. Is that correct?\n\nFrom my experience, you’re not going to have much luck and I would advise your client to figure out a different path forward that isn’t reliant on anything client-side",
                "author": "HoosierDaddy3",
                "score": 3
            },
            {
                "body": "Look at how Google analytics is doing cross domain tracking, link decoration, etc",
                "author": "pixgarden",
                "score": 3
            },
            {
                "body": "Completely. It’s a security risk so you can have the cookies apply to multiple domains. Otherwise someone could maliciously say “accepting this cookie gives acceptance to every domain out there” kinda deal.\n\nYou’re going to see cookies moved away from and limited more and more. So even if it was possible to solve this by going the route you’re trying, it’d be for a short time and then you’d be back to creating a workaround again soon enough.",
                "author": "TheMacMan",
                "score": 3
            },
            {
                "body": "I assume you mean 2 completely different domains and not a subdomain situation?\n\nIn which case, no, you're not going to be able to do that due to browser security restrictions. A cookie can only be written to one domain (and its subdomains) by design, and it has to be written from that domain.",
                "author": "spiteful-vengeance",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1639484368.0,
        "title": "GDPR cookie consent implementation.",
        "author": "KakosNikos",
        "id": "rg6are",
        "selftext": "The cookie plugin in a friend's woocommerce, load the GTM snippet AFTER the user consent to cookies (the page reloads). As a result (I think) the traffic is counted as direct traffic instead of organic or cpc. \n\nWhich is the right way to implement this, so he can have the correct acquisition metrics?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/rg6are/gdpr_cookie_consent_implementation/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Reloading the page should not change the `document.referrer`, so the source shouldn't be lost.",
                "author": "MariusGMG",
                "score": 1
            },
            {
                "body": "What cookie plugin are they using?",
                "author": "HawkeyMan",
                "score": 1
            },
            {
                "body": "Agreed. try creating a pseudo-user hit through the measurement protocol hit builder tool and recreate the steps while reviewing in the debug view; check the source generated within the hit parameters.",
                "author": "JoeFuryAnalyics",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1601571515.0,
        "title": "Triggering a pageview when a user consents to cookies with GTM",
        "author": "xgodgorilla",
        "id": "j3chrd",
        "selftext": "I have set up Cookiebot for an ecommerce site and also have setup Pageviews when consent is given (which works only when the user refreshes the page or goes on to the next one). However, the page on which the user accepts his cookies isn't being tracked. Is there a way to trigger a pageview on the same page where the user accepts the cookies? \n\n&#x200B;\n\nI believe that this is a common problem, but I can't find information about this online or I am searching the wrong way. Any ideas will be helpful, thanks.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/j3chrd/triggering_a_pageview_when_a_user_consents_to/",
        "num_comments": 8,
        "comments": [
            {
                "body": "That's kind of the point right? Don't track them until you get consent?\n\nThe best you can do is to have another trigger that sends a pageview when they accept it.",
                "author": "xtothel",
                "score": 2
            },
            {
                "body": "Cookiebot should already send an event to the datalayer once consent is given. They also provide a consent listener which is described on their support page.\n\nYou need a trigger based on either the automated event or set up the event listener.\n\nThat trigger can then fire your page views.",
                "author": "chieldeleeuw",
                "score": 2
            },
            {
                "body": "Try using a trigger group that fires when the following conditions have occurred:\n1 - a pageview has been pusehed to the datalayer before the consent has been granted\n2 - The user has granted consent (base on dataLayer push from consent manager or event listener)",
                "author": "rxavas",
                "score": 2
            },
            {
                "body": "Yep, thats what im looking for. I can track all the other pages and a refresh būt i cant seem to track the page on which the user consents. So i am looking for a way. How can i trigger another pageview when the page is already viewed?",
                "author": "xgodgorilla",
                "score": 1
            },
            {
                "body": "This.",
                "author": "TowersOfToast",
                "score": 1
            },
            {
                "body": "You āre actually right. I missed this before. The tag is firing, thanks.",
                "author": "xgodgorilla",
                "score": 1
            },
            {
                "body": "Thanks for the suggestion. There are Events that are being pushed to gtm after the click on accept, so i used those to track the pageview.",
                "author": "xgodgorilla",
                "score": 1
            },
            {
                "body": "Well, you'll have to somehow push an event to the datalayer when a user accepts. Then, create a custom event trigger in GTM matching that datalayer event name and create a pageview tag based off of that.",
                "author": null,
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1629383236.0,
        "title": "How can I track if someone is a potential customer or existing customer? There are existing cookie tags sent up but I can’t make sense of it and there are no documentations",
        "author": "wanderouswanderer",
        "id": "p7fw8s",
        "selftext": "",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/p7fw8s/how_can_i_track_if_someone_is_a_potential/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Your post is not very specific, what do you mean with cookie tags? Tags where cookies are set?\nBasically you need to find out a way to tell them apart from the code or the info from your own site. If a logged in user has a cookie, then use that as part of the trigger (or exception, whatever the case may be).\nFor example, you could fire a GA tag for all users except the ones that have the user ID cookie set on their browser, and another one that only fires when the user ID is present.\n\nDon't know if that helps much but you'd need to provide more detail about what you're looking for.\n\nGood luck!",
                "author": "mrgelk",
                "score": 1
            },
            {
                "body": "My end goal is to find an effective way to differentiate prospects vs. current customers and to report on their activities in GA - how to handle it now while cookies are still available. And how to handle it after cookie depreciation. \n\nThe cookie tag is really a setup someone did in the past but has no documentation or notes what it’s for. It’s a JS with a script that sets a cookie value based on a lookup table of page URLs. URLs as the input, a cookie value as the output. - I partially want to figure out what it is but it’s a headache I probably don’t need.",
                "author": "wanderouswanderer",
                "score": 1
            },
            {
                "body": "I'm guessing they set cookies that store where in the site someone is browsing? Anyways, don't know if it's relevant in this context.\n\nWhat I would do is talk to the developers or whoever built the site and ask how they set apart logged in traffic from not logged in traffic. As simple as that.\n\nNo worries about the world without cookies at the moment because these are first party cookies, which won't go away soon at least. Safari's ITP deletes cookies after seven days, if someone comes back, they are reset, if they come afterwards, they still need to log in and while they are logged in they will have their users id cookie. (This is an example, doesn't mean on your site it's done exactly this way).\n\nIf this exists, then you have to implement stuff as said in my previous comment. If not, you would have to find out how sessions and cookies and users are handled in your site to be able to find what sets a registered user from a non-registered one apart.\n\nHope this kind of helps.",
                "author": "mrgelk",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1631297489.0,
        "title": "I have created a custom dimension called \"city\" in GA. The user has to pick a city when they come to the website and the value is stored in the cookie with the name \"city\". What's the best way of picking up the value and sending it to GA through GTM? Thanks",
        "author": "ashkanahmadi",
        "id": "plqexs",
        "selftext": "",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/plqexs/i_have_created_a_custom_dimension_called_city_in/",
        "num_comments": 1,
        "comments": [
            {
                "body": "What they said - and if you use the GA settings variable for the property ID, add your city custom dimension as using this new cookie var in this GA settings variable - that way the CD will be sent with every GA page view and event you have, without having to manually add it to the tag each time ✌️",
                "author": "htmlallthethings",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1640263329.0,
        "title": "Cookie Consent Triggers Not Stopping Page View Tags Firing",
        "author": "Naoise90",
        "id": "rmuw2g",
        "selftext": "Hi, I'm running into an issue on GTM where I've set up cookie consent triggers for GDPR Cookie Consent plug in on WordPress site. Most tags are firing as expected, however, a few tags relating to  Page View triggers are showing up in the Container Loaded section of the debugger. Why is this and how can I ensure they only fire when the relevant cookie consent is selected?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/rmuw2g/cookie_consent_triggers_not_stopping_page_view/",
        "num_comments": 0,
        "comments": []
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1601483249.0,
        "title": "User ID custom dimension: not all User ID's are sent to Google Analytics through 1st Party Cookie in GTM.",
        "author": "zajac_23",
        "id": "j2peqz",
        "selftext": "Hi,\n\nSo whenever user signs up on my platform, they are given a user ID by backend database, and for as long as they are logged in, that user ID is visible in GTM as a 1st party cookie variable. I've set a hit-based user ID custom dimension in GA (since I want to track only logged in users - if it wasn't hit based, it'd still track user ID after logout), and it actually works, the user IDs are visible as variables in preview mode and being sent to GA as a custom dimension.\n\n**But apparently not all of them.** I've been comparing my backend database with GA and it turns out that there are quite a lot of user IDs in the backend database that are not present in the GA custom dimension I've created. And I can't really get why.\n\nDo you think that you'd be able to help here? If so, please hit me with any questions, I'll answer as detailed as I can.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/j2peqz/user_id_custom_dimension_not_all_user_ids_are/",
        "num_comments": 4,
        "comments": [
            {
                "body": "It's fairly new system so I can give you stats for last week (21-27 Sep):\n\nGoogle analytics: 15 400\n\nbackend database: 28 100",
                "author": "zajac_23",
                "score": 2
            },
            {
                "body": "Sure, but as said, it's first party cookie and applies only to logged in users. Do you think that this might be the reason considering my answer above about almost 50% ratio of missing IDs in GA?\n\nExtra question: are you saying that if I configure it not as a 1st party cookie, but somehow else (data layer for example), then the situation may change?",
                "author": "zajac_23",
                "score": 2
            },
            {
                "body": "What's the % missing in say 30 days.",
                "author": "s14sr20det",
                "score": 1
            },
            {
                "body": "Since it is cookie based, the solution would depend on the user's cookie retention settings.",
                "author": "xtothel",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1603798080.0,
        "title": "GTM inside iframe Same-Site cookie",
        "author": "The_Undercover_Auror",
        "id": "jizcrf",
        "selftext": "I'm using GTM in my website inside an iframe, do I have to include cookieFlagsecure;samesite=none? It works for me not sure if it'll fail for others. Not sure if I should do it and why if so",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/jizcrf/gtm_inside_iframe_samesite_cookie/",
        "num_comments": 1,
        "comments": [
            {
                "body": "Better implement this [https://www.simoahava.com/analytics/cookieless-tracking-cross-site-iframes/](https://www.simoahava.com/analytics/cookieless-tracking-cross-site-iframes/) and don't rely on cookies within the iframe",
                "author": "fedorovicius",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1583428454.0,
        "title": "GDPR and cookie expiration settings",
        "author": "AronoeleS",
        "id": "fdygkr",
        "selftext": "Hi,\nI was reading this article https://www.formations-analytics.com/google-tag-manager-google-analytics-et-rgpd/ \n\nand it said:\n\n\"The duration of 13 months is the maximum legal duration of storage a cookie and this from its creation. However, the expiration of GA cookie is 24 months since the last visit\".\n\nand I have some doubts about cookie expiration and GDPR directives. \n\nGoogle renews cookie users expiration date each time the user visit the website, is it right? But the cookie consent banner should be reappear to the user after 13 months from the first visit, this means that it's necessary rewrite default GA cookie behaviour, or not?\n\nThank you,\nEleonora",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/fdygkr/gdpr_and_cookie_expiration_settings/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Hi\n\nIf this is your concern, set the `cookieExpires` field to `33696000` (that's 13 months, or 13x30 days in seconds). Then set the `cookieUpdate` field to `false`, as that prevents GA from constantly updating the cookie value.\n\nBoth of these fields need to be set in *every single Google Analytics hit and tag that fires on the site* for the solution to work.\n\nSimo",
                "author": "sahava",
                "score": 1
            },
            {
                "body": "Great! Thank you Simo! :)",
                "author": "AronoeleS",
                "score": 1
            },
            {
                "body": "Another doubt :(\nIf I set cookieExpires and cookieUpdate field in every GTM tags, can these settings create conflict with \"data retention\" and \"reset on new activity\" GA settings?\n\nThank you 🙏\nEleonora",
                "author": "AronoeleS",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1760099052.0,
        "title": "LemonSqueezy chekout to Meta via SGTM and Cloudrun",
        "author": "az_basit",
        "id": "1o2zfph",
        "selftext": "Hello Everyone,   \nim stuck in a problem, im trying to setup Meta Capi using sGTM and cloudrun as a host,   \nurl shows 200 ok also can see log in console but it is not sending to meta how to fix this? \n\nData client is of stape. \n\nplease help me i'll be highly thankful. ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1o2zfph/lemonsqueezy_chekout_to_meta_via_sgtm_and_cloudrun/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Oh, I was talking about Google Chrome developers console network request status.\n\nIf you preview the sGTM container, do you see the events triggering and have the META tag configured and triggering?",
                "author": "krLMM",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check if the request is being blocked by the CSP. if you check the source or the cookie from the request it might be blocked by your browser, even with the 200 status",
                "author": "krLMM",
                "score": 1
            },
            {
                "body": "Check the basics before chasing edge cases. 200 OK just means your Cloud Run accepted the request - not that Meta received a valid event.\n\n   1. Verify your access token and pixel ID inside the event tag. Wrong token = silent drop.\n   1. In SGTM, open the event tag and check if “Send to Meta” trigger fires *after* client response, not before.\n   1. Add a GA4 test tag alongside to confirm event payload shape. Meta drops malformed `event_name` or `user_data`.\n   1. Check Cloud Run logs for outbound response codes from Meta - you want 2xx, not 400/403. Once you get a live “Event Received” in Events Manager, then layer in deduplication IDs and hashes.\n\n[The NoFluffWisdom Newsletter](https://NoFluffWisdom.com/Subscribe) has some practical takes on execution under noise that vibe with this - worth a peek!",
                "author": "Thin_Rip8995",
                "score": 1
            },
            {
                "body": "How to check, im not familiar with cloudrun \n\nwill be thankful if you help me in sorting,",
                "author": "az_basit",
                "score": 1
            },
            {
                "body": "also log showing req received how can that be send to meta?",
                "author": "az_basit",
                "score": 1
            },
            {
                "body": "nahh this is the most frustrating thing . Event isn't triggering. & not sending to meta. \n\nis there any other way? do I need to configure something else in cloudrun?",
                "author": "az_basit",
                "score": 1
            },
            {
                "body": "Ans to your these questions: \n\nPreview: nothing shows up in preview, nor in incoming request. \n\nIn cloud run logs it shows lemon sent hook 200ok but not transferred to meta. \n\nI'm using stape Io data client. what stopping from preview & transferring?\n\ndo I need to check anything in cloudrun!",
                "author": "az_basit",
                "score": 1
            },
            {
                "body": "You need to set a client side GTM that will trigger the event when it happens and transport it to the sGTM (via transport url). When you preview sGTM you should be able to see the event incoming and creating tags for meta CAPI to trigger.\n\nThere can be a set of things that don't work:\n1. the sgtm or gtm is blocked (by browsers, csp, consent)\n2. the sgtm wasn't configured properly\n\nif you want I can help you troubleshoot this and implement it, what's your site? For me to fix it I would need also GTM access and META access to verify, also the ability to do a test purchase",
                "author": "krLMM",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1759866611.0,
        "title": "Is this how I killed my site with a simple Server-side Tag?",
        "author": "KingStonk69",
        "id": "1o0p7ut",
        "selftext": "**1. Beginnings**\n\nIn less than a month, one of my site got all indexed pages removed from Google!\n\n**From 600 pages to 55 now:**\n\n[https://imgur.com/cvr5t4P](https://imgur.com/cvr5t4P)\n\n[https://imgur.com/NieQ1vT](https://imgur.com/NieQ1vT)\n\nIt started exactly on **09/11/25** (yeah this was maybe a foreshadowing).\n\nNo warnings. No manual Actions. No apparent attacks.  \nNot just some pages but **all of them disappearing from the SERP.**\n\n  \n**2. The crime**\n\nThis Site had a GTM Server-Side container.\n\nI had the idea of passing some data I need through from the web container to the server-side container.\n\nSo I used a tag from the gallery, the '**Datatag from Stape.io**' as the provide many useful tags for server-side tagging :\n\n[https://imgur.com/chkJS2x](https://imgur.com/chkJS2x)\n\n[The github page for this tag.](https://github.com/stape-io/data-tag)\n\nThis tag was published exactly on 09/11.\n\nI was thinking this is just sending some datas to my ServerSide container.\n\nBut I in the tag details it was doing more than that.\n\n\n\n**3. The evidence**\n\nAside form the entire site being desindexed at a rapid pace, I noticed something weird on the Googlebot crawling reports.\n\nThe type of files crawled were odd. Usually the main file type is Html.\n\nBut now it was '**Other file type**' :\n\n[https://imgur.com/sn0qpnF](https://imgur.com/sn0qpnF)\n\nAnd we can see that the exact moment it rose :\n\n[https://imgur.com/T29JoRz](https://imgur.com/T29JoRz)\n\nWas when the html file type stopped being crawled.\n\n[https://imgur.com/36f90Md](https://imgur.com/36f90Md)\n\nAnd the date is matching when I published the Datatag.\n\nAnother evidence is form that moment, Google refused to crawl the website again (espcially **Google Smartphone Bot**).\n\nThe moment I removed the tag, the pages could be submitted again.\n\n  \n**4. The verdict**\n\nI am still waiting (and praying) the pages will get indexed again.\n\nIs this the real culprit?\n\nI went back to read the details of the Datatag and it can inject third-party cookie and make 'GET' requests to every URLs.\n\nIs this the cause? External scripts toying with **HTTP headers** and sending an alarming message to Google Bot?\n\nWhat's our take?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1o0p7ut/is_this_how_i_killed_my_site_with_a_simple/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Nope, coz of this poxy Online Safety Act.",
                "author": "ThePalsyP",
                "score": 4
            },
            {
                "body": "In UK and seems your screenshots not available in my region but sounds like invalid html element in <head>",
                "author": "Snusetvb",
                "score": 2
            },
            {
                "body": "Can't you just raise a ticket with them?",
                "author": "benl5442",
                "score": 2
            },
            {
                "body": "That's very odd, I've no idea why it happened. I don't think it's the permissions for third-party scripts, almost all tag templates from the library ask for it and usually it's benign.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "sounds like you accidentally triggered behavior that looked malicious to googlebot. that stape datatag likely modified responses or headers so crawlers stopped recognizing your html as normal pages.\n\ndo this fast:\n\n* remove the tag permanently and republish the clean container.\n* clear cache and confirm your pages return 200 html, not application/json or mixed headers.\n* check server logs for user-agent “googlebot” and verify it’s receiving full html payload.\n* request recrawl via search console for 10 key urls. if they reindex within 7–10 days, you’re safe.\n\navoid any tag that intercepts html responses or injects third-party cookies server-side unless you’ve sandboxed it first. googlebot treats altered responses like cloaking.",
                "author": "Thin_Rip8995",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You cannot access [https://imgur.com](https://imgur.com) ?",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "Yes - feels like it for me as well. \nWould be very strange if SST setup would cause this. I haven’t had this issue before in other SST setups. \n\n@OP. Can you validate your implementation of the datatag? You can always contact stape support. They were always happy to help in the couple of times I have contacted them.",
                "author": "CreativeClub",
                "score": 1
            },
            {
                "body": "Thanks for the detailed insight... I highly suspect this what happened.\n\nI alreday removed all tags et published a bcakup version of my container. Now Wait and see I hope to see the indexed pages go up again!",
                "author": "KingStonk69",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1757919741.0,
        "title": "Here's what we are doing following Safari GCLID - Google was ahead the whole time",
        "author": "History86",
        "id": "1nheyxz",
        "selftext": "Over the last two weeks my feed on both Linkedin and Reddit has been full of discussions ([example](https://www.reddit.com/r/ServerSideTagging/comments/1n84wab/safari_is_removing_click_tracking_parameters/)) about Safari's privacy updates breaking GCLID. What I haven't seen many people talk about is Google's response. They tried to fix it, broke it further, and are now quietly fixing it again.\n\n**Background:**\n\n1. Safari privacy changes killed GCLID reliability. Panic followed.\n2. Google introduced GBRAID/WBRAID as the \"privacy-safe\" alternative.\n3. Their own API didn't support what we needed:\n   * Enhanced Conversions for Leads couldn't work with GBRAID\n   * One-per-click counting couldn't be used with braid parameters\n   * Custom variables got blocked if braid was present\n\nResult: Our engineering teams built workarounds with dual upload systems and split pipelines while attribution gaps emerged.\n\nFor the sake of clarity, these are all the API conflicts we encountered and that now live in our documentation for future reference:\n\n|**Conflict Type**|**Conflicting Fields/Values**|**Error Message**|**Resolution**|\n|:-|:-|:-|:-|\n|**Click ID Conflicts**|`gclidgbraid` \\+|`VALUE_MUST_BE_UNSET`|Use only one click ID per conversion|\n||`gclidwbraid` \\+|`VALUE_MUST_BE_UNSET`|Use only one click ID per conversion|\n||`gbraidwbraid` \\+|`GBRAID_WBRAID_BOTH_SET`|Use only one click ID per conversion|\n|**Enhanced Conversions for Leads**|`gbraidwbraiduser_identifiers`/  +|`The field cannot be set., at conversions[0].user_identifiers`|`user_identifiers`Remove   field when using gbraid/wbraid|\n||`gbraidwbraid`/  + Enhanced Conversions for Leads|`VALUE_MUST_BE_UNSET`|Enhanced Conversions for Leads cannot use gbraid/wbraid|\n|**Conversion Action Type**|`gbraidwbraid`/  + One-per-click counting|`Conversion actions that use one-per-click counting can't be used with gbraid or wbraid parameters`|`MANY_PER_CLICK`Change to   counting|\n||Wrong conversion action type for Enhanced Conversions|`INVALID_CONVERSION_ACTION_TYPE`|`UPLOAD_CLICKS`Ensure conversion action type is|\n|**Custom Variables**|`gbraidwbraidcustom_variables`/  +|`VALUE_MUST_BE_UNSET`|`custom_variables`Remove   when using gbraid/wbraid|\n|**Enhanced Conversions for Web**|`gbraidwbraid`/  + Enhanced Conversions for Web|`CONVERSION_NOT_FOUND`|Enhanced Conversions for Web not supported with gbraid/wbraid|\n|**Temporal Conflicts**|`conversion_date_time` before click time|`CONVERSION_PRECEDES_EVENT`|Set conversion time after click time|\n||Click older than lookback window|`EXPIRED_EVENT`|Use conversion action with longer lookback window|\n|**Duplicate Conflicts**|`order_id`Same   for multiple conversions|`DUPLICATE_ORDER_ID`|Use unique order IDs|\n||Same click ID + conversion time + action|`CLICK_CONVERSION_ALREADY_EXISTS`|Adjust conversion\\_date\\_time or verify if retry|\n||Multiple conversions in same request|`DUPLICATE_CLICK_CONVERSION_IN_REQUEST`|Remove duplicates from request|\n|**Account/Access Conflicts**|Wrong customer ID for click|`INVALID_CUSTOMER_FOR_CLICK`|Use correct customer ID that owns the click|\n||Conversion action not found/enabled|`NO_CONVERSION_ACTION_FOUND`|Enable conversion action in correct account|\n||Customer data terms not accepted|`CUSTOMER_NOT_ACCEPTED_CUSTOMER_DATA_TERMS`|Accept customer data terms|\n|**Consent Conflicts**|`UNKNOWN`Setting consent to|`RequestError.INVALID_ENUM_VALUE`|`DENIED`Set to   if consent status unknown|\n|**Call Conversion Conflicts**|`always_use_default_value` = false for call conversions|`INVALID_VALUE`|Set to true for WEBSITE\\_CALL/AD\\_CALL types|\n|**Attribution Model Conflicts**|Invalid attribution model|`CANNOT_SET_RULE_BASED_ATTRIBUTION_MODELS`|`GOOGLE_ADS_LAST_CLICKGOOGLE_SEARCH_ATTRIBUTION_DATA_DRIVEN`Use only   or|\n\nKey Takeaways:\n\n* **gbraid/wbraid** cannot be used with Enhanced Conversions for Leads, Enhanced Conversions for Web, custom variables, or one-per-click counting\n* Only one click identifier can be used per conversion (gclid OR gbraid OR wbraid)\n* Enhanced Conversions for Leads requires `user_identifiers` field, which conflicts with gbraid/wbraid usage\n* Each conversion must have unique identifiers (order\\_id, click\\_id + time + action combinations)\n\nInterestingly enough, some of these error returns weren't intentional as outlined in Google developer documentation.\n\n**Now what's next?**\n\nGoogle recently [announced ](https://developers.google.com/google-ads/api/docs/conversions/upload-clicks)that GCLID + GBRAID can now be used together effective October 3rd.  This isn't just a Safari fix, it allows us to send much more contextual data than previously, giving us the infrastructure to rebuild conversion completeness instead of patching leaks.\n\nThen we found another new attribute, [session\\_attributes](https://developers.google.com/google-ads/api/docs/conversions/enhanced-conversions/leads#session_attributes) ([more documentation](https://support.google.com/google-ads/answer/16194756?sjid=7593866035188306243-EU)) - a privacy-safe way to give more context about each visit:\n\n* Campaign source (gad\\_source, gad\\_campaignid)\n* Landing page URL & referrer\n* Session start timestamp\n* User agent\n\nThese signals don't rely on cookies and can be captured via JavaScript helper or passed as key/value pairs into Offline Conversion Import.\n\nWhen click IDs are missing, Google's AI still has rich context to model from. More attributed conversions, better bid optimization, more durable setup for future privacy changes.\n\nThis was never just \"Safari broke GCLID.\" It's about how fragile most conversion architectures were. I believe Google is helping us out here, big time.\n\nBelow you can find a breakdown of the 7 code snippets that can guide you to capture these, either directly in your app or through google tag manager.\n\n    // 1. Capture Click Identifiers from URL\n    function captureClickIdentifiers() {\n      const urlParams = new URLSearchParams(window.location.search);\n      \n      return {\n        gclid: urlParams.get('gclid'),\n        gbraid: urlParams.get('gbraid'), \n        wbraid: urlParams.get('wbraid'),\n        gad_source: urlParams.get('gad_source'),\n        gad_campaignid: urlParams.get('gad_campaignid')\n      };\n    }\n    \n    // 2. Generate Session Attributes (Privacy-Safe Context)\n    function generateSessionAttributes() {\n      const clickIds = captureClickIdentifiers();\n      \n      return {\n        session_start_timestamp: Date.now(),\n        landing_page_url: window.location.href,\n        referrer: document.referrer,\n        user_agent: navigator.userAgent,\n        gad_source: clickIds.gad_source,\n        gad_campaignid: clickIds.gad_campaignid,\n        viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n        timestamp: new Date().toISOString()\n      };\n    }\n    \n    // 3. Enhanced Conversion Data Collection\n    function collectEnhancedConversionData() {\n      // Get user data from form or checkout\n      const email = document.querySelector('[name=\"email\"]')?.value;\n      const phone = document.querySelector('[name=\"phone\"]')?.value;\n      const firstName = document.querySelector('[name=\"first_name\"]')?.value;\n      const lastName = document.querySelector('[name=\"last_name\"]')?.value;\n      const postalCode = document.querySelector('[name=\"postal_code\"]')?.value;\n      const country = document.querySelector('[name=\"country\"]')?.value;\n      \n      return {\n        email: email ? hashUserData(email.toLowerCase().trim()) : null,\n        phone_number: phone ? hashUserData(phone.replace(/\\D/g, '')) : null,\n        first_name: firstName ? hashUserData(firstName.toLowerCase().trim()) : null,\n        last_name: lastName ? hashUserData(lastName.toLowerCase().trim()) : null,\n        postal_code: postalCode,\n        country_code: country\n      };\n    }\n    \n    // 4. SHA-256 Hashing for User Data (PII)\n    async function hashUserData(data) {\n      if (!data) return null;\n      \n      const encoder = new TextEncoder();\n      const dataBuffer = encoder.encode(data);\n      const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\n      \n      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n    }\n    \n    // 5. Store Conversion Data for Later Upload\n    function storeConversionData(conversionData) {\n      const clickIds = captureClickIdentifiers();\n      const sessionAttrs = generateSessionAttributes();\n      \n      const conversionPayload = {\n        // Click identifiers (can now use multiple together)\n        gclid: clickIds.gclid,\n        gbraid: clickIds.gbraid,\n        wbraid: clickIds.wbraid,\n        \n        // Conversion details\n        conversion_action: conversionData.conversion_action,\n        conversion_date_time: new Date().toISOString(),\n        conversion_value: conversionData.value,\n        currency_code: conversionData.currency || 'USD',\n        order_id: conversionData.order_id,\n        \n        // Enhanced conversion data\n        user_identifiers: conversionData.user_identifiers,\n        \n        // Session attributes for better AI modeling\n        session_attributes_key_value_pairs: sessionAttrs,\n        \n        // Conversion environment\n        conversion_environment: 'WEB',\n        \n        // Consent (required)\n        consent: {\n          ad_user_data: conversionData.consent?.ad_user_data || 'GRANTED',\n          ad_personalization: conversionData.consent?.ad_personalization || 'GRANTED'\n        }\n      };\n      \n      // Store in localStorage for server-side pickup\n      localStorage.setItem('pending_conversion', JSON.stringify(conversionPayload));\n      \n      // Or send directly to your conversion endpoint\n      sendConversionToServer(conversionPayload);\n    }\n    \n    // 6. Lead Form Conversion Tracking\n    function trackLeadConversion(formData) {\n      const userIdentifiers = collectEnhancedConversionData();\n      \n      const conversionData = {\n        conversion_action: 'customers/YOUR_CUSTOMER_ID/conversionActions/YOUR_LEAD_ACTION_ID',\n        value: formData.lead_value || 0,\n        currency: 'USD',\n        order_id: generateUniqueOrderId(),\n        user_identifiers: [userIdentifiers].filter(id => Object.values(id).some(v => v)),\n        consent: {\n          ad_user_data: getConsentStatus('ad_user_data'),\n          ad_personalization: getConsentStatus('ad_personalization')\n        }\n      };\n      \n      storeConversionData(conversionData);\n    }\n    \n    // 7. E-commerce Conversion Tracking\n    function trackPurchaseConversion(orderData) {\n      const userIdentifiers = collectEnhancedConversionData();\n      \n      const conversionData = {\n        conversion_action: 'customers/YOUR_CUSTOMER_ID/conversionActions/YOUR_PURCHASE_ACTION_ID',\n        value: orderData.total,\n        currency: orderData.currency || 'USD',\n        order_id: orderData.order_id,\n        user_identifiers: [userIdentifiers].filter(id => Object.values(id).some(v => v)),\n        consent: {\n          ad_user_data: getConsentStatus('ad_user_data'),\n          ad_personalization: getConsentStatus('ad_personalization')\n        }\n      };\n      \n      storeConversionData(conversionData);\n    }\n    \n    // 8. Utility Functions\n    function generateUniqueOrderId() {\n      return `order_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    \n    function getConsentStatus(consentType) {\n      // Check your consent management platform\n      // Return 'GRANTED' or 'DENIED'\n      return window.gtag && window.gtag.get ? \n        window.gtag.get(consentType) : 'GRANTED';\n    }\n    \n    function sendConversionToServer(conversionPayload) {\n      fetch('/api/google-ads/conversions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(conversionPayload)\n      }).catch(error => {\n        console.error('Conversion tracking error:', error);\n        // Retry logic or fallback storage\n      });\n    }\n    \n    // 9. Initialize on Page Load\n    document.addEventListener('DOMContentLoaded', function() {\n      // Capture and store click identifiers immediately\n      const clickIds = captureClickIdentifiers();\n      \n      if (clickIds.gclid || clickIds.gbraid || clickIds.wbraid) {\n        sessionStorage.setItem('google_click_ids', JSON.stringify(clickIds));\n        console.log('Google click identifiers captured:', clickIds);\n      }\n      \n      // Set up form submission tracking\n      const forms = document.querySelectorAll('form[data-track-conversion]');\n      forms.forEach(form => {\n        form.addEventListener('submit', function(e) {\n          const formData = new FormData(form);\n          const leadValue = form.dataset.leadValue || 0;\n          \n          trackLeadConversion({\n            lead_value: parseFloat(leadValue),\n            form_data: Object.fromEntries(formData)\n          });\n        });\n      });\n    });\n    \n    // 10. Example Usage\n    /*\n    // For lead forms:\n    <form data-track-conversion data-lead-value=\"50\">\n      <input name=\"email\" type=\"email\" required>\n      <input name=\"phone\" type=\"tel\">\n      <button type=\"submit\">Submit Lead</button>\n    </form>\n    \n    // For e-commerce:\n    // Call after successful checkout\n    trackPurchaseConversion({\n      order_id: 'ORDER_12345',\n      total: 299.99,\n      currency: 'USD'\n    });\n    */",
        "score": 15,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nheyxz/heres_what_we_are_doing_following_safari_gclid/",
        "num_comments": 9,
        "comments": [
            {
                "body": "We also tried patching it with GBRAID/WBRAID, but ran straight into the exact same conflicts you listed Enhanced Conversions not firing, custom variables breaking, and “VALUE\\_MUST\\_BE\\_UNSET” errors clogging logs. We had to spin up parallel pipelines just to keep uploads flowing, which was a maintenance nightmare.\n\nOnce Google started allowing GCLID + GBRAID together, it was like someone finally pulled the plug out of the drain. The gaps started shrinking, and adding session-level context was honestly the first time I felt like we weren’t just patching leaks but actually building something more durable.\n\nFor us, the biggest win so far has been ecommerce revenue data actually matching across GA4, Ads, and our backend without daily reconciliation. It’s not 100% perfect yet, but it’s night-and-day better than six months ago.",
                "author": "DigMundane5870",
                "score": 3
            },
            {
                "body": "Very interesting, thank you. I couldn’t find any official confirmation that the new Safari setting stripping gclids from URLs is enabled by default (it wasn’t on my iPhone running iOS 26), but I reckon setting up tracking to be “future-proof” is never a bad idea.\n\nI'll keep your snippets, they will come in handy at some point.",
                "author": "cavaillon_666",
                "score": 2
            },
            {
                "body": "I should have named this post “steal my snippets”!",
                "author": "History86",
                "score": 2
            },
            {
                "body": "To be honest, this is all browser side, we capture some events and store them as cookies locally.",
                "author": "History86",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you manage to fix this for ecommerce I salute you sir, what a nightmare it has been!",
                "author": "History86",
                "score": 1
            },
            {
                "body": "half the time it still feels like i’m babysitting a very drunk gclid who keeps wandering off and forgetting where the checkout is.",
                "author": "DigMundane5870",
                "score": 1
            },
            {
                "body": "Do you use ga4 or custom tracking?",
                "author": "History86",
                "score": 1
            },
            {
                "body": "Meanwhile, My client still believes browser side tracking should be sufficient",
                "author": "Due_Singer1570",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1758281071.0,
        "title": "Banner cookiebot",
        "author": "elmahdi001",
        "id": "1nl0wth",
        "selftext": "I set up Cookiebot through GTM, but the problem I’m facing is that in the preview the cookie banner shows up, while when I enter the website directly nothing appears. Since I have a Shopify store that provides a native cookie banner, I thought that might be blocking Cookiebot from working, but even after disabling Shopify’s banner I still don’t see it. Can anyone help me with this?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nl0wth/banner_cookiebot/",
        "num_comments": 8,
        "comments": [
            {
                "body": "sounds like one of three things is happening in live but not in preview. either the banner is being suppressed because consent is already stored, the script is not actually loading on the live theme, or the load order is wrong so cookiebot never initializes.\n\ndo this quick check in order. open the site in an incognito window and on a different browser. if the banner appears there, you already had a consent cookie on your normal browser and preview was bypassing it. if it still does not appear, view source on the live site and search for your cookiebot id. if you do not see it, the tag is not shipping to production. make sure you published the gtm container and that the tag fires on all pages.\n\nnow fix load order. in gtm set the cookiebot tag to fire at consent initialization on all pages. do not use dom ready or page view for this one. only one banner should exist on the site, so remove shopify’s native banner completely and also remove any cookiebot snippet hard coded in the theme. keep just one copy via gtm.\n\ncheck domain and region settings. in your cookiebot account include every hostname the shop uses like root and www and any market subdomains. if you restricted the banner to specific regions it will not show outside them, so test from an eea or set it to show to all for a quick sanity check.\n\nrule out css or app conflicts. temporarily add a tiny inline test in the console like window.Cookiebot and press enter. if it returns undefined, the script never loaded. if it returns an object, the banner might be hidden. look for display none or a z index issue in your theme styles.\n\non shopify specifically, confirm you installed gtm on the live theme and not a draft. if you recently switched themes, re add the gtm snippet. also clear any theme cache by saving the theme once, then hard refresh.\n\ncommon combo that resolves this. cookiebot tag at consent initialization on all pages. only one banner on the site. include all hostnames in the cookiebot domain group. test in a totally clean session. if it still fails, share your site url and i can point to the exact blocker.",
                "author": "DigMundane5870",
                "score": 2
            },
            {
                "body": "I used GTM",
                "author": "elmahdi001",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hey,  which cookiebot banner platform you used for setup cookiebot?\nDid you set it up correctly?",
                "author": "arif_emon",
                "score": 1
            },
            {
                "body": "Did you publish the GTM? And when you enter the website directly, before that did you delete the cookie?",
                "author": "Living-Big-1567",
                "score": 1
            },
            {
                "body": "Do you use Usercentrics Cookiebot CMP on Shopify using GTM?\n Did you configure the GTM on Shopify using Customer events - custom pixel feature?",
                "author": "svkmndl97",
                "score": 1
            },
            {
                "body": "This usually happens because cookiebot is either being blocked from loading on the live site or is being suppressed by another consent script. preview mode in GTM forces the tag to run, so it looks like it’s working — but on the live site something is preventing it from showing. here’s what you can check:\n\nfirst, make sure you actually published your GTM container after adding cookiebot. you’d be surprised how often people forget this step and only see it in preview.\n\nsecond, confirm that the cookiebot script is not firing conditionally. check your trigger if it’s set to “page path contains /something” it might not match your homepage or certain templates.\n\nthird, open the live site in an incognito window and look in the browser console (f12 → network tab). search for cookiebot resources (usually scripts from consent.cookiebot.com). if you don’t see them, GTM may not be firing or another script is blocking it.\n\nfinally, since you disabled shopify’s native banner, make sure there are no remnants left in theme.liquid or app embeds. native banners can override third-party ones or block them entirely until removed.\n\nif all else fails, you can manually inject cookiebot script into theme.liquid just to rule out a GTM trigger issue. if it shows up when hard-coded, you know the GTM tag configuration needs fixing.",
                "author": "AdhesivenessLow7173",
                "score": 1
            },
            {
                "body": "I ask for which cookiebot platform? Need to check your configuration.",
                "author": "arif_emon",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752218256.0,
        "title": "Advanced Consent Mode Issue: Google Ads Tags Not Loading Without Accept",
        "author": "wardogfufu",
        "id": "1lx0imd",
        "selftext": "Hello,  \nI am currently using the CookieYes banner on two of my websites.\n\nGoogle Tag Manager (GTM) is installed, and the CookieYes banner is implemented via GTM using a Consent Initialization trigger.\n\nI have enabled Advanced Consent Mode, but I am facing issues:\n\n* When users do not interact with the banner, Google Ads tags do not fire.\n* Even when users reject marketing cookies, Google Ads tags still do not fire.\n* Tags are only firing after users accept marketing cookies.\n\nHowever, since I am using Advanced Consent Mode, Google Ads tags should still load in \"default\" mode (with limited functionality) even if consent is not given.\n\nAm I missing anything?  \nDo I need to change any settings in the CookieYes CMP, or apply any updates to GTM?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lx0imd/advanced_consent_mode_issue_google_ads_tags_not/",
        "num_comments": 18,
        "comments": [
            {
                "body": "u/wardogfufu by the looks of it, it seems like the auto blocking feature is causing issues. Have you tried turning it off?",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check cookies auto blacking. https://www.cookieyes.com/documentation/implement-prior-consent-using-cookieyes/\n\nIn general this problem was generated by auto blocking CMP feature.",
                "author": "enrico-chiolo",
                "score": 1
            },
            {
                "body": "Hey OP, can you screenshot or list the exact reason for condition failure, i.e. what conditions aren't met according to your triggers at the point you expect the Tag to fire (window or container or DOM).",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Cool, then I think you are good but are you sure the tag isn't sending any consentless or anonymised pings at all on fire?\nIf you check your browser dev tools, go to network tab and see if there is anything sent that contains \"ads\" or \"collect\" for example.\n\nIt doesn't help you in terms of reporting but it does supposedly help with modelling or conversion modelling for Ads/GA4.",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Hi, tags will only fire if the **\"Allow Google tags to fire before consent\"** setting is enabled in the CookieYes web app. If you've turned it on and still face issues, reach out to us at [support@cookieyes.com]() and we’re happy to help troubleshoot.",
                "author": "cookieyesHQ",
                "score": 1
            },
            {
                "body": "Yep its disabled.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "* Before accepting consent, the **Google Ads tag fires**, but **no data is sent** to Google Ads (verified via Omnibug).\n* After accepting consent, the same tag fires and **data is successfully sent** to Google Ads.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Nope it doesn't share cookie less pings even.\nNetwork tab shows no logs.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Hello,  \nYes, the \"Allow Google tags to fire before consent\" setting is enabled in CookieYes. We also reached out to [support@cookieyes.com](mailto:support@cookieyes.com), but unfortunately, we did not receive a satisfactory response.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "So to confirm:\n\nIs it:\n\"When users do not interact with the banner, Google Ads tags do not fire..\"\n\nOr:\n\"Before accepting consent, the **Google Ads tag fires**, but **no data is sent** to Google Ads\"\n\nIf it's the latter, this would be expected behaviour for advanced consent mode which is the default consent behaviour unless you have taken steps to actively block tags\n\nIf it's the former, it's a trigger issue which is why I asked if you can confirm the trigger conditions are met.",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Hi,  \nWe're sorry to hear you had that experience with us. \n\nCould you please share your support ticket number? We’ll prioritize this internally and get it checked right away. Appreciate you flagging this.",
                "author": "cookieyesHQ",
                "score": 1
            },
            {
                "body": "Hi, did you find the solution for it maybe? Facing the same problem.",
                "author": "Infamous_Chart",
                "score": 1
            },
            {
                "body": "Its the latter one.  \nAnd yes to confirm the triggers conditions are met fully.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "No i did not :(",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "I am facing similar issues, i am using cookiebot, when i reject cookies, no hits are sent in Google ads, it does send G100 cookieless ping in GA4 tag, but nothing for Google ads.",
                "author": "Maegor_Cruel",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754553035.0,
        "title": "Help wanted by Unusual GTM Behavior, 19+ Containers Loaded on Page Load, 40 After One Click",
        "author": "Frequent-Edge9999",
        "id": "1mjtxpr",
        "selftext": "Hi all,\n\nI'm currently working on properly setting up Google Tag Manager for the organization I work for, and I’ve come across something quite unusual.\n\nAs soon as I load GTM (without clicking anything), I see **19 containers being triggered** immediately. After a **single click on the homepage,** this number increases to **40 containers**. This behavior repeats with **every click** on the site.\n\nAdditionally, with every click, **5 new containers** related to cookies are triggered, specifically for the following categories:\n\n* preference\n* statistics\n* marketing\n* update\n\nHere’s some context about our setup:\n\n* CMS: WordPress\n* Plugins used: **Cookiebot**, **PixelYourSite Pro**, **GTM4WP** – by Thomas Geiger\n\nWe receive over a million visitors annually, so I’m concerned this could seriously affect website performance.\n\nHas anyone experienced similar behavior?\n\nCould this be a plugin conflict or a misconfiguration?\n\nAny tips on how to debug or reduce the number of loaded containers would be greatly appreciated!\n\nThanks in advance 🙏",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mjtxpr/help_wanted_by_unusual_gtm_behavior_19_containers/",
        "num_comments": 14,
        "comments": [
            {
                "body": "At a guess it's likely that the script that loads your GTM container is poorly implemented perhaps because of one of the plugins. Ideally the container should load in once only per page and preferably early in the lifecycle. \n\nIf you are using gtm4wp that usually works pretty well, can you confirm the primary GTM script isn't also being implemented elsewhere, like it should only be in one place (either in the theme files, in gtm4wp etc but only one of them)\n\nEDIT - Tidying atrocious typing on my phone 📱",
                "author": "Tagnetica",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This is highly unusual! What access to containers do you have in GTM?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "May I audit your GTM?",
                "author": "StarProfessional473",
                "score": 1
            },
            {
                "body": "This one looks fun (well not for you 😁), are the containers all different public IDs or are they the same one multiple times and do you have access to all those containers?",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Wild guess - somewhere your tag manager script could be getting generated multiple times on history change.\n\nIs this a single page application site?\n\nIf you DM me the site, I would love to take a look at this.",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "Turn the plugin entirely off, and see if these containers still load (then you need to clean your code).",
                "author": "BackYx",
                "score": 1
            },
            {
                "body": "IT's something related to the plugins for sure  \n  \n1/ Add the GTM Container Code directly to the website <Head> & Turn Off all Plugins  \n2/ Activate the plugins and test until you can detect the problem \n\nIt happened because of some weird Lazy loading script or something, OR if it's a single page",
                "author": "Single_Version_540",
                "score": 1
            },
            {
                "body": "Hello Taca, yes, that's right. I have full access.",
                "author": "Frequent-Edge9999",
                "score": 1
            },
            {
                "body": "Life without a challenge is boring, right? 😉 I noticed all the containers that open are using the same GTM-... ID. What do you think — bug, config error, or something else? I do have full acces.",
                "author": "Frequent-Edge9999",
                "score": 1
            },
            {
                "body": "CMS was stated as wordpress so unlikely to be SPA",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Thanks, so how many GTM accounts and containers do you have access to? And should those be the containers that load?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Mahes sense. Something seems to be reloading/ refreshing.",
                "author": "ds_frm_timbuktu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756115419.0,
        "title": "Analysing consent vs. no consent via GTM",
        "author": "sabwin",
        "id": "1mzm5s6",
        "selftext": "I'm not 100% sure if this is the right subreddit for my question, but here goes anyway:\n\nA customer of mine wants to know how many people consent to being tracked vs don't consent. I know that many out of the box tools already store this kind of information, but my customer's website agency use their own custom-made cookie banner which works just as well - they just don't store the total number of users. My question is if there is a **legal, GDPR-compliant** way to analyse their traffic? I was thinking along the lines of using a custom parameter that stores the value of the \"analytics\\_storage\" Consent Mode Variable and passes it on to Google Analytics, but I'm not sure if this would be compliant with the GDPR since I'm not allowed to track users that don't consent. Can I even use Consent Mode Variables this way? Or do any of you know a better solution, that's not switching to a different Cookie Banner?\n\nThanks in advance for your answers!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mzm5s6/analysing_consent_vs_no_consent_via_gtm/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Link GA4 to BigQuery (you should do this anyway!).\n\nConsented versus unconsented can be analysed from there.\n\nAlso the agency providing the banner should step up and provide an opt-in, opt-out report.\n\nIn fairness, I wouldn’t be allowing an agency to persuade me that their cookie banner is sufficient. I would at minimum go with CookieBot, CookieYes or Enzuzo instead.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I’d be careful with “send a GA4 event when they say no.” Even in Advanced Consent Mode, that’s still data going to Google (IP, UA, etc.) and many EU lawyers won’t consider that consent-free. If the user denied tracking, they denied that stuff as well ... \n\nSafer pattern: record the consent choice locally only. Fire a first-party call to your own endpoint (or log on the server) that increments an aggregated counter (opt-in / opt-out), with no IDs, no IP storage, no cookies. \n\n& Yes. The cookie solutions should ideally do this, not you ;) \n\nOther solution: go for a second consent free analytics tool like plausible / simple analytics and have a look at the difference between GA and those.",
                "author": "philipp_roth",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can track metrics that are just counts, as long as the key doesnt have a relation to who.",
                "author": "History86",
                "score": 1
            },
            {
                "body": "If you are using a CMP, like OneTrust for example, OneTrust will have this in the OneTrust dashboard on app.onetrust.com. If you wrote your own CMP, it would be a big miss if the developers who wrote it failed to do something like that.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "This has to be tracked by the CMP itself, trying to do this in GA4 is impossible without ignoring consent.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Send only yes events and track all banner loads.",
                "author": "Fearless_Parking_436",
                "score": 1
            },
            {
                "body": "Yes, but can i save DataLayer Variables to this count if the user denies Consent?",
                "author": "sabwin",
                "score": 1
            },
            {
                "body": "What do you need a dlv variable for? I assume analytics storage is a dlv variable too?",
                "author": "History86",
                "score": 1
            },
            {
                "body": "I mean yeah, sorry I meant can i send the information to ga4 if they denied tracking? With consent mode I should at least get a ping right?",
                "author": "sabwin",
                "score": 1
            },
            {
                "body": "Yeah just send it as a GA4 event the moment they say no to cookies.",
                "author": "History86",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1757435904.0,
        "title": "Shopify + GTM Server-Side AddToCart always “Failed” in Preview (EU, Consent Mode)",
        "author": "Ordinary_Creme8718",
        "id": "1ncnveq",
        "selftext": "Hey guys,\nI’m trying to get server-side tracking working on my Shopify store with GTM and Stape, but I keep hitting the same problem. The GTM Web container fires GA4 events correctly, sends them to my server container, and the ecommerce data (items, value, currency) is all there in the preview. My Google Ads tags for AddToCart, Purchase and BeginCheckout are set up with the right Conversion ID and Label. So far so good.\n\nThe issue is that in the server container preview, the Google Ads AddToCart event always shows as “Failed.” In all the tutorials I’ve watched, people see “Successful” in the preview, but mine never works. When I look at the event payload, my custom_fpgclaw value is not a real GCLID but just a fake placeholder (something like fake123…). Even when I test this by clicking on my own live Google Ads campaigns with a real ?gclid parameter in the URL, the server-side AddToCart still fails. In Google Ads itself, the AddToCart conversion has stayed “Inactive” since I set it up.\n\nI’ve already checked the obvious things: Conversion ID and Label in Google Ads are definitely correct, the ecommerce parameters are being passed through, and the AddToCart action is set as a primary conversion in Ads. The connection between GA4 and the server container also works fine. I even tested with real clicks, but the problem persists.\n\nWhat I suspect is that Shopify’s built-in EU cookie banner is the real issue. It sets ads_storage=denied until the user accepts, which means the _fpgclaw cookie never gets a proper GCLID and only writes a fake one. Because Enhanced Conversions are not enabled for AddToCart in my Ads account, Google ends up rejecting the event entirely. So basically, in EU setups you won’t see “Successful” in the server preview like in US-based tutorials unless Enhanced Conversions or a proper Consent bridge is configured.\n\nHas anyone here managed to get AddToCart server-side conversions working with Shopify and GTM in an EU setup with Consent Mode? Did enabling Enhanced Conversions for AddToCart fix the “Failed” status in preview, or did you have to explicitly bridge Shopify’s cookie banner into GTM Consent Mode for it to work?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ncnveq/shopify_gtm_serverside_addtocart_always_failed_in/",
        "num_comments": 8,
        "comments": [
            {
                "body": "I know this won't be popular, but if possible, I'd recommend dropping Shopify's consent banner and using one that integrates well with Google Tag Manager, such as Cookiebot or CookieYes.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "Just the Webinar of stape",
                "author": "Ordinary_Creme8718",
                "score": 3
            },
            {
                "body": "Integrating and handling Google Consent Mode is a story in itself in the EU. \"explicitly bridge\" is a provided service by most compliance apps on the app store. Actually, this is a case which will happen again and again for almost all other tracking scripts relying on consent. Same case is for Microsoft Ads & Clarity in case you have those active as well",
                "author": "consentmo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you please share a screenshot of your Server container, specifically the Add to Cart tag and trigger?  \nAlso, let me know whether your Add to Cart event in the Web container is firing successfully or failing.",
                "author": "motiur_ak07",
                "score": 1
            },
            {
                "body": "Could you share which setup tutorial did you follow?\nI’m also interested in server side tracking",
                "author": "Grinchiul",
                "score": 1
            },
            {
                "body": "Yeah, what you’re seeing is actually pretty common with Shopify + GTM server-side in the EU. The reason tutorials look “clean” is because they’re usually recorded in US setups where ads\\_storage isn’t blocked by default. In your case, Shopify’s native consent banner fires before GTM can touch anything, so your \\_fpgclaw never gets a real GCLID → Google Ads sees “fake123” and just drops the event.\n\nTwo things people usually do to fix it:\n\n1. **Bridge consent properly** → You need GTM’s Consent Mode to reflect Shopify’s banner state. Right now GTM thinks ads\\_storage is denied, so it never writes the GCLID cookie. Passing the Shopify consent state into GTM fixes that.\n2. **Enhanced Conversions** → Enabling Enhanced Conversions for AddToCart (and Purchase) helps because Google can fall back to hashed user data when the GCLID is missing. Without it, those AddToCarts will keep failing.\n\nSo, no, you won’t get “Successful” in server preview until either (a) consent mode is wired up correctly or (b) you give Google a fallback via EC. That’s why your setup looks broken even though everything else is correct.\n\nIf you’re testing with real traffic + consent accepted, but it *still* fails, double-check your Stape settings for forwarding the `gclid` → `fpgclaw` mapping. Sometimes it’s just the forwarding template not being enabled.",
                "author": "AdhesivenessLow7173",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756890972.0,
        "title": "Send events to sGTM with my server app",
        "author": "WideOption9560",
        "id": "1n79z22",
        "selftext": "I was using a web container to track everything I needed.\n\nHowever, I noticed that some events were inconsistent, particularly regarding conversions: The number of purchases in the database was inconsistent with those reported by GTM.  \nGiven how trackers work (or at least, from what I understand), I conclude that if a user is able to refuse cookies, the trackers cannot function properly.\n\nTo solve this problem, I came up with the idea of ​​using a server-side tag manager. The idea is to route all my requests from the web container through this server container, but also to allow my server-side application to send events when purchases are made.\n\nMy problem: I can't find any concrete examples of data to send.    \nWhat do you recommend, please?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1n79z22/send_events_to_sgtm_with_my_server_app/",
        "num_comments": 9,
        "comments": [
            {
                "body": "from my understanding (beginner as well), once the user refuses cookies, there's nothing much you can do to track the events.\n\nserver-side tracking is used to ensure that events would be tracked by sending the request to a separate server, different than google's or meta's, one you can add as a subdomain, so that ad blockers or browsers built-in privacy systems wouldn't stop these requests, because they would be seen as internal requests.\n\ni'd like to be corrected if i am wrong.",
                "author": "U_Stefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You still can't legally track a user without their consent. But there are nuances to it - you can't track PII and anything that would identify a user which is why some platforms get away with being \"no cookie consent required\" as they salt users PII daily so there's no long term fingerprint",
                "author": "jeffdonuts",
                "score": 1
            },
            {
                "body": "A quick detail to make sure we understand each other:\n\nI don't want to track people who don't want to be tracked; I want to have reliable figures (not sure it's the right term) regarding my conversions.\n\nThis means that I'm not very interested in fingerprinting: If I have it, great, but I want to allow a non-technical team to retrieve accurate figures (and therefore consistent with what we have in the database) without having to create a full dashboard.\n\nHence the idea of ​​using an sGTM and sending requests from my server.",
                "author": "WideOption9560",
                "score": 1
            },
            {
                "body": "Inconsistent tracking can really hurt GTM performance. It makes optimizing difficult. Our agentic AI streamlines data flow for GTM. This ensures accurate conversion tracking. It helps you get clear ROI. Learn more here: https://myli.in/DXCatxLc",
                "author": "ObjectiveYouth3494",
                "score": 1
            },
            {
                "body": "you’re on the right track with moving critical conversions server-side. the key is to mirror the same payload your web container would send (event name, currency, value, transaction ID, user identifiers like hashed email/phone if available) and pass it into sGTM, then let sGTM handle forwarding to Google Ads/GA4. that way you’re not relying on cookies, and you maintain consistency between your DB and your tracking.",
                "author": "rjles",
                "score": 1
            },
            {
                "body": "You can track, but you shouldn't track without consent, I am a beginner too but I was recently researching how to set this up self hosted.\n\nMy understanding is adblokers have predetermined domains that block tracking, some are smart by blocking anything that is not on the main domainy, by setting up a subdomain of your main website, you are convincing that the scripts are from your website and shouldn't be blocked. Then the subdomain server passes on the tracking information to meta / google.\n\nIt would be good if a solution could run on shared hosting. I understand it can be resource intensive, maybe even limited with the current php extensions, but basic tracking of events such as tel, mailto clicks and thank-you pages, and basic purchase events would only be set up as shared hosting compromise to keep resource usage low. Also there would be no logging thus no space consumption and further reduction of resources.",
                "author": "microbitewebsites",
                "score": 1
            },
            {
                "body": "Thank you ! \n\nMy problem was about mirroring the payload of the web container. But I figured out that I could do that using measring protocol from GA4: [https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client\\_type=gtag#payload](https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#payload)\n\n  \nI guess that's my solution",
                "author": "WideOption9560",
                "score": 1
            },
            {
                "body": "there you go!!!",
                "author": "rjles",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756473595.0,
        "title": "Storing data and Consent Management",
        "author": "KingStonk69",
        "id": "1n379er",
        "selftext": "I am trying to store some trafic data during the visitors sessions.\n\nThe data is sent to an external CRM when a form is filled.\n\nI decided to store it in **Local Storage.** However the data is not persistent.\n\nThen I tried in **Session Storage.** \n\nSurprisingly, the data is more persistent there along the session.\n\nHowever there is a consent management sytem on the website (Cookiebot). \n\nAs soon as you accept the consent box (even if you accept all cookies and tracking systems) the data stored is deleted.\n\nI'm not sure I can whitelist this specific data in Cookiebot.\n\n  \nI also installed a **GTM Server-Side container**.\n\nIs it possible to store the data with sGTM ? And create a persistent cookie ?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1n379er/storing_data_and_consent_management/",
        "num_comments": 9,
        "comments": [
            {
                "body": ">  I decided to store it in Local Storage. However the data is not persistent. Then I tried in Session Storage. Surprisingly, the data is more persistent there along the session. \n\n\nThat doesn't make sense. How are you interacting with the APIs? Can you share some code or explain the flow? \n\n\n\n\n> As soon as you accept the consent box (even if you accept all cookies and tracking systems) the data stored is deleted.\n\n\nCookieBot does not do this unless custom code has been added for this purpose. Most likely there is something wrong with the method you are using to store the data.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Then you shouldn’t be doing that (assuming EU / UK based users) without their consent.\n\nIf they agree to cookies, you’ll get a “cookie-consent-update” data layer event and you can then look up the consent state. If consent is granted, you can create your cookie / local storage.\n\nIf for any reason there is some active, automatic blocking taking place and your data is deleted, you need to resolve that. Bypassing it, even for the right reasons, is risky business.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "I would the Data Tag, Data Variable and Data Client for this type of use case.",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "Storing data in localStorage/sessionStorage doesn't make any sense. whatever the ideal formula is, window.localStorage.setItem('key','value').",
                "author": "motiur_ak07",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Don’t attempt to use sGTM to circumvent consent.\n\nWhat is the data going to be used for? Have you considered the impact of using that data?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yes obviously!",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "The data consists in identifying the trafic source (ads, organic, campaign, social...), store it, and send it to the CRM when the user fill a form.",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "Thanks! I'm not trying to bypass the legal consent mode.\n\nEven when full consent is given, the data is not persistent.",
                "author": "KingStonk69",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1757496438.0,
        "title": "Server Side GTM and OneTrust - Client to Server Side Handover Problem",
        "author": "These-Tea6804",
        "id": "1nd9hsf",
        "selftext": "I'm trying to set up server side tagging via GTM for our websites, for websites with Onetrust CMP I'm seeing a 70% or higher decrease in the below events in ga4 server side, vs client side.\n\n* session start\n* first\\_visit\n* page\\_view\n* user\\_engagement\n\n  \nWe're not using the OneTrust CMP template to set the defaults, the code is added directly to the sites. In the server side preview I'm seeing it take 20+ minutes to populate the Outgoing HTTP Requests from Server - before the its None and after its 'Unknown' (when gcs is 101). If all cookies accepted and gcs is 111 outgoing http requests from server is Post - 204.\n\nI have checked our set up against this article: [https://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7](https://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7) and it matches, testing shows dataLayer updates are correct too. \n\nIn the client side preview I'm seeing the dma\\_cps parameter is - but the gcs parameter (which also indicates consent) is g101 (analytics accepted only in this instance), I think this conflict is part of the problem.\n\nI've tried consent granted specific triggers in the server side, I'm using a OneTrustGroupsUpdated trigger in the client side, source, medium etc. are being sent from the client side and session ID and client ID are also successfully sent.\n\nClient side tags are respecting cookie choice, the problem seems to be in the handover between client side and server side.\n\nHas anyone seen this before? How do I resolve it?\n\nThanks in advance.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nd9hsf/server_side_gtm_and_onetrust_client_to_server/",
        "num_comments": 6,
        "comments": [
            {
                "body": "I use a systematic diagnostic approach for tracking issues, and your problem is a Layer 3: Transmission issue.\n\n**Layer 3** focuses on the data journey from client to server - when tags fire correctly but data fails to reach its destination. In your case, events are leaving the client but 70% never make it to GA4 through your server container. This layer specifically deals with network requests, consent handoffs, and the critical handshake between client and server containers.\n\nThe smoking gun in your description: OneTrust shows `gcs=g101` (analytics accepted) but server requests show \"Unknown\" for **20+ minutes**. This delay is the server container timing out waiting for valid consent signals that never arrive.\n\n## Diagnostic for Consent Transmission\n\nRun this to see exactly what's being sent to your server:\n\n```javascript\n// Check what consent signals are being transmitted\n(() => {\n  // Look for server container requests\n  const serverRequests = performance.getEntriesByType('resource')\n    .filter(r => r.name.includes('gtm-server') || r.name.includes('sgtm'));\n  \n  console.log('Server requests found:', serverRequests.length);\n  \n  // Check consent parameters in requests\n  serverRequests.forEach(req => {\n    const url = new URL(req.name);\n    const params = {\n      gcs: url.searchParams.get('gcs'),\n      consent: url.searchParams.get('consent'),\n      gdpr: url.searchParams.get('gdpr')\n    };\n    console.log('Request consent params:', params);\n  });\n  \n  // Check if OneTrust is sending updates\n  const consentEvents = dataLayer.filter(d => \n    d.event?.includes('consent') || \n    d.event?.includes('OneTrust')\n  );\n  \n  console.log('Consent events in dataLayer:', consentEvents.length);\n  return consentEvents;\n})();\n```\n\n## The Root Cause\n\nYour OneTrust CMP is updating consent in the browser but not forwarding it through the client-to-server transport layer. The server container receives requests but can't verify consent state, so it drops them. The article you referenced doesn't cover this specific handoff issue.\n\n## The Fix: Consent State Bridge\n\nYou need an explicit consent forwarding mechanism:\n\n### Client-Side: Capture and Forward OneTrust State\n\nAdd this as a Custom HTML tag in your CLIENT container, triggered on \"OneTrustGroupsUpdated\":\n\n```javascript\n// Add to GTM Custom HTML tag - fires on OneTrustGroupsUpdated\n(function() {\n  // Capture OneTrust consent decision\n  const consentGroups = OneTrust.GetDomainData().Groups;\n  \n  // Map to Google consent types (adjust group IDs to match your OneTrust setup)\n  const consentMap = {\n    'C0002': 'analytics_storage',  // Performance cookies\n    'C0004': 'ad_storage',         // Targeting cookies\n    'C0003': 'ad_user_data',       // User data\n    'C0004': 'ad_personalization'  // Personalization\n  };\n  \n  // Build consent state for server\n  const serverConsent = {};\n  consentGroups.forEach(group => {\n    if (consentMap[group.CustomGroupId]) {\n      serverConsent[consentMap[group.CustomGroupId]] = \n        group.Status === 'active' ? 'granted' : 'denied';\n    }\n  });\n  \n  // Push with server transmission flag\n  dataLayer.push({\n    'event': 'consent_state_sync',\n    'consent_for_server': serverConsent,\n    'timestamp': Date.now()\n  });\n  \n  console.log('Consent forwarded to server:', serverConsent);\n})();\n```\n\n### Server-Side: Receive and Apply Consent\n\nIn your SERVER container:\n1. Create a trigger for the `consent_state_sync` event\n2. Create a tag that reads `consent_for_server` and updates consent\n3. Set this tag's priority higher than your GA4 tags\n\n## Why 70% Loss?\n\n- **30% getting through**: Users who accept all cookies immediately (gcs=g111)\n- **70% lost**: Users with partial consent (gcs=g101) where the handoff fails\n\nThe 20+ minute delay is the server container timeout - it's waiting for consent confirmation that never arrives through the standard OneTrust integration.\n\n## Validation\n\nAfter implementing, you should see:\n- Server-side events matching client-side (minus bot filtering)\n- No more 20-minute delays\n- Consistent gcs parameters between client and server\n- \"Post - 204\" responses instead of \"Unknown\"\n\nThis is a known limitation of OneTrust's standard server-side documentation - they don't properly address the consent state bridge requirement for partial consent scenarios.",
                "author": "vscodr",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How is your serverside setup? Are you routing via client side GA events?",
                "author": "gnaiz",
                "score": 1
            },
            {
                "body": "Yes, we're routing via client side GA4 events, we're also using AWS, not GCP.",
                "author": "These-Tea6804",
                "score": 1
            },
            {
                "body": "When you debug and send client side event through. Are you seeing 100% reconcile?  I would consider debugging by spinning up another instance to send to from client side onlt and then check your match gaps to see if it can be identified as a pattern",
                "author": "gnaiz",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746541626.0,
        "title": "2 Google Tags - GA4 and Google Ads",
        "author": "pongohopper",
        "id": "1kg5uj5",
        "selftext": "Looking for clarification on the way the 'new' Google Tags work since every product has its own.  I currently have a GA4 Google Tag loading in GTM.  Keep in mind that I have some parameters set for it due to my setup : cookie\\_flags, page\\_referrer, and page\\_location are all custom settings/variables and then send\\_page\\_view is false.  I created a separate GA4 event tag to track page views (as is often recommended).\n\nWith that said, do I still need to load the separate Google Tag for Ads?  I know you can add destinations to Google Tags and combine them - neither of which I have done - but my concern is my GA4 Google Tag is not using the default parameters as mentioned above and the fact I am not tracking pageviews with it.  So because of that should I be loading Google Tags for BOTH?",
        "score": 8,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kg5uj5/2_google_tags_ga4_and_google_ads/",
        "num_comments": 23,
        "comments": [
            {
                "body": "No, you do not need separate Google tags for GA4 and GAds. But unless you’ve linked your ga4 and GAds account multiple places, you will get the “missing tag” warning.\n\nYou need to link the accounts both in GA4 admin sections (think it’s called product links?) and in Google Ads.\n\nThen, you need to make sure that your Google tag has two destinations. Click “configure Google tag” in GA4 to add either ga4 or gads (or both, depending on your setup) as destinations for the tag\n\nSeems dumb that is had to be done multiple places. But trust me - I spent hours figuring out how to solve that warning, last month",
                "author": "canned_laughter_lol",
                "score": 4
            },
            {
                "body": "Yep, Google has made a mess of this, they should automatically merge them for us when Google Ads is linked with Google Analytics.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "I had this exact problem today. Hadn't done anything different to my usual setups but suddenly getting an error on Google Ads and Tag Manager that my Google ads tag is missing, when I've only ever needed the one Google tag along with the Google ads conversion tracking. \n\n\nI just ran with it, two tags and combined the tags on GA4 and it seems to be happy but I still feel cautious about it. ",
                "author": "Ilovecheeseytoast",
                "score": 2
            },
            {
                "body": "I would say yes. You should implement a Google Tag for both GA4 and for Ads. The latter to help ensure you capture page visitor data and share with Google Ads.",
                "author": "Amazing_Cod6382",
                "score": 2
            },
            {
                "body": "Which trigger are you using with a gdpr consent implementation for this tag ? \n\nWe usually use a consent_approved trigger but wondering if this affects the system",
                "author": "SnoooCookies",
                "score": 2
            },
            {
                "body": "This is kind of why I was leaning towards both - because I am changing the defaults in the GA4 tag parameters when I load it.  If I have both then the Ads tag is the default without any changes.  I just wish Google would be more specific in their docs so questions like this didn't come up - it is something I have noticed over 20 years now - they aren't very detailed in their explanations or across the board in multiple locations.  An example, their docs say you don't need the Conversion Linker tag if loading a Google Tag... soon as you remove the Conversion Linker in GTM it throws a warning message that you need to add it back lol",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "Let me put it like this. If I'm sending conversions to Google Ads via Tag Manager i want to make sure the ads tag has loaded in first to capture the information. It is just best practice. I'm not technical enough to explain why. But this is the how many experts set it up. An example being: https://www.analyticsmania.com/post/google-ads-conversion-tracking-with-google-tag-manager/",
                "author": "Amazing_Cod6382",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If anyone is reading this thread months later (as I was), I found Google documentation saying to set up **only** **one** tag and add the other product as a destination later. See the text below the headers \"Set up your Google tag in Google Analytics\" or \"Set up your Google tag in Google Ads.\" \n\n[regular link](https://support.google.com/google-ads/answer/12002338?hl=en#100) to article\n\n[link to highlighted text](https://support.google.com/google-ads/answer/12002338?hl=en#100:~:text=If%20you%20use%20both%20Google%20Ads%20and%20Google%20Analytics%20%2C%20only%20set%20up%20the%20Google%20tag%20in%20one%20platform)",
                "author": "jillyrockpo",
                "score": 1
            },
            {
                "body": "While it is true that you can link the two and GA4 therefore shares data. Data collection in GA4 is not the same as data collection from Google Ads. This is why I would go with adding both tags in Tag Manager. Let Google Ads collect data on its own terms. Just like it is generally seen as preferable to create Ads conversions in Tag Manager instead of importing conversions from GA4",
                "author": "Amazing_Cod6382",
                "score": 1
            },
            {
                "body": "Same thinking here - I am changing the defaults for the GA4 tag with the parameters and not sending pageviews... if I load both then the one for Ads will be the default settings/parameters.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Doing the advanced consent mode so just loading the Google Tags with 'Initialization - All Pages' as recommended.  Consent defaults load in the 'Consent Initialization' before it and then the tags adapt if consent is changed after they load - keep in mind this only works for tags with the built-in consent checks.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Keep in mind, if you do this, then any settings you apply in your tag gets applied to all the other destinations too.  For example, in my GA4 tag I am not sending page\\_view (do it with its own tag on 'all pages', change the page\\_referrer, change the page\\_location, etc... I don't necessarily want those settings with my Google Ads so I have a Google Tag for each.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Sounds more like speculation to me, honestly. Regardless if you have one or two Google tags, the tags are literally identical, they function 100% identically - only difference is the measurement ID you enter. \n\nDo you have any documentation that states otherwise? Then I’d be happy to check it out, and correct my stance",
                "author": "canned_laughter_lol",
                "score": 1
            },
            {
                "body": "How are you able to fire the Google Tag on \"Initialization - All Pages\" when the consent states should still be denied by page default ?",
                "author": "Ok_Evidence2594",
                "score": 1
            },
            {
                "body": "you do realize if u dont have a seperate gtag for google ads the auto one that will load before your g ads tag and floodlight tag, will load with full auto config, so it will send remarketing hits, scrape random userdata on the website (emails) etc. \n\nI would always prefer having a seperate gtag for ads for the control and transparency",
                "author": "Mrjeepleet",
                "score": 1
            },
            {
                "body": "There is a different trigger for consent initialization that fires before that one. Also, remember that Google tags will automatically update themselves as consent changes.  I explained everything in my first reply - not sure what you are confused by.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "What “auto one”? Sorry, I’m having a hard time understanding what you wrote.\n\nBut in the EU, no tag will load before the user has granted permission through a cookie consent banner. So no, nothing loads randomly. Every tag is controlled by user consent",
                "author": "canned_laughter_lol",
                "score": 1
            },
            {
                "body": "Sorry I read that too fast, I didnt understand corretly.\n\nDo you mean that the google tag will try to fire again if the consent state is updated ?",
                "author": "Ok_Evidence2594",
                "score": 1
            },
            {
                "body": "The april 10th update. If you dont have a gtag for ads, an automatically gtag for ads will load for you before your ads tag will fire.",
                "author": "Mrjeepleet",
                "score": 1
            },
            {
                "body": "It doesn't need to fire again.  As soon as consent changes it will automatically adjust itself to handle the new consent states.  This is what the 'built-in consent checks' are shown in the tag in GTM.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Do you mean that data will go to GA4 even if the google tag couldnt fire ?",
                "author": "Ok_Evidence2594",
                "score": 1
            },
            {
                "body": "You should be firing the tag regardless of consent - it figures out, on its own, what to do based on current consent.  If it loads with consent denied, then user grants consent, it automatically adjusts in its own. Plenty of information on the web about this. I’m afraid I don’t know how else to explain it to you if you still don’t understand what I’m saying.",
                "author": "pongohopper",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756978556.0,
        "title": "Our Ga4 tracks only 2% of traffic, where is the problem?",
        "author": "Yo485",
        "id": "1n85luf",
        "selftext": "We can see only arround 2% of traffic from adform. Do you have some ideas what can I check in gtm to solve this issue? \nOther traffic seems fine. I tried checking in ga4 real-time if I see some traffic when I come on the page and accept cookies but nothing happens. \n\nThe ga4 tag has trigger to shoot upon page initialization, would page view be any better? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1n85luf/our_ga4_tracks_only_2_of_traffic_where_is_the/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Is the cookie banner you're using quite discreet? This is common if you don't block interaction and use a small banner that's easy to miss. People just use your site without providing any consent preferences and your tags never fire. \n\nBest to have a really obvious banner or block page interaction (usually a setting found in your CMP)",
                "author": "GetTerms-Alistair",
                "score": 1
            },
            {
                "body": "How do you measure this difference ?",
                "author": "cherubin13",
                "score": 1
            },
            {
                "body": "Not everyone is going to accept your request for consent. I've seen some sites with a deny rate of 80%. Test it and test it well, change the style of it, etc.",
                "author": "Johnny__Escobar",
                "score": 1
            },
            {
                "body": "Seen this happen before — GA4 only firing for ~2% usually points to consent/cookie banner issues or misfired triggers. If your banner is too subtle, a lot of users never actually give consent → tags don’t fire. Try setting the GA4 tag to fire on page_view (or after consent event) instead of just page init. Also double-check if Adform traffic comes with ITP restrictions on Safari, since that can kill a big chunk of signals.\n\nCurious, are you testing in GA4 DebugView or Tag Assistant? That’ll show you exactly what’s firing (or not)",
                "author": "Imaginary-Profile695",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738958380.0,
        "title": "I've seen hundreds of Enhanced Conversions setups - here's how to actually do it right",
        "author": "Green_Database9919",
        "id": "1ik44tf",
        "selftext": "Look, I get it. Enhanced Conversions is one of those things that sounds simple but gets messy real quick. After helping countless clients fix their setups, I've seen pretty much every way this can go wrong (and right). This is what I've learned. \n\n**First up - What's the actual deal with Enhanced Conversions?**\n\nHere's the simple version: Enhanced Conversions is basically Google's backup plan for when normal tracking fails. It takes stuff you're already collecting (emails, phone numbers) and matches them with Google accounts to track conversions. Trust me, with third-party cookies dying, you're gonna want this.\n\n**\"Do I really need this if I'm already using...?\"**\n\nI get this question constantly, so let me clear it up once and for all:\n\n1. **Using offline conversion uploads?** Yes, you still want Enhanced Conversions. I've tested this extensively - they actually work together. Enhanced Conversions catches the online stuff, and your offline uploads catch the rest. More data = better decisions.\n2. **Running GA4?** Again, yes. Here's what I've learned the hard way: GA4 imports are fine, but native Google Ads tracking (especially with Enhanced Conversions) usually catches more. Pro tip from someone who's tested both: Set up Google Ads as primary, GA4 as secondary, and thank me later. In my experience, server-side tracking tends to be the most reliable source of truth - I've seen it catch conversions that client-side solutions miss entirely. \n\n1. **\"But my data collection is weird...\"** Collecting user data before the conversion page? I see this all the time, and it's totally fine. Here's what works:\n   1. Stash the data in hidden fields\n   2. Use local storage\n   3. Server-side storage if you're fancy (and honestly the easiest while being the most effective)\n   4. Just make sure that data's available when the conversion fires. I've seen people overthink this - it's simpler than you'd think.\n2. **Email stuff you need to know**. After fixing countless broken setups, here's the big one people miss:\n   1. Gmail addresses? Strip the dots and anything after '+' (learned this one the hard way)\n   2. Other email providers? Leave them alone\n   3. Paranoid about privacy? Hash before sending\n\n# Real talk about what happens after setup\n\n# \"Help! My numbers went crazy!\"\n\nDon't panic - I see this all the time:\n\n* Numbers went up? You're probably catching conversions you missed before \n* Numbers tanked? 90% of the time it's email normalization\n* All over the place? Give it a few weeks - I usually tell clients to wait at least 2-4 weeks before freaking out\n* I've seen server-side implementations consistently capture about 20% more conversions than client-side solutions. Not surprising given all the browser restrictions these days, but still worth noting.\n\n# \"Which numbers should I trust?\"\n\nHere's what I've found works best:\n\n1. Make Enhanced Conversions your primary\n2. Keep GA4/offline as backup\n3. Watch both for a month before making any big decisions\n\n# The privacy stuff you're worried about\n\nI've dealt with plenty of paranoid clients (rightfully so), so here's the deal:\n\n* Everything gets hashed\n* It's all first-party data you already have\n* Yes, it's privacy-law friendly\n* Super security conscious? Pre-hash it yourself\n\n# What I tell all my clients to do\n\n1. Keep your existing tracking running - seriously, don't turn it off\n2. Test with a small segment if you can\n3. Watch your conversion rates like a hawk for the first month\n4. Don't ditch your offline tracking\n\n# Quick setup checklist (because we all love checklists)\n\n✓ Say yes to Google's data terms (obvious but people forget)   \n✓ Pick your setup method (GTM, Google tag, API - they all work)   \n✓ Fix those email formats (especially Gmail)   \n✓ Test on a small scale first   \n✓ Give it 30 days before judging   \n✓ Compare with your other tracking\n\nLook, Enhanced Conversions isn't perfect, but it's become pretty essential with all the tracking changes happening. After setting this up hundreds of times, I can tell you it's worth doing - just do it right the first time. And if you really want to future-proof your setup, consider server-side tracking - I've consistently seen it outperform client-side solutions by 10-20% in real-world testing.\n\nGot questions? Drop them in the comments. I've probably seen and fixed whatever issue you're running into.",
        "score": 37,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ik44tf/ive_seen_hundreds_of_enhanced_conversions_setups/",
        "num_comments": 29,
        "comments": [
            {
                "body": "Hi, thanks for the guide. I don’t agree on the privacy part but I am sitting in EU... One question though, how many additional conversions (percentage) are you seeing by sending gads conversions directly instead of using GA4 forwarding?",
                "author": "fitnessandyogacenter",
                "score": 3
            },
            {
                "body": "Article starts off good, but then turns into “just use my company’s tool and trust me bro.”\n\nWhy do I need a special tool? (I don’t)",
                "author": "HawkeyMan",
                "score": 3
            },
            {
                "body": "Enhanced conversions can still help in tight setups like yours (especially with thank-you page form fills), but results really vary by campaign type. PMAX and Shopping usually benefit most since they rely heavily on conversion data to optimize. For service-area search campaigns, enhanced conversions are helpful if you’re seeing drop-off in match rates, but the lift may be smaller unless you’re also feeding back deeper data (like CRM or offline conversions).",
                "author": "Green_Database9919",
                "score": 2
            },
            {
                "body": "That diagnostic message is pretty common, it usually lags behind the actual data you’re sending. If your coverage is showing 100% and test purchases confirm user data is captured, it’s more a reporting quirk than a real issue, and the error often clears on its own after a few weeks.",
                "author": "Green_Database9919",
                "score": 2
            },
            {
                "body": "You still need to ask for consent prior to storing or at least sending the hash value. OP didn’t mention this fact. The simple reason is this: Google does not need to reverse a hash value. They only need to lookup the hash value in the database and know which hash belongs to which user. \n\nFor folks who don’t know how hashes work:\nYou don’t reverse or decrypt hashes. You only need to match them. That’s how user passwords work as well. \n1. User enters the password. \n2. The password is send to the server. \n3. The password is hashed and compared to the hash in the database. \n4. If both hashes match the user is logged in.",
                "author": "fitnessandyogacenter",
                "score": 2
            },
            {
                "body": "Consent management is assumed where applicable.\n\nThe pre-hashing part is really talking about the differentiation between the hashing that is *presumed\\** to be done by the Google Ads Conversion tag automatically if you pass it cleartext PII versus you performing the hashing before the data even reaches GTM - which is the preferred, more secure option.\n\nSnapchat got caught helping themselves to a full copy of the contents of the default dataLayer object not too long ago, which absolutely would have included user email and other PII in many cases because this was the preferred way to pass PII to GTM for use with EC. They stopped after a couple of weeks. After it was highlighted on LinkedIn.\n\nWhen you pre-hash the data, you can verify that the 64 character hex string of the SHA256 hash is actually being passed to Google because it shows up in the network hits visible in Chrome dev tools.\n\n\n\n\\*I say presumed, because the value that is sent to Google when you pass cleartext PII to the tag isn't a 64 character hex string representing the SHA256 hash, it's allegedly a modified base64 representation of the SHA256 hash.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I’m importing ga4 purchase as primary (I know, I know…) - can I EC that? Thx.",
                "author": "ShameSuperb7099",
                "score": 1
            },
            {
                "body": "Share a GTM template plz",
                "author": "steventhemaker",
                "score": 1
            },
            {
                "body": "On the local storage part - what’s recommended approach if you have to store a non hashed value? I’m typically navigating situations where they can’t pre-hash those values and technically you’d be storing a non-hashed version of someone’s PII in LS that could be accessed before form lead submission.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Don't agree with the privacy part, especially from EU perspective.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Hi, thanks for sharing. I have a question regarding the Gmail normalization. What do you mean by \"Strip the dots and anything after '+'\". Can you show me some real world example? Thanks!",
                "author": "wilsonjamesmd",
                "score": 1
            },
            {
                "body": "First, THANK YOU for posting this. Enhanced conversions have been keeping me up at night.   \n  \nCurious about what types of google ads campaigns you've tested this with. Do you think this advice holds true for all campaign types (display, PMAX, search, shop, etc.)? I work mostly with service area businesses that have limited budgets, so I typically stick to tight search campaigns that use form fills (tracking thank you page) and calls as primary conversions. I know this isn't optimal, but I don't truly understand how enhanced conversions can help with this. I'm working with small ads budgets (typically <$1000/month) and small mgmt budgets that reserve 1-2 hours a month for ads. I *know* this isn't optimal, but I'm working with what I've got and juggling a lot more than ads. I've been working with GADs for 10 years, and the more complex they   \n  \nI'd love to get your thoughts on this!",
                "author": "zomzomzomzomzom",
                "score": 1
            },
            {
                "body": "Hi, thanks for the post!\n\nI get an error where it says that 'Some of your conversions are missing user data fields' and that this affects my primary conversion. When I check Enhanced Conversions Coverage, I have 100% of recent eligible conversion events with sufficient user-provided data. Impact coverage is also 100%.\n\nWouldn't this imply that user data fields aren't missing??\n\nAlso, when I do a test purchase, I can see that it does catch user data.\n\n  \nAm I missing something or misunderstanding the diagnostics descriptions?\n\nHope you can help me get rid of the error!",
                "author": "Quirky_Secretary_306",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "20% gain using a server side tracking solution as the primary one, vs GA4 before. I ran this test for 30 days",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "What's the concern re: privacy?\n\nI'm in the UK and I actually care about user privacy. EC does not strike me as problematic.\n\nEither Google knows who the user is and everything is fine, or they don't know who the user is and they still don't because even with Google's potential access to enormous amounts of storage and compute power, they can't reverse even a single SHA256 hash without explicit prior knowledge.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "100%",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "Yes, it's really a configuration. I just took screenshots of this one second",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "Persisting such data in LS is generally a bad idea as you have pointed out yourself but if you have to do it then:\n\n\n- Hash the data yourself before storing it in LS.\n- Make sure to delete the stored item once you are done with it. For this reason, using sessionStorage is preferred to localStorage.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Just don't do it. There's never an excuse to not pre-hash the data, even if that means a relatively ugly workaround within GTM itself - all modern browsers expose native API access to SHA256, so you don't even have to import (and thus implicitly trust) the SHA56 JS lib from CloudFlare, which was the previous go-to standard approach in that situation.\n\nThat means you never really have to transport cleartext PII anywhere.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Good shout - I primarily focus on ecommerce which is why this is tailored more towards that",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "Implementing EC is good for those using auto-tagging for Google Ads (and equivalent for other Google platforms), mainly because of Apple's objection to the fine-grained nature of user tracking it represents versus Apple ITP leaving standard UTMs unmolested.\n\nIf ITP nukes a `gclid` value, your correct attribution is also nuked. EC provides a backup to that broken chain of attribution, because Google can potentially fully stitch together the user's path to conversion.\n\nEC for Google Ads has proven to work, which is why they expanded the same idea into the \"User Provided Data\" feature in GA4.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Ah, so you switched to server tracking immediately. I guess that your improvements came through this rather than using GA4s auto forwarding capabilities.\n\nI am asking because I am using server side tracking as well but I am only tracking GA4 actions which are linked as GAds conversions.\n\nI would love to know if there is a benefit by using Google Ads Tags on the Server rather than using GA4 Tags + conversion linking.",
                "author": "fitnessandyogacenter",
                "score": 1
            },
            {
                "body": "[https://aimerce.beehiiv.com/p/stop-flying-blind-with-google-ads-my-10-min-guide-on-how-to-implement-enhanced-conversions](https://aimerce.beehiiv.com/p/stop-flying-blind-with-google-ads-my-10-min-guide-on-how-to-implement-enhanced-conversions)",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "Thanks!\n\nOne more question - should I turn off automatic collection of user data in the Ads interface, when I've set up data collection in GTM?",
                "author": "Quirky_Secretary_306",
                "score": 1
            },
            {
                "body": "I sent you a DM btw",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "Great addition! Thank you.",
                "author": "fitnessandyogacenter",
                "score": 1
            },
            {
                "body": "Depends on what you use - if you are strictly relying on native pixels then your data is being deprecated every 7 days. In that case, you will need a server side tracking tool that extends your data retention - ideally to 1 year.",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "Thanks! But I'd really like to see if I could fix the issue myself (with a little expert advice).",
                "author": "Quirky_Secretary_306",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1753795026.0,
        "title": "Tag fires again when refresh",
        "author": "Recent_Decision5479",
        "id": "1mcb6sv",
        "selftext": "My Google tag fires when someone makes a purchase and goes to the thank you page, but when people refresh that page it fires again counting double conversions. How can I prevent this? ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mcb6sv/tag_fires_again_when_refresh/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Most robust: Firing an event from your backend instead of GTM.\n\nAlternative to cookies:\nuse a transactionID to deduplicate in your reporting.",
                "author": "History86",
                "score": 4
            },
            {
                "body": "Create a custom JavaScript variable in Google Tag Manager that returns true only when the page is reloaded. Then use this variable as a condition in your tag’s trigger to control firing. This should fix the issue you’re experiencing.",
                "author": "JarvanXL",
                "score": 3
            },
            {
                "body": "This is quite old, but the mechanism it proposes still makes sense and should work: \n https://www.simoahava.com/gtm-tips/prevent-repeat-transactions/",
                "author": "difinrog",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Consider creating a tag associated with the conversion and make sure the event is not associated with the page view. This is just an idea though. Server side validation may be the most accurate as well. You would have a unique transaction ID that could be passed to GA4 or Google Ads.",
                "author": "Legitimate_Canary834",
                "score": 1
            },
            {
                "body": "Using the setting in Google ads conversion tag to count once per session could be useful, but if a user goes back to make a second purchase within the same session you'd miss that Conversion.\n\nIdeally you're tracking the purchase event rather than relying on the thank you page views, but there could be a whole host of reasons why that's not doable for you depending on platform and you're level of access.",
                "author": "advanttage",
                "score": 1
            },
            {
                "body": "You don't mention if this is Shopify or not, but just in case, there is a way to detect refreshed confirmation pages:\n\n`{% if first_time_accessed %}`  \n  `<!-- Run your conversion/event scripts only on the initial visit -->`  \n`{% else %}`  \n  `<!-- Optional: logic to run on refresh or revisit (e.g. upsell messages) -->`  \n`{% endif %}`",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "Ga4 event tag? \nCheck advanced settings to only fire once per page in tag firing options. Might be easy quick fix.",
                "author": "thesickdoctor",
                "score": 1
            },
            {
                "body": "Do you know of any other way?",
                "author": "Recent_Decision5479",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748967540.0,
        "title": "Link Click Conversion Action Will Not Fire in Tag Assistant",
        "author": "Current-Ad1250",
        "id": "1l2g5g2",
        "selftext": "Edit\\*\\*: Solved.\\*\\* I'm new to GTM and had four conditions for one trigger which were impossible to all be met at once. Fix is to have four triggers for one tag, one for each link in my case.\n\nHi everyone, I'm trying to setup an ad campaign for my company in which the only conversion is a link click on a page. I've setup the conversion action in Ad Manager as an Outbound Click. I set up that tag using the tag manager container that is loaded onto the website. I've setup both the Google Ads Conversion Tracker and the Conversion Linker. The trigger for the conversion tracker in GTM is \"Click - All Elements\" and is going by link text, which I've verified several times is correct.\n\nThe cookie prefix for both the Conversion Track and Conversion Linker is \\_gcl. I've tried changing it to \\_gcl\\_au which did not solve my issue. I have enhanced conversions turned off.\n\nDespite this, when I go to test my conversion action in the tag assistant, it does not fire. Is anyone able to help?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l2g5g2/link_click_conversion_action_will_not_fire_in_tag/",
        "num_comments": 17,
        "comments": [
            {
                "body": "I appreciate you trying to help anyways, and the info!\n\nI just made four triggers for the one tag and that's working beautifully. Time to run my ads.\n\nCheers :)",
                "author": "Current-Ad1250",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Change the trigger to \"Click URL equals\" then enter the URL of the outbound page, assuming that click does go out of your domain.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Try using a link click trigger instead. All Elements is extremely specific, so you usually need to use \"Click Element Matches CSS Selector\" to cover all the different things you could technically be clicking on. \n\nLink click only cares about the actual <a> element, so it works much better with URL/text rules.",
                "author": "winless",
                "score": 1
            },
            {
                "body": "Unfortunately it still did not fire. Any other ideas?",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Unfortunately this didn't work either. This is the HTML for the link btw, so no reason that trigger shouldn't be working. The problem must be elsewhere.\n\n\\`\\`\\`<a onclick=\"return gtag\\_report\\_conversion('http://www.activityyachting.com/');\" href=\"http://www.activityyachting.com/\">www.activityyachting.com</a>\\`\\`\\`",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Too bad they don't allow images on here.  Seeing exactly how the triggered is configured would help.  This shouldn't be a cookie issue whatsoever unless you have consent setup (and it's not working properly).",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "What in hades is that?",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "What does Tag Assistant report as Click Text and Click URL on the click event? \n\nIf you click on the event in the timeline, you can also click on the unfired tag to see what check(s) it tried to do, and which one(s) failed. \n\nIf you're not sure what I'm talking about, here's a guide for Tag Assistant: [https://support.google.com/tagmanager/answer/15212503](https://support.google.com/tagmanager/answer/15212503)",
                "author": "winless",
                "score": 1
            },
            {
                "body": "I have consent setup with Google Analytics but that was setup properly.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "elementUrl: \"http://www.activityyachting.com/\",\n\nelementText: \"www.activityyachting.com\",\n\nThe unfired tag is showing a checkmark for Click URL, an X for \\_event equals gtm.linkClick, and a check for \\_triggers matches RegEx.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Consent is going to apply to all tagging you have setup, not just GA4 tagging.  Some of it will auto configure, some of you may have to manually adjust to expect consent behavior.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Did you click on a \"Click\" event or a \"Link Click\" event? That's saying that the only mismatch is the trigger type. It may work if you just switch from whatever you currently have to the other type. \n\nYou might also see both a Click and Link Click event show up in the timeline, in which case the tag should be firing on the other one.",
                "author": "winless",
                "score": 1
            },
            {
                "body": "Okay. Any idea how can I troubleshoot where the issue is then?",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "I've tried both the Click and Link Click events. Both are giving me an X mark for \\_event equals [gtm.click](http://gtm.click) or gtm.linkClick.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Oh wait I think I may have found the issue... I've been trying to do this for 4 different links and didn't realize that the trigger has to find all conditions to be TRUE before firing. Do I need to setup a trigger for each link? Does that also mean setting up a conversion action in Ads Manager for each link?\n\nEdit: I tested this and the conversion tag fired... I am such a fool for not seeing that all conditions must be met before firing.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Ahh, glad it's working! \n\nWhen creating a tag, its triggers work as OR conditions, whereas when creating a trigger, the criteria work as AND conditions. \n\nSo a tag only has to have at least one of its triggers go off in order to fire, but any given trigger must meet all the criteria that you set for it in order to be triggered.\n\nThe difference there messes just about everyone up at least once when getting started in GTM.\n\nYou generally don't need to create individual conversions in the ad platform. You can create a single tag with multiple individual triggers that cover the different cases where you want it to fire. \n\nYou can also just use one trigger if you're down to use a regex match on URLs or text, but it's a bit more advanced if you're not familiar with regular expressions. Worth learning long-term along with CSS selectors.",
                "author": "winless",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748350535.0,
        "title": "Google Ads Tag firing but failing",
        "author": "ReadingMaleficent121",
        "id": "1kwmjqy",
        "selftext": "I have a GTM setup for a campaign and it's getting 0 conversions because the Google Ads tag is firing but failing and it gives me no indication as to why. Has anyone seen anything similar? Been searching for ages\n\nIt has a value, transaction ID & currency all OK and like I said no errors in GTM preview and all the other tags seem to be fine, it even sends purchase event to GA4\n\n**Update: I managed to fix this by configuring cookie consent with Google Tag Manager and Cookiebot. The consent for all of the cookies was denied which was firing other tags but failing on the Google Ads Conversion one. All working OK now thank you for the help**",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kwmjqy/google_ads_tag_firing_but_failing/",
        "num_comments": 18,
        "comments": [
            {
                "body": "It's pseudo error, ignore it https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf?utm_source=share&utm_medium=member_android&utm_campaign=share_via... read this.  However if you are more concern about this \" failed\" status just use cookie prefix __gcl instead _gcl.",
                "author": "Ok-Square9320",
                "score": 2
            },
            {
                "body": "Have you implemented Consent mode? I've heard that some people get this error when they don't have consent mode set up.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you take a screenshot of the issue you are seeing?",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "Did you forget the Conversion Linker?",
                "author": "Jadecat801",
                "score": 1
            },
            {
                "body": "Google Ads purchase tag firing failed — there could be multiple causes behind this. Have you tried configuring the cookie prefix setting? \n\nAdditionally, could you please specify the type of campaign you're running in Google Ads — is it a Smart campaign or a Standard campaign?\n\nIf you're using a Smart Campaign, Google Ads will not receive any manual conversion data from Google Tag Manager, as Smart Campaigns rely on automated tracking and don't support custom tag configurations.",
                "author": "motiur_ak07",
                "score": 1
            },
            {
                "body": "Sounds like the setup is mostly fine if GA4 is receiving the purchase. Double-check the Google Ads Conversion ID/Label, make sure enhanced conversions (if used) are set up right, and watch for consent issues or ad blockers, those can silently stop Google Ads tags from working.",
                "author": "Shot-Bumblebee-1914",
                "score": 1
            },
            {
                "body": "I confirm what u/Etianen7 said, if the consent signals are not installed this could be the cause. I've already had several tags fail because of this. \nAnother point to consider. It may be a bug in the GTM preview, which is common. To do this, check http requests in the browser via Chrome DevTools. You trigger your event and you look in the Network tab of the inspector if the request called \"conversion\" (or \"aw\"+\"method:POST\") is triggered. Its status should be \"200\". This means that it is transmitted to Google Ads and is a bug. \nKeep us informed here",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "It doesn't show as a conversion in Google Ads however which will surely affect targeting when running a conversion based campaign?",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "I've also been using \\_\\_gcl and it is still failing [https://ibb.co/yFc0QRYK](https://ibb.co/yFc0QRYK)",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "[https://ibb.co/yFc0QRYK](https://ibb.co/yFc0QRYK)",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "No, I have the conversion linker on there too",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "Have tried configuring the cookie prefix setting (https://ibb.co/yFc0QRYK) for both this tag and the conversion linker\n\nIt is shopping campaign, automated for max clicks with it being a new campaign",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "OKay ! open your website in chrome , then inspect it ( press f12) then in network tab type your conversion label exactly as your in Google ads, then confirm the your desired conversion action. If you see http request  status \"200 ok\" for your  conversion label then your tag is perfectly implemented, ignore error you get as google ads conversion tag \"failed\" status in GTM.",
                "author": "Ok-Square9320",
                "score": 1
            },
            {
                "body": "**Do you currently have only the Google Ads conversion tag for purchase, or are there other tags implemented as well?**\n\nIf you only have the purchase conversion tag, I recommend creating a basic google ads conversion for pageview in Google Tag Manager for testing purposes. This will help determine whether the issue is isolated to the purchase tag or is affecting all tags in general.\n\nIf other tags like **Add to Cart** or **Begin Checkout** are firing correctly, but the purchase tag is not, try testing the setup on a different laptop or PC. Sometimes local browser settings or extensions can interfere with tag firing.\n\nLet me know what you find!",
                "author": "motiur_ak07",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754759156.0,
        "title": "User-Provided Data variable not reaching sGTM - Enhanced Conversions setup issue",
        "author": "AxxiTheAries",
        "id": "1mluk2c",
        "selftext": "I'm setting up Enhanced Conversions with server-side GTM but the `user_data` parameter isn't reaching my server container, even though regular parameters work fine.\n\n**My Setup:**\n\n* **wGTM**: Google Tag (GA4 measurement ID configured), GA4 Event tag with parameters including `user_data` using a User-Provided Data variable\n* **Both wGTM & sGTM**: Conversion Linker tags configured\n* **sGTM**: GA4 client, Google Ads Conversion Tracking tag\n\n**The Problem:**\n\n* Regular event parameters (contact\\_name, contact\\_email, etc.) using Data Layer variables arrive at the server perfectly\n* The `user_data` parameter using User-Provided Data variable type doesn't appear in server Event Data at all\n* **In wGTM Preview**: The User-Provided Data variable shows correct values and `user_data` appears properly formatted\n* **In sGTM Preview**: No `user_data` parameter received in Event Data, it's completely missing\n\n**What I've Tried:**\n\n1. Adding `user_data` to Google Tag configuration settings only\n2. Adding `user_data` to GA4 Event tag parameters only\n3. Adding `user_data` to both tags\n\nThe User-Provided Data variable works perfectly in wGTM preview but seems to not serialize/parse correctly when sent to the server. Regular Data Layer variables work fine as parameters, but the User-Provided Data variable type specifically fails to transmit.\n\nHas anyone successfully implemented Enhanced Conversions with User-Provided Data variables in sGTM? I've followed instructions from both google and stape, I do exactly what they do and it still doesn't transfer the info to the server. Would really appreciate any help.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mluk2c/userprovided_data_variable_not_reaching_sgtm/",
        "num_comments": 7,
        "comments": [
            {
                "body": "To your wGTM event tags, or config tag, add param:\n\nfirst_party_collection and set value to 'true'",
                "author": "Snusetvb",
                "score": 7
            },
            {
                "body": "Thanks alot, worked!",
                "author": "AxxiTheAries",
                "score": 4
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Will this affect somehow cookies/user attribution?  \nI tried this, and the \"new users\" count went down :",
                "author": "BackYx",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744988353.0,
        "title": "Custom html gtag to using Google Tag",
        "author": "pongohopper",
        "id": "1k26zbe",
        "selftext": "So here is the scenario.  An order processor I am using supposedly requires that GA4 be setup in GTM with the following custom html tag rather than a Google Tag :\n\n    <script async src = \"https://www.googletagmanager.com/gtag/js?id={{ga4-tracking-id}}\"></script>\n    <script>\n    function gtag() {\n    dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n    if (!window.clsid) {\n        gtag('config', '{{ga4-tracking-id}}', {\n            'cookie_flags': 'SameSite=None;Secure',\n            'page_referrer': '{{fsc-referrer}}',\n            'page_location': '{{fsc-url}}',\n        });\n        window.clsid = {\n            client_id: '',\n            session_id: ''\n        };\n        gtag('get', '{{ga4-tracking-id}}', 'client_id', function(r) {\n            window.clsid.client_id = r\n        });\n        gtag('get', '{{ga4-tracking-id}}', 'session_id', function(r) {\n            window.clsid.session_id = r\n        });\n    } else {\n        gtag('config', '{{ga4-tracking-id}}', {\n            'client_id': window.clsid.client_id,\n            'session_id': window.clsid.session_id,\n            'cookie_flags': 'SameSite=None;Secure',\n            'page_referrer': '{{fsc-referrer}}',\n            'page_location': '{{fsc-url}}'\n        });\n    } \n    </script>\n\nThere reasoning for this isn't clear and after contacting them about it and if it was possible to just use a regular Google Tag they were clueless and of no help at all.\n\n{{fsc-referrer}} and {{fsc-url}} are not a big deal and I always have access to them.  Other than that the only variable used is {{ga4-tracking-id}} which I of course have also.\n\nThe reason I want to change over to a Google Tag instead of the above custom html is because of the built-in consent checks that come with the Google Tag - a custom html tag does not have these.  I want to take advantage of consent mode v2 where it can still track events even without consent given.\n\nLooking at the code I don't see a whole lot going on other than the custom cookie\\_flags, page\\_referrer, and page\\_location parameters.  client\\_id and session\\_id shouldn't even need to be set right because that will just happen automatically I would think, but then why the if/else depending on if window.clsid exists or not?\n\nI am just trying to make sense of the code and what it is actually accomplishing over just using a plain old Google Tag instead.  If it makes a difference the order processor's checkout pages, which is the most important part here because I want to track the checkout process and sales, is hosted on their domain and not mine.  The checkout process appears to load inline or within an iframe 'in' my own hosted html - that is accomplished with js.  I'll also add that they load my gtm on their side with my container id as well.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k26zbe/custom_html_gtag_to_using_google_tag/",
        "num_comments": 22,
        "comments": [
            {
                "body": "Are they actually going to know if you just use the normal Google Tag?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "A quick Google search found me this page: \nhttps://developer.fastspring.com/docs/google-tag-manager#popup-storefront-or-embedded-storefront\n\n\n\n\nThe code here is identical to what you've shared here. From what I gather, it seems like the client and session ids stored in `window.clsid` are used by the custom link decorator function. This function is used to manually decorate the callback URLs of the storefront. \n\n\n\n\n**Why do they need a custom link decorator when the Google tag already handles this automatically?**\nThe Google tag linker only decorates `<a>` link elements by default. Since the checkout redirect is most likely handled programmatically (the user never clicks a link element to trigger the navigation) the linker parameters aren't appended to the destination URL. Passing client and session ids allows you to manually stitch the visit without using linker parameters.\n\n\n\n\nWhile this does get the job done there are a number of improvements that could be made here. It would for example be much more preferable to generate a linker parameter and pass that on instead of client and session ids. This would allow the Google tag to stitch the visit automatically instead of having to manually map the ids to the tag. Although I won't go into much detail on this and will try to focus is solving your issue as it is presented.\n\n\n\n\nAll of this code can be updated to work with the GTM Google Tag:\n\n1. Create two Google Tags. Tag A, which is blocked if `window.clsid` is defined and Tag B, which is blocked when `window.clsid` is `undefined`.\n\n\n2. Configure Tag A according to the config seen in the if-statement.\n\n\n3. Configure Tag B according to the config seen in the else-statement.\n\n\n4. Create a custom HTML tag with the following code:\n```html\n<script>\n    window.clsid = window.clsid || {\n        client_id: '',\n        session_id: ''\n    };\n    window.gtag = window.gtag || function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag('get', '{{ga4-tracking-id}}', 'client_id', function(r) {\n        window.clsid.client_id = r\n    });\n    gtag('get', '{{ga4-tracking-id}}', 'session_id', function(r) {\n        window.clsid.session_id = r\n    });\n</script>\n```\n   5. Save the custom HTML tag without a trigger.\n\n   6. Go to Tag A and use tag sequencing to fire the custom HTML tag **after** Tag A has fired.\n\n\n\n\nThe configuration outlined above **should** provide the same results as the original code while allowing the use of the built-in Google Tag.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "This is the kind of answer I was looking for.  Great out of the box thinking as this idea didn't cross my mind.  Looking over this the only problem I see is for my GA4 events I use the Google Tag as a setup tag.  If there are two tags, not knowing which will fire, then I can't use it as a setup tag.  With that said, I was triggering the Google Tags on 'initialization - all pages' as recommended in the docs...... I guess I'll just have to hope that events don't trigger before the tag actually loads?",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "That is kind of what I was thinking... old habits of always having the setup tag, but yeah, if it runs on 'initialization - all pages' it is going to always hit before an event would.  Going to try this out tonight and run some tests in tag assistant... fingers crossed.  Thank you!",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "visit that site in your regular flow and check if there are cookies for this - \n\n    {{fsc-url}} \n\n    {{fsc-referrer}}",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "Doesn’t have anything to do with it.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Data layer variables and yeah they are always going to be there on the checkout pages with valid values. Defaults are set for them if undefined which would only happen on non order processor pages.\n\nThere has to be a reason for their code mentioned involving the client and session id - I don’t see any other reasoning to do it that way over a ‘regular’ tag.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Sorry I'm not sure I'm understanding what you mean",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Since your goal is to use Advanced Consent Mode you can scrap the tag sequencing for your GA4 events and simply trigger both the Google Tags on the initialization event. That way they will be guaranteed to trigger prior to any other GA4 tags.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "hmm... not getting any value for window.clsid when checking in console.  It is returning :\n\nwindow.clsid;\n\n{client\\_id: '', session\\_id: ''}\n\nFor A I trigger on 'initialization -all pages' then added an exception trigger :\n\nsome custom events : when js var window.clsid does not equal undefined\n\nfor B the exception is the opposite :\n\nsome custom events : when js var window.clsid equals undefined\n\nLooking in tag assistant it shows both fired at initialization.  A shows blocking triggers :\n\nX window.clsid set\n\nX gtm.init equals window.clsid\\_set\n\nX null does not equal undefined\n\nB shows blocking triggers :\n\nX window.clsid undefined\n\nCHECK null equals undefined\n\nX gtm.init equals window.clsid\\_undefined\n\nMaybe I set up the blocking wrong or just reading the tag assistant blocking wrong?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "check those values and how they change on the checkout page. if this is an iframe, could be they are looking at the  parent pages refferer / client id / session id parameters. so better to use this script and maybe set this to trigger only on the iframe page",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "What don't you understand?  Maybe I can explain it differently if I knew?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Let me know how it goes as I'm a bit unsure if the gtag API to fetch these values is even exposed when strictly loaded through GTM. If I remember correctly they should but I can't really test that from where I am right now. \n\nEither way, if it doesn't work I have other ideas. ( :",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Yeah, not sure what is going on.  I am never getting any values for window.clsid when checking in the console.  Triggers working fine though... just the custom html is not setting the values for some reason.  Maybe the gtag function doesn't work when loading a google tag in gtm instead of manually?  I can click through page after page on the site and tag A runs then the custom html cleans up after because window.clsid is undefined, but then it never sets the values either.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "I just tested this myself and it seems to work exactly as intended.\n\nMake sure that you have mapped the same GA4 Measurement ID that you are using in the Google Tags to the Custom HTML as well. If that isn't the issue then there might be something else preventing you to set the values. \n\n  \nIf you share or export your preview session with me I can take a look at it. You can DM me or send a chat message if you don't want to post it publicly.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Stupid mistake on my part was the issue.  Forgot the var {{}} likely because it was late.  Currently here is the behavior I am seeing :\n\nIf consent is given then everything works fine.  Tag A then custom html on all site pages then just tag B on the checkout stuff (confirmed to have the correct client\\_id and session\\_id as well).\n\nIf consent is not given then neither are set.  Tag A then custom html on all site pages, but client\\_id and session\\_id are never set.  It is almost as if the gtag functions fail because I put some console.log() stuff in there to debug and nothing outputs.  On the checkout stuff it gets a little weirder... tag B runs even though client\\_id and session\\_id are empty and it sets them both as empty (\"\") in the tag parameters because of that.  My guess here is that tag is setting both to \"\", which is part of the custom html, but as mentioned the gtag functions below that in the code never does anything.  So now, window.clsid isn't undefined, but both values are empty... that satisfies the !undefined condition to fire tag B.\n\nNot sure if this is the correct behavior or not.  When consent isn't provided there is no client\\_id or session\\_id generated - is that right?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": ">Not sure if this is the correct behavior or not.  When consent isn't provided there is no client\\_id or session\\_id generated - is that right?\n\nThey are generated but cookies are not set. Perhaps the gtag API doesn't allow reading these values unless consent is `granted`. I would have to do some tests to check that.\n\n\n> It is almost as if the gtag functions fail because I put some console.log() stuff in there to debug and nothing outputs.  \n\nEven though there is no asynchronous code in your custom HTML tag, the processing that occurs after calling gtag SET is asynchronous. This means that if you placed your console logs below the gtag function call they will always return nothing since the console logs will be executed before the gtag callback function is called. If you want to log the values manually, make sure to place your console logs inside the gtag callback function (same place where the client and session id are assigned).",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "That is where I put them. That’s why I think something is up with the function when consent isn’t given - nothing ‘in’ the function is executed - almost like it just hangs at the point it is called.\n\nThere is a gtag api template available I tried this morning and the same behavior happens - it shows the tag as ‘running’ endlessly in tag assistant when consent isn’t given yet completes instantly when it is.",
                "author": "pongohopper",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742675161.0,
        "title": "Getting started with GTM",
        "author": "thoughtfulcrumb",
        "id": "1jhhtc0",
        "selftext": "I’d love some advice. I’ve been working in web analytics and use GA4 regularly, but haven’t used GTM at all (another team member usually handles) - but want to get up to speed, quickly.\n\nI’m realizing that some of my downstream data problems could be solved if I could get skilled at setting up, maintaining and troubleshooting GTM. I think our cookie banner has been causing issues too and realize I’m not familiar with how to troubleshoot that either (we use Onetrust).\n\nMy questions are:\n\n1. What do you recommend as the fastest way to get up to speed on both using GTM and larger website architecture concepts, to better understand the backend sequence of events that happen when a visitor comes to a site and clicks around?\n\n2. Is having GTM and related backend experience very common with web/digital analytics roles, or would this help differentiate me in the market?\n\nAppreciate any insights you can share. Thank you!\n\n",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jhhtc0/getting_started_with_gtm/",
        "num_comments": 24,
        "comments": [
            {
                "body": "The best way to get up to speed with GTM is to go through the AnalyticsMania beginner GTM course and actually have a site to play around with where you can get hands-on with the stuff the course explains.\n\nLearning how to implement OneTrust properly and work with consent management in general is a whole other thing in itself, but once you know how to test / debug things (the AnalyticsMania course will teach you), you can check your OneTrust implementation against other sites",
                "author": "DigitalStefan",
                "score": 7
            },
            {
                "body": "My recommendation is not to overthink things. Use triggers that are simple and have the least chance of breaking and format your website around the simplest possible triggers, not the other triggers around a website.\n\nFor example, I'm a big fan of thank you page load triggers because they rarely change and therefore almost never break.",
                "author": "cole-interteam",
                "score": 3
            },
            {
                "body": "I would make one note though, if you are in EU/UK or US, setting up OneTrust is not a simple thing. It is not the most user friendly platform and actually has 3-4 different ways it can be set up.\n\nAnd please I am not one of those people who is trying to scare people to get work, look at my history of posts, 15+ OneTrust posts in the last month (they might help you). It's just not simple.\n\nHonda got done for $630k USD 2 weeks ago in California, and they were using OneTrust. My clients are freaking out.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "And can you elaborate on your back end and GTM question. If it’s about datlayers event, then they often come from the front end which probably also is using your back. So, for a technical web analyst the basics of how a backend  works is useful. And the other way around, with server side tracking for example. The backend might be needed to enhance data after events have already been fired. Like sending profit data (which you don’t want to show in the client) and missing GA4 transactions into Google ads and any other useful data that you can enrich your client side retrieved data with and that could help improve your companies strategic approach. Is this in any way an answer to your question?",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "And what about the thank you page trigger firing when a user actually fills out a form, then goes to the next page and presses back space and lands on your thank you page again. might even refresh the page and now you had 3 events triggered however it should have been 1. So definitely don’t think to simply either. Best way in my opinion is datalayer pushes for most events. Analytics mania course as someone mentioned before is a great start. After you really have the basic understanding of how GTM tracking works, you’ll still find more then enough cases which you are not familiar with yet. But then you can google it, and again, analytics mania or other GTM guru’s have shit load of content on almost very topic and are extremely easy to comprehend if you have the basic knowledge. So learn the basics and then learn while doing! Gets really easy real fast if you do it regularly",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "What do you mean by \"done\"? Sued?",
                "author": "Strict-Basil5133",
                "score": 2
            },
            {
                "body": "Calm down. You just set the conversion to fire once per person. It's not that hard lol\n\nEcommerce is a different animal though obviously thank you page trigger doesn't work there and you may want each purchase to fire.",
                "author": "cole-interteam",
                "score": 2
            },
            {
                "body": "Of course! Good luck 🤜",
                "author": "cole-interteam",
                "score": 2
            },
            {
                "body": "That's what they had to pay, they got a lighter sentence because they complied will all the recommendations given by the court. It is publicly available information, Google \"honda onetrust courtcase\".",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "\"dark patterns\" i think thats the legal term thats been attached to making opt-out difficult, obviously we can't see what they were doing because they changed it as soon as they got hit.\n\nThis is the description of the court case:\n\n[https://cppa.ca.gov/announcements/2025/20250312.html](https://cppa.ca.gov/announcements/2025/20250312.html)",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "Based on this I would recommend following a GTM course for sure. You’ll learn how to set up tags in GTM which would send your events to GA4 for example. There are tons of ways to do this, for example you could let developers implement datalayer events. As GTM doesn’t store data it is up to you to create tags, variables and triggers that read those dataLayers and send the data to GA4 for example. Next to datalayer event which a developer can implement you can also track various actions and parameters with CSS selectors for example. Cookies will contains a user and session id. So if a user visits your website a cookie is set. If he returns GA4 will read the cookie and thereby know that it is a returning user.\n\nIn a complete GTM course you will learn about all these aspects. Cookies, events, variables/parameters like the name of a button or the item that was viewed. It will learn you how to debug your setup with GTM and in the GTM debugger you will see literally every data that’s coming in and which you could use to enhance your tracking according to your needs. You’ll find a lot of automatically collected data for example which you could add to events as parameters as desired. \n\nI think learning GTM is the best way to get familiar with all aspects you’d like to learn. While you start working in GTM to set up tracking according to your compagnies goals you’ll, of course, run into a loads of questions and there is no single answer to solve them. Communication with developers about how to extract data from a website will get you more and more technical but ways of extracting data yourself with CSS selectors for example will teach you the technical sides of tracking to!\n\nThere’s extremely much to learn like server side tracking, SQL and bigQuery and much more. But knowing how data collections works is at the basis of all of this. Don’t expect, and don’t try to learn all aspects at once. Get comfortable with GTM and they you can proceed with other aspects that you’re interested in!",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "I meant no offence, but I have seen some set ups which companies where working with and took it for truth for a long time where there set up was just plain wrong 😅 \n\nBut exactly like you mention. You could use once per session for example, but some websites might have multiple forms with the same thank you page over and over again and if multiple are filled out by the same user you would indeed want it to fire multiple times.\n\nYour advice about keeping it simple is definitely good advice, just wanted to point out that there are still things to think about to be sure that the data is accurate. Some degree of knowledge of tag manager functionalities like settings from your example about triggering once per page / once per session / or on every specified event should be thought about while implementing more ‘general’ triggers.",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "Yeah, no sweat buddy. Everybody has their way of doing things and I agree. There are a few higher level things, but if you come up with a system based around simple triggers it's 100% the best way to go. I know this after hiring 3-4 conversion tracking experts that loved their custom events and they were always breaking lol\n\nl'll quickly address the scenario outlined above as well:\n\nIf there are multiple forms for the same offer then you'd still only want that form to fire once per person. \n\nIf there are multiple forms for different offers you should be using different thank you page URLS for each form and each form would fire once per person.",
                "author": "cole-interteam",
                "score": 2
            },
            {
                "body": "Without knowing how GTM works, server side tracking will be kind of impossible since server side tagging works with a server side GTM container but it gets it’s data from the client side GTM container. So, after getting used to normal GTM you can get into Server side and it’s not that hard to be honest.\n\nThe analytics mania course should be a very good course. Once you’re working with GTM and you’re unsure how something works so you Google it, he’s the one that’s on top of your search results with the answer to any question that you can think of! While I didn’t do it myself, I think his is probably one of the best.\n\nSimo Ahava is like te biggest legend in GTM, but currently more into server side I think. In many blogs about GTM from others you’ll see him being mentioned as the one who created/found out solutions to problem. I found a course (https://cxl.com/institute/online-course/advanced-google-tag-manager/)on CXL (maybe your company has an account as well, which would make it free) from him but I suggest you to ask them how old it is, much has changed over time, so if it’s outdated you shouldn’t use it probably. Analytics mania is up to date for sure!\n\nIn these courses they are also going to talk about basic HTML, JavaScript and CSS. Basic knowledge of this will be helpful eventually. If you have reached those topics in your GTM course and want to learn the basics of these, then check out codecsdemy, I found their html, css and JavaScript courses straight to the point and they are free to!\n\nIn conclusion. Yes, analyticsmania is an excellent choice. Simo Ahava’s course on CXL should be to if it’s not outdated so might want to mail them!",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Get more from less. Take GTM out of equation (no kidding) but still have events in GA4 by using our automatic detailed tracking of all the user actions. It’s like if you’d setup triggers on all page elements through GTM.\nDM if you’d like to know more.",
                "author": "a_montend",
                "score": 1
            },
            {
                "body": "Very helpful, thank you! I will check that out.",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "Thanks! Good advice.",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "Well that’s worrisome. I’ve only started to wade into the OneTrust arena.\n\nWhat specifically did they get fined for?",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "Thanks! I’d just like to better understand the backend and front end architecture and different tech layers to better understand the entire process from start to finish for a web session (and treated sessions over time).\n\nBelow is an example. Just not sure what subject area or courses would be most efficient for me to learn more?\n\nFor example, what happens when someone:\n\n* clicks through to our site (and what parameters might travel with that request like UTM data)\n\n* how that request goes to our web server and where it goes next (our IT person says we get a ton of pings on our web servers from bits and such)\n\n* how and when that ping gets to our site and the sequence of events (hits cookie banner first where it reads or writes parameters that tell Onetrust/GA if we can or can’t capture data based on choices, after which it gets certain tags from GTM then writes to GA?)\n\n* and then basically that whole prices for the entirety of that persons web session on all different pages. And if any cookie data is written to someone’s browser/hard drive, how that comes into play if that same person comes back to the site, therefore becoming a returning visitor versus a new one)\n\n*",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "Interesting. Thanks for the share.",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "Incredibly helpful! Thanks so much for the thoughtful response. Think you hit the nail on the head, and sounds like a GTM course is the way to go. \n\nSomeone else recommended the AnalyticsMania GTM course, is that the one you’d recommend too or have you found thing else to be more helpful?\n\nI’m super interested in server side tracking and data collections too, and sounds like starting with GTM is the way to go to get enough info to better contextualize further technical education. \n\nThanks again for your insights and guidance!",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "Thank you! This is so helpful. Really appreciate you taking the time to share all this background. \n\nThis all makes total sense and the bit about client side vs server side makes total sense. \n\nWill be sure to get going on the GTM course and also check out the other resources you shared below.\n\nThanks again kind stranger!",
                "author": "thoughtfulcrumb",
                "score": 1
            },
            {
                "body": "No probs, and good luck with the courses!",
                "author": "Pretty-Appearance226",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741254467.0,
        "title": "Is event tracking a pain? We’re building an AI tool to automate GA4/GTM event tracking—Would love your thoughts!",
        "author": "RexHardan",
        "id": "1j4rzdv",
        "selftext": "Hey everyone,\n\nI know many agencies and consultants spend hours manually setting up event tracking in Google Tag Manager for clients—mapping out events, configuring triggers, debugging, and ensuring data accuracy. It’s tedious, time-consuming, and prone to human error.\n\nWe’re building an AI-powered tool that automates this process. With just one click, our AI generates expert-level event tracking plans and deploys them directly to GTM—eliminating the guesswork and saving hours of manual work.\n\nWe’re still in the early stages, and right now, we’re focusing on automating website event tracking plans.\n\nI’m curious—would something like this be useful to your agency or team? If so, in what scenarios do you think it would provide the most value? Also, what’s the biggest challenge you face when implementing event tracking for clients?\n\nWe’re looking for feedback to make sure we’re solving real problems. If you’re interested in learning more, check out [www.jtracking.ai](http://www.jtracking.ai), and I’d love to hear your thoughts!",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j4rzdv/is_event_tracking_a_pain_were_building_an_ai_tool/",
        "num_comments": 26,
        "comments": [
            {
                "body": "I think this is fundamentally a flawed concept. Any automation of this will miss something.\n\nIt’s impossible to replace having real, hands-on with a site when reviewing how or what to measure. If you’re an agency working for a client, you want to understand their site and their existing data collection strategy so that you can do what they’ve asked you to do but also identify things they haven’t even thought to ask yet.\n\nIf you eliminate the understanding, you eliminate any possible ways to improve things, which will then eliminate your ability to generate revenue.",
                "author": "DigitalStefan",
                "score": 16
            },
            {
                "body": "Your website doesn't seem to be working. I am curious as someone who has worked with tagging software for well over 10 years. \n\nDo you see it as a scraping tool, that will scan a website and identify likely conversion points.\n\nHow is it deploying to GTM, is it an agent that builds out the variables/triggers/tags or is it generating a csv that you then upload.",
                "author": "Mysterious_Swan_9941",
                "score": 3
            },
            {
                "body": "Hey OP, you linked https://jtracking.ai, but your 'www' subdomain isn't configured to automatically redirect users who don't append it themselves. I can load www.jtracking.ai just fine, but need to add the 'www' subdomain to the URL myself; please consider updating your posted link to include 'www', or set-up an auto redirect on the subdomain.",
                "author": "lifemarket",
                "score": 3
            },
            {
                "body": "Websites are built differently. Companies have different ways and SOPs regarding their websites, so I’m not sure how using AI on tracking events would be feasible in the long run\n\nStill a great concept though",
                "author": "ch0lok0y",
                "score": 3
            },
            {
                "body": "I know you’re somewhat at the forefront of AI, but em dashes in Reddit posts are a giveaway that those posts are from an LLM 🖖",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "If you could just build something that QA's tracking efficiently and reliably, that would be a big win IMO.\n\nThe rest seems a bit much. No 2 sites are built the same and having to go behind some AI system to clean up tracking sounds more tedious than just setting it up myself.",
                "author": "TheHobbyist_",
                "score": 2
            },
            {
                "body": "Automation tool add unnecessary things 🙄 \n\nEach site is different as well makes it more challenging to apply to some of it..",
                "author": "Muted-Champion-6841",
                "score": 2
            },
            {
                "body": "How does it work with Cookie Consent and sGTM?",
                "author": "Zealousideal-Ask5822",
                "score": 2
            },
            {
                "body": "If it works, of course it would be useful! I set everything up myself by reading articles and watching YouTube tutorials and constantly wonder if there’s any settings I’m missing that would improve my attribution.",
                "author": "Global-Bite-306",
                "score": 2
            },
            {
                "body": "Right on. Anyway Google tag manager isn't that hard to figure out. And the job pays mighty well so why deny a human the opportunity to live?",
                "author": "intrepid789",
                "score": 2
            },
            {
                "body": "Thank you for catching that! I’ve fixed the issue. Appreciate the heads-up!",
                "author": "RexHardan",
                "score": 2
            },
            {
                "body": "Totally agree! Event tracking validation is time consuming, especially when ensuring accurate attribution. Hopefully, JTracking can solve this problem and reduce the hassle of manual checks while improving efficiency!",
                "author": "OutlandishnessWild57",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Well this drive by this went well.",
                "author": "gladue",
                "score": 1
            },
            {
                "body": "Like all the comments here, but what IF it's consistent?",
                "author": "Necessary_Fondant390",
                "score": 1
            },
            {
                "body": "I am consulting billion dollar brand and it's not feasible when you comes to large scale where things are behaving differently. I might be good did idea for some cookie cutter tracking.",
                "author": "Additional-Side-457",
                "score": 1
            },
            {
                "body": "This sounds super interesting! I’ve definitely felt the pain of manual event tracking. it’s tedious and sometimes frustrating to debug. If your tool can truly automate the process accurately, it would save so much time. I’ve been using Qwestify, which is like ChatGPT for GA4. It makes tracking and analytics way easier with real-time insights and automated event tracking. Plus, it’s free, which is a huge plus! Would love to see how your tool compares.",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "If your main feature would be to detect the industry & business objective of the website and generate a meaningfully structured tracking plan, then you may have a product. Automated event detection/collection is always poor and has been offered multiple times by different entities. I don't see them taking off.\n\nIf you DM me your app, I'll be sure to test & provide feedback on improvement since i see you do have a \"generate tracking plan\" option",
                "author": "t0pz",
                "score": 1
            },
            {
                "body": "If it is consent mode and rgpd compliant that would open even tracking specific actions on any landing page and added with ia stuff (like heatmaps, button clicks for ads,etc) that would be a bangerrrr",
                "author": "tonyhawk555",
                "score": 1
            },
            {
                "body": "Hi! I was thinking about purchasing Qwestify and would love to get your honest opinion. Thanks!",
                "author": "Sharp-Company8863",
                "score": 1
            },
            {
                "body": "I can see how this could be very effective, and I wish you the best in your project, I have signed up for your wait list and look forward to your product.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "You're absolutely right—deep understanding and hands-on analysis are essential for meaningful insights and business growth.\n\nMany of our team members have worked in data analytics and event tracking for years. Our approach is to identify key, high-value metrics for specific industries and leverage AI to map corresponding events on a website, generating a tracking plan automatically. So far, we've seen promising results, especially with SaaS websites.",
                "author": "RexHardan",
                "score": 0
            },
            {
                "body": "I’ve fixed the issue—please visit [www.jtracking.ai](https://www.jtracking.ai). It would be a pleasure to chat with an expert like you!\n\nOur tool does have web scraping capabilities, but it functions more as an AI agent. It directly builds variables, triggers, and tags into GTM using the GTM API, rather than just generating a CSV for manual upload.",
                "author": "RexHardan",
                "score": 0
            },
            {
                "body": "Absolutely! For beginners, especially those without a technical background, setting up GA/GTM tracking and analyzing data can be a real challenge. That’s exactly why we built JTracking: to make generating and implementing event tracking plans simple and hassle-free. We’re here to take the guesswork out of the process so you can focus on what really matters—your data and insights.\n\nIf you’re interested, feel free to DM me your email, and I’ll make sure you’re the first to know when JTracking is ready. Would love to have you try it out!",
                "author": "RexHardan",
                "score": 0
            },
            {
                "body": "Thanks for the feedback! I hear you—automated event detection has been hit-or-miss in the past, but we believe this time will be different. With the advancements in LLMs and our deep understanding of tracking plan best practices, we’re confident our approach will stand out.",
                "author": "RexHardan",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1751503220.0,
        "title": "Send Hubspot data to sGTM ?",
        "author": "xMagox",
        "id": "1lqc5b0",
        "selftext": "Hello.   \n  \ntldr: When lead status change on Hubspot I want to send data to GTM and then Google Ads/GA4.  \n  \nI'm trying to setup tags to optimize ads and better track our data    \nMost, if not all, of our leads interaction happens through phone and hubspot.   \n  \nMy idea is that when the lead status on hubspot changes, this sends information to sGTM and then this is sent to Google Ads and GA4.\n\nFor the sGTM, I'm using Stape \n\nData Client template from Stape, web container and server container where also created on Google tag manager. \n\nAs far as I understand, on Hubspot I have to create a workflow, triggered by the lead status change, that sends a POST request to the sGTM. \n\nAfter this, I'm somewhat lost on how to set up everything else.   \nFor the webhook endpoint, I'm not sure if I only have to add /data to the end of my sGTM container URL but it's what worked to get a 200 response and see the Requests on the preview window of Google Tag Manager, but only if I have the \"sGTM Preview header config\" power up turned on Stape, if turned off I get the 200 response but can't see the requests. \n\nThen for setting up tags, triggers and variables\n\nLet's say payload from Hubspot is:   \n(code symbols might be wrong because my keyboard)   \n  \n\"event\\_type\": \"lifecycle\\_change\",  (Let say the status is MQL) \n\nI'm guessing I have to set up a Google Ads conversion tag, with a custom event trigger that is triggered when my variable named X is equal to MQL, but how do I set up the variable correctly, as in how do I let it know the value is lifecycle\\_change?  \n\nAnd since I want this for enhanced conversions and personal data might be sent, do I need to hash this information? Or how do I avoid privacy problems? On my website there is a cookie banner letting them know where are collecting data to show personalized ads and another privacy policy, but again mostly is done through phone and hubspot. \n\n  \nI'm aware there is a integration between Hubspot and Stape, but seems more focused to send data to Facebook rather than Google \n\nAppreciate any help or pointing me in the right direction \n\nThanks! \n\n\n\n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lqc5b0/send_hubspot_data_to_sgtm/",
        "num_comments": 10,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hubspot has a native integration with Gads to do this? Why didnt it work for you?",
                "author": "History86",
                "score": 1
            },
            {
                "body": "The HubSpot popup form is embedded using an iFrame, which makes it difficult to track using standard form submit triggers in Google Tag Manager. This setup often limits access to submission events and user input data. However, in many situations, capturing both the form submission and the user's input is essential for accurate tracking and lead analysis.",
                "author": "AhmedNayem01",
                "score": 1
            },
            {
                "body": "Check latest analytics ninja blog post, might give you some ideas.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Founder of [PixelFlow](https://www.pixelflow.so/?utm_source=reddit&utm_medium=comment&utm_campaign=weekly) here. Here's how we've done it previously from what I can remember:\n\n* create hubspot workflow → trigger on stage change → webhook (POST) to your sGTM endpoint\n* you *can* include whatever payload you want (“event\\_type”, “lead\\_status”, email, whatever)\n* in sGTM: set up a data client to receive the POST, then trigger the tags based on event payload (use custom event triggers, like `event_type = 'lifecycle_change' && lead_status = 'MQL'`)\n* if you need enhanced conversions, YES you may want to hash emails before sending (for privacy compliance), tho we have prebuilt hashing in our server endpoint so you don’t have to code it in hubspot",
                "author": "jeffdonuts",
                "score": 1
            },
            {
                "body": "Tags were set up on the website since before I joined the company, they were a mess and I decided to clean up \n\nThen that hubspot integration doesn't seem to be sending the conversions correctly neither seem to be enhanced (according to Google Ads) plus is not only Google ads that we are running \n\nSo when doing the cleaning I thought that it would be a better option than just relying on that integration and would allow to do more things",
                "author": "xMagox",
                "score": 1
            },
            {
                "body": "It does allow you to do more things, but it’s almost dev work vs a friendly(ish) UI.\n\nI’m not a voice for HS, but this is kind of what they are trying to make easy.\n\nEnhanced conversions is a relatively easy setup. You could just store the form submission data in a datalayer.\nHash that datalayer through a JS script.\nSend a enhanced conversion event with the hashed data\n\nMake sure that your form has a checkbox for privacy policy that tells that you do this.\n\n\nI’m not too familiar with Stape, but they seem to have a premium feature that deals with webhooks https://stape.io/blog/webhook-server#fa-qs-nbsp",
                "author": "History86",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748178877.0,
        "title": "Discrepancies in GA4 Server-Side vs Client-Side",
        "author": "Siewik",
        "id": "1kv29e5",
        "selftext": "I have two properties under GA4 account (for testing purposes), one is getting data directly trough normal setup via GTM, and the other one is getting data with server-side setup. There is like 20-30% difference in all metrics between the two. The server-side GA has lower values, in real time preview, less traffic, less users, less conversions etc. When I tested everything in both gtm debug and ga4 debug everything seemed to be working as expected. Does anyone know what to check or why is this happening? Thank you",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kv29e5/discrepancies_in_ga4_serverside_vs_clientside/",
        "num_comments": 14,
        "comments": [
            {
                "body": "There are many possible causes for the discrepancy. Could you share a GTM container preview link?",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "Are you using the correct region for server side tracking? That inaccuracy can be caused by request latency. As you've already mentioned that you've masked the custom domain by a path that's a good step but you have to find out if any latency is being happening in realtime which the requests redirected to the custom domain by the CDN that you're using",
                "author": "analyst_bappy",
                "score": 2
            },
            {
                "body": "The managed hosting server is located in germany and the vps server for server side is in Lithuania which is 1000km distance between that is average 25ms ping",
                "author": "Siewik",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I beleive noone can tell you what is the exact reason without look to it deeper.",
                "author": "Damaskin",
                "score": 1
            },
            {
                "body": "It's normal. Server side stores cookies different e.g. longer than client side and thus metrics like sessions, engagement, revisit etc will have discrepancy. Conversions are usually higher though with SS like 15%.",
                "author": "kreativo03",
                "score": 1
            },
            {
                "body": "Is your GA4 data stream on any domains you don't want it on? Check acquisition by hostname report.",
                "author": "boschmktg",
                "score": 1
            },
            {
                "body": "not sure if you mean this [https://auto123.sk/metrics/gtm/debug?id=GTM-P5RQLP54&gtm\\_auth=mKIcTaYPvYIsO3eMduv5Dw&gtm\\_preview=env-3&hl=en](https://auto123.sk/metrics/gtm/debug?id=GTM-P5RQLP54&gtm_auth=mKIcTaYPvYIsO3eMduv5Dw&gtm_preview=env-3&hl=en)",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "Currently not sending country and region in http headers (working on it), thus not having \"**Enable region-specific settings**\" enabled, and all the traffic in GA is showing Germany and not Slovakia (real location of users), do you think it can be related to the problem?",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "what do you mean by \"not using a custom domain\"? we are using [auto123.sk/metrics](http://auto123.sk/metrics) which is reverse proxied to [gtm.auto123.sk](http://gtm.auto123.sk) , its according to best practices [https://developers.google.com/tag-platform/tag-manager/server-side/dependency-serving?tag=gtm](https://developers.google.com/tag-platform/tag-manager/server-side/dependency-serving?tag=gtm)",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "sure, i understand that, but what would be the main things to look when troubleshooting something like this? When testing it seems like everything is working good, server logs dont have any errors etc.. Dont really know how to check if it is related to cookie consent though",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "and this is from the web container [https://tagassistant.google.com/#/?id=GTM-5QD9L77F&url=https%3A%2F%2Fauto123.sk%2F%3Fgtm\\_debug%3D1748185805519&source=TAG\\_MANAGER&gtm\\_auth=y1WCGf1l07Z6bewMtcewxg&gtm\\_preview=env-5](https://tagassistant.google.com/#/?id=GTM-5QD9L77F&url=https%3A%2F%2Fauto123.sk%2F%3Fgtm_debug%3D1748185805519&source=TAG_MANAGER&gtm_auth=y1WCGf1l07Z6bewMtcewxg&gtm_preview=env-5)",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "Normally you always see that the server GA4 measures higher values. That would mean that your g-tag G-BC31VW7TZG overperformed. I don't see anywhere that tags are fired twice.   \n  \nWhat I do see is that when consent is given, a pageview tag is sent and a consent\\_update tag is sent to the g-tag. I think he can't combine these two. Which is why (I think) he measures them twice.",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1753870786.0,
        "title": "[HELP] Issue with higher converions value then in CMS",
        "author": "Dzuri_17",
        "id": "1md2ugk",
        "selftext": "**TL;DR**\n\n* E‑shop on **Shoptet (CMS like shopify)** (CZ), tracking **GA4 + Google Ads** via **GTM** (client‑side only).\n* Google Ads **Conv. value** is **70–80% higher** than CMS real revenue.\n* In Tag Assistant, **one** `purchase` event fires **two** Google Ads hits to the **same AW-ID/label/transaction\\_id**:\n   1. `https://www.googleadservices.com/pagead/conversion/<AW-ID>/`\n   2. `https://www.googleadservices.com/ccm/conversion/<AW-ID>/`\n* Add‑to‑cart / add\\_shipping\\_info fire **once**. Only **purchase** shows as two hits (under the **same event**, not separate events).\n* I can switch to 1 source (GTM **or** Shoptet), but I want to understand why this happens and how to stop any duplicate counting / inflated value.\n\n# Stack / context\n\n* Platform: **Shoptet** (SaaS e‑commerce, CZ).\n* Tracking: **GTM (web)**, **GA4**, **Google Ads**.\n* Consent mode present (`gcs=G111`).\n* Previously had **two purchase sources**:\n   * **Shoptet’s native Google Ads conversion** (set by Conversion ID + Label in Shoptet admin)\n   * **GTM Google Ads Conversion tag** for purchase\n\n# Numbers (example month: May 1–31)\n\n* **Real revenue (CMS/Shoptet):** CZK **1,056,025.86** across **1,170** orders.\n* **Google Ads – “Purchase – Shoptet” (Primary):** **796.61** conversions, value **CZK 1,903,212.27** (DDA).\n* **Google Ads – “Purchase – GTM” (Secondary):** **796.80** conversions, value **CZK 1,825,633.53**.\n* **GA4 – purchase event:** \\~**CZK 705,000** (converted from **€27,620.40**) with **2,621** items purchased.\n\nSo Ads values **exceed real revenue by \\~70–80%**. Conversion *counts* for the two purchase actions are almost identical → suggests either value inflation or double‑firing across actions.\n\n# DataLayer (thank‑you) has transaction ID\n\nExample keys: `transactionId: \"2026003069\"`, `currency: \"CZK\"`, items array, etc. So we do have a unique order ID to dedupe.\n\n# What Tag Assistant shows for purchase (both when I kept only GTM and when I kept only Shoptet)\n\n**Under the same** `purchase` **event**, I see **two** hits to the **same** AW‑ID + label + value + currency + `oid`:\n\n    makefileKopírovaťUpraviť# Hit A (main)\n    https://www.googleadservices.com/pagead/conversion/<AW-ID>/\n    label=4tR9CJTmzZ0aELThy-0-\n    value=474.38\n    currency_code=CZK\n    oid=2026003705\n    en=purchase\n    ... (gcs=G111, etc.)\n    \n    # Hit B (secondary)\n    https://www.googleadservices.com/ccm/conversion/<AW-ID>/\n    label=4tR9CJTmzZ0aELThy-0-\n    value=474.38\n    currency_code=CZK\n    oid=2026003705\n    en=purchase\n    ... (gcs=G111, etc.)\n    \n\n* In earlier tests I saw `ec_mode=m` or `ec_mode=a` and `em=tv.1`.\n* When I **paused all Ads tags in GTM**, Shoptet still pushed **two** purchases.\n* When I **removed Shoptet’s Ads integration** and left **only GTM**, I **still** saw two hits (one `/pagead/`, one `/ccm/`).\n* **add\\_shipping\\_info** fires **once**, not duplicated.\n\n# What I’ve already tried\n\n1. **Disable GTM Ads tags** → Shoptet alone still sent **two** purchase hits.\n2. **Disable Shoptet Ads integration** (keep GTM only) → still **two** hits.\n3. **Turned off Enhanced Conversions in GTM** → still seeing `/ccm/conversion` \\+ `em`/`ec_mode` in hits (so EC likely still **ON in the Google Ads conversion action**, not just GTM).\n4. Verified **same** `AW-ID`, **same** `label`, **same** `transaction_id (oid)`, **same** value/currency on both hits.\n5. GA4 purchase looks lower; **conv counts** in Ads for the two purchase actions were almost matching; **value** in Ads is much higher than CMS (70–80%).\n6. I can keep **only one** purchase source (GTM or Shoptet). I just want to make sure the **value inflation** truly stops and understand the **two‑hits behavior**.\n\n# Hypotheses\n\n* `/pagead/conversion` is the **main** conversion request; `/ccm/conversion` might be an **EC/consent‑related companion ping** (user‑provided data pipeline). If so, **it shouldn’t create a second conversion**, but Tag Assistant shows two hits, which is confusing.\n* Historic **double‑counting/value inflation** likely came from having **two purchase actions** (Shoptet + GTM) both set as **Primary**, so Ads **summed** values across actions (dedupe by `transaction_id` works **only within the same action**, not across actions).\n* **Conversion Value Rules** in Ads (if any) could also inflate value after the hit (not visible in the request).\n* **Consent‑mode modeling** might add modeled conversions/value into standard columns (again not visible in the hit), but consent is `G111`, so maybe less likely here.\n* I susspect that value in GA4 is the real one. \n\n# What I’m asking the community\n\n1. **Are two hits (**`/pagead/conversion` **+** `/ccm/conversion`**) for a single purchase event expected** when Enhanced Conversions are enabled (at the **Ads action** level), even if EC is switched off in GTM?\n   * If yes, can someone point to **docs** that explain `/ccm/conversion` specifically and confirm it **doesn’t count** as a second conversion?\n2. **Best practice to stop value inflation** in this setup:\n   * Keep **only one** purchase action (either Shoptet **or** GTM) as **Primary**, set the other to **Secondary** or disable?\n   * Any Shoptet‑specific quirks where their native script may fire **two** purchase hits (not only EC), and how to fully disable them?\n3. **Where exactly to 100% disable Enhanced Conversions** so `/ccm/conversion` disappears in Tag Assistant?\n   * I turned off EC in **GTM**, but `/ccm/` still fires (which suggests EC is still ON in the **Google Ads conversion action**). Is that the right place to turn it off so only `/pagead/conversion` remains?\n4. **Other gotchas that inflate Conv. value:**\n   * **Conversion Value Rules** report to see original vs adjusted value — anything specific I should check?\n   * Any **Consent Mode** nuances that could affect only **purchase** (and not add\\_shipping\\_info) by adding modeled value?\n   * Shoptet sending **gross vs net** or shipping included? (My DL shows value/currency consistently; just checking if someone hit a Shoptet edge case.)\n5. **Guard solutions** you recommend:\n   * If I must, I can add a **GTM blocking mechanism** (cookie/localStorage) to prevent a second purchase fire for the same `transaction_id`. Any proven recipes/templates you like?\n\n# Goal\n\n* End up with **one** clean purchase action in Ads (Primary), **one** hit per purchase in Tag Assistant (ideally just `/pagead/conversion`), and **Conv. value ≈ CMS revenue** (minus normal attribution/modeling differences).\n* Confirm whether `/ccm/conversion` is purely an EC/consent companion ping and **not** a second counted conversion.\n\nHappy to share HAR or more redacted screenshots if needed. Any pointers or war stories from Shoptet + GTM folks would be much appreciated! 🙏\n\n",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1md2ugk/help_issue_with_higher_converions_value_then_in/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749930119.0,
        "title": "Server to server side tracking",
        "author": "Programer_Marktech",
        "id": "1lbh81w",
        "selftext": "Hi all,\n\nWe’re running a fully self-hosted server-side GTM (sGTM) setup for our eCommerce business — no Stape, no managed services. It’s deployed via Docker, behind Nginx (with OpenResty/Lua for geo enrichment), and connected to both browser-side GTM and backend events (e.g., purchase confirmations, server-generated events).\n\nI’m mostly interested in hearing from others who are running their own in-house sGTM infrastructure and dealing with real-world tracking challenges — especially:\n\nAdblockers / Privacy Browsers / Tracking Protection:\nWhat kind of issues have you seen in production (e.g., dropped hits, missing data, failed cookie writes)?\nHow do you monitor the reliability of client → server → sGTM → GA4 flows?\n\nAttribution gaps:\nHave you implemented any form of server-side user identity mapping, or started storing your own version of event logs or session data to reduce reliance on GA4 for attribution?\n\nCustom DB tracking:\nDid you build your own database to store events or user journey snapshots? If yes — what was the trigger (e.g., poor reliability, consent enforcement, audit reasons)?\nHow do you correlate data from multiple sources (frontend, backend, ads)?\n\nConsent Mode enforcement:\nAre you handling consent at the edge (e.g., Nginx + geo + cookie inspection) or passing everything through the browser layer?\n\n\nI’ve read most of the guides and docs, but I’m more interested in hearing what breaks in practice, and what people had to build themselves to get tracking truly reliable.\n\nIf you’ve been through this — even partially — I’d really appreciate hearing your experience. Mistakes, lessons, regrets, anything.\n\nI'm also happy to share details about our setup or lessons we've learned so far — hoping this can help others going down the same path.",
        "score": 8,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lbh81w/server_to_server_side_tracking/",
        "num_comments": 9,
        "comments": [
            {
                "body": "I come at this from the privacy/compliance side, not infra. One thing I’ve seen bite teams is when adblockers or privacy browsers strip consent signals, which can lead to data being logged without valid consent.   \n  \nThat’s less a technical reliability issue and more a legal one — regulators increasingly want to see not just ‘what data did you capture,’ but ‘under what consent state.’   \n  \nCurious if anyone here is storing consent states alongside events in their own DB for auditability? That seems to be a growing best practice",
                "author": "Far_War_9778",
                "score": 2
            },
            {
                "body": "Good point — I haven’t really seen many teams actually storing consent state alongside events, but it makes a lot of sense. In our setup, if no consent exists we don’t store any personal data (or anything that could point to an individual), but when consent is present we generate a snapshot ID on the edge and tie it to the event in sGTM/DB. This way each event can be traced back to its consent state, which feels like a best practice going forward.",
                "author": "Programer_Marktech",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How are u hosting the Gtm? Cloud Run?",
                "author": "South_Area9791",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Nope, it's too expensive. It's on our servers.",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "What is great? 😀",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "Hello to you.\n\nDo you have any advice on this topic, or do you just want to say hello?",
                "author": "Programer_Marktech",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1745306882.0,
        "title": "GTM and Shopify",
        "author": "jackreding85",
        "id": "1k50hku",
        "selftext": "Hi everyone. Are there any free plugins similar to GTM4WP for GTM implementation and data layer push in Shopify?\n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k50hku/gtm_and_shopify/",
        "num_comments": 16,
        "comments": [
            {
                "body": "u/jackreding85 not sure about the free plugins, but you can get the data layer up and running fairly quickly using this guide we wrote with Julius: [https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify) (and you get to keep all control using this approach)\n\nif you also need Google Consent Mode v2 and consent-based tracking on Shopify, then I recommend reading this guide: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)\n\nlet me know if you need help",
                "author": "puk789",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Non related question on this question: OP have u tried tracking forms on Shopify through GTM",
                "author": "Inteloci",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Have a look at Tracklution.com, would that solve this for you? No need for GTM.",
                "author": "Anttikoo",
                "score": 1
            },
            {
                "body": "Thank you very much, these look informative!!!!",
                "author": "jackreding85",
                "score": 1
            },
            {
                "body": "Have you tried implementing this with other Cookie apps than the [cooki.fi](http://cooki.fi) from the creator?",
                "author": "Beyond-Fluffy",
                "score": 1
            },
            {
                "body": "I'm just starting on Shopify. So far I;ve been fluent on Woocommerce. But Shopify is a whole different beast",
                "author": "jackreding85",
                "score": 1
            },
            {
                "body": "Ecomm. Google ads conversions, dynamic retargeting and enhanced conversions.",
                "author": "jackreding85",
                "score": 1
            },
            {
                "body": "Can you expand on this?",
                "author": "jackreding85",
                "score": 1
            },
            {
                "body": "No shopify recommend using their bative tracking",
                "author": "Sad-Big3752",
                "score": 0
            },
            {
                "body": "Use the native connector, that should give you a free you've options",
                "author": "headgame3",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734571003.0,
        "title": "Do you re-fire a GA4 pageview tag after consent is granted?",
        "author": "tresslessone",
        "id": "1hhh7jh",
        "selftext": "**Edit:** thanks all. Found the answer (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.\n\nHi all,\n\nI have a client with an on-page hardcoded gtag.js implementation of GA4. Since they have a global audience including EU, I have implemented a consent management platform (CookieBot) through Google Tag Manager. This seems to work in that all GA4 hits are fired in consent mode until the user provides consent. However, because all hits before consent approval are fired in consent mode, we end up without a starting page\\_view event on the original landing page, which can screw with source attribution if there's UTM tags etc present.\n\nSo I guess the question I have, is whether it is a good idea to re-fire the GA4 pageview tag through GTM after consent is granted? Or does the gtag consent update call already make sure that previous hits in the same session are re-processed without consent mode?\n\nThe complication I have, is that GA4 is installed on-page using gtag.js, whereas the CMP is installed through Google Tag Manager. So just blanket firing the pageview tag on the cookie\\_consent\\_update datalayer event will result in duplicates in cases where people have already provided consent.\n\nWhat would be a good solution here?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hhh7jh/do_you_refire_a_ga4_pageview_tag_after_consent_is/",
        "num_comments": 30,
        "comments": [
            {
                "body": "You shouldn't be missing your starting page\\_view event *if* Google Consent Mode is in place. You say \"GA4 hits are fired in consent mode\", so I'm assuming there's a GA4 page\\_view hit with the gcs parameter = G100\n\nYou 100% do not need to retrigger a page\\_view after the user grants consent as long as there is a proper update of Google Consent Mode state to \"granted\"\n\nYou *should* see perhaps a user\\_engagement event at the moment when the user navigates to a new page. That user\\_engagement event should have a gcs parameter = G111 (assuming the user granted full consent).\n\nGA4 backtracks from there to understand \"hey, this user consented. That previous page\\_view event is therefore consented\"\n\nEDIT: Have a look at the GA4 network events when you land and grant consent on [https://www.britishlegion.org.uk/](https://www.britishlegion.org.uk/)\n\nTheir site is a good example of a \"proper\" flow of GA4 events in a Google Consent Mode environment.\n\nBonus: They also use CookieBot.\n\nThis was the first ever consent management project I completed for a client.",
                "author": "StefanAtWork",
                "score": 5
            },
            {
                "body": "Can you remove the hard coded gtag and implement via gtm? Or hard code the cookie bot so gtm doesn’t fire until consent is given? \n\nI’m no expert on consent mode but usually our clients implement in one of those two ways above.",
                "author": "turbopenguin",
                "score": 2
            },
            {
                "body": "Advanced Google Consent Mode makes this not always true. It also makes it much more complicated to understand and validate a working implementation.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Yep, that’s what I mentioned 😉Good to hear it’s fixed 🙂",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "Some user data can still be sent along with cookieless pings, such as user\\_id, which could be argued is PII. So some companies may still choose to block tags from firing until consent is given.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "Just checked, but the tags fired before the banner interaction keep the G100 value in the network tab and in the gtm debug view. I remember Simo checked this with bigQuery. Just make sure that your page does not reload on banner interaction to prevent duplicates. Also check in GTM preview mode under the consent tab that the moment the Consent update event fires, the On-page update shows granted (if you consent of course)to all categories and you should be fine!",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "With advanced consent mode all Google tags are allowed to fire at all times. If consent is given at the same pages; this will retroactively grant consent to all tags that have been fired. However, if a user comes in via a landing page, ignores the cookie banner and than goed to the next page and accepts consent then. Than the first pages does count as a consent declined. So make sure your banner can’t get ignored.\n\nDon’t refresh the page on cookie consent or sent another page view, you will get duplicates.\n\nBut as mentioned above, add the Google config trough GTM instead of hardcoded.\n\n\nBTW, if the default consent state and the update comes from GTM, than you should check carefully whether GTM is loaded before the Google Tag fires.\n\nIn my opinion, use hardcoded CMP and use GA4 config within GTM. If a user has a ad blocker for example, it might block the GTM tracking script which will result in no cookie banner shown if it’s fired trough GTM. And if you’re fully compliant, which almost nobody is, without consent you couldn’t even load like a YouTube vid for example on your website because they automatically set cookies.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Does the gtag send data like a page view, or is that GTM?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "So, if a gtag send everything anyway. How would GTM help you than? Every thing you would set up will create duplicates. They must have a solution for this, did you reach out to them?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Are you not able to put any kind of script in the header. How did they get Gtag in the header and how did they get the GTM script in the header. They just need very little adjustments so that everything would work as it should.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "You’re stating that consent mode works by the way. If you go to tag manager preview mode. Is consent set to denied before the gtag script triggers the event? If so, and the user interact with the banner, does it show the update statement? As mentioned earlier, with advanced consent mode, all Google tags will still get assigned the consent accepted status if the interaction with the banner is on the same page.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Yeah that’s pretty much how it goes. It does seem like as long as you don’t rename the datalayer, gtag.js and gtm are able to share consent signals.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Yeah why not just fire the gtag once consent has been provided?",
                "author": "scotty_ducati",
                "score": 1
            },
            {
                "body": "I wish, but it’s a third-party platform and whilst GTM is provided, the hard-coded GA integration provides a lot more data. The datalayer is pretty scant, so it’s not really an option.\n\nHard coding cookiebot also won’t be possible as a result I’m afraid. It’s a bit of a Frankenstein approach but it’s what we got 😢",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "I’d like to but this is a third party platform and we don’t have the option to take out gtag, as the GTM integration provides a lot less data than the gtag integration. Shitty but it’s what we’re stuck with.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Update: found the answer (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Yea this is an important point. A popup that forces the user to make a decision is much better than a banner that can easily be ignored",
                "author": "turbopenguin",
                "score": 1
            },
            {
                "body": "gtag. Unfortunately we are stuck with a hybrid solution because it’s on a third-party platform. Their GA4 gtag solution is complete, but the datalayer on GTM is quite bare bones, so yeah… GA4 through gtag, CMP through GTM.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "GTM is literally only there so that I can run the consent management platform at the moment, but in the future will be used for other pixels such as FB. Luckily the gtag and GTM use the same datalayer, so the CMP is able to communicate with the gtag setup.\n\nNote that I found the answer to my problem (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Yes, consent mode works. The tags fire but they are in consent mode (G100). Only the tags that fire after cookie acceptance fire in 'full' mode (G111).",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Update: found the answer (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "All Google tags may be fire at any time as long as default consent is set to declined. If you don’t fire your Google tags prior consent you will never benefit from the moddeling features. It will use cookieless pings to fill in the gaps.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "But as far as I can see in the Preview mode, my GA4 Google Tag doesn't get fired again after I update the consent. It fired before but at that time I had \"denied\" for all consents. Then I updated and there is not GA4 Google Tag at the top (Initialization event). \n\nDid you solve this somehow? Is it working for you?",
                "author": "MapeSVK",
                "score": 1
            },
            {
                "body": "In that case, if consent update is on the same page, as the landing page. Google will still set them to G111. I’m at work in about an hour, I’ll test if it applies G111 to the tags with the debugger or not, I don’t remember that. But, if it works like you described it should retroactivly set them to G111, I’ll have a check if it shows in tag manager. If it does with my inplementation than you would probably still have to adjust something in GTM to make it work. I’ll get back to you in 1-2 hours.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Thanks!\n\nNote that Simo Ahava is pretty clear on this: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.\n\nWill be good to get this tested though, so please do get back to me. I'm currently using GA debugger and it doesn't allow me to inspect retroactive changes like this. Not even sure the GTM debugger will do this, but worth checking.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Thanks. Yeah I guess I could look in BQ once we get some data but I pretty much take Simo’s word for gospel in this space.\n\nI think all is well in my client’s setup but I’ll monitor for any weirdness in attribution and / or (not set) landing page instances.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "What Simo says is a 100% correct for sure, no doubt. He’s a legend haha. But because you’re not having the usual setup it’s always good to check. If you have bigQuery connected you can test it yourself which is also documented in Simo’s article!",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Yeah we have a BQ setup so I’ll have a poke around there",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "EU regions usually has GDPR rules and we cannot fire any tags without user consent. So it's better to fire the tag only after user approve cookies.",
                "author": "zenrayman",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1751874681.0,
        "title": "Problems with UserCentrics Autoblocking",
        "author": "sabwin",
        "id": "1lto9cn",
        "selftext": "Hello all, I'm honestly not 100% sure if this is the right sub for this, but I couldn't find another (active) subreddit that would fit better so here goes.\n\nWe started using UserCentrics as a cookie banner for a customer of ours in april and have been very happy with the results, especially the drop in missing attributions. But about 3 or 4 weeks after implementation, UserCentrics started blocking every JavaScript on our website, which led to the site becoming absolutely unusable. We fixed this by changing the trigger sequence and moving the UserCentrics code further up in the source code, and at first it seemed like that was the fix. 2 weeks ago the same Problem happened and the only fix was changing from auto blocking to manual blocking. Has anyone else had similar problems with UserCentrics? How did you fix this?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lto9cn/problems_with_usercentrics_autoblocking/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Hey there, just quickly, this sounds like it could be a bug released in one of their updates. You should let them know just in case. Cookiebot has a good rep, I'm sure their support will help.\n\nCan I suggest that as another commenter said. Use tag manager triggers to block your tags rather than relying on script blocking. Script blocking is very non-discriminate because you're essentially relying on a whitelist to pass through allowed scripts. \n\nIf you're relying on script blocking, this sounds like you might not be using Google Consent Mode. I can't recommend it enought! \n\nOne thing you might not know, is you can also piggy back non-google tags on consent mode signals. Set them up with basic consent mode. \n\nThis is a video guide for setting up a different CMP but you might find the explanations helpful. Even for cookiebot.[link to video](https://youtu.be/mEhdC1wrlMM?si=ut_K7_NxXJlsbrwC)",
                "author": "GetTerms-Alistair",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Personally I never use the auto blocking feature but manually set up triggers. It saves a lot of headaches.",
                "author": "moonsal71",
                "score": 1
            },
            {
                "body": "I don’t recommend using auto blocking. If you’re using Google Tag Manager, it can even end up blocking GTM itself sometimes.\n\nIn general, auto blocking from CMPs causes more problems than it solves. Since Consent Mode V2 still lets Google tags send data in a privacy-safe way, it’s better to control tag firing directly inside GTM.\n\nThere’s an option in GTM called “More Settings” where you can choose to fire tags only when consent is given.\n\nLet me know if you want help setting it up.",
                "author": "enrico-chiolo",
                "score": 1
            },
            {
                "body": "Thank you all, we actually have been using Consent Mode V2, as well as blocking the Tags via GTM, the only reason we used Auto Blocking is because we aren’t always in direct contact with the customer’s web agency and wanted to avoid possible problems - seems that didn’t work as intended. \nBut in this case we will keep the script for manual blocking integrated.",
                "author": "sabwin",
                "score": 1
            },
            {
                "body": "i would also stay way from autoblock. It easily breaks your webapp. The documentation is very confusing and inconsistent and there is nearly no way of debugging the autoblock. There is mention of a config file that it uses, but this file is nowhere.",
                "author": "macrozone13",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743043511.0,
        "title": "GA4 not receiving woocommerce events but GTM is firing them just fine",
        "author": "Somechords77",
        "id": "1jku0ma",
        "selftext": "Hello People,\n\n\nI’m currently setting up GA4 + GTM for a WooCommerce site. I’ve configured events like add_to_cart, begin_checkout, and purchase via GTM — and in GTM Preview Mode, everything looks great:\n\n✅ All GA4 tags are firing\n✅ Data Layer contains clean ecommerce object (with item IDs, value, etc.)\n✅ Event names are correctly set as: add_to_cart, begin_checkout, purchase\n\nBut... in GA4 DebugView, I only see these basic events:\n\npage_view\n\nuser_engagement\n\nregistration_completed\n\nform_submit\n\ncourse_pageview\n\n(etc.)\n\n❌ Nothing related to WooCommerce is showing up.\n❌ purchase doesn’t appear\n❌ GA4 event count for purchase = 0\n❌ Even after renaming tags to standard GA4 names (purchase, add_to_cart)\n\nWhat I’ve tried so far:\nEnabled \"Send Ecommerce Data\" in GA4 tags\n\nChecked dataLayer — confirmed clean ecommerce structure for all events\n\nSet Measurement ID correctly\n\nTried adding consent_update manually via a cookie tag\n\nWordPress GTM plugin is configured to auto-grant all consent flags (ad_storage, analytics_storage, etc.)\n\nGA4 DebugView shows other custom events from GTM — just not Woo ones 🤷‍♂️\n\nSo the problem seems to be:\nGTM is pushing the data ✅\nGA4 DebugView is NOT picking it up ❌\nAnd it’s only the WooCommerce-related events that are affected.\n\nAnyone else run into this issue? Is this a Consent Mode hiccup? WooCommerce block? Something missing in GA4 settings?\n\nAny help would be super appreciated 🙏",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jku0ma/ga4_not_receiving_woocommerce_events_but_gtm_is/",
        "num_comments": 18,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check the real-time reports. Are the ecommerce events missing from there too?",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "If GTM is firing WooCommerce events correctly but GA4 isn't picking them up in DebugView, it might be worth double-checking a few things:  \n  \nConsent Mode – Even if GTM is firing tags, GA4 might still suppress data if consent flags aren’t fully granted before the events fire. Try firing a consent\\_update before your ecommerce events.  \n  \nEvent Parameter Structure – GA4 can sometimes ignore events if the items array isn’t exactly as expected. Make sure each item in the array includes item\\_id or item\\_name at minimum.  \n  \nDuplicate GA Tags – If GA4 is loaded both via your plugin and GTM, it can cause unpredictable behavior. Stick with GTM only for cleaner results.  \n  \nThat said, if you want an easier way to capture all Woo events (purchase, add\\_to\\_cart, etc.) without worrying about GA4’s picky behavior or consent handling, I’d highly recommend trying Qwestify. It auto-captures all ecommerce events (even in WooCommerce), works with cookie-less tracking, and needs no extra setup. Might save you from all this debugging madness!",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "If GTM is firing WooCommerce events but GA4 isn’t showing them, it’s likely a consent or data structure issue. Make sure consent\\_update fires before any GA4 tags, and your items array includes item\\_id or item\\_name. Also, avoid loading GA4 both via plugin and GTM — stick to GTM for consistency.  \n  \nFor a simpler and more reliable setup, try Qwestify it auto-tracks WooCommerce events like purchases, ATC, and more without manual tagging or consent headaches. It’s accurate, cookie-less, and works out of the box.",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "Let's refocus on the GTM Preview mode.\n\nWhen you said it looks great, did you check BOTH tag  \"views\"...meaning the GTM tag data AND the GA4 data?\n\nYou select between those by clicking the relevant tag id at the top of the screen.\n\nThis is absolutely critical.  Its technically almost impossible to show GA4 data here but nothing in GA4 itself. Well, anything is possible....\n\nIn my opinion, GA4's debug mode is useless, and GTM's browser extensions are useless.\n\nThere is one test that reveals all...GTM's Preview mode.",
                "author": "Adept-Requirement321",
                "score": 1
            },
            {
                "body": "You can use this plugin if purchase event not firing\n\nhttps://youtu.be/vdkAIEcCt9Y?si=6MDAOo5knKCLLnt8",
                "author": "webhasan89",
                "score": 1
            },
            {
                "body": "Yes. Every thing else is working. Page view, registration_completed. But no woocommerce events.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Yes I did checked those . Firstly I made sure that I send the ecommerce data in tags and thy are ‘true’. Then I created variables manually. \n\n\nOne thing I need help is earlier I didn’t created variables and just used tags and key events . Now multiple purchases are firing. How to make sure to remove the extra ones.???\n\nBtw thanks for the extension info. I removed it.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Install the Analytics Debugger extension for Chrome by David Valleho. It checks the outgoing network logs from the browser. Do you see ecommerce events there?",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "Yes I have installed this and no I am not able to see  ecommerce events.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Very interesting. Have you checked the console for error logs? Maybe the network tab shows requests in red color? I am trying to narrow down the source of the problem.",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "Analytics Debugger extension for Chrome by David Valleho:\n\nThis extension is likely malware. It was non-functional when J added it, and none of the developer links were valud.\n\nMost concerning is that the extension has permission to read your keystrokes.  That means usernames and passwords, too.  This extension has no business doing that.  \n\nUse any other inspector.",
                "author": "Adept-Requirement321",
                "score": 1
            },
            {
                "body": "Console as in inspect>console?",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Great but thank you It was resolved. Someone here suggested that disconnect from google site and ecomm events started coming .",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Wow thank you.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Is it ok if I DM you?",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Sure!",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "Sent Hi check please",
                "author": "Somechords77",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746544236.0,
        "title": "Meta fbclid/fbc capture and passing via sGTM",
        "author": "brett_fish",
        "id": "1kg6wnr",
        "selftext": "Is there another/better way to capture and send the fbclid URL parameter (which becomes the \\_fbc cookie/parameter) server-side?  Our current method:\n\n\n\nWhen we do tracking setups via GTM/sGTM, for Meta, one of the key components is the fblcid URL parameter for user matching and ad attribution.\n\nIf we're doing a web+server setup (Pixel + CAPI), the Meta Pixel will automatically read and capture the fbclid URL parameter and set it as the \"\\_fbc\" 1st party cookie, and pass it back with the Pixel data automatically.\n\nTo pass that \"fbc\" value server-side, in the web container, we create a 1st party cookie variable for \"\\_fbc\" (and \\_fbp also), and add it as an event object in the GA4 event tag.  (per Meta's documentation here: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gtm-server-side/). Then in the sGTM container, we create an Event Data variable for that parameter, and then set it as the value for the Click ID parameter in the server tag.\n\nIf we're doing a setup that's server-side only (i.e. the Pixel doesn't automatically read the fbclid URL parameter and set the \\_fbc cookie), we use a Cookie Creator tag in GTM to set a 1st party cookie with format fb.1.{{Event Time}}.{{fbclid}}, where fblclid is the URL query variable.\n\n  \nHowever - we recently did a web+server setup on a Shopify store using their Customer Events section, and when we looked at the server container event data coming from the web container, it was saying that the fbc and fbp variables incoming were undefined.  I understand that the fbc parameter is only present if the user came from a paid ad, and thus has the fbclid URL parameter present.  But the \"fbp\" parameter is a device/browser identifier that should pretty much always be available.  \n  \nJust wondering if anyone has a different/better way of capturing and sending the fbc parameter server-side.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kg6wnr/meta_fbclidfbc_capture_and_passing_via_sgtm/",
        "num_comments": 13,
        "comments": [
            {
                "body": "The advantage is 1) it is easy, 2) you carry it through on every event using the shared events settings, 3) it starts on the client side where the URL value first actually appears and is persisted all the way from the client to the server to BigQuery. Let me see if I have already written a blog post for something similar. Although I have done this with custom JavaScript, I have also started using the Cookie Creator template to get around CSP SHA-256 issues.",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you considered 1) writing the &fbclid= URL query string value client side to a 1st party session cookie for your root domain, 2) if the cookie exists and has a value do not allow the cookie write tag to fire again, 3) and send the &fbclid= cookie value to GA4 as a shared event. I am presently doing this to tack the &fbclid= value onto events in GA4 =>> BigQuery.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "thanks!  have not done that yet - what would be the advantage/difference in that method vs. what I outlined we're doing right now?  We set a 1st party cookie, so would be super interested how this differs.\n\n  \nAnd if there's an advantage - would be glad to pay you for your time to show me how to do that!",
                "author": "brett_fish",
                "score": 1
            },
            {
                "body": "Here is an example of doing something similar with the referral source and custom JavaScript. I actually have an implementation where I am doing this with &fbclid and Cookie Creator but have not yet written it up.\n\n\nhttps://drewspen.weebly.com/blog/sending-the-source-and-landing-page-to-a-crm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "thanks - we use Cookie Creator also - so in the web container on the client side we set the \"\\_fbc\" cookie with it on the first page visit.  Then we apply that value to all ensuing events in the session.  For the value of the cookie, we have a {{fblcid}} variable which is the URL query value, and an event time generator.   In the Cookie Creator tag, we set the \\_fbc cookie value as fb.1.{{Event Time}}.{{fbclid}}.",
                "author": "brett_fish",
                "score": 1
            },
            {
                "body": "If I get time in a bit I will see about sending you a JSON object you can import into a 'sandbox' workspace to see what I am doing. ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "That would be great, thanks.",
                "author": "brett_fish",
                "score": 1
            },
            {
                "body": "Is it better to get the cookies on the sGTM to avoid having safari blockage when you create the cookies using JS?",
                "author": "FreddyDEE90",
                "score": 1
            },
            {
                "body": "Just sent you a message ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "The example does stuff at both the session and user level",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Could you send this to me as well. I have the same problem and am really curious about your setup.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Sent chat message ",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747475025.0,
        "title": "Problem with tag too low",
        "author": "Then-Strike9205",
        "id": "1kop6ks",
        "selftext": "After installing CookieYes I now have an “urgent” warning in GTM that my tag is too low. I’m sure it has to do with CookieYes, but is there a way to fix this? Will this reduce my sessions and if the tag is higher will my site no longer be GDPR compliant? Thanks in advance ",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kop6ks/problem_with_tag_too_low/",
        "num_comments": 11,
        "comments": [
            {
                "body": "I would not install both codes separately but rather install CookieYes via GTM. In that case GTM would practically fire first and a default consent (wich you set) is given. \nFind more [here](https://www.cookieyes.com/documentation/getting-started-with-google-tag-manager-and-cookieyes/#How_to_ins_0)",
                "author": "globelol",
                "score": 6
            },
            {
                "body": "A clean install via GTM will fix the problem.\nIt also allows you to have better control over consent and signals.",
                "author": "Chemouel_Dgx",
                "score": 3
            },
            {
                "body": "Hey! The “tag too low” warning in GTM means the CookieYes tag isn’t firing early enough to manage consent.\n\nHere’s how to fix it:\n\n* Ensure that the CookieYes tag is set to trigger **Consent Initialization – All Pages**  \n* Then, check your tag order. CookieYes should fire **before** any other tags.\n\nThis won’t reduce your sessions; in fact, it boosts GDPR compliance by making sure consent is handled before tracking kicks in.\n\nIf you still need help, you can write to [CookieYes GCM Support](https://www.cookieyes.com/gcm-support-center/). Hope this helps!",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "Hey, really sorry to hear that. Just wanted to check in and see if things are resolved now. If not, feel free to DM me your CookieYes support ticket, and we’ll make sure someone follows up ASAP to help you get this sorted.",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "Glad to hear the issue is fixed!",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thanks for the help!",
                "author": "Then-Strike9205",
                "score": 1
            },
            {
                "body": "Thanks. I’ve been working with a member of your support team and my host BigScoots to try to get this fixed. Without the sessions being tracked properly I’m practically at square one all over again. It’s stressful.",
                "author": "Then-Strike9205",
                "score": 1
            },
            {
                "body": "I believe the problem is now fixed. Thanks for the follow-up. Now it’s just a matter of waiting for my sessions to start going back up. I suspect it will take months.",
                "author": "Then-Strike9205",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747822484.0,
        "title": "Consent with UET ms ads tag -they keep telling me I need to do consent mode, but I already set it up months ago",
        "author": "Numerous_Test_7858",
        "id": "1kru98j",
        "selftext": "I keep getting chased by MS for implementing consent mode, but AFAIK I have had it implemented for months.\n\nI have cookie bot banner which is configured working correctly.\n\nThe UET tag consent settings I have are on\n\n**Consent mode settings (EXPERIMENTAL)**  \nEnable consent updates from GTM\n\n**Consent settings (beta)**\n\nbuilt in consent checks\n\nad\\_storage ad\\_personalization, ad\\_user\\_data  \n  \nNo additional consent required\n\nSo the tag doesn't get blocked, but still fires like google tags do, but as I understand the built-in consent means that nothing is recorded unless the user consents, but it means you don't need them to reload the page after consenting to get the hit.\n\n  \nIs this the issue?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kru98j/consent_with_uet_ms_ads_tag_they_keep_telling_me/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Built in is for google tags, set the ms tags to use additional consent and set to marketing or analytics… that should work",
                "author": "Interesting-Plan-618",
                "score": 2
            },
            {
                "body": "Have you tried simo ahava consent tag to set the update/default status? It inclused ms too",
                "author": "Interesting-Plan-618",
                "score": 2
            },
            {
                "body": "By the way, nice approach, i like the thinking behind it",
                "author": "Interesting-Plan-618",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have the same issue. I can see from the console that all the consent updates are being put into the uet queue but the emails keep coming and the call to \\`https://bat.bing.com/action/0\\` does not have the \\`asc\\` parameter as discussed at the bottom of [https://help.ads.microsoft.com/?ocid=#apex/ads/en/60119/1-500](https://help.ads.microsoft.com/?ocid=#apex/ads/en/60119/1-500)\n\n  \nIt feels like their tag just doesn't actually look at the consent settings it has sent itself.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "Had similar problems. We kept getting the messages from Microsoft about consent not being set up properly, GTM preview mode had all the statuses being set to granted but Bing UET refused to recognise it.\n\n\nFound this solution where you check if adstorage consent is granted in google, and if so run a custom html to force bing to update the consent state, and then set the uet tag to fire in sequence after that script runs. Just have to remove any other triggers from the uet tag so it can only fire if consent is granted and that script runs. \n\nhttps://www.reddit.com/r/GoogleTagManager/comments/1e8kl85/microsoft_consent_mode/\n\nThe first script that sets the default state to denied, they say should be hardcoded before gtm. I set it as a custom html to fire on initialisation and that worked fine and saves some time arranging dev.",
                "author": "whydidthathappen",
                "score": 1
            },
            {
                "body": "Same here.  The most annoying is the popup when in your account.  The only way to close the popup is by emailing yourself a reminder or starting a chat with support.  After about the 10th time I did the chat option.  Support told me to ignore the popup.  I explained to them that you really can't do that and it forces you to choose one of the options to close it - they didn't seem to understand that is how it worked.  While they were with me they asked if they could check consent mode manually and confirmed everything was setup properly and working as it should.  These last few days though I am getting bombarded with emails telling me to implement consent mode.  I am chalking this up to someone or some department not thinking this all the way through when it was implemented.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "We’ve always fired them only when marketing consent is present but now Microsoft want to receive the consent value.  \n\nOnly their GTM tag itself doesn’t actually read it correctly, though it claims, to be fair, that doing so is “experimental”. \n\nWe’ve moved to firing a community UET consent tag once for the default and then again when the CMP sets it. The UET tag the  correctly picks it up and sends the `ack` parameter.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "It's all working fine now, cookieyes and a custom html to help ms ads read the status properly. But thank you",
                "author": "whydidthathappen",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752016976.0,
        "title": "Form submissions not showing in Google Ads, but tag fires fine?",
        "author": "Infamous_Solid_3465",
        "id": "1lv3l22",
        "selftext": "I started running Google Ads and we’re definitely getting more leads through our contact form.\n\nBut in Google Ads, the form submission conversion isn’t increasing at all. Could this be due to cookie consent? Like if people don’t accept cookies, does the submit event not get sent to Google Ads? Or is it a conversion attribution issue? \n\nI checked in Google Tag Manager, and the tag does seem to fire correctly. \n\nWe also track other conversions as secondary goals (like page views, time on page), and those are being counted normally in Ads. At least the count is going up. \n\nAny tips on how to troubleshoot this?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lv3l22/form_submissions_not_showing_in_google_ads_but/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sometimes there's a 16-24 hour delay before Google ads will record a lead. How long has it been for you?",
                "author": "mud4231",
                "score": 1
            },
            {
                "body": "Yeah, I’m talking about a month. We usually get a few leads per month, but once the search campaign started, we are getting around one request per day, which is great for our niche. The first two were tracked in Google Ads, but after that, nothing else has been recorded there.\n\nI’m not running any other marketing activities that could explain the increase, so it feels like the campaign is working. But from a tracking perspective, it looks like we’re spending money and getting zero results. I’m really confused. Because technically things seems to be set up and working correctly.",
                "author": "Infamous_Solid_3465",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748501067.0,
        "title": "Re-evaluated Ketch after 2 years... oh boy",
        "author": "DigitalStefan",
        "id": "1ky40mi",
        "selftext": "I was recently invited to evaluate Ketch, which positions itself as a competitor to OneTrust as a CMP.\n\nThe tl;dr is it is still not in a state where I would recommend it to a client. It's not that it doesn't work or it doesn't have some good features, it is because it still has a poor GTM integration.\n\nThe premise is actually good. You have the option (and it seems like a default \"do it this way\") to directly link a GTM container to the Ketch service and it will automatically manage your tags for consent.\n\nWhere it falls down is when you want to do the \"advanced\" GTM implementation, because the guidance for dealing with 3rd-party tags (Facebook etc) is to use a trigger group based on page view and a specific data layer event emitted by Ketch.\n\nWhy a trigger group? That's because Ketch haven't solved the problem that practically every other CMP has solved, which is to provide a data layer event that can be used as a direct replacement for an All Pages trigger, but it fires after consent is established and also after Google Consent Mode has updated its state. Effectively, Ketch is advising to use a non-optimal and fairly old fashioned method to control consent for 3rd-party tags.\n\nIf you've used GTM for any length of time, you have probably used a trigger group. If you've tried to use a trigger group for anything interesting, you'll have discovered that it has a major limitation of a trigger group never being re-evaluated, meaning if any part of the group fails to fire you have zero opportunity for the group to fire until the next page load, no matter what events occur. Trigger groups are not an \"and\" condiion for triggers!\n\nThe other major failing is there is no native tag template for the main Ketch script. There's a required tag template to manage Google Consent Mode integration... there's a version in the community gallery, but it's not the same version as the one they want you to download and then import.\n\nYou can do a Custom HTML tag with the Ketch script, but this is not great in terms of timing.\n\nSo... sadly, the recommendations are still CookieBot, CookieYes, Enzuzo, UserCentrics and OneTrust, depending on features and budget.",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ky40mi/reevaluated_ketch_after_2_years_oh_boy/",
        "num_comments": 9,
        "comments": [
            {
                "body": "That’s an interesting idea. \n\nI know a GTM template can use `addConsentListener` but I didn’t think there was a way to do that from outside the ecosystem.\n\nI’m struggling to find anything bout it. Do you have any links please?\n\nEdit: or maybe you meant as a callback from the OneTrust consent update? I believe they do have event listeners you can bind.",
                "author": "iamfuzzydunlop",
                "score": 2
            },
            {
                "body": "Yes. I have full access to change the site push code. That’s no problem. I’m end to end here, so can make any changes necessary to try to get this stuff easier to maintain and understand.",
                "author": "iamfuzzydunlop",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What approach are you using for OneTrust? My experience is that their events tend to be late enough that I still need to use a trigger group for something like a purchase to ensure that the consent update has arrived.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "It depends on how you are recording a purchase event. If you’re doing it based on a page view, the easy answer is to use the OneTrustGroupsUodated event, which is guaranteed to be immediately after consent is updated (including Google Consent Mode).\n\nIf you have a plugin or a hand coded “purchase” event, the plugin providing that event should be smart enough to understand consent or if you have your own purchase event from your dev resource, they should make sure the event fires at the right time so you don’t have to worry about it.\n\nBut… if you really have no control over the timing, your example is actually one that fits the use case of a trigger group so long as one of the triggers in the group is guaranteed to fire late enough that consent is established, but early enough that you’re not losing the data due to user quickly navigating away from the page.\n\nA trigger group can work in that instance because you don’t want to measure more than one event on that page.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I have e-commerce events that are pushed into the datalayer in the source of the page. \n\nWhile it’s possible to delay them, you can’t reliably be sure they are going to come after OneTrustGroupsUpdated because the OneTrust loading is asynchronous. \n\nI’ve always felt that the real solution is for Google consent mode to be cleverer. If it held back the tags that don’t meet consent until a consent update call, everything would be trivial.\n\nI’d really love to lose the trigger groups as they cause so much pain when trying to get event deduplication working for server side.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "If you need to have a data layer event fire after a consent update, you can run the code for the DL push as a callback from the update.\n\nThis is actually the one thing I haven’t done myself, so I’m going to have a crack it it over the next week and write up a how to.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This would be an actual amend to the on-site code responsible for the DL event push.\n\nThis is where that kind of thing *should* be.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I had to poke around in the OneTrust API today and rediscovered the facility to put code inside an OptanonWrapper() function on site.\n\nI need to test it (which may take a while... I have a busy few days ahead), but in theory placing code to generate your purchase event data layer push inside OptanonWrapper() should mean that code runs after consent is established.\n\nI'm sure there are other ways to achieve it, but that seems the more straightforward.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752616555.0,
        "title": "GA4 Event Data Discrepancy After GTM Container Migration",
        "author": "No-Resolution9527",
        "id": "1m0v24a",
        "selftext": "Hi everyone,I’m working on a GA4 migration project where we recently imported tags from one GTM container (let’s call it *Container A*) into another (*Container B*). All event data from the imported tags in Container A is now being sent to the GA4 property connected with Container B.However, the original GTM container and GA4 property (Container A + GA4 A) are still active. So currently, two GA4 properties are collecting data for the same website hostname — one via the original setup, and one via the new one.The issue:  \nWhen comparing GA4 event data between the original property (GA4 A) and the new property (GA4 B), I’m seeing a **significant data discrepancy** for the same hostname. The volumes are far off, and I’m unable to pinpoint the root cause.Some additional context:\n\n* I have already paused the tags in *Container B* that could potentially interfere with *Container A* — particularly marketing-related tags that weren’t needed on the other site.\n* Even after doing that, the numbers did **not** improve.\n* My initial suspicion was that there might be interference — e.g., conflicting `gtag` instances, consent settings, or tag sequencing issues due to both containers being present on the same pages.\n\nHas anyone experienced similar discrepancies when running multiple containers on the same domain?  \nCould conflicting tags or consent issues cause data loss or suppression like this?Thanks in advance for your help!Let me know if you want to include logs, screenshots, or GTM debug notes in a follow-up.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1m0v24a/ga4_event_data_discrepancy_after_gtm_container/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hey OP, While running two tag containers on one site / page is generally discouraged it is as you've demonstrated doable fairly easily. The first concern usually is how the datalayer(s) interact with each other so that could be a factor to investigate if you have a number of datalayer event related custom triggers?\nyou might want to check the order of your gtm script implementations as well, is it possible you are setting your default consent only after one of the containers which might have an impact?\nJust some thoughts as a starter...",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "I have paused the consnet tags for now but i can into it further  \nI tried checking the consent mode, I thought that may be affecting it, but didn't seem like it in the Cookies when I checked the `gcs` parameter was showing `G100` when user didnot give consent and it properly changed to `G111` when i accepted the cookie policy\n\nand only few events use custom events and some use the css selectors\n\nyeah i think i can re check the order script and the dataLayer interactions",
                "author": "No-Resolution9527",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739793610.0,
        "title": "Code for Googletag manager not working - is it incorrect?",
        "author": "tryinganewpath",
        "id": "1iri94w",
        "selftext": "I was told to add this code immediately after the header tag on every page of my site, so that we can use the google consent manager tag. However, when I am troubleshooting, apparently no tag can be found. I have been trying for hours but I am really confused. This is what I was told to insert:\n\n \n\n<script>\n\n// Define dataLayer and the gtag function.\n\nwindow.dataLayer = window.dataLayer || \\\\\\\\\\\\\\[\\\\\\\\\\\\\\];\n\nfunction gtag(){dataLayer.push(arguments);}\n \n\n// IMPORTANT – DO NOT COPY/PASTE WITHOUT MODIFYING REGION LIST\n\n//Set default consent for specific regions according to your requirements\n\ngtag('consent', 'default', {\n\n  'ad\\\\\\\\\\\\\\_storage': 'denied',\n\n  'ad\\\\\\\\\\\\\\_user\\\\\\\\\\\\\\_data': 'denied',\n\n  'ad\\\\\\\\\\\\\\_personalization': 'denied',\n\n  'analytics\\\\\\\\\\\\\\_storage': 'denied',\n\n'regions':\\\\\\\\\\\\\\[<list of \\\\\\[ISO 3166-2 region codes\\\\\\](https://en.wikipedia.org/wiki/ISO\\\\\\_3166-2)\\\\\\\\>\\\\\\\\\\\\\\]\n\n});\n\n\n\n// Set default consent for all other regions according to your requirements\n\n\ngtag('consent', 'default', {\n\n\n  'ad\\\\\\\\\\\\\\_storage': 'granted',\n\n\n  'ad\\\\\\\\\\\\\\_user\\\\\\\\\\\\\\_data': 'granted',\n\n\n  'ad\\\\\\\\\\\\\\_personalization': 'granted',\n\n\n  'analytics\\\\\\\\\\\\\\_storage': 'granted'\n\n});\n\n \n\n</script>\n\n\n<!--Banner script here!-->\n\n\n \n\nIt then said to insert our website code from Consent Manager immediately afterwards. I have done all of this but it is still not working and I am getting errors in my Google Analytics account. I know it says to edit the regions but then the instructions said to leave it blank so I am utterly confused. Can anyone help? What am I doing wrong?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1iri94w/code_for_googletag_manager_not_working_is_it/",
        "num_comments": 19,
        "comments": [
            {
                "body": "Sorry it pasted horribly and I can’t seem to fix it. It was line by line. And no I’m not sure what to do for the region list as we don’t want specific regional settings I don’t think? We are based in the UK but do get some international traffic",
                "author": "tryinganewpath",
                "score": 2
            },
            {
                "body": "My recommendation would be:  \n\\- talk to the person who sent you the code. Ask them to send you the proper code (properly formatted, with regions included or not), without any placeholders or repeated escaping slashes. Regarding the regions, discuss with them which countries or regions you want to manage consent for, so that this is reflected in the code. Make sure you copy the code correctly so that the formatting isn't lost.\n\n\\- OR research how Consent mode should be implemented, e.g starting here [https://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced](https://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced) and finalize the code yourself. You should still discuss which the target regions should be.\n\n\\- choose one of those two options based on your current working relationship with the other person and skillset.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Your code looks all messed up, did it look like that when you pasted it into your site? Did you add an actual region list?",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Hey, let us know if removing consent code helped. And remember one main thing - consent **isn't only about banner**, it's also about consent log - which this solution won't provide.",
                "author": "WojtGalucci",
                "score": 1
            },
            {
                "body": "When I first came across this I struggled with endless options to get consent installed. Let me know if you need help and I will take a look.",
                "author": "sweetchiicka",
                "score": 1
            },
            {
                "body": "Hi all, I'm a former mysql/php developer and I recognize the code problem which is preventing others from helping.\n\nThe backslash is an escape character:\n\\\n\nThese are added around \"reserved\" characters that have special meaning to the web parser and would cause the page to distort.\n\nLooks like op fixed the problem, but this explains why.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "The code was directly from Google Analytics, I'll try to paste it below again in case it works better! We are using Consent Manager as our CMP. I am trying to follow all the online instructions but something is definitely not working properly\n\n`<script>`\n\n`// Define dataLayer and the gtag function.`\n\n`window.dataLayer = window.dataLayer || [];`\n\n`function gtag(){dataLayer.push(arguments);}`\n\n \n\n`// IMPORTANT – DO NOT COPY/PASTE WITHOUT MODIFYING REGION LIST`\n\n`//Set default consent for specific regions according to your requirements`\n\n`gtag('consent', 'default', {`\n\n  `'ad_storage': 'denied',`\n\n  `'ad_user_data': 'denied',`\n\n  `'ad_personalization': 'denied',`\n\n  `'analytics_storage': 'denied',`\n\n `'regions':[<list of` [`ISO 3166-2 region codes`](https://en.wikipedia.org/wiki/ISO_3166-2)`>]`\n\n`});`\n\n`// Set default consent for all other regions according to your requirements`\n\n`gtag('consent', 'default', {`\n\n  `'ad_storage': 'granted',`\n\n  `'ad_user_data': 'granted',`\n\n  `'ad_personalization': 'granted',`\n\n  `'analytics_storage': 'granted'`\n\n`});`\n\n \n\n`</script>`\n\n`<!--Banner script here!-->`",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Thank you! Unfortunately the code was sent from our PPC agency who say they don’t know more than that. It’s essentially from the Google analytics guide. I looked at the link you sent too but it’s too complicated for me. I’m thinking maybe we need to find an emergency web developer or something",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "Sorry I don’t know why. This is the code I used and I added it to the website header, site wide. I also added the semi-automatic blocking code from Consent Manager within the body, which is what it told me to do. I have previewed the site in tag assistant and it does seem like the tag is firing now, but Google analytics is just showing an error still and says none of it is set up.\n\nI have spent 6 hours on this already today and just feeling incredibly stupid and frustrated. Web development is not my area of expertise!",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "What consent management platform are you using? Most of them have built-in ways to implement consent mode which will not require developers (e.g deployment via a WordPress plugin or via Google tag manager for example). The current CMP you have may have a detailed guide on how to do that.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Sorry late reply, if you're still stuck DM me, I'll help you fix it",
                "author": "sp_net",
                "score": 1
            },
            {
                "body": "We’re using Consent Manager. It had a guide but I did follow it all and somehow it still didn’t work :( I am sure there is something wrong somewhere, maybe on the site itself, so I’ve reached out for some help from our PPC agency’s developer guy as clearly this is too far from my skill set. But thank you for trying to help me!",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "Thanks this maybe actually sounds like a good plan. In this case would I go through and delete any consent manager code first?",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "You're welcome!\n\nHave you tried these? [https://help.consentmanager.net/books/cmp/page/google-tag-manager-%28gtm%29](https://help.consentmanager.net/books/cmp/page/google-tag-manager-%28gtm%29)  \n[https://help.consentmanager.net/books/cmp/page/working-with-gtm-google-consent-mode-v2](https://help.consentmanager.net/books/cmp/page/working-with-gtm-google-consent-mode-v2)  \nThere's no need to implement Consent mode code directly if you follow the GTM instructions.",
                "author": "Etianen7",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1735655521.0,
        "title": "Consent Mode Woes",
        "author": "Budget_Wrangler511",
        "id": "1hqfu72",
        "selftext": "Background is our google ads conversions have gone through the floor this year and we strongly suspect it's because we weren't using consent mode. (years of past good data)\n\nWe've finally set up Cookiebot banner to fire in the EEA GDPR required areas, but how do we set up default / triggered states properly? \n\nWe have Plerdy (site analytics) tags as well as google standard ones, which as we understand from cookiebot setup we'll need to require additional consent for. \n\n**Question:** If we leave consent as the default (denied), then how will users outside of the EEA ever be able to give consent? (As we only fire banner in EEA area). Is Google Ads effectively saying we need to have a GDPR banner up everywhere regardless to be compliant with consent mode?\n\nWhat are the correct options - do we:  \n\\- Set default to be 'Granted' everywhere, and let EEA users choose correct consent (this is risky option?)  \n\\- Set default to denied and require consent for Plerdy tags to fire somehow (which I don't understand how anyone outside the EU ever will be able to since there's no banner, only in EEA?)  \n\\- Set default to denied, and require banner worldwide?",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hqfu72/consent_mode_woes/",
        "num_comments": 23,
        "comments": [
            {
                "body": "> Set default to denied, and require banner worldwide? \n\n\nThis is the most user-centric option. It actively shows that the company values user privacy and respects the users choice to be tracked or not. It is also the simplest solution as you won't have to configure region-specific behavior. It also negates the need for additional changes if the local regulations of a region are updated at some point in the future.\n\n\n\n\n>  Set default to denied and require consent for Plerdy tags to fire somehow (which I don't understand how anyone outside the EU ever will be able to since there's no banner, only in EEA?)\n\n\nIf you don't care about consent for specific regions then you will have to configure your consent mode to default to granted in those regions. That can be done manually or automatically based on your CMP and setup. You will also have to configure your tags to trigger unconditionally for these regions as well.\n\n\nThis option is technically possible but legally a gray area. I know for a fact that many regions outside the EU also require some sort of consent.\n\n\n\n\n>  Set default to be 'Granted' everywhere, and let EEA users choose correct consent (this is risky option?)\n\n\nThis is called opt-out tracking and is areal gray area. Any company I've worked with has deemed it not legal in the EU as (without additional configuration) you would still be tracking a user on the first page load even if the user ultimately decides to not give consent.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "The options are referenced from my initial comment, not the OP. I.e denied by default and cookie banner worldwide.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Not sure what you mean by \"it's not right\". Your whole comment basically explains why a lot of international organisations decide to implement opt-in consent management globally.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you sell to EU/UK customers?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "How are you implementing CookieBot? Hardcoded script on site, CMS plugin, their tag template in GTM or Custom HTML tag in GTM?\n\nIf you're hardcoding, you need to put together a gtag consent \"default\" script that handles your default according to the consent policy you wish to implement. It's not a horrible task.\n\nIf you visit [https://www.lowrance.com/en-gb/](https://www.lowrance.com/en-gb/) , have a look at the page source. You'll see a script starting at line 26. It's fairly simple. It sets consent to denied for all regions except for the US, which is set to granted by default.\n\nYou can obviously get a bit more granular with it to narrow down the rules or make them more complicated in order to fit your policy, but I would absolutely set out in writing / in a spreadsheet what you want your policy to be and then use the tools at your disposal to implement that policy. Do not let your tools dictate what your policy is.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Just to add a few more details to what others have already said:\n\n\\* Unless the site can reliably send EEA users to a different area than non-EEA, you will have to adopt \"denied\" and \"opt-in\" mode globally in order to be compliant. \n\n\\* If the site has a clear \"US-only\" section / view, that section only can be set to \"granted\" and \"opt-out\". But this is normally only acceptable if the site has some geolocation logic to redirect non-US traffic to their own separate section.\n\n\\* Typically, any site analytics tags are classified as \"Performance\" and any advertising conversion tags like Google Ads or LI Insight or Facebook, etc. are classified as \"Targeting\".\n\n\\* If you're firing Google Ads conversion tags on campaign page landings, you may need some expert help in order to ensure that people who do opt-in from default \"denied\" state fire conversions (and analytics) belatedly instead of not at all. This is usually accomplished via GTM Trigger Groups.",
                "author": "plamzito",
                "score": 1
            },
            {
                "body": "This is great thank you. \n\nis option 1 just the industry standard nowadays? (I just checked a bunch of random websites from a US browser and it seems that almost all of them have a GDPR banner even if visiting from a random state)\n\nFor option 3: would it make more sense to have 2 region setups like this:  \n\\- Granted everywhere by default, except  \n\\- Denied everywhere there's a GDPR flavor requirement (EEA, Aus?)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "As someone who has spent the last few weeks learning this stuff in and out (as much as I wish I didn’t want to)- you hit the nail on the head with everything. Kudos",
                "author": "elizabeth4156",
                "score": 1
            },
            {
                "body": "Yes but 90%+ in the states - hence needing to figure out both somehow",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "Great resource thank you - we're using the GTM tag template. So there is an option to set regional defaults, I'm just wondering what the implications of 'granted' everywhere (or at least US / non-eu areas) would be.",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "For your first two points, we're using Cookiebot template via GTM - this has regional control ability (i.e. setting EEA users to default denied, or setting US users to default granted, for example). Does this suffice for what you mean? \n\nFor your last point, do you know of any resources that have the proper instructions for completing this step? (I've seen conflicting setup for trigger groups)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "Thank you for this.   \n  \nFor your first two points, we're using Cookiebot template via GTM - this has regional control ability (i.e. setting EEA users to default denied, or setting US users to default granted, for example). Does this suffice for what you mean? \n\nFor your last point, do you know of any resources that have the proper instructions for completing this step? (I've seen conflicting setup for trigger groups)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "> is option 1 just the industry standard nowadays?\n\nFor most companies that operate on a global level, yes it seems to be.\n\n\n>For option 3: would it make more sense to have 2 region setups like this:  \n\\- Granted everywhere by default, except  \n\\- Denied everywhere there's a GDPR flavor requirement (EEA, Aus?)\n\nYeah for sure, if that's what you want to do then it seems like a sensible option.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "The tag template is definitely one of the easiest methods, so long as there are no hardcoded marketing / analytics scripts on site.\n\nIf most of the jurisdictions you're serving are happy with \"granted by default\", then I would definitely set all regions to granted by default and then set the exceptions to \"denied\". The CookieBot tag template sends the same calls to the Google consent API as a hardcoded gtag default script would. The only difference is it's slightly less visible in some debug tools (AdSwerve dataLayer Inspector+ being my preferred option).\n\nYour only other restriction arising from implementing CookieBot with a tag template is when / if you add a second GTM container to the site. It's far too easy to do so in a way that results in the second GTM container firing some tags before the first container has finished running the CookieBot tag.\n\nHardcoding is more work, but eliminates any possible future issues, but using the tag template is a perfectly valid option as long as you keep the caveats in mind!",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "According to CookieBot's own documentation, it uses geolocation lookups that can let you limit a banner to EU users, e. g:\n\n[https://support.cookiebot.com/hc/en-us/articles/360003782954-Display-the-cookie-consent-banner-to-visitors-from-specific-regions-only](https://support.cookiebot.com/hc/en-us/articles/360003782954-Display-the-cookie-consent-banner-to-visitors-from-specific-regions-only)\n\nIt's not clear to me from their documentation whether they can identify users from California (CCPA) and whether you can easily have several different banner configurations side-by-side on the same site. That's work for you.\n\nA couple of gotchas when you're using geolocation:\n\n\\* The location arrives late in the page load. You have to know how to delay everything until it's known where the user came from.\n\n\\* Debugging for different regions can be tricky. Hopefully, CookieBot would provide you with a way to spoof your location easily.\n\nI haven't implemented consent via Google's baked in Consent Mode properties--this is a relative newcomer to the field. But if you're looking for an authoritative source, you can't go wrong with Simo Ahava's blog:\n\n[https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\nAs for how compliant your final implementation is, that is a question for your legal team or a hired expert.",
                "author": "plamzito",
                "score": 1
            },
            {
                "body": "Yeah that's one thing I was worried about in particular, i.e. other tags firing before the Cookiebot consent banner settings firing. \n\nis there a way to amend the settings with the Cookiebot template to ensure that the consent checks always fire first?",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "But don't both options #1 & #3 (as discussed with branner above) in fact actually match your stated requirements?  \n\\- In option 1, the banner is required everywhere, including EEA  \n\\- In option 3, consent from EEA traffic will still be defaulted to denied with banner, it would just be defaulted to granted from non GDPR required countries (say, US as an example)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "As long as you fire the CookieBot tag using the Consent Initialization trigger and you don't fire any other tags with that same trigger, you're good.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "You agreed that option 1 (granted by default) is the standard. That absolutely is not the case in Europe and would not be acceptable.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Option 3, though you pretty much should assume GDPR rules apply globally *unless* you specifically know it to be different, such as in individual US states.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Oh I apologise then, you are correct",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It's not right though.\n\nEEA/UK/Swiss citizens have a right to a default of no tracking **before** consent is given. This is why US sites not willing to abide by this directive have, and should, block European traffic.\n\nThis right is absolute regardless of where the site's server or owner is based, so if a US site ignores this, then I, as a European could seek legal recourse with my national privacy regulator.\n\nBasically, if you want to sell to Europeans, you need to respect our laws in the same way that Europeans respect US law.",
                "author": "Taca-F",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1745834445.0,
        "title": "Tracking works, conversions don’t.",
        "author": "wardogfufu",
        "id": "1k9rthy",
        "selftext": "I setup GA4 and GAds tracking for a form that redirects to a thank you page.  \nI tested it on live — tracking works, events fire, looks perfect. I see it in GA4 realtime, GAds fires in Omnibug.\n\nLive users fill the form — nothing shows up.  \nFeels like I'm tracking ghosts.\n\nWhat can be the issue??\n\nThanks in advance.\n\nEDIT: The client made some changes, and it interfered with our tracking setup.   \nIts fixed. ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k9rthy/tracking_works_conversions_dont/",
        "num_comments": 10,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you have a cookie banner in use?",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "Things to check  \n1. Is your consent mode set right?  \n2. Use Tag Assistant and open your url with a ?GCLID=TEST123 parameter and trigger the tags one by one and check if your ads tag is getting triggered",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "Do you have multiple conditions for the conversion? \nCheck your conversion tag and trigger.",
                "author": "Bholenaught",
                "score": 1
            },
            {
                "body": "Let me help you  \nif you instal Trackingplan (https://www.trackingplan.com/ free tier) i can audit real tracks from reals users and understand what is going on",
                "author": "DavidP_trackingplan",
                "score": 1
            },
            {
                "body": "nope",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Nope its just a pageview trigger with page path condition",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "You have your answer! Without consent signals, conversions no longer increase. I have the same situation with many clients currently.",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "You said you tested it on live. Do you mean you previewed it in GTM?",
                "author": "Bholenaught",
                "score": 1
            },
            {
                "body": "yes i did preview it in gtm.\nAnd i tested it after publishing it again it worked for me.\nBut for some reasons, whenever actual users fills the form i cannot see any data of it in ga4!",
                "author": "wardogfufu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737880271.0,
        "title": "Implement pixels on another company page",
        "author": "Striking_Sink_6217",
        "id": "1ia9gk6",
        "selftext": "Hello,\n\nI need to implement the pixels of my company on another company's landing page. Both companies have got GTM. I have got all the needed pixels in GTM (Facebook, Google Remarketing) . What is the process?\n\n  \nThanks",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ia9gk6/implement_pixels_on_another_company_page/",
        "num_comments": 19,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Thank you!  \n1. When I send all the pixels to that another company, they will need to created the tags like LinkedIn Insight tag, Google Rem, Facebook Page view and fire on a specific landing page that we are going to use for our mutual cooperation or on all the pages?\n\n2. I will need to create remarketing audiences in GA4 that will come from the paid activity on another company's landing page. How would I define it there?",
                "author": "Striking_Sink_6217",
                "score": 2
            },
            {
                "body": "got it. How about the fact that another company has its own GTM code and will also need to add ours? Can it work together?",
                "author": "Striking_Sink_6217",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "How should the server-side tracking be implemented? I will check if it was.",
                "author": "Striking_Sink_6217",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "OK, thank you! So the absence of the server-side tracking was the reason I couldn't build the audiences from LinkedIn paid and organic activities? The numbers were very low: less than 200 users and I was told that it was because of the consent mode that we implemented.",
                "author": "Striking_Sink_6217",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Why? This is why GTM exist.",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Ok, i thought you wanted them to impelement pixel code to the code of website.",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "Do I also need to send our GTM code?",
                "author": "Striking_Sink_6217",
                "score": 1
            },
            {
                "body": "No, they should implement in their own GTM. Or you can tell them to give you admin access to their GTM and then you will do it inside of their GTM.",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "thank you so much! What do you mean by server-side tracking?",
                "author": "Striking_Sink_6217",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744661258.0,
        "title": "Can someone please EI5 how to preview in GTM server-side-tagging?",
        "author": "Otto_Maller",
        "id": "1jz8lx4",
        "selftext": "I'm pretty good at noodling around the standard GTM set up. We recently hired a contractor to set up server-side-tagging and as I've come to learn, you have to do something different to preview the tags. Is there a simple way to describe what I have to do to run preview now?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jz8lx4/can_someone_please_ei5_how_to_preview_in_gtm/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Turns out the server-side container was not activated (or whatever the term is). Now running preview in both containers shows tags succeeded/fired.",
                "author": "Otto_Maller",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Its cookie based.\n\nhttps://developers.google.com/tag-platform/tag-manager/server-side/debug",
                "author": "TheHobbyist_",
                "score": 1
            },
            {
                "body": "Nothing special really. I usually preview both client and server side containers at the same time so that ai can see the tags fire, send off data to sGTM, and see how they are processed there.",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "You run preview mode for client side.\n\nAfterwards, you run preview mode for server-side.\n\nAfter that you click around website, and if everything was set-up correctly, you will see events in preview mode.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "I am either missing something or the set up is not complete. All I see when running preview is: No tags were evaluated in this container\n\nEdit: when running preview from the server-side GTM",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "Are you sending data to server-side? \n\nOn client side you need this in your GA4 tags: server\\_container\\_url\n\nPlease check stape or addingwell guide for sst, it's really good.",
                "author": "mar1_jj",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708197448.0,
        "title": "Issues with OneTrust & Consent Mode V2",
        "author": "Aries2ka",
        "id": "1at9saw",
        "selftext": "Regular consent mode is working fine in our set up.\n\nSince the intro to consent mode v2, the onetrust banner is not updating consent in the datalayer correctly.\n\nClicking \"Accept All Cookies\" changes consent to granted for all **except** for the two new ones\n\n* ad\\_personalization\n* ad\\_user\\_data\n\nThese two new values have been added to the list of values when setting default consent, but they never update after someone interacts with the Onetrust banner.\n\nSpent over a week back and forth with OneTrust support who are just copy pasting the same info from the docs which is slightly frustrating.\n\nFollowing their steps word for word is not helping at all.\n\nWondered if anyone here had any luck with Onetrust and Consent Mode V2?  \nHow did you get it working?\n\nEDIT:  \nFigured it out in the end and got it working, then woke up to a video tutorial from onetrust on the topic 🤦🏽‍♂️  \n  \nI guess posts like this got attention because we also just received a warning email about consent mode v2 coming soon + a video update guide 🤣",
        "score": 10,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1at9saw/issues_with_onetrust_consent_mode_v2/",
        "num_comments": 51,
        "comments": [
            {
                "body": "800 a day...\n\nThere's a *lot* of demand for consent / consent mode work right now.\n\nDoing the work can be relatively straightfoward. Testing and validating takes longer.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Onetrust apparently now have an official tag template. I haven't tested it (but I will quite soon), but if it is anywhere near good it will be a vast improvement over implementing it via a CHTML tag.\n\nI'm still not a fan of CHTML implementations for CMP scripts. They just run too late for my liking. Doesn't matter what trigger you use, there's no way to guarantee their firing order (hence the tag sequencing part).\n\nI'm *just now* coming around to the idea that initialising CoMo via a tag template might be somwhat OK, but i'm still leaning toward hardcoding it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Thanks. The new V2 params already were mapped to consent options in one trust. \n\nI was advised to disable it, republish, enable it and republish.\n\nDid that about 5 times, still no luck.",
                "author": "Aries2ka",
                "score": 2
            },
            {
                "body": "OneTrust seem to be suffering some issues just recently (past few months!) and despite being market leader in CMPs, it’s not being reflected completely in their code quality.\n\nIf rolling back a script version doesn’t work, I’d log a support ticket with them. You won’t be the only one having the same issue.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I've been chatting with someone who had the same issue. Turns out it was caused by there being a global geolocation rule overriding things.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Thanks. Got it working in the end.",
                "author": "Aries2ka",
                "score": 2
            },
            {
                "body": "What testing are you doing?\nDid you already have v1 set up?",
                "author": "Aries2ka",
                "score": 2
            },
            {
                "body": "Test it out. \n\nWas testing it for cookiebot in some staging environment, looked okay (for my own purposes, just to have it as a backup if someone needs it).",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "I enjoy experimentation, but tag firing priority is one of those features that is hanging around for backward compatibility and I hope to never have to use it.\n\nWe have tag sequencing now and it is far more logical.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I agree with your point of view, just for me it was easier to try this out instead of setting up tag firing priority in each tag.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "Please don’t rely on tag firing priority for something as important as consent management. It’s not required. You don’t even need to use sequencing except for badly behaved tags like Microsoft UET.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sounds like you need to go into your geolocation rules in OneTrust, map marketing consent to the two new V2 parameters and potentially also republish the script afterwards.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": " Hi, where you able to sort this? We have the same issue",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "I am having the same issue. How did you guys sort it out? Since we integrated OneTrust natively into out Website, I do not want to use GTM to Push consent Mode Information into the DataLayer.\nOneTrust only passes the „original“ parameters.",
                "author": "Han_Yolo95",
                "score": 1
            },
            {
                "body": "u/Aries2ka , can you share how you solved this problem?  I also see in my datalayer that some parameters are denied, although there was а click on \"Accept All Cookies\" button.",
                "author": "Mysterious_Excuse_34",
                "score": 1
            },
            {
                "body": "Mentions nothing of v2",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "Nah, an agency we work with are quoting 800 for a day of work to update it.....  \nOneTrust support have been very unhelpful. \n\nWhat have you tried?",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "Here is how I got it working.\n\n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "\"no way to guarantee their firing order\" You can control the tag firing order through the use of content initialization, initialization, pageview, DOM ready, windows loaded, event and custom event triggers. And further conttol is added through the use of tag sequencing 'set up' and 'clean up' tags.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "We’ve mapped the parameters to OneTrust, updated to the latest version of the script, but still seeing denied for the extra parameters in GTM. \n\nOneTrust said to wait a few hours",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "I’m not convinced a CHTML tag will fire reliably earlier from a Consent Initialization trigger than a Page View trigger.\n\nGTM asks the browser to insert the content of an HTML tag. The browser decides when. \n\nDon’t believe Tag Assistant on this. It will only reflect when the trigger fired, not necessarily when the tag was run and certainly not when a script contained within a CHTML tag was run.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Which consent script are you using?\nWe were using GDPR one but experimented with IAB or something like that. Still no luck.",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "Could be OT slow, or OT stuck on their settings. Once I had to play with Consent Mode settings (like, on and off) and republish multiple times to get it to work.\n\nOT is terrible, I don't get where its value is",
                "author": null,
                "score": 1
            },
            {
                "body": "Have you used tag firing priority in GTM?",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "\"The browser decides when.\" So are you saying it is an illusion that tag management triggers and tag sequencing work / have value? ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Solution? What was it?",
                "author": "Extension-Delay5428",
                "score": 1
            },
            {
                "body": "Various clients. Some already have V1, some have a broken / non-standard V1, some have none at all, some have a half-baked V2... \n\nOne has a thoroughly broken V1 with multiple CoMo default calls caused by misconfigured triggers across two GTM containers (both present on 2 domains) resulting in 2 default and 4 update calls per page with contradictory signals across most of them.\n\nI can't remember how much my agency charge for my time, but it would embarass a small number of lawyers. A lot of it is fixed-fee, but usually 4 or 5 figures.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Did you change to IAB?",
                "author": "Eastern-Operation189",
                "score": 1
            },
            {
                "body": "I have never used tag firing priority in GTM.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Absolutely not. Tag sequencing is effective. Timing CHTML tags based only on the trigger type is where things aren’t so neatly defined.\n\nI mention this mainly because inexperienced GTM users might get into difficulty if they think a script contained within a CHTML tag will run before a GA4 Event tag fires purely because the CHTML tag is triggered by Consent Initialization and the GA4 Event Tag is fired on Page View.\n\nIt will look correct in Tag Assistant.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I'm in the wrong field.",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "nah, i think it was gdpr we had in the end",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "\"Tag sequencing is effective.\" In my OneTrust example I use tag sequencing and do not rely on the consent initialization trigger alone.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I do try to encourage people to upskill into this field.\n\nI mention this only as a motivator and not a brag, but in 3 years I've had 2 promotions and 2 salary increases. The first was 30% and the second was 66%.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I recognise that and my apologies if I jumped the gun with my reply.\n\nTag sequencing is a life saver, but if I can avoid using it I will. With OneTrust offering a “proper” tag template now, it might mean we don’t have to use sequencing for a good implementation.\n\nI’ll see if I can find time to test it today.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "My solution is based on the work done by Simo's 8-bit Sheep. I will be curious if OneTrust tops 8-bit Sheep. ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Last time I looked OneTrust were still recommending their platform could be implemented happily with a CHTM tag, so I’m not arguing that we must not do it.\n\nIf the tag template works though, the OneTrust script will run earlier than it would via CHTML. If CoMo were implemented within GTM as well, I would still use sequencing because I’d want the CoMo default to happen on Consent Initialization but I’d also want the OneTrust tag to fire on the same event. It’s likely not even critical as to which one runs first, but I would be more comfortable knowing the CoMo default ran before OneTrust.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Here is how I got it working.\n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 0
            },
            {
                "body": "Getting ready for GCMv2 begins with implementing GCM.\n\n\n\"In light of regulatory changes and increased demand for protection of users’ privacy and consent choices, Google is now updating Consent Mode to Consent Mode v2. The main difference is the introduction of two additional consent states: ad_user_data and ad_personalization, which can be attributed to a user’s consent.\n\n\nad_user_data is used to determine whether the user gives consent for Google’s advertising purposes. This will be set to ‘granted’ when the user actively agrees to their data being shared with Google through a consent banner interaction.\n\n\nad_personalization controls whether data can be used for ads personalization (e.g. for remarketing). It can only be set to ‘granted’ when users specifically agree (through the consent banner) that their data is shared with Google for the purpose of ad personalization.\"\n\n\nhttps://cookieinformation.com/resources/blog/google-announces-consent-mode-v2/ ",
                "author": "Humble_Elderberry_25",
                "score": 0
            },
            {
                "body": "Here is how I got it working.\n\n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742567232.0,
        "title": "New Vs returning client",
        "author": "Shazacar",
        "id": "1jgi38v",
        "selftext": "Hi all, \n\nIt can be game changer for the G ads (or other third party) to send if it's a new or a returning client that made a purchase on the website.\n\n  \nGoogle give us a doc but it's very basix... They said if you use GTM that you need to send the custom parameter new\\_client \"yes\" \"no\". Fine but how technically we can do that? \n\nYes the easiest solution might be to ask to the user to login or not before he made the purchase. This method can be very frustrating for the user. \n\n  \nSo do you have a nice solution to check at the purchase conversion if it's a new or returning client? I don't want to use cookie because it's not resilient. My tought should be to check in the database when the purchase was made if the client email is already known? but there is a need for a fairly high execution speed here\n\nThanks a lot :) ",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jgi38v/new_vs_returning_client/",
        "num_comments": 12,
        "comments": [
            {
                "body": "If your backend already knows during the purchase whether the customer is new or returning (most eCommerce platforms do).  \nPush it directly into the DataLayer during purchase confirmation if it exists.\n\nOr Trigger a lightweight API call from the front-end to your backend.  \nCapture the email/ID of the purchaser and backend check.",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "It's very straight forward to do with Woocommerce and Shopify, I have couple of clients I setup different conversion action by new and old customer.",
                "author": "Additional-Side-457",
                "score": 2
            },
            {
                "body": "Merge CRM and website data in BigQuery. You will see it there.",
                "author": "FellowYello",
                "score": 2
            },
            {
                "body": "This is the answer. You need to mix your customer status data with the rest of the data by pushing through a dimension that only you would have visibility into.\n\nA basic example of this would be to query the total unique orders by some key (email, phone, whatever) to determine status.",
                "author": "professor-breakfast",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you have userID then a javascript code to push yes. If no userID then check if cookies are present",
                "author": "Maleficent_Nail_572",
                "score": 1
            },
            {
                "body": "Yes that’s the way I think :)",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "That a solution but you need to have a fine guy in your DPO department (if you are not US business based)",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "Mmh userID mean the user is authentify, check the cookies didn’t mean this user already purchase no?",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "Why? You need to have everything GDPR friendly a nd compliance. The client is responsible. And everything needs to be gdpr friendly also now. You can’t measure data without consents in Google Ads or GA4",
                "author": "FellowYello",
                "score": 1
            },
            {
                "body": "Yes it's not about this, it's about sending client data to BigQuery who are US business based. For EU business it's a bit tricky.",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "Bigquery is data warehouse. You can save data there",
                "author": "FellowYello",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747136662.0,
        "title": "Solutions for Cross-Domain Tracking for Hotels",
        "author": "Piocol95",
        "id": "1kljsif",
        "selftext": "Hey everyone,\n\nI'm currently working on tracking setup for a group of luxury hotels, and we’ve run into a frustrating issue with tracking conversions accurately via Google Analytics.\n\nHere’s the situation:\n\n* On the **main hotel websites**, we’ve correctly implemented **Google Consent Mode**, and everything seems to be firing as expected.\n* However, some of the **external booking engines** we use also implement **their own consent layers** (with Consent Mode support).\n* The problem: if a user **doesn't provide consent again** on the booking engine page (even if they did on the hotel website), we **lose the ability to track conversions**.\n* As a result, **many bookings show up as \"direct\" traffic** in GA4, or are completely untraceable back to source campaigns.\n\nWe’re trying to figure out the best way to:\n\n1. **Minimize the loss of attribution** due to consent mismatch.\n2. **Reduce the volume of “Direct” traffic** reported in Analytics for bookings.\n3. Possibly **streamline consent handling** across the main site and the booking engine.\n\nHas anyone faced this kind of cross-domain consent fragmentation before?  \nAny tips on how to:\n\n* Sync consent across domains?\n* Leverage server-side GTM or GAds conversion linker better in these cases?\n* Apply workarounds like click ID forwarding or 1st party cookies across redirect chains?\n\nWould really appreciate any insights, examples, or tools that helped you solve something similar!\n\nThanks a lot in advance 🙏",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kljsif/solutions_for_crossdomain_tracking_for_hotels/",
        "num_comments": 6,
        "comments": [
            {
                "body": "It might be possible to share consent cross-domain if both domains are using the same account of the consent management tool (and the tool allows this feature), which I think is not the case in your situation. Additionally, there are browser-level restrictions which may prevent consent from being shared between domains even if the tool allows it, e.g Storage Partitioning in Chrome [https://privacysandbox.google.com/cookies/storage-partitioning](https://privacysandbox.google.com/cookies/storage-partitioning)\n\nIf the traffic ends up showing as direct instead of at least referral, that might be caused by several things, such as the third party website using noreferrer, or your GA4 account having referral exclusion for the third party domain.",
                "author": "Etianen7",
                "score": 3
            },
            {
                "body": "Easiest solution is to redirect back to your own domain and trigger the conversion from there. If you've excluded the external booking domain from referrals then the attribution should work correctly.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Are the external booking engines on a third party domain (like not just a subdomain?) Do you have any ways to inject GTM /  scripts on those third party domains ?",
                "author": "RCoffee_mug",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Redirect users back to your main site after booking, and just add the booking/payment domain to your GA4 unwanted referrals list. \n\nThat way, the user journey stays intact *and* you avoid the headache of installing GTM on the booking engine.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "\\+1",
                "author": "wardogfufu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742243415.0,
        "title": "GAds Conversion Tag Fails, Duplicate GA4 event tag (same trigger) Fires",
        "author": "Otto_Maller",
        "id": "1jdmxlm",
        "selftext": "Any idea what is it about my GAds conversion tag that the trigger fires but the tag status reads failed? We have a cookie consent banner set up, the tag ID and Label are correct. Just for shits and giggles, I created a GA4 event to track the same GAds conversion event (it's just a click on the phone number link) and it fires no problem. \n\n  \nThe GAds tag has built in consent checks (ad\\_storagead\\_personalizationad\\_user\\_data) with no additional consent required.\n\nGAds is using the Google Tag for enhanced conversion tracking. \n\nAny help is greatly appreciated.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jdmxlm/gads_conversion_tag_fails_duplicate_ga4_event_tag/",
        "num_comments": 12,
        "comments": [
            {
                "body": "I've experienced this lately, apparently there is some sort of issue in GTM where there is mismatched between what GTM expects to see and what happens so it responds as 'Failed' but the data is getting through.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "**Root Cause:**   \nThe \"Failed\" status is caused by an *additional request* to: `https://www.googleadservices.com/ccm/conversion/<Conversion ID>`   \nThis happens only when User-Provided Data (PII like email, phone) is collected and joined with Google Ads via the `_gcl_au` cookie (long format).\n\n**The Issue**:  \nThis request loads as an image but receives a `text/plain` empty response, causing the browser to flag it as a *failed image load*. \n\n**Result:**   \nGTM Tag Assistant shows \"Failed\" — but data is sent successfully to Google.\n\n**Solution:**   \nNo real fix (Google’s handling issue).   \nWorkarounds (not recommended due to tracking impact):\n\n* Disable User-Provided Data collection or Enhanced Measurement for Forms.\n* Change the `_gcl` cookie prefix (advanced, risky).\n\n***The \"Failed\" status is visual only — conversions are tracked correctly.***\n\n[https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/](https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/)",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "Right! — and totally fair point about needing confirmation on real conversions, not just test forms.  \nThe \"Failed\" status in Tag Assistant is mostly cosmetic. The conversion data is still sent correctly to Google Ads.\n\nHowever, your real concern — the drop in conversions starting March 1 is valid and likely unrelated to the \"Failed\" status glitch.\n\nThe cookie prefix workaround (\\_\\_gcl\\_au) simply bypasses the User-Provided Data (UPD) join request that triggers the \"Failed\" status. It fixes the cosmetic error in Tag Assistant but won’t fix real conversion tracking issues if something else is broken.",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "example here for google analytics hits, google ads is very similar : [https://www.analyticsmania.com/post/check-if-google-analytics-is-installed/#network](https://www.analyticsmania.com/post/check-if-google-analytics-is-installed/#network)",
                "author": "Fun_Ad_2011",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you check network and see if hit to gads is blocked by orb? Or is it 200?",
                "author": "Fun_Ad_2011",
                "score": 1
            },
            {
                "body": "Yes, I think we're all facing the same issue. Even if it shows as \"Failed\", conversions should still track properly.",
                "author": "AdinityAI",
                "score": 1
            },
            {
                "body": "Best, to-the-point answer I've seen. My only quibble would be confirmation that the real-life Google Ad click and subsequent form submission was in fact successful. \n\nWhile the following is potentially coincidental, having started a web business in 1998 and being forced to learn GAds when it originally came out as AdWords, coincidences are rare, often non-existent. What motivated me to re-visit our GTM tracking was the lack of conversions beginning March 1. All data prior shows and average of one per day. \n\nI implemented the cookie prefix work around adding an underscore to the cookie changing \\_gcl\\_au to \\_\\_gcl\\_au. Test forms via Google Tag Assistant now indicate the tag status as \"fired\" where as previously it indicated \"failed.\" \n\nIn all honesty, I don't get it. I only know enough about coding to break stuff. I saw the above workaround in other Reddit posts.",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "I love that I know what you mean, but I’m not exactly sure how to inspect whatever it is I’m inspecting to see the network status",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "Thanks again. Good info.",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "That’s the ticket. Thank you.",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "If it's blocked by orb it's due to account gdpr issue if needed i have dedicated email to contact google about this",
                "author": "Fun_Ad_2011",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744773830.0,
        "title": "Why Did This Work? (It's driving me mad)",
        "author": "freebird89_xxx",
        "id": "1k0au64",
        "selftext": "Fairly new to all this but been tracking opt-ins and checkout page views for a couple of week successfully. On Sunday I had one conversion tracked in the AM and then nothing for the rest of the day (not that unusual, my conversions are just creeping up now following some campaign changes I made). \n\nThen on Monday night, I find out by looking on my website that I legit got my first ever sale Sunday night. I'm like what? Why didn't google track this? That's when I find out that somehow on Sunday (despite me being out all day and doing nothing online), my purchase and opt-in conversions stopped tracking.\n\nI spent hours yesterday trying to figure out why they were firing but failing. In the end, I added an extra \\_ to the cookie prefix \\_glc. It fixed everything.\n\nI don't understand why it worked, what that did, why everything broke down in the first place. Any ideas? I hate not understanding what I am doing!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k0au64/why_did_this_work_its_driving_me_mad/",
        "num_comments": 9,
        "comments": [
            {
                "body": "I've also heard about this recommendation to add an extra \\_ and I'm also wondering why it works and why it isn't in any official documentation yet.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Just to check — are you tracking **Enhanced Conversions** on Google Ads?",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "I think that’s switched on yes",
                "author": "freebird89_xxx",
                "score": 1
            },
            {
                "body": "**Root Cause:**  \nThe \"Failed\" status occurs due to an extra request made to `https://www.googleadservices.com/ccm/conversion/<Conversion ID>` when user data (like email or phone) is linked with Google Ads via the \\_gcl\\_au cookie.\n\n**The Issue:**  \nThe request is made as an image but returns an empty response, causing the browser to flag it as a failed image load.\n\n**Result:**  \nGTM Tag Assistant shows \"Failed,\" but the conversion data is actually sent correctly to Google.\n\n**Solution:**  \nThere’s no real fix because it's a Google issue.  \n  \n**Workarounds (not recommended):**\n\n* Disable user data collection or Enhanced Measurement for forms.\n* Change the *gcl* cookie prefix (this is risky and complex).\n\nIn short, the \"Failed\" status is a visual issue, and conversions are still tracked properly.\n\nRefer, [https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/](https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/)",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "But the conversion didn’t track? I wrote that in my post…\n\nI had 4 conversions not track. Now I have made the change, conversions are tracking again.",
                "author": "freebird89_xxx",
                "score": 1
            },
            {
                "body": "Ah, I see! Thanks for clarifying. It looks like the \"Failed\" status was part of the confusion.\n\nIf the conversion didn’t track before and now it does after making the change, it means that there was likely an issue with how Google Ads was handling the request.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "My questions was why did adding an extra _ to the glc cookie prefix change anything? And why did it just stop tracking conversions off its own back? \n\nIs that a comment occurrence? Does everyone just have to track their conversions daily for all time to make sure they’re actually doing their job?",
                "author": "freebird89_xxx",
                "score": 1
            },
            {
                "body": "The extra underscore fixed conflicts in cookie processing. Conversions stopped maybe due to updates, browser changes, or data mismatches.   \nPeriodic checks or alerts help ensure tracking works.",
                "author": "wardogfufu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741260492.0,
        "title": "GTM is not Working after Feb 2025",
        "author": "digital_789",
        "id": "1j4te9o",
        "selftext": "Heyy All,  \n\nAll of a sudden I noticed that GTM has stopped tracking my website event data after the 28th Feb 2025, \n\nHere are a few other things I noticed:\n\n1. I did not find any GTM code on the website (my ex-colleague had connected the same, not sure how)\n\n2. Not sure, but i think it's happening because Universal Analytics has been completely removed from Google, and that's why the GTM tag has also been removed (may be it was integrated through Analytics)\n\n3. Shopify has recently sent an email saying to move tag to Google and YouTube app before 2nd Feb 2025 to ensure continuity.\n\nPlease check and share any solution, thanks in advance for your valuable time.\n\nBest Regards.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j4te9o/gtm_is_not_working_after_feb_2025/",
        "num_comments": 13,
        "comments": [
            {
                "body": "5 Points:\n\n\\- Universal Analytics has been gone for well over 12 months now. (You most likely have GA4)\n\n\\- GTM doesnt track website events, GTM connects your website to your analytics tool which tracks it.\n\n\\- Sounds like you should check your website change history log and see what changed on the 28th of Feb.\n\n\\- Most likely your GTM code stopped being passed to the website.\n\n\\- Find what changed on the 28th, that will tell you what happened.",
                "author": "Mysterious_Swan_9941",
                "score": 3
            },
            {
                "body": "OP can test #4 by looking at \"sources\" in Developer tools on the site.\n\nHe can find the answer in 30 seconds.\n\nIts possible the GTM snippet is contained within another js file, as seen in Drupal and others. Maybe that's why he doesn't see it.",
                "author": "Far_Highlight_4334",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Did you setup your customer events pixel?",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Do you have cookie consent or banner setup?",
                "author": "vidrgueht",
                "score": 1
            },
            {
                "body": "Shopify began to sunset conversion tracking set up via additional scripts from 2023. Afaik, they had a deadline on 19th December 2024 and another on Feb 24th 2025. \n\n\nThey wanted to move advertisers from additional scripts to customer events where you can install custom pixels. \n\n\nGoogle and YouTube channel is the way.",
                "author": "Mindula_C",
                "score": 1
            },
            {
                "body": "GA4 is directly connected through App and that's working, only GTM is stopped tracking after the last week of February 2025. \n\nI had added GTM code to \"Additional analytics JavaScript\" section, and now Shopify has paused it, So you think this may cause the error?",
                "author": "digital_789",
                "score": 1
            },
            {
                "body": "I think its directly done through GA4, haven't done anything else to set up.  \nFB pixel is connected.",
                "author": "digital_789",
                "score": 1
            },
            {
                "body": "Hehehe....you are the only commenter who thought of this very real possibility.  Happened to us",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "The default way to install gtm on shopify should be via custom pixel which can be found under customer events",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "You can set a pixel in GA4? 😒 \n\nProbably GTM",
                "author": "Far_Highlight_4334",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748532040.0,
        "title": "Tag Firing, Conversions Not Recording or is it User Error?",
        "author": "TaxAdministrative804",
        "id": "1kydifj",
        "selftext": "We're running a display ad to capture used motorcycle sales leads. The visitor fills out their bike's details and submits the form to receive a call/offer on their bike.\n\nI've set the conversion goal/action to be \"Submit Lead Forms\" and created a tag for this action in Tag Manager with the following setup:\n\n**Tag Type:** Google Ads Conversion Tracking  \n**Conversion ID:** Found  \n**Conversion Label:** Present  \n**Enable Restricted Data Processing:** False  \n**Conversion Linking:** true  \n**Cookie Prefix:** \\_gcl  \n  \n**Firing Triggers:** Form Submit (Page View) (Thank you page does load after submission)\n\nI've confirmed the tag fires in Tag Manager, Google Ads indicates it's recording conversions.\n\nHowever, there's been zero conversions recorded in Google ads. The client received 74 forms in May and 42 in April and the ad performance itself is doing well, with good CTR.\n\nI'm certainly aware that the ad itself may not be providing any of those leads, actually. However, I find it hard to believe. It's also not affecting my \"pride\" running the ad - If the ad truly is producing leads, I want Google to have those signals and improve it's performance.\n\nHow do I confirm one way or another the set up is working correctly? As I said, I've confirmed the tag/trigger fires - and GA4 is recording my for submissions, but they don't show up as conversions in Google Ads.\n\nI'm no precious flower; if it turns out I'm just an idiot I'm ok with that. I've been called worse...",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kydifj/tag_firing_conversions_not_recording_or_is_it/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If you use preview mode in GTM, trigger the conversion, and it says it was a success... then it's working properly.  Don't forget to setup user provided data as well, to capture that sweet sweet email address for enhanced conversions.  \n\nAlso, for form submits, I make sure to set the GADS conversion to \"one\" instead of \"every\".",
                "author": "FigSpecific6210",
                "score": 3
            },
            {
                "body": "Nah, it takes time.  Sometimes conversions show up within a few hours, sometimes it takes a couple days.",
                "author": "FigSpecific6210",
                "score": 3
            },
            {
                "body": "Thanks for the quick reply. Double-checked and it's working. User provided data was set up but I did miss the Conversion setting- changed to \"one\" instead of \"every\".\n\nAlso, the conversions are now being recorded and have been for a few days now. \n\nI guess the answer is that I'm actually just an idiot :(\n\nThanks again!",
                "author": "TaxAdministrative804",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1727251909.0,
        "title": "I'm losing my mind trying to connect the browser container with the server one. I need help. ",
        "author": "Previous-Place-9862",
        "id": "1fozb9w",
        "selftext": "I've first setup the browser container all tags, variables and triggers. Followed like 8 tutorials, checked the data layers. The browser container is firing perfectly. I've conntected the server container, added the dns, added the code from the web container to my site, I've installed a plugin on my wordpress site to connect both gtm ids and enable data layer to more precisely track. I then went on the server container and setup a GA4 tag receiving all events...\n\nI've done everything.. Yet nothing. My server container does not react no matter what I do. If I just open the custom domain it receives a 400 https error. Meaning it WORKS. YET IT DOESNT... I am so lost. I do everything I've seen in all the videos. I've setup the server\\_container\\_url to my custom domain and im sending send\\_page\\_view as well...\n\nPlease. I need help. If someone can help me fix it I'll pay for that service. I just need help, because I don't know what I don't know...\n\nThe cloud service im using is - stape io and its confugired correctly\n\nEDIT: So the reason I was not seeing server events was because of cookie consent and chrome blocking it. So that's new. But now the capi aint firing so I got a bigger issue...",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fozb9w/im_losing_my_mind_trying_to_connect_the_browser/",
        "num_comments": 28,
        "comments": [
            {
                "body": "check dms. I really need help with this.",
                "author": "Previous-Place-9862",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have only setup a couple server side setups so still learning myself. I have a WordPress website of my own and been meaning to play around a bit more with server side. If you don't get any comments that help I would be happy to take a look for free as I need to get more server side practice in! Feel free to DM :)",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "What cloud service are you using?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "You don't need to 'connect' client side and server side containers. \n\nAlso, if your server side container is throwing an error on preview, then it is not configured correctly.\n\nCan you provide some screenshots of what you are seeing?",
                "author": null,
                "score": 1
            },
            {
                "body": "I have extensive experience with GTM and Stape and can help you resolve this issue. To provide a solution, I'd need to review your setup. If you haven't found a solution yet, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Are you using Client to capture the requests from sGTM?Client = GA4",
                "author": "Aby666",
                "score": 1
            },
            {
                "body": "Is your problem solved? If not, text me, I may be able to help you.",
                "author": "Ramiittaa",
                "score": 1
            },
            {
                "body": "Still having problems?",
                "author": "sAnakin13",
                "score": 1
            },
            {
                "body": "stape io",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "check dms",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "It's not solved\n\nI need help.",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "I think so..? [https://prnt.sc/2XAbQdvdUesN](https://prnt.sc/2XAbQdvdUesN) [https://prnt.sc/r1Ajn\\_\\_1L325](https://prnt.sc/r1Ajn__1L325) [https://prnt.sc/\\_xvEC5wUeJ0h](https://prnt.sc/_xvEC5wUeJ0h)\n\nThese are the ones I am using. Is that right?",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "check dms",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "Ah okay, well I'd reach out to them, they are very good with customer support from what I've heard so will help you",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It looks like you are missing a client to claim the request, if this request is sent from a web container?\n\nI can take a look if you want.",
                "author": null,
                "score": 1
            },
            {
                "body": "Your manual requests are obviously reaching the server so there is no reason why the collect calls are not unless you haven't configured something correctly in either the web or server container.\n\n\nIt's been like 2 hours since the last message here. Did you resolve the issue?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Yes",
                "author": "Aby666",
                "score": 1
            },
            {
                "body": "[https://prnt.sc/sWwyptp5hCHV](https://prnt.sc/sWwyptp5hCHV) No they will not help me unless I hire them.",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "YES I DO WANT THAT. I will dm you rtight now",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "It was chrome extensions and cookie consent blocking the server events, also me being logged in admin panel also blocked them, maybe I denied my own cookies idk... That is resolved but now the capi aint firing...",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "just did",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "I think that's a pretty good diagnosis there, having the GTM code appear twice on your site is never good. I'd deal with that and then see if this helps.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "I dealt with that. The thing was their plugin was causing an issue. It was labeling every single event as \\_stape. So it'd be purchase\\_stape, add\\_to\\_cart\\_stape.\n\nAnd I had enabled 2 plugins, so it made 2 events. The normal view\\_item and view\\_item\\_stape.\n\nI fixed that quite quickly.",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "Great to hear 👍",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It's throwing an error whenever I open my subdomain from stape io - gtm.(mydomain) and there's nothing there so it throws an error. As it should.\n\nWeb container- [https://prnt.sc/hqL9PZlbcr5G](https://prnt.sc/hqL9PZlbcr5G) firing as it should.   \nServer container - sitting [https://prnt.sc/oYte2PaNQK9d](https://prnt.sc/oYte2PaNQK9d) the error is just there because I opened gtm.(mydomain) in another window to see. \n\nthis is the google tag configuration [https://prnt.sc/ifziS4HS4CXn](https://prnt.sc/ifziS4HS4CXn) \n\nEverything is setup as it should be, I have no idea what I am doing wrong.",
                "author": "Previous-Place-9862",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740962875.0,
        "title": "How to make Cookiebot remember user consent across pages instead of resetting to 'denied'?",
        "author": "mdex2k",
        "id": "1j26dbe",
        "selftext": "I'm using Cookiebot on my website, but I'm running into an issue where it resets the user's consent preferences to 'denied' every time they navigate to a new page, before updating it again. In contrast, Borlabs Cookie keeps the last consent state and applies it immediately on page load.\n\nIs there a way to configure Cookiebot so that it remembers the user's consent settings across different pages and applies them instantly, rather than defaulting to 'denied' and then updating afterward?\n\nAny insights or solutions would be greatly appreciated!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j26dbe/how_to_make_cookiebot_remember_user_consent/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Cookiebot should load before other scripts to ensure it applies the correct consent settings immediately.\n\nMake sure the initialization script is placed in the <head> section with async disabled.\n\nEnsure that \"Prior Consent\" is enabled in your Cookiebot settings. This ensures scripts aren't loaded until consent is confirmed.\n\nIf the issue persists, a workaround is to manually apply the stored consent state immediately.",
                "author": "wardogfufu",
                "score": 3
            },
            {
                "body": "The way you describe it, this could be entirely perfect behavior from CookieBot.\n\nWhen you say consent reverts to denied until updating it... do you mean that the default Google Consent Mode state on a new page is denied and then, when Google Consent Mode state automatically updates on that same page, that is when consent is correctly changed to \"granted\"?\n\nIf so, that's fine. I *have* seen implementations where the default state of Google Consent Mode is changed to reflect the current, known user consent choice, but it's strictly not necessary and arguably not advisable to do it that way.\n\nIf, however, you're saying that the user must update consent on every page then you definitely have a problem and the likely cause of that is something (some script, somewhere) is deleting the relevant cookie that CookieBot creates in order to remember the user's consent choice.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Hi Stefan,\n\nqq -> is there a specific reason why you prefer to have it denied on default regardless if users already have choices and navigated to another URL?",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you tried getting in touch with Cookiebot support? They can also look into it for you. Afaik it's not supposed to reset the consent at every page, maybe something in your current implementation may be causing it to do so.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "The Google Consent Mode is working correctly on my website. By default, ad\\_storage and analytics\\_storage are set to denied, and when a user accepts cookies, these values change to granted. So far, this functions as expected.\n\nHowever, I’m facing an issue when a user who has already given consent navigates to a subdomain (e.g., sub.domain.com), which hosts my external booking software. Despite having the Google Tag Manager code installed on the booking software, the consent settings reset to denied upon entering the subdomain.\n\nI’ve noticed that no Cookiebot popup appears on the subdomain, which is fine. However, in the background, the consent preferences do not update to reflect the user's previously granted permission from the main site. As a result, tracking and analytics remain blocked, even though the user has already consented.\n\nHow can I configure Cookiebot (or Google Consent Mode) to ensure that the user's consent preferences from the main domain are automatically applied to the subdomain instead of resetting to the default?\n\nThanks in advance for any insights!\n\nHere is a screenshot:\n\n[https://ibb.co/p6yfG184](https://ibb.co/p6yfG184)",
                "author": "mdex2k",
                "score": 1
            },
            {
                "body": "Unfortunately, they don’t offer support for setting everything up.",
                "author": "mdex2k",
                "score": 1
            },
            {
                "body": "Main reason for this: The default Google Consent API call is hardcoded on site. This is pretty common and I like this method of implementation because it removes many potential ways for someone else to screw things up later.\n\nOther main reason: This is how Google designed it to work. The default consent state should reflect the consent model applicable within that user's jurisdiction. The Consent Mode update should reflect the user's known preference.\n\nEDIT: For a real world example of a \"good\" hardcoded CoMo default script, pull up the page source for [https://www.lowrance.com/](https://www.lowrance.com/) and look at lines 26 through 47.\n\n[https://ibb.co/rK2LRcgG](https://ibb.co/rK2LRcgG)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "If you have two subscriptions (one for main domain, one for subdomain), you want them to be in the same \"domain group\" within your CookieBot configuration.\n\nThis might be helpful (or might not!): [https://support.cookiebot.com/hc/en-us/articles/360003760813-Can-I-handle-multiple-domains-from-one-account](https://support.cookiebot.com/hc/en-us/articles/360003760813-Can-I-handle-multiple-domains-from-one-account)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "That's how I have for most of the websites I'm running (except US part, mine are EU based), but didn't rethink if there are any reasons why not to do it like that. Thanks for the input, appreciate it.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Hi, I've already done this. I grouped the two domains and enabled cross-domain consent sharing. It works perfectly on the main site, but as soon as someone navigates to the subpage, the cookie banner tries to load again, and no consent data is shared. Maybe I did something wrong in the GTM setup? Here is how the subdomain looks like: [https://ibb.co/VWT72SBs](https://ibb.co/VWT72SBs)\n\nhere is the GTM set-up\n\n[https://ibb.co/bM91cC7t](https://ibb.co/bM91cC7t)\n\n[https://ibb.co/wFnpH8Cz](https://ibb.co/wFnpH8Cz)",
                "author": "mdex2k",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732548756.0,
        "title": "Google Ad conversions firing in GTM and GA4 BUT never show up in Google Ads Account... Please Help!",
        "author": "Ok_Assumption6789",
        "id": "1gzliji",
        "selftext": "Hello my friends, \n\n\n\n**Context of Problem:**\n\nI have conversions on my website that I have linked to GAds and GA4 (e.g. form\\_submissions, email\\_link\\_clicks etc)\n\nIn GTM preview mode they all fire when triggered.\n\nI am based in Europe, so have set GTM up with CookieBot and have all the correct setttings for GCM v2.\n\nHOWEVER, the conversions still do not show in the ad account. \n\n\n\n**Please help** as this is stopping my campaign moving onto maximize conversions from maximize clicks. \n\n  \nThanks in advance!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gzliji/google_ad_conversions_firing_in_gtm_and_ga4_but/",
        "num_comments": 22,
        "comments": [
            {
                "body": "If the conversion shows in GA4, have you tried just importing them into Google ads from GA4, as an interim solution?",
                "author": "moonsal71",
                "score": 2
            },
            {
                "body": "You can go to GA4, go to explore, add landing page + query string as a dimension and active users as metric and you may be able to spot those urls\n\nI don’t now if you have mililions of pages like i do, but otheose on the bottom you could filter landing page - contains - utm for example. If you have those links you can add session source medium to the table as well to see if its correctly populated",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you have any paid ads or campaigns active? Or are you waiting u till you see conversions?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Check in console if Google ads are blocked by the site's CSP",
                "author": "zenrayman",
                "score": 1
            },
            {
                "body": "it seems your conversions are firing in gtm and ga4, but not showing in google ads. double-check that ga4 and google ads are linked correctly, and make sure your conversion actions match in both. also, verify your gtm triggers and settings are right. if the problem continues, tools like qwestify might help you dig deeper into the issue!",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "Thank you for your reply.   \n  \nI've tried this before but I find GA4 tracking isn't great for paid traffic as UTMs are not always accurate EVEN WITH auto tagging and manual UTM params being sent.\n\nWhat do you think is the best way and do you find Google Conversions hard to track?",
                "author": "Ok_Assumption6789",
                "score": 1
            },
            {
                "body": "Also, have you triggered the event while coming from an ad of yours?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Is it best to do this through GTM preview?",
                "author": "Ok_Assumption6789",
                "score": 1
            },
            {
                "body": "Personally, I haven't found any issues with tracking Google ads. I tend to recommend using GA4, simply because it's the same tag so it's often easier, but even when doing the dual tagging, with both ga4 and Google ads pixels, the numbers were almost the same.",
                "author": "moonsal71",
                "score": 1
            },
            {
                "body": "I do. Some ads are semi-fine but still not 100% accurate.\n\nDo you suggest spending money and testing it through the ad itself?",
                "author": "Ok_Assumption6789",
                "score": 1
            },
            {
                "body": "Not likely because some conversions do work but wouldn’t be the first time. Go to Chrome and open dev tools > richt mouse click > insepct > on the right you’ll see a screen now. Than a little bit on the top you have to choose console. Than below that in the output screen you could see something like ads is not loaded because the csp is not defined, so the fallback is user or something like that haha",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "I'll give the GA4 solution a go again. Thanks for your help.\n\nI've read a couple of Reddit posts were people have found a bug where Google will classify ad evens as Direct or Organic. How do you get around this apart from make the session timeout longer, enable auto tagging and manually put UTM params? \n\nI have seen this affect campaign conversions too, example being -  No other traffic that day apart from direct traffic and the conversions events do not register in GAds.",
                "author": "Ok_Assumption6789",
                "score": 1
            },
            {
                "body": "Google ads will only show comversions from ads. Could that be the issue?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "And ga4 shows them all of course",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "I've read a couple of Reddit posts were people have found a bug where Google will classify ad evens as Direct or Organic. How do you get around this apart from make the session timeout longer, enable auto tagging and manually put UTM params?\n\nI have seen this affect campaign conversions too, example being - No other traffic that day apart from direct traffic and the conversions events do not register in GAds.",
                "author": "Ok_Assumption6789",
                "score": 1
            },
            {
                "body": "Yes that mostly applies to GA4. In Google Ads, if you have set up the ad coversions via GTM this shouldnt be a problem. Also take in to account that in GA4 it can take up to 3 days before it assigs it to the correct source. But even then, its not it’s not completely avoidable.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "And if creating your utm parameters yourself make sure the are formatter correctly. A mistake is easily made there",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "I don’t know what your consent banner looks like and if you have basic or advanced consent mode on? For google related products make sure they fire even if consent hasnt been accepted\\declined. If you have a page view on the landing page for example and your tag does not fire (basic consent mode). The user agrees and Goes to the next page, your source data isn’t available anymore hence a direct visitor. With sdvanced consent mode tou wouldnt have this problem",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Have you got an example of the UTM you use in your ads so i can cross compare please? I really do appreciate you taking the time to help.",
                "author": "Ok_Assumption6789",
                "score": 1
            },
            {
                "body": "Its best if you use an utm builder, than you wont make formatting mistakes: http://https;//example.com?utm_source=Google&utm_medium=Cpc&utm_campaign=Sale",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "The medium part of the utm is important die to that google wont recognise it if it doesn’t fit a category. So if you have medium = facebook than it would be wrong because it should be social",
                "author": "Pretty-Appearance226",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739214948.0,
        "title": "IOS Blocking GTM",
        "author": "bman46",
        "id": "1imeceh",
        "selftext": "Would anyone I know have insight into why a Google Tag Manager container would fire all containing scripts just fine on desktop and mobile but get blocked by IOS safari and most brave browsers?  GTM includes stuff like GA4, Clarity etc.",
        "score": 10,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1imeceh/ios_blocking_gtm/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Advanced Tracking Protection on iOS. You'll have to do server side tagging to bypass it. Or maybe first-party mode in client side gtm could work but would be more likely to eventually be blocked.",
                "author": "TheHobbyist_",
                "score": 4
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 3
            },
            {
                "body": "I wish Google would have made this more clear before we upgraded to GA4 a few years ago. It seems like we just got done with that effort.",
                "author": "Far_Highlight_4334",
                "score": 3
            },
            {
                "body": "I would expect Safari private browsing mode to block GTM, but not regular browsing.\n\nSource: I see plenty of iOS devices registering data in GA4 for all of my clients.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Server-side is worth doing, but it's not worth doing solely to attempt to counteract Apple ITP.\n\nInclude regular UTMs even if you have auto-tagging. It will be relevant soon.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "How long until Apple just block all calls to load any script named \"gtm.js\" or \"gtag.js\"?\n\nI know of one 3rd-party service providing the ability to rename those scripts to evade exactly this issue, but then how long until Apple simply look at the content of all scripts to fingerprint anything that looks like gtm.js or gtag.js?\n\nThe effort we might expend in playing the perpetual cat-and-mouse game with Apple could be used better elsewhere.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "GA4.\n\nGoogle Consent Mode.\n\nGoogle Consent Mode v2.\n\nConsistent, well-defined, well implemented data layer.\n\nEnhanced Conversions.\n\nFirst-Party Mode.\n\nServer-Side GTM.\n\nJust consider each one of those a step-up in your data collection game. If you think the grass is greener with any other marketing data ecosystem.... Adobe would love to get your money!",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have to use server-side GTM",
                "author": "hiscapness",
                "score": 1
            },
            {
                "body": "Safari’s ITP and Brave’s Shields block GTM. Use server-side tracking to avoid blocking",
                "author": "Web_Analytics",
                "score": 1
            },
            {
                "body": "I'll have a new, spare iPhone to use purely for testing this type of thing fairly soon. I'm interested to understand whether a standard, default \"brand new user\" iPhone configuration does lead to normal Safari browsing blocking gtm.js, gtag.js and others.\n\nMy feeling is that it doesn't and that users with gtm.js blocked have a non-default privacy configuration.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "When using server-side GTM, you can proxy the loading of gtm.js and gtag.js scripts and thus bypass blocking. There are advanced methods where the requests are fully encrypted and are virtually impossible to block by any pattern. You can google ‘GTM custom loader’ for more details.\n\n  \nThis is one important reason to switch to the server-side if your site’s audience often uses adblockers and/or secure browsers.",
                "author": "Bukashk0zzz",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738008256.0,
        "title": "Snapchat View Content event is not firing sometimes",
        "author": "Pure_Quarter_4711",
        "id": "1ibiksk",
        "selftext": "I created a new tag for Snapchat View Content event. It fires in GTM but I don't fire sometimes weirdly on the Website when I check myself out of GTM. It might be a bug? Did you ever encounter such a thing for media pixels? I would appreciate your advice\n\nYou can see the error I see on GTM for Snapchat event and also my tag: [https://ibb.co/Q3w6d2z4](https://ibb.co/Q3w6d2z4)\n\n[https://ibb.co/ycH5xVWG](https://ibb.co/ycH5xVWG)",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ibiksk/snapchat_view_content_event_is_not_firing/",
        "num_comments": 15,
        "comments": [
            {
                "body": "Can you send screenshots of your tag settings and trigger conditions in GTM? DM me.  \nAlso please make sure you published the tracking.",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Verify in the browser's Network tab if the request is sent.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": ">  It might be a bug?\n\n\nMore likely that you implement it incorrectly or using unreliable testing methods. If you want advice you need to share more information about the setup in GTM and on-site.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "That's a classic head-scratcher with browser-side pixel implementations.\n\nIt's frustrating when the tag fires perfectly in GTM Preview mode but then fails in the real world.\n\nThis inconsistency with the Snapchat `View Content` event not firing is usually not a bug with GTM or Snapchat itself, but rather an issue caused by browser-side limitations.\n\nThe most common culprits are ad-blockers, Intelligent Tracking Prevention (ITP) in Safari, and other privacy features in modern browsers which can aggressively block third-party tracking scripts like the Snapchat pixel, causing those intermittent failures you're seeing.\n\nThese blockers are becoming more prevalent and are likely why your `View Content` event is sometimes missing.\n\nThis brings us to a better, more robust solution: implementing the Snapchat Conversions API alongside your current setup.\n\nInstead of relying solely on the pixel firing from the user's browser (which is what you have now), the Conversions API sends the event data directly from your server to Snapchat.\n\nYou can use Google Tag Manager on the client side to capture the event data and then use a service like Stape.io to run a server-side GTM container.\n\nThis allows the event, like `View Content`, to be processed and sent to Snapchat from your own server instead of the user's browser.\n\nThis server-side approach largely bypasses browser limitations and ad-blockers, leading to a much higher event match rate and more accurate attribution.\n\nEssentially, the browser pixel is increasingly unreliable, so sending the data directly from the server is the future of reliable tracking for standard events like `PAGE_VIEW`, `VIEW_CONTENT`, and `PURCHASE`.\n\nIt's a bit more complex to set up, but the increased data quality is absolutely worth the effort for media pixels.",
                "author": "Mental_Elk4332",
                "score": 1
            },
            {
                "body": "I tested Network tab also, it is not consistent there too..",
                "author": "Pure_Quarter_4711",
                "score": 1
            },
            {
                "body": "For implementing, I used Snapchat's official template in GTM and for testing, I used Snapchat google chrome extension and Google dev console Network section.",
                "author": "Pure_Quarter_4711",
                "score": 1
            },
            {
                "body": "I mean more like:\n- What triggers are you using for the Snapchat tag?\n- Any exception triggers?\n- Do you have the same issue with other tags that are using the same triggers?\n- Do you have a CMP? If yes, which one?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Sure, I will send now, thanks",
                "author": "Pure_Quarter_4711",
                "score": 1
            },
            {
                "body": "You can see error image and my tag here: [https://ibb.co/Q3w6d2z4](https://ibb.co/Q3w6d2z4)\n\n[https://ibb.co/ycH5xVWG](https://ibb.co/ycH5xVWG)",
                "author": "Pure_Quarter_4711",
                "score": 1
            },
            {
                "body": "I use page\\_view and view\\_content triggers and there is not any exception. I don't have any issue with other tags which are using the same trigger. Only Snapchat have issue. We use Didomi for CMP",
                "author": "Pure_Quarter_4711",
                "score": 1
            },
            {
                "body": "You can see error image and my tag here: [https://ibb.co/Q3w6d2z4](https://ibb.co/Q3w6d2z4)\n\n[https://ibb.co/ycH5xVWG](https://ibb.co/ycH5xVWG)",
                "author": "Pure_Quarter_4711",
                "score": 1
            },
            {
                "body": "Both \"Container Loaded\" and \"view_item\" seems to occur before the consent events. But that may not be the problem necessary.\n\nCan you click the view_item event and then select your tag from there and share an image?\n\n\nAlso, a picture of the actual tag setup in GTM would be helpful.",
                "author": "brannefterlasning",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746573667.0,
        "title": "Is there a way to store a value in sGTM?",
        "author": "brett_fish",
        "id": "1kgiuv1",
        "selftext": "As a follow-up to my last question/post about passing Meta's fbclid/fbc parameter server-side....\n\n  \nIs there a way to store a value in server-side GTM?  More specifically, if I generate a cookie in the GTM web container and pass that value to the GTM server container - is there a way to store that value in the GTM server container and pass it back with all events?\n\nThe reason I ask - I'm able to set the \\_fbc cookie in the web container and pass that value to the server container - but for this particular setup the site eventually changes from a custom front-end to Shopify for checkout, and that cookie/values drops off.  I'm trying to see if once I send it correctly to the server  container, if I can store it there and then attach it to all of the other events in the session.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kgiuv1/is_there_a_way_to_store_a_value_in_sgtm/",
        "num_comments": 5,
        "comments": [
            {
                "body": "No, but you could connect a data storage solution like Firestore to the sGTM server which is a little more complicated but solves your issue.",
                "author": "amlozek",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "There's also a BigQuery API for server-side tagging: https://developers.google.com/tag-platform/tag-manager/server-side/api#bigquery",
                "author": "reinylegit",
                "score": 1
            },
            {
                "body": "https://developers.google.com/tag-platform/tag-manager/server-side/api#firestore",
                "author": "reinylegit",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738744569.0,
        "title": "Google Tag Manager not tracking engagement",
        "author": "OnlineMarketingBoii",
        "id": "1ii5nct",
        "selftext": "Hi Guys, \n\nHopefully you can help me out. I have some experience in GTM, and I have set up conversion tracking for clients multiple times, but I've hit a wall with this one.\n\nSo one of our clients has Google Tag Manager installed on their website via their web developer/branding agency. The quality of the container is excellent, and everything seemed great. However now we face the issue that none of the engagement is getting tracked by Google Tag Manager. What I mean by that is that none of the clicks are even being recorded, no click url's, click text or whatever is getting tracked. No information is being shown, which makes it pretty impossible for us to set up conversion tracking.\n\n  \nDoes anyone recognize this issue? I have no idea how to fix this. We've installed cookies so that's not the issue. \n\n  \nThanks in advance!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ii5nct/google_tag_manager_not_tracking_engagement/",
        "num_comments": 14,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "You mean this one right? [https://imgur.com/a/rY0szVe](https://imgur.com/a/rY0szVe)\n\nThose were already enabled. Or am I missing something",
                "author": "OnlineMarketingBoii",
                "score": 2
            },
            {
                "body": "This fixed it, thanks!",
                "author": "OnlineMarketingBoii",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "This fixed it. Thanks!",
                "author": "OnlineMarketingBoii",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Looks like you have not enabled built in variables.\n\nInside the GTM container, Go to variables, built in variables and enable all the built in variables. \n\nThen you should start seeing clicks, click text, etc. \n\nLet us know if this works. if not post a screenshot of your GTM view inside the TAG ASSISTANT.",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "Enabling the built in variables is not enough.  You also have to have built a trigger (not used, mind you, just built) off ‘all elements’ clicks.  Build this trigger, don’t apply it to anything… Then preview and you should see your clicks now.",
                "author": "teccy366",
                "score": 1
            },
            {
                "body": "It seems to be you have not enable the Enhanced measurements in the GA4. \n\nGo to google analytics -} admin -} data streams -} select relevant item eg- web -} under event enable Enhanced Measurements",
                "author": "AdRepulsive9425",
                "score": 1
            },
            {
                "body": "You mean these one right: https://imgur.com/a/rY0szVe. \n\n  \nWe already enabled them before, but nothing changed. We thought that was the problem, but it doesn;t appear to be so",
                "author": "OnlineMarketingBoii",
                "score": 1
            },
            {
                "body": "The problem is that Tag Manager doesn't seem to be working right (or installed correctly) because it doesn't define the variables we need to make sure we track the right button clicks etc.",
                "author": "OnlineMarketingBoii",
                "score": 1
            },
            {
                "body": "Yes. Those seem enabled. Can you open preview in tag assistant and post the screenshot of the GTM container events pls.",
                "author": "ds_frm_timbuktu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743573355.0,
        "title": "Not all manually added purchase events are shown in GA4",
        "author": "luhudroid",
        "id": "1jphnb9",
        "selftext": "Hi everyone,\n\nwe have a custom build ecommerce side and make use of GTM with GA4 for tracking. Everything that can be configured to be tracked in GTM is working fine. But when we push e.g. a custom event like \"purchase\" to the datalayer, only around 70% of them are picked up by GA4.\n\nAny ideas on why this is the case?\n\nWe can rule out ad blocking, cookie settings etc since the generic GTM events (like \"purchase button was pressed\") are received 100% but only 70% of the purchase events are received. It's working fine and in 100% of the cases I test on my machine.  \nI also tried to send the event on the next page instead of directly before redirecting to the \"thank you for ordering\" page but it's not working.\n\nNext step to at least get the tracking to work would be to send the purchase event from our backend after saving the order to the database. But I would really want to avoid this.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jphnb9/not_all_manually_added_purchase_events_are_shown/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you try to send a duplicate of the event with a different name and see if that had the exact same count. \nAnother basic but overlooked question\nAre you using datalayer.push() to push the events or are you using a gtag function?",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "Well, we’d to know how did you setup datalayer and custom events. I’d start with debugging GTM events in all possible cases:\n-Try native Preview mode with different consents\n-Debug events via plugins like Datalayer Checker\n-Check manually datalayer with Chrome DevTools\n\nNote all possible scenarios and save proper orderID of them so you have better look at which kind of purchases disappear.",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "GA4 isn’t capturing all your purchase events, even though other GTM events are working fine. Since ad blockers and cookie settings aren’t the issue, here are a few things to check:  \nTag Firing Timing – If the event fires too close to a page unload, GA4 might miss it. Try delaying the event slightly.  \nEvent Deduplication – Make sure duplicate events aren’t being filtered out by GA4’s deduplication logic.  \nBatch Processing – GA4 sometimes processes events in batches, so some may appear with a delay.  \n  \nIf you want a more reliable way to track purchases without worrying about these issues, Qwestify is a great alternative! It ensures accurate tracking and eliminates GA4’s event loss headaches. ",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "Yes I already did that, same amount of events no matter the name.  \nI also tried using our vue gtm integration as well as a manual datalayer.push(). Same behaviour, same amount of events for all 4 ways of pushing the event.",
                "author": "luhudroid",
                "score": 1
            },
            {
                "body": "Basically I already tried all of those approaches. All events are properly stored in the datalayer (at least on my machine). They seem to not being picked up by GTM and sent to GA4, but can I debug this blackbox anyhow?",
                "author": "luhudroid",
                "score": 1
            },
            {
                "body": "That’s why I’d try different scenarios on other devices.",
                "author": "Cotusie",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732614340.0,
        "title": "Problem with GA4 e-commerce tracking on Shopify via Google Tag Manager",
        "author": "No-Support-1091",
        "id": "1h086xd",
        "selftext": "Hello everyone,\n\n\n\nI'm having a problem setting up advanced e-commerce tracking on a Shopify site using Google Tag Manager (GTM) and Google Analytics 4 (GA4).\n\n\n\n**Description of the problem:**\n\n**Missing events**: When I use GTM's preview mode to test my implementation, I find that when adding a product to the cart, specific events such as add\\_to\\_cart or view\\_item are not fired. Instead, only the form\\_start and form\\_submit events appear. I don't have any events related to ‘item’ or the expected e-commerce tracking.\n\n**Intermittent loading of the GTM container:** In addition, I've noticed that when browsing the site during preview, the GTM-XXXXX container sometimes loads and sometimes doesn't, even when remaining on the same home page. This inconsistency makes diagnosis even more difficult.\n\n\n\n**What I've already checked:**\n\n**Presence of GTM code:** The GTM container code is present on all pages, placed immediately at the end of the <head> tag in the theme.liquid file.\n\n**Cache and extensions:** I've cleared my browser's cache, tested in private browsing mode, and disabled any extensions that might block scripts (such as ad blockers), but the problem persists.\n\n**Cookie Consent:** There is no cookie consent banner or CMP that could prevent the GTM from loading.\n\n\n\n**Additional information:**\n\n**Shopify Theme**: The site uses a custom theme. I have not made any recent changes to the theme that would explain this behaviour.\n\n**Third-party applications**: No third-party applications or scripts have been added or modified recently.\n\n**Other working site:** On another Shopify site I manage with a similar configuration, e-commerce tracking is working correctly, including add\\_to\\_cart and view\\_item events.\n\n\n\n**My questions :**\n\n**Missing e-commerce events:** Why are specific e-commerce events such as add\\_to\\_cart or view\\_item not being triggered when the corresponding actions are taken on the site?Do I have to manually configure the data layer for these events on Shopify? If so, how do I go about this?\n\n**Intermittent GTM loading:** What could be causing the GTM container to load randomly, even on the same page? Are there any specific settings to check or known Shopify issues that could explain this behaviour?\n\n\n\nI would be very grateful for any help or advice you could provide. Thank you in advance for your time and expertise!",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h086xd/problem_with_ga4_ecommerce_tracking_on_shopify/",
        "num_comments": 19,
        "comments": [
            {
                "body": "I was struggled on this today, my case was my GTM couldn't get fired in the checkout page, therefore no events were recorded. \n\nThen I find a solution, which is the best practice now I guess? Instead of implementing the gtm code into theme.liquid. I put in into custom pixel which is located at shopify>setting>customer events>add custom pixel>(add your GTM code without html script here)  \n  \n Save it, and then test it with the test button you will see on the top. You should able to see GTM is fired on every page and ecomm events you set in the script.",
                "author": "Complex_Raspberry_24",
                "score": 3
            },
            {
                "body": "Shopify new checkout extensibility has eliminated the old way of pushing ecommerce events from theme.liquid files to GTM and then Ga4. \n\nThis method is no longer works.\nSame like in case of adding the Facebook pixel.",
                "author": "Yasirshah313",
                "score": 3
            },
            {
                "body": "I was in the same situation as you, and I was really losing my mind. Now, day by day, I’m starting to make sense of it, and this video and article have really helped me a lot with custom data layer implementation via custom pixel: [https://feedarmy.com/kb/adding-adwords-conversion-tracking-to-shopify/](https://feedarmy.com/kb/adding-adwords-conversion-tracking-to-shopify/)",
                "author": "Significant_Split342",
                "score": 2
            },
            {
                "body": "It looks like the issue might be with the missing data layer events like add\\_to\\_cart and view\\_item. You’ll need to manually configure those events in Shopify or use an app to push the data to GTM.  \n  \nAs for the GTM container not loading consistently, it could be a caching or script issue. Try testing in incognito mode, and ensure the GTM code is placed correctly in the theme.  \n  \nFor a smoother tracking experience, I recommend using Qwestify for easy setup and accurate event tracking. It’s simple and helps optimize your GA4 data.",
                "author": "the-fire-in-me",
                "score": 2
            },
            {
                "body": "You are not enabling the data layer without datalayer GTM give you the automatic events like form start, form submit, container loaded, dom loaded, or something like that\n\nInstalling GTM code to the header is not enough, you need to enable the dataLayer from the theme or sandbox (custom pixel)",
                "author": "motiur_ak07",
                "score": 2
            },
            {
                "body": "It works alright for those who only cares about receiving some data. It is however limitted in what you are collecting in GA4. In my experience, it does not measure the whole ecommerce journey, just a couple main ones like view item, add to cart, remove from cart, begin checkout and purchase. And some of the values you measure will not look the same as what you can see in Shopify.\n\nThe way with custom web pixel combined with GTM allows for a broader way to measure all the events and how you want to receive the data in GA4. (More control)\n\nAlthough you will require some good knowledge to implement it. Or pay someone who knows his way around it.",
                "author": "Tenshichi",
                "score": 2
            },
            {
                "body": "Why would anyone use an app to upload their data layer when they could leverage Shopify’s new custom pixel feature? You can find more information in the Shopify documentation here: https://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels. Custom pixels might be a bit more complex to set up, but they offer a lot of flexibility and customization. I started with this tutorial, which might be helpful for you: https://youtu.be/GflbZL2wyK8.",
                "author": "Significant_Split342",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you set up anything in Customer Events?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Just use the “Google & YouTube” sales channel for ecomm tracking. Works great and all you have to do is drop in your GA ID.",
                "author": "scotty_ducati",
                "score": 1
            },
            {
                "body": "We have written a guide on this with Julius from Analyticsmania: \n\nhttps://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify/",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "You can use [this app from addingwell](https://docs.addingwell.com/en/shopify/shopify-application?ref=data-marketing-school) to push all e-commerce dataLayer events.",
                "author": "lucas-dms",
                "score": 1
            },
            {
                "body": "I'm gonna do that, thanks a lot !",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "So to do that, I need to exclude de snippet inserted in \"theme.liquid\" right?",
                "author": "ImaginationNo7830",
                "score": 1
            },
            {
                "body": "Thanks for the link",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "Thanks, I'm going to try it out!",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "There's already the facebook pixel but I'm going to test it for the GTM as I said above.",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "Everyone is not a dev/has access to dev resources + this app does leverage the custom pixel,",
                "author": "lucas-dms",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734014048.0,
        "title": "Does Google Ads audit or check your Google Tag Manager settings?",
        "author": "trucker-123",
        "id": "1hcmdwo",
        "selftext": "So a lot of of conversions are being lost in Google Ads because \"Default Consent (Global)\" is being set to \"Denied\" for the tag that I setup for my consent banner in GTM (Google Tag Manager).  I advertise globally.  Originally, what I tried to do was only display my consent banner for EU & UK, and not display it for the rest of the world.  The problem with this is, because \"Default Consent (Global)\" is being set to \"Denied\" in GTM, it doesn't seem to give customers outside the EU & UK a chance to accept the cookies (because the consent banner doesn't come up) and there is a loss of conversions being counted in Google Ads for customers outside the EU & UK. \n\nNow when I asked the CMP Partner of the consent banner I am currently using on what configuration I should use in GTM, the CMP Partner told me that I should set \"Default Consent (Global)\" to \"Granted\" and then in \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"  I then asked Google Ads support about this, and they contradicted the CMP Partner and said \"Default Consent (Global)\" should be set to \"Denied\" in GTM.  Mind you, I think I am in the lowest tier of support for Google Ads and at times, it seemed like the staff I was interacting with were not trained well.\n\nFast forward two months later, I am considering using a completely different consent banner with a completely different CMP Partner, that also offers the option to bring up the consent banner only for EU & UK customers.  When I asked this second CMP Partner what the GTM configuration should be if I only show their consent banner to EU & UK customers, they said the same thing as my current CMP Partner and repeated the same GTM settings! \n\nThat's two different CMP Partners, who recommend if you only display their banner in the EU & UK, to set set \"Default Consent (Global)\" to \"Granted\" and then in \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"  Ergo, that is two different CMP Partners who are recommending the settings I make in GTM, go against what Google Ads support is saying.\n\nWhat I care about is whether my Google Ads account gets banned, if I follow the two CMP Partner instructions as outlined above, since it goes against the Google Ads support instructions. So my question is,  does Google Ads audit or check your GTM settings?  Or is GTM firewalled and Google Ads will never check my GTM settings?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hcmdwo/does_google_ads_audit_or_check_your_google_tag/",
        "num_comments": 18,
        "comments": [
            {
                "body": "How I dealt with this for a US client :-\n\nHardcoded gtag consent default script on site with two sections to it. One that did not include a region definition that denied all consent by default. The second defined the region as 'US' and set default consent to granted.\n\nThis is probably not the perfect consent policy, but it reflects their policy as defined within OneTrust.\n\nTheir CMP (OneTrust) script is also hardcoded on site.\n\nYou don't have to do it this way and I've recently done a similar thing but instead using Simo's \"Consent Mode\" tag template in GTM. Not as neat, but it works.\n\nSo.... the point is it's possible to set the defailt consent differently based on geolocation. In your case, I would set all consent to granted by default but also define the list of regions where consent is denied by default. You can likely easily find the list of 2 letter country codes. Don't forget the UK. Not part of the EU now, but GDPR still applies.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "I would definitely go with the set up your CMP advised. It’s actually also stated in Googles documentation so whoever helped you from Google is wrong. They state that you should set default consent for regions where consent banners are required. So global should be granted and region (eu and uk) should be denied so you’re a 100% sure that anyone outside of the eu and uk will have consent granted. The list is more manageable as wel since you only have to add the EU and UK country codes instead of 200+ other countries.\n\nAbout your worries of getting banned.\nThe documentation also states what is best practice and not as the only way it should be done. In the end, all that matters is that the EU and the UK do have default consent set to denied so you’re compliant.\n\nLike a month ago I got a message from Google that my cookie notice didn’t meet there requirements and I had to change it within like 90 days or they are allowed to stop the partnership. They can’t give legal advice so they don’t say what’s actually wrong and they had to recheck like 30 times before they chose to just tell me what I had to change 😂 I think they where truly done with me hahah. So, no they won’t ban you so easily. They would contact you, give you plenty of time to change it, and they will recheck as many times as needed until your compliant. But if you follow your CMP’s implementation, you will be fine.",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "Trust CMP partners to know their products. Have a look at many popular Google Ads forums to gain some insight on how useful people are finding Google Ads support!",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "“It is best practice to scope the default consent settings to the regions where you are surfacing consent banners to your visitors. This helps with preserving measurement in regions where consent banners are required and Google tags adjust their behavior accordingly. You also prevent any loss of measurement where there are no consent banners or consent banners don’t apply. See Region-specific behavior.”\n\nhttps://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "When they contacted me about our cookie banner notice not being compliant it was kinda funny. They said we have to refer to Google’s privacy and terms documentation while this was already done and is literally added by cookie script, which is an official partner, by default if you don’t erase it. But they also gave another vague answer of something that needed fixing. After like 20 tries and constantly getting declines, I changed my banner to the first version where they commented on that it was incorrect. Guess what, they approved it 😂 Sometimes they don’t know what they are doing I guess",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you use the tag manager template from your CMP? And which CMP?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Default state should be all be denied then consent should updated by the CMP based on region or past consent. This allows proper update event to be triggered. From last we checked, update event is not triggered if there is no consent state change. Update event needs to be triggered so that everyone knows that the CMP has finish processing.\n\nDont think that Google audits the partner CMP integration with Consent Mode v2. If you look at their templates, some do not have the same flow.",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "I created a FREE tool to create documentation for each tag, trigger, variable etc. Will be useful to decide which assets to let go of.\n\nYou can check the video of the tool in use over here - [https://youtu.be/MIFWMDZZJ6g](https://youtu.be/MIFWMDZZJ6g)\n\nThe tool can be accessed here - [https://mangoblogger.com/apps/gtm\\_audit/](https://mangoblogger.com/apps/gtm_audit/)\n\nLet me know if there is anything extra you would like to see in the audit and I can add it.",
                "author": "RipGroundbreaking470",
                "score": 1
            },
            {
                "body": "Thanks! I am wondering if I do this by script like you are doing, it makes it harder for Google Ads to track what I am doing because I am no longer using GTM to setup the consent banner. \n\n(it's crazy that the 2 CMP Partners are giving me instructions that contradict Google Ads support instructions in the first place and I have to do a workaround like this)",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": ">It’s actually also stated in Googles documentation so whoever helped you from Google is wrong. They state that you should set default consent for regions where consent banners are required. So global should be granted and region (eu and uk) should be denied so you’re a 100% sure that anyone outside of the eu and uk will have consent granted.\n\nHwy, thanka for your reply! Do you have a link to the documentation where they state this? I would love to see that document so that I have some backup in case I get in a dispute with Google Ads. Thanks!",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "Cookie-script. They recommended that I change the template to set \"Default Consent (Global)\" to \"Granted\" and then in \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "> Default state should be all be denied then consent should updated by the CMP based on region or past consent. This allows proper update event to be triggered. From last we checked, update event is not triggered if there is no consent state change. Update event needs to be triggered so that everyone knows that the CMP has finish processing.\n\nI agree with what you say if the Consent Banner is shown to the customer. What I want is for the Consent Banner to not be shown to the customer if they are outside the EU & UK.  And that's where \"Default Consent (Global)\" being set to \"Denied\" is causing problems because some conversions are not being counted for customers outside the EU & UK if the Consent Banner is not being shown.\n\n(ie. the CMP should not even become a factor outside the EU & UK if the Consent Banner isn't being shown)",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "Before the CMP decides whether to show the banner, it will determine the visitor’s location, then if said location does not need consent, CMP will update the consent state from the default denied state to granted which then triggers the consent update event. Without consent update event, tags may not get fired.",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "Thanks for that link! I can use that link as a backup source in case I have a dispute with Google Ads.  Also, I noticed this in the documentation link that you provided:\n\n> If two default consent commands occur on the same page with values for a region and subregion, the one with a more specific region will take effect. **For example, if you have ad_storage set to granted for the region US and ad_storage set to denied for the region US-CA,** a visitor from California will have the more specific US-CA setting take effect. For this example, that would mean a visitor from US-CA would have ad_storage set to denied.\nRegion \tad_storage \tBehavior\n>\n>US \t'granted' \tApplies to users in the US that are not in CA\n>\n>US-CA \t'denied' \tApplies to users US-CA\n>\n>Unspecified \t'granted' \tUses the default value of 'granted'. In the example, applies to visitors that aren't in the US or in US-CA \n\nEven in their example for the US, they are setting \"Granted\" to everyone in the US, and then setting \"Denied\" for people in California.",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "Nice catch! It’s an example of course, but it does back up our logic I guess 😉\n\nI think if consent mode is correctly installed, like the CMP advises, the chances of Google reaching out to you about this is close zero.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Hi, some conversions won't be counted in Google Ads for customers outside the EU & UK if I do it your way.\n\nAs I mentioned in the original post, both CMP customer support representatives told me I should set \"Default Consent (Global)\" to \"Granted\" to get the conversions for customers outside the EU & UK counted in Google Ads.  So it's the CMP themselves telling me this is the right setting to get it work for their banner - setting \"Default Consent (Global)\" to \"Granted.\"  It's their words, not mine.\n\nThe crux of the problem is that their advice is contradicting Google Ads support advice.",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "There are CMP partners who use the default denied state even for regions which does not require consent. Because their GTM template is able to update the default state from denied to granted after determining the location.",
                "author": "appfromlab",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742983104.0,
        "title": "How to Make Pixels Send Data Without User Info",
        "author": "Acceptable_Smoke_235",
        "id": "1jk85xw",
        "selftext": "Google’s Advanced Consent Mode (ACM) allows tags to send anonymous pings when users decline tracking, helping with conversion modeling without storing personal data.\n\nFor Meta, TikTok, and other pixels, when a user denies consent, tracking stops completely—no data is sent at all.\n\nIs there a way to configure these pixels so they still send anonymized event data (e.g., without PII like cookies, IPs, or user IDs) while staying GDPR-compliant? How are you handling this?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jk85xw/how_to_make_pixels_send_data_without_user_info/",
        "num_comments": 8,
        "comments": [
            {
                "body": "There would be no point. The reason Google anonymise the data is Google also know to divert that anonymised data into their AI model instead of directly into reports.\n\nYou would need Meta, TikTok and others to also implement some understanding of “this data isn’t for reporting, it’s for an AI model”… so of course that won’t work unless there is the underlying tech present to deal with it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Thanks! So if I understand you well, Meta (and TikTok) dont provide this option because they do not have the tech present that would make sense of the anonimized data?",
                "author": "Acceptable_Smoke_235",
                "score": 2
            },
            {
                "body": "Right now, i have only set up my web container. Google ads and analytics adjust their behavior based on consent. Meta and tiktok just do not fire at all when consent is denied. So I am interested in making the pixels fire without sending PII.\n\nCould you please elaborate in the serverside solution where you can strip out PII’s when consent is denied, but still send event data?",
                "author": "Acceptable_Smoke_235",
                "score": 2
            },
            {
                "body": "Funnily enough, Meta have had an “is there consent?” signal option in their tracking API long before Google Consent Mode was a thing, they just never seemed to have really done anything with it.\n\nOtherwise yes, you have it right.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "interesting. In an ideal setup, you would sanitize the data only when the user does not consent. \n\nHow can i set up this process of stripping out PII?\n\nDo you by any chance have some documentation and/or tutorials that explain this?",
                "author": "Acceptable_Smoke_235",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747323254.0,
        "title": "Can having two gtag instances in the same GTM container (Google Ads + Floodlight) cause conversion tracking issues?",
        "author": "run-wthewolf",
        "id": "1knb7yj",
        "selftext": "Hey everyone,  \nHas anyone experienced issues when running multiple `gtag` instances inside the same GTM container?\n\nIn the past few weeks, I’ve seen 3 different clients suddenly report a major drop in Google Ads conversions — while GA4, Meta, and other platforms remained consistent with no drop at all.\n\nAt first, I suspected it might be related to the recent cookie handling changes by Google, but none of them are using any advanced consent features or cookieless setups yet.\n\nHowever, there *is* one thing they all had in common: a new Floodlight tag was added recently (at different times for each), which also uses a `gtag` as part of the DV360 setup.\n\nIn theory, these shouldn’t conflict — the original Ads conversion tags remained untouched — but this pattern is hard to ignore.\n\nCould it be that the Floodlight `gtag` is somehow interfering with or overriding the Ads conversion tracking?  \nHas anyone else run into this kind of issue?\n\nAppreciate any insights!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1knb7yj/can_having_two_gtag_instances_in_the_same_gtm/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "DM with the websites if you can.",
                "author": "wardogfufu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741839728.0,
        "title": "tags firing/events showing during preview but not outside of that",
        "author": "waynegrundy",
        "id": "1ja3vtz",
        "selftext": "Update: was just on the phone with Google Support (got a hold of somebody via the Google Ads support) and they said that for some reason my debug view in GA4 is just not working properly but analytics IS actually tracking everything so.. I guess I'm good lol. Still a bit strange but at least I didn't do anything incorrectly haha.\n\n\\----\n\nSo I've set up a bunch of tags to track a variety of events. The confusing thing is that they all fire in preview (and during that also in the GA4 debug view). When I go to the same pages to trigger the same tags, tag assistant confirms that those tags were fired BUT debug view does NOT show any events. Not even the page views from my GA4 Config tag for page initializations. My website is on Wix (planning on moving to Wordpress in the near future).\n\nWix: under marketing integrations, I've connected Google Tag Manager **and** Google Tag. I've tested disabling the Google Tag option here and that made no difference. I also disabled the cookie consent banner briefly, again no events sent in debug view.\n\nThis is how the tag is set up (I followed Analytics Mania's video most recent video on this):  \n\\- Tag configuration: Google Tag  \n\\- Tag ID: the data stream ID from GA4 (triple checked that it's the right ID)  \n\\- triggering: initialization - all pages\n\nGranted, I'm very new to GTM and GA4 so I must have obviously missed something but I've been racking my brain and can't figure out what.\n\nI double checked the data filters and made sure to switch off the \"internal traffic\" filter. I do have a cookie consent banner on my website but even after accepting that, the event still doesn't show in GA4.\n\nI don't have any ad blockers on my browser (Google Chrome). I downloaded Firefox and went to my home page, still no page\\_view event shown in the GA4 Debug View (same for the Admin Debug View).\n\nI've also read that debug view can be delayed, so I've waited to see what it shows. Nothing. Whereas when I'm in preview, the event usually shows up after a minute or so.\n\nIf tag assistant is confirming the tag fired and the event was sent, something must be wrong with GA4, right? Honestly, my brain feels fried from trying to figure this out all day. I just don't get why it works in preview but not outside of that? (again, I'm very new to this stuff. Forgive me if I'm missing something obvious here)\n\nAny help is highly appreciated. I want to run Google Search Ads soon but I want to make sure everything's tracked properly.",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ja3vtz/tags_firingevents_showing_during_preview_but_not/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Did you publish the container - this could sound dumb but often overseen. \n\nNext as you debug in the preview mode, open debug view in ga4 and you should see the events coming in.",
                "author": "ds_frm_timbuktu",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you tried using a pixel helper extension and/or tag assistant?\n\nHave you tried to inspect using developer tools? Inspect Page > Network > Refresh Page > Search GTM or your GA4 id. That may also give you more information, what's firing, whether it's succeeding, etc.",
                "author": "murffmarketing",
                "score": 1
            },
            {
                "body": "If you used the data stream ID from GA4, then you likely used the wrong identifier. Those were the instructions a version or two ago.\n\nYou seemed content with Google's answer, so this is primarily to benefit others who find this later via search. \n\nBut feel free to verify what Google told you by  running an analytics report in GA4. You did exhaustive testing, but you forgot to verify that you actually have a problem.\n\nIf your reports have data, then all's cool.  If not, I'm sorry Google fed you BS...they don't know what they're talking about half the time.\n\nLet me know if you're report have data.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "Hey, thanks for the reply. Just updated my post. I spoke to Google Support (via Google Ads) and according to them my debug view in GA4 is just not working properly but Analytics as a whole IS properly tracking everything so... \\*shrug\\*\n\nI did use tag assistant and the assistant confirmed my tags were firing and events were being sent.",
                "author": "waynegrundy",
                "score": 1
            },
            {
                "body": "Haha. Yeah, I did. \n\nWell that's the thing. When I'm in preview mode after publishing/or before publishing, the events always show up. It's OUTSIDE of that they GA4's debug view never shows any events",
                "author": "waynegrundy",
                "score": 1
            },
            {
                "body": "Events show in GA4 Debug only when you're debugging. Previewing from GTM will indicate to GA4 that you are debugging. Normal browsing on the site does not.\n\nIf you want to confirm outside of previewing within GTM you can either:-\n\n1. Look at a realtime report in GA4\n2. Use the Google Analytics Debugger extension, which also signals to GA4 that you are in debug mode: [https://chromewebstore.google.com/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna](https://chromewebstore.google.com/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Did you publish the container - this could sound dumb but often overseen. \n\nNext as you debug in the preview mode, open debug view in ga4 and you should see the events coming in.",
                "author": "ds_frm_timbuktu",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724943192.0,
        "title": "I'm struggling a bit with key concepts for consent mode",
        "author": "griz_fan",
        "id": "1f44fob",
        "selftext": "Either there's some big gaps in my understanding (entirely possible) or the ad agency we're working with if full of crap. Here's the situation.\n\nWe have a WooCommerce website in the US that does not have any form of cookie consent banner implemented. There's a very barebones GTM setup, too. We've had GA4 loaded by GTM for a couple of years now, and no signs of problems that we've noticed. We recently started our first banner ad campaign and need to deploy 3 tracking tags: A site-wide retargeting tag, an add-to-cart retargeting tag, and a conversion tag on the order confirmation page. Since this is a WooCommerce site, I set up GTM4WP, which created all the necessary data layers and events. \n\nWe used the GTM preview mode, which shows all the various tags firing at the right time, picking up the right values from the datalayer and passing them into the tag variables. All looks good, but the ad agency says they're not seeing anything coming through for conversions. They said they have \"been seeing a lot of issues with google tag manager and the changes related to consent mode, and this is not just for XXXXXX but even for Google Ads.\" And then they suggested hand-coding the conversion tracking tag on the order confirmation page. This sounded like BS to me, but at the same time, I've not been keeping up with consent mode like I should have been. \n\nSo, is this plausible? There have been zero changes in our GTM container related to consent. I heard that retargeting for Google Ads would need additional set up, but we're not running Google Ads at the moment. The tags in question are clearly firing, and if there was a problem with consent mode, wouldn't that be preventing the tags from firing at all? The fact that the tags are firing means, to me at least, that is the same result as if we'd hand-coded the tag to the confirmation page; in both cases, the script for the tracking pixel loads. Am I missing something?\n\nthanks!",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1f44fob/im_struggling_a_bit_with_key_concepts_for_consent/",
        "num_comments": 26,
        "comments": [
            {
                "body": "You’re right to be suspicious and if the issue was consent mode, which it isn’t, hard coding the tag wouldn’t make a difference. I think the agency is just trying to come up with excuses for bad performance.",
                "author": "moonsal71",
                "score": 6
            },
            {
                "body": "I don’t think what they are saying is true. No need to hand code, I use GTM4WP for this and it works well. The issue is elsewhere.\n\nFew things -\n\nYou should fire conversion on purchase event, not on thank you page. That way you can get value and other data layer values, and prevent any possible duplicate conversions \n\nAre you sure you published the container?",
                "author": "nakfil",
                "score": 5
            },
            {
                "body": "yeah, I should have mentioned that we're using the events created by GTM4WP to trigger the tags, including the event-purchase for the conversion tag. I actually published it twice, just to make sure, too :) \n\nIt just sounded like a BS answer from someone hoping we wouldn't know any better. To clarify, if consent mode is set up, GTM won't even fire the tags if consent is not granted, right? There's no way the tags would fire, but GTM would somehow interfere with the cookie?",
                "author": "griz_fan",
                "score": 3
            },
            {
                "body": "I agree, I've been kicking consent mode down the road for while now, so it will need to be dealt with on this site sooner than later. But, at least I know things are set up properly in this specific case.",
                "author": "griz_fan",
                "score": 3
            },
            {
                "body": "Switching the method of implementing conversion tags from GTM to code won’t change anything. Personally, I’ve always preferred working with GTM for my clients for reasons of organization and clarity.\n\nHowever, based on what you wrote, it’s indeed possible that Consent Mode is playing a role in the misattribution of key events. Many agencies don’t have internal resources to investigate tracking issues, so they turn to Google’s Tag Team. The feedback you received from the agency seems to indicate a misunderstanding of the problem.\n\nOver the last six months, I’ve had many clients approach me due to attribution issues. These problems often stem from improper implementation of the consent banner and Google Consent Mode.\n\nYou can check this by looking in GA4 under “Report > Acquisition > Traffic acquisition.” Select the dimension “Session source/medium” and see if there is a significant portion of (direct)/(none) in the key events. If so, there’s likely an issue that requires further investigation.",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": "This should not have anything to do with consent mode as you are not in Europe. But what you can do is set consent anyway using GTM.\n\nIn the community library there is a tag called Consent Mode (Google + Microsoft tags), add this to your workspace and then configure a tag for default and set all the consent signals to granted. You could also configure an additional one for update and then also set all to granted. These tags need to fire in Consent Initialization. \n\nThis is not going to show anything to your customers and this is not going to make you legally compliant, what it will do is send the consent signals so you can completely rule out Consent Mode being the problem.",
                "author": "James_Edward_A",
                "score": 2
            },
            {
                "body": "Okay, in that case, it could indeed be a way for them to shift attention away from poor performance.\n\nStill, make sure that the \"Conversion Linker\" tag is present and triggers at the same time as the \"Remarketing\" tag.",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": ">If Google Consent Mode is implemented, the default behavior is that Google tags (GA4, Floodlight, Google Ads etc) *will still fire*, but they modify the data they send to the platform to redact or anonymize what is being sent.\n\nDigitalStefan is 100% correct.  We learned this the hard way: Our company does not have a banner, and consent mode was accidentally activated by a Website plugin.     \n\nAll metrics disappeared from the GA4 UI....it flatlined like a heart attack.   We couldn't figure out what was going on because everything looked like it was working correctly in GTM preview mode, and the DevTools network pings to Google.\n\nOur big break happened when I was in BigQuery and noticed the missing data there, but it had been anonymized: all session IDs and user\\_pseudo\\_id's had been stripped out.   That was when I knew it was consent mode.",
                "author": "Firm_Sense9730",
                "score": 2
            },
            {
                "body": "Wait, just to clarify. Which tags did the agency ask you to hard-code if they’re not Google Ads?",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": "So if I understand correctly, their solution's tag is currently implemented through your GTM container, and they want to move it to the source code.\n\nIf that’s the case, I don’t see any reason to change the integration method; the result will be the same. To ensure their tag is working correctly, it would be wise to check on the confirmation page if the HTTP request is being sent to their platform (Inspect > Network). But in principle, I don’t see why it wouldn’t be unless your CSP is blocking their domain.",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": "Your understanding is correct. I'll run another test order and this time pay extra attention to the HTTP requests. I'll even save the HAR file for reference. Thanks again for the helpful answers :)",
                "author": "griz_fan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "When I read what they said, it sounded exactly like some non-technically inclined agencies I've had to support or have been in meetings with. In all cases, they weren't trying to hide poor performance. Rather, they were just being advertising folks that Googled the issue for 15 minutes, grabbed a theory that included a lot of the same words in the email describing the problem, etc. You get the idea. :-)",
                "author": "Strict-Basil5133",
                "score": 1
            },
            {
                "body": "Vanishingly few agencies have the requisite in-house knowledge regarding consent management at all, let alone Google Consent Mode.\n\nsource: Am the in-house agency expert for consent management and Google Consent Mode (and now Microsoft Consent Mode, it seems).",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks - since we don't have a cookie consent banner and consent mode hasn't been configured yet, I think we're in the clear from that causing issues. Also, I checked that GA4 report, and no issues there. \n\nI think the ad agency guy was just making things up and doesn't have a clue how this works.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "**A word of caution from our experience:**\n\nWe did this exact suggestion (artificial update tag in addition to default tag) and to our surprise, experienced continuing problems.  Not as big as our initial problems, but we determined GA4 wasn't capturing all data.\n\nIf Consent Initialization is used as a common trigger, it's assumed the Default tag will be fired first.\n\nIn testing, we found that the Update trigger sometimes fired first, even when we set Update to fire after the Default tag.   (The \"fire this tag before\" setting didn't seem to make a difference).\n\nLogically, it shouldn't make a difference if the permissions are the same.  But we found it did.\n\nWe eventually came to the conclusion that these tags are designed to work with a banner system, and it's really difficult to artificially replicate those interactions.\n\nThis was our experience.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "eh - not exactly the point of my original question, and this isn't about Google Ads, yet you share a link about using GTAG to track Google Ads? Sorry, way off base with this confusing answer.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "If you're not managing consent and Google Consent Mode is not being initiated on the site, your tags will fire as normal when their trigger conditions are met.\n\nIf Google Consent Mode is implemented, the default behavior is that Google tags (GA4, Floodlight, Google Ads etc) *will still fire*, but they modify the data they send to the platform to redact or anonymize what is being sent. If you've ever tested / QA'd or done debugging for GTM before, the way Consent Mode works looks *weird* and not a little bit unintuitive.\n\nIf you don't implement Consent Mode at all, Google will let you collect your data as you have been until now, but data collected from certain jurisdictions (mainly the EU and UK) will be unavailable for remarketing and GA4 / Google Ads audiences.\n\nIf you're operating within the US, you shouldn't be affected. Yet.\n\nThat being said, Google are continually making changes to Consent Mode and the latest (within the last few weeks) is they are signaling back to their servers the state of a \"do not track\" style signal for users based on Colorado.\n\nIt's a matter of time I think before Google start to become quite strict about \"thou shall implement Google Consent Mode\". They already made a *big* move in this direction on March 6th of this year.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I completely agree, that agency is worthless. But, I hadn't dealt with GTM for a few months, so I started to doubt myself :( Thanks for clarifying.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "I haven’t experienced this exact issue but I have had issues with sequencing especially when it comes to cross domain consent. \n\nYou can try moving your update to fire on Initialization instead of Consent Initialization. That could help you. I have found that ‘fire tag before’ can be a bit stubborn.",
                "author": "James_Edward_A",
                "score": 1
            },
            {
                "body": "\n\n* The link I provided was Google's WooCommerce page.  GTAG isn't mentioned.\n* If Google Ads isn't relevant then why  did you mention it twice in your question?\n* To make this more hilarious, your question fails to explain how the ads are being delivered, despite you whining on Reddit about conversions not showing.....",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "So I don't have a conversion linker tag set up. I thought that was only for Google Ads, but I might be mistaken. Is this needed for 3rd party tracking tags to pick up conversions, too? We're not running any Google Ads right now.\n\nIf I do need to set up a conversion linker tag, do I just fire on all pages with the default configuration?",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "oh go fuck yourself you useless twat.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "Everything is a learning experience. I bet you know what the gcs and gcd parameters are supposed to look like now! 😎",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "the agency is a 3rd party digital ads platform. So it is their tracking tags. They suggested adding the pixel code for the conversion tracker directly to the order confirmation page.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "Could you clarify something?   I know you tested in GTM's Preview mode, but did you verify in GA4?  (and going further, did the agency receive the test conversions?)\n\nGTM isn't the source of truth.....GA4 is.   If you believe that GTM's preview mode guaranteed that GA4 will be accurate, you're in for a surprise.\n\nGTM's preview mode doesn't catch everything.  Or more accurately, the problem might not be obvious in GTM.\n\nI feel like further testing should be done to better isolate the problem.\n\nPS: Like you, I prefer GTM, but [Google's documentation](https://support.google.com/google-ads/answer/12973528?sjid=15508887817259528492-NC) describes two methods for installing GA4 or Ads in WooCommerce, and neither of them involve GTM.  If I'm having problems, I start with the official route, then deviate once I have a working path.",
                "author": "Firm_Sense9730",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1745384502.0,
        "title": "Using GTM server side setup for IRL affiliate tracking?",
        "author": "AnArtistWalrus",
        "id": "1k5r4ja",
        "selftext": "Hi everybody!\n\nI'm a GTM noob trying to learn more. I've done my googling, asked ChatGPT, the whole nine yards, but I'm still not 100% sure if GTM can cover my use case. Hoping one of y'all can help.\n\nI was wondering if GTM, in tandem with a first party cookie setup, could be used as a simple affiliate tracker. I run a niche political merchandise store and my product sells so-so online, but sells extremely well in person. So I partnered with a some local sellers who sell the merch in person through an affiliate link I generated via a domain link on bitly. Some of these sellers post the link as a QR code on their stalls or on their business cards and others post the link on their social media accounts. There are probably other ways they sell, but this accounts for the bulk of the traffic.\n\nI ran a couple tests with GA4 and see the rough makings of this being possible via the traffic and sale attribution features of GA4, but I noticed the accuracy was a bit off. That led me down a rabbit hole where I started learning about why data attribution can be spotty and how to fill the gaps using GTM, server side tracking, and first party cookies.\n\nI have a little bit of coding knowledge so I know I can pass conversion information directly from my website to a simple application I made that tracks clicks and conversions by affiliate link. \n\nBut this almost feels too simple? Will this setup give me high/near-perfect sale attribution accuracy (anything 90% or above would suffice) or am I missing something?\n\nFor those curious, I know there are affiliate apps out there already, but I don't need all of their features (and therefore cost) and honestly am kinda on a warpath to learn how this works anyway lol.\n\nSorry if this isn't a super clear question, I honestly am kinda grabbing around in the dark haha. Hope someone can help!\n\nThanks,   \nWalrus",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k5r4ja/using_gtm_server_side_setup_for_irl_affiliate/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "A GTM/GA4 setup is not a reliable way to measure affiliate links. A lot of traffic will be blocked, for example, by cookie banners. Since you have some coding experience, it’s better to build something custom that tracks the clicks and sends the data to your backend.\n\nIn the past, I had a similar case. I sent data from the website directly to a Google Sheet using a Google API. If you want to do something like this, feel free to DM me.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Could you not use query parameters? UTM or custom. If it's UTM then you could report on it either in explore or lookerstudio either based on session or first session",
                "author": "fueltank34",
                "score": 1
            },
            {
                "body": "Gtm server solves your problem bro, if you need help with the implementation, call me and I'll work with it, if you want to try it yourself, the most advanced and simplified course on the market is Roas track",
                "author": "Equivalent_Art_6780",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742798383.0,
        "title": "OneTrust X Shopify -> Advice appreciated",
        "author": "Mysterious_Swan_9941",
        "id": "1jikjbt",
        "selftext": "Hi All you lurkers,\n\nCurrently have three options how to implement, wondering if you guys would share your horror/ptsd stories and which solution you found worked in the end. I only say this because I have seen some negative commentary about getting Shopify and OneTrust to live happily ever after.\n\n**Option 1:** Inject Banner script via GTM\n\n**Option 2:** Use OneTrust Shopify App to inject\n\n**Option 3:** Hardcode the OneTrust script in the header of the page\n\nI have tried getting option 1 to work, but not getting the API to OneTrust to connect (banner loads fine and security settings widget loads, but it has no memory of what the user did \\[accept all cookies, reject all cookies\\]).\n\nPlease no messages about other software's (this happens on nearly every post) or people fishing for work. Look at my posting history I share knowledge all the time. Please and thankyou.",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jikjbt/onetrust_x_shopify_advice_appreciated/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Option 3 whenever possible.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "no",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Option 3 in particular with customer events and then will need to setup privacy api with it so it knows users consent status (can also setup custom customer events on onetrustgroup updated etc.) And then you can set up privacy bits properly via customer events script",
                "author": "knowanalytics",
                "score": 1
            },
            {
                "body": "Hey, I have answered this exact question in one of my new videos: [https://www.youtube.com/watch?v=hjX9BHkYjjc](https://www.youtube.com/watch?v=hjX9BHkYjjc)",
                "author": "James_Edward_A",
                "score": 1
            },
            {
                "body": "Okay I will try this tomorrow. Have you previously tried the OneTrust shopify app? Their documentation says this is the way to do it, but I don't see how an app on the Website is going to block the marketing/analytics tags from firing from GTM.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737103891.0,
        "title": "Tags Blocked in Google Tag Console but Firing in GTM Preview Mode – Need Help Troubleshooting",
        "author": "Working_Ask_6036",
        "id": "1i3c6oz",
        "selftext": "Hi all,\n\nI’m encountering an issue where the tags in my Google Tag Manager (GTM) container appear to be firing correctly when tested in the GTM preview mode, but when I check the Google Tag Console, I see the following messages indicating that some tags are blocked:\n\n* Tags related to **cross-domain tracking** and **advertisement data** (e.g., Google Ads, Analytics, and custom tags) are being blocked.\n* The console reports issues with certain functions such as `__ogt_ads_datatos`, `__ogt_1p_data_v2`, and `__ogt_cookie_settings`.\n\nI’ve already checked the following:\n\n1. **Tag Configuration**: All tags seem configured correctly with proper IDs and triggers.\n2. **Triggers**: I’ve reviewed the firing conditions, and they seem accurate.\n3. **Preview Mode**: Tags fire as expected in GTM preview mode.\n\nDespite this, the Google Tag Console is showing the tags as blocked. Has anyone encountered similar issues? Any suggestions on what might be causing the tags to be blocked, or how I can resolve this?\n\nThanks in advance for your help!\n\n",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i3c6oz/tags_blocked_in_google_tag_console_but_firing_in/",
        "num_comments": 12,
        "comments": [
            {
                "body": "This issue usually happens when there's a conflict between your privacy/consent settings and the tag implementation. The fact that tags fire in preview but get blocked in production is a classic sign of this.\n\nFew things to check:\n\n1. Make sure you've implemented proper consent management - especially for ad-related tags. Those functions getting blocked (`__ogt_ads_datatos`, etc) are typically related to consent/privacy stuff\n\n1. For cross domain tracking - double check that both domains are properly configured in your GTM settings AND analytics property settings. Easy to miss one side\n\n1. Check if you're using any ad blockers or privacy extensions in your testing browser vs production\n\n1. Verify your GA4 configuration tag is firing before any other tags that depend on it\n\nWhat helped me solve this recently was implementing a consent management platform properly and making sure all advertising/analytics tags only fire after consent is granted. With b2b advertising specifically, getting this tracking setup right is super important for campaign optimization.\n\nhappy to share more specific tips if you need em - proper tracking setup makes a huge difference in campaign performance! lmk what u find when u check those items",
                "author": "thomascloarec",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Is the auto blocking in your consent management system turned on?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Have a look in the browser dev console. Are there any messages about \"content security policy\" blocking some scripts?\n\nIn which market does the website operate? You mentioned that the site doesn't seem to use a consent management platform. I assume that it's also not using Google's Consent Mode, which will be a problem for Google's products if you operate in EEA.\n\nYou mentioned that the tags fire in the preview mode, but when you are in the preview mode, also take a look at the dev console network tab. Do you actually see all the network requests firing and successfully sending data? The GTM preview mode debug window mainly just shows if the trigger conditions were successfully met, but in many cases it can't tell if the network request was actually successfully dispatched (especially when it comes to custom tags).",
                "author": "TG_AnalyticsEngineer",
                "score": 1
            },
            {
                "body": "Hey, what browser did you used for testing?\n\nI had the same problem and figured out, that microsoft edge seems to block something so that Google Ads fails. After switching to Google Chrome the Conversion Tags worked properly.",
                "author": "webdev_on_rails",
                "score": 1
            },
            {
                "body": "I am getting these same console errors dispute all tags firing as they should do.. Very strange!",
                "author": "Unlikely_Mechanic_98",
                "score": 1
            },
            {
                "body": "I added domains in Google tag cross domain configuration and in conversion linker tag Enabled linking cross domain tracking enter the website in auto link fields. Still it is same error in console.\n\nTag blocked: {function: \"\\_\\_ogt\\_cross\\_domain\", instance\\_name: \"\\_Tagging Activity Tag 16 Named Tagging Activity 7\", priority: 24, vtp\\_rules: , tag\\_id: 16}",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "I am not able to find any consent management system script on the website, I checked for custom script also but there is nothing on the website regarding cookie consent. Also looked into local storage and session storage.",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "The website is currently operating only in India. In browser dev console I see some warning messages about script getting blocked because Chrome is moving towards a new experience that allows users to choose to browse without third-party cookies. I checked the network requests and all are successful. I filtered the network request fir Gtag and collect and all have status 200 OK and content security policy: None.\n\nAnd in console this the warning message.\n\nCookies with the `SameSite=None; Secure` and not `Partitioned` attributes that operate in cross-site contexts are third-party cookies. Chrome is moving towards a new experience that allows users to choose to browse without third-party cookies.Learn more from the linked article about preparing your site to avoid potential breakage.\n\n1. Affected Resources\n   1. 62 cookies\n   2. 14 requests",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "I am using chrome and i did cross check in Edge and both browser shows the same thing. All my network request are successfull  and in Tag manager preview all tags are firing except in google tag console it shows those warning messages.",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "All the requests that showed 200 OK in preview mode, what happens to those requests when you are not in GTM preview?",
                "author": "TG_AnalyticsEngineer",
                "score": 1
            },
            {
                "body": "I checked without GTM preview. Gtag, Collect and other requests has status 200 OK.\n\nThis is the message I am getting in console.\n\n1. This page tried to register an OS trigger using the Attribution Reporting API, but the request was ineligible to do so, so the OS trigger registration was ignored.A request is eligible for OS trigger registration if it has all of the following:Otherwise, any `Attribution-Reporting-Register-OS-Trigger` response header will be ignored.Additionally, a single HTTP redirect chain may register only all sources or all triggers, not a combination of [both.No](http://both.No) `Attribution-Reporting-Eligible` header or an `Attribution-Reporting-Eligible` header whose value is a structured dictionary that contains the key `trigger`An `Attribution-Reporting-Support` header whose value is a structured dictionary that contains the key `os`Affected Resources",
                "author": "Working_Ask_6036",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721562761.0,
        "title": "Microsoft Consent Mode",
        "author": "DigitalStefan",
        "id": "1e8kl85",
        "selftext": "We've already been through the \"slight challenge\" of Google's Consent Mode V2 update, but now Microsoft have decided they don't want to feel left out, so they are mandating use of their own Consent Mode (did you know it existed?), meaning if you or your clients are making use of data collected by their Universal Event Tracking for marketing purposes, you are going to have to implement their Consent Mode.\n\nOf course, Microsoft being Microsoft, their CoMo is *not* like Google's. You can't set it up and use it in the same way, it has no integration in any of the popular consent platforms (OneTrust, CookieBot, CookieYes etc) and, worse still, their \"denied\" setting doesn't prevent the Microsoft Universal Event Tracking tag from dropping a pair of cookies. There's also of course no native integration with GTM.\n\nI've tested a few iterations of a possible best practise GTM implementation and I think I have a potential winner.\n\nEDIT: Step zero: Add the hardcoded script to your site (prior to the GTM script) :\n\n    <script>\n    window.uetq = window.uetq || [];\n    window.uetq.push('consent', 'default', {\n        'ad_storage': 'denied'\n        });\n    </script>\n\n1. Configure your Microsoft UET config tag to require ad\\_storage as additional consent (not strictly necessary, but makes your Consent Overview report make sense\n2. Remove all triggers from the tag\n3. Set \"Once per page\" in Tag firing options\n4. Create a new custom HTML tag with the following script at the bottom of this list\n5. Set tag sequencing to fire your Microsoft UET config tag after the custom HTML tag\n6. Set \"Don't fire if \\[this custom HTML tag\\] fails or is paused\" (may not be needed?)\n7. Add `ad_storage` as additional consent\n8. Add your consent platform's data layer event e.g. `OneTrustGroupsUpdated`, `cookie_consent_update` etc.\n\n&#8203;\n\n     <script>\n        window.uetq = window.uetq || [];\n        window.uetq.push('consent', 'default', {\n            'ad_storage': 'granted'\n            });\n      </script>\n    \n    Links:\n\nMicrosoft Consent Mode: [https://help.ads.microsoft.com/apex/index/3/en/60119](https://help.ads.microsoft.com/apex/index/3/en/60119)\n\nMicrosoft enforcing their own CoMo for Microsoft Ads: [https://web.swipeinsight.app/posts/microsoft-ads-enforces-consent-mode-for-tracking-in-europe-8734](https://web.swipeinsight.app/posts/microsoft-ads-enforces-consent-mode-for-tracking-in-europe-8734)\n\n**Notes:**\n\nDuring testing I did see that the network hits being sent by the UET config tag would redact visitor and session ID if the tag fired with Microsoft CoMo set to denied, but as the tag still dropped a couple of cookies I didn't want to implement it in that way and call it good. Hopefully Microsoft amend this and we can have a much simpler solution in future.",
        "score": 16,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1e8kl85/microsoft_consent_mode/",
        "num_comments": 26,
        "comments": [
            {
                "body": "People aren't going to bother and MS will have to adopt Google CM.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "It would have to address all the shortcomings of GTM (container size, iFrame detection etc), and even then I doubt people would take to it - MS Clarity is fantastic, free and yet people just don't know about it.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "That should be redundant as well unless you're loading the UET tag prior to consent being given.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "~~Not sure if this is an oversight or not but what's the point of running a script that sets the MS CoMo to \"denied\" when ad_storage is \"granted\"?~~\n\n\n\n\nAlso, I don't see a reason why you would need to set the default MS CoMo to \"denied\" unless you're loading the UET script when consent is denied. With the setup described you would only ever need to set it to \"granted\", i.e. when the UET tag fires and in that case you could switch up the tag sequencing to fire the consent tag prior to the UET tag. \n\n\n\n\nAdditionally, the documentation linked states: \n\n\n>You must set the consent setting on every page of your website. If it is not set, then UET uses granted by default. \n\n\n\n\nThis confuses me a bit since it seems that if you're already blocking the UET tag until consent is granted, there should be no need for setting a consent flag in the first place.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "This could be a bit risky for MS because it adds a dependancy they can't control. It makes sense for them to go their own way unless they actually sit down with Google to firm up the consent API as a truly interop, public API, which would actually be a great outcome because then others (Meta, ByteDance etc) could hop on board.\n\nIf anything, this move they've announced might prompt some clients to rethink the value they are getting from their MS Ads spend and just drop the platform entirely because it's too much hassle.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Well spotted. I copy pasted the wrong script during my fight with Reddit's semi-broken editor!\n\nCorrected now.\n\n  \nEDIT:\n\n  \nFlow of logic (if I haven't screwed up) is\n\n  \n1. Prior to user granting (marketing) consent, the Microsoft CoMo script in the CHTML tag won't fire and thus the UET config tag won't fire.\n\n2. As soon as the user grants consent, the script runs, then the UET tag fires, drops its cookies, doesn't redact session or visitor ID.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "The comedy outcome of this would be Microsoft developing their own tag management system.\n\nI dread to  even imagine.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "You’re probably right. I’m just so used to implementing Google CoMo that I feel weird *not* adding the script.\n\nEdit: If MS actually figure out that their tag shouldn't drop cookies when their Consent Mode says \"denied\", their CoMo init script will be important to add.\n\nWould like to get my hands on the source for their UET tag. Not sure that's publicly available (it's a native tag).",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I’ll see if I can set up a couple of dedicated web pages each with a slightly different implementation.\n\nTime permitting. This week looks like a busy one though.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Maybe you can help out here, as I didn't find any info on this, u/DigitalStefan: Is there any word on a deadline or date for this implementation?",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "Did you ever get round to figuring out how to fire the cookieless pings, without blocking the tag entirely? No matter how I sequence the tags, I get those \"MSPTC\" and \"MUID\" cookies dropping regardless, as you mentioned in another thread",
                "author": "domss-lite",
                "score": 1
            },
            {
                "body": "Honestly I didn’t see a deadline mentioned. I’ll find the original info that tipped me off, which was a screenshot of an email from MS. I posted on LinkedIn as well about it and I included the screenshot there. Will find it and link to it.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "As of when I tested it, there are no cookieless pings with MS CoMo.\n\nYou can get it down to a single cookie (MUID) if you implement IAB TCF, but for now we're waiting on MS to get things fixed.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Google CM pretty much is the standard already because Google Tag Manager is so popular.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "The implementation method makes sense, I'm just curious about that statement in the documentation saying the script defaults to \"granted\" if consent is not explicitly denied. With the setup you have you shouldn't have to bother setting consent at all.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thanks so much. I'll try reaching out to Microsoft support as well to find out until when this needs to be implemented.",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "Fair enough! Not worth the risk for now, we'll just keep it fully blocked until opted into. They took a few weeks to roll out the Enhanced Conversions code to the UET template so maybe it'll be properly supported soon",
                "author": "domss-lite",
                "score": 1
            },
            {
                "body": "You know what… I missed the most important step which was step zero: Add the default denied script to your website.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I've not been able to find *any* mention of a deadline.  The Swipe Insight link in my original post shows the only comms Microsoft has really put out about it.\n\nWe did reach out directly to Microsoft with a number of questions. One of which was...\n\n>What's the purpose for \"MSPTC\" and \"MUID\" cookies? Is it a GDPR concern *\\[my note: this should be ePrivacy\\]*, since they are being set before the user has granted consent?\n\nTheir frankly unbelievable response was...\n\n>Neither MSPTC nor MUID should be set before consent is granted. We should not set any cookies (3P and 1P) without consent and MSPTC & MUID are 3P [bing.com](http://bing.com) cookies. If they already exist, they may be sent and show up in a network trace, but we will throw them away (not store when we receive) if ad storage consent is denied. They may be used for anti-spam/fraud purposes only.\n\n\"Neither MSPTC nor MUID should be set...\" and yet they are and it's Microsoft's own UET tag (or dependant script, more likely) doing the setting.\n\nThey also acknowledge that the tag doesn't re-fire / issue another network hit once consent is updated. Their answer is \"this will be addressed in a future update\"\n\nSo, in summary Microsoft are telling us :-\n\n1. You must implement Microsoft Consent Mode otherwise (in affected jurisdictions) you will lose the ability to use marketing data to its full extent, just like Google did to comply with the DMA on March 6th 2024.\n2. We half-assed the logic underpinning our implementation of our own Consent Mode, despite that it's been available for many months. It doesn't work as it's supposed to and if you implement it in the manner we intend, you are going to cause cookies to be set prior to user consent.\n3. If you implement it in the way we intend, it's going to screw with your data because not only did we half-ass the logic, we half-assed the code.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thank you for getting back to me on this, u/DigitalStefan.\n\nAs I am not a developer: Is there a way to implement this (e.g. some implementation that differs from the faulty one Microsoft recommends) that works around the issues you just described?",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "My original post descibes (a little clumsily) how it's done in the least \"dev\" way possible.\n\nSkip step zero and it should still be fine, but once Microsoft actually fix things (assuming they do), the process will change in terms of the best way to do it.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This is the source script if you wish to inspect it:\n\n\n ```https://bat.bing.com/bat.js```\n\n\n\n\n Their own documentation states that no cookies should be set when consent is denied, which is why I'm sceptical towards anything that I read in the official documentation after hearing about your experience.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thanks so much, this thread is a truly useful resource.",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "If you get the opportunity to post the results that would be much appreciated. I know I'll get a bunch of queries regarding this when I get back from my vacation. 🙏",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "I've been testing. Everything still sucks and is horrible.\n\nI've deployed MS CoMo on [https://croud.com](https://croud.com) (my employer's site) and theoretically it's \"compliant\". It's my best effort.\n\nI'm really debating now whether to replace the native MS / Bing UET tag with a CHTML tag that runs the relevant script, but also includes the MS CoMo part. It would simplify the implementation because instead of sequencing two tags, it's just one tag.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744050896.0,
        "title": "Accessibility (WCAG/AODA) issues with Google Tag Manager’s hidden iframes",
        "author": "RoastPotatoSandwich",
        "id": "1jtsmag",
        "selftext": "GTM injects hidden iframes without a title or aria-hidden, which triggers failures in automated accessibility tests (e.g., “iframe must have a title”). Since the iframe is injected dynamically by GTM, we can’t edit it directly.\n\nHas anyone found a good way to handle this, for example I thought about:\n\n* Adding a title and aria-hidden=\"true\" via JavaScript after page load?\n* Wrapping GTM in an aria-hidden container?\n\nAre there any reliable workarounds that pass audits but don’t break GTM tracking?\n\nAppreciate any real-world solutions that have worked in production",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jtsmag/accessibility_wcagaoda_issues_with_google_tag/",
        "num_comments": 4,
        "comments": [
            {
                "body": "GTM on its own doesn’t add any iframes except the noscript tag after opening body tag, which you can safely leave off anyway in 2025.\n\nSecond, iframes set via GTM aren’t real a11y/ WCAG issues as they are not for users but for code injection, third party cookies, etc, so you can safely mark them as false positives in your scanning tool.",
                "author": "nakfil",
                "score": 3
            },
            {
                "body": "Perfect, thanks",
                "author": "RoastPotatoSandwich",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "3rd party cookies could fall under CIPA if your user is in California. You should carefully audit all 3rd party cookies.",
                "author": "TedTheTopCat",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741616440.0,
        "title": "Newbie Question \"Cannot Parse target: \"GTM-ID\"",
        "author": "anonymous-a2",
        "id": "1j7zpyl",
        "selftext": "Hey Folks,\n\n  \nmarketing and Google Tag manager newbie here. \n\nWhen setting up tag manager I get a error message when testing in demo mode.\n\nError Message: Cannot parse target: \"\"GTM-ID\"\"\n\nI tried a lot and thought it would be in conjunction with borlabs cookie banner. Checked it and thought I got I right now but I didn't.\n\nDid someone else have this error aswell and point me in the right direction?\n\n  \nthanks in advance =)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j7zpyl/newbie_question_cannot_parse_target_gtmid/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Did you ever find a solution to this? I am having the same issue.",
                "author": "Organic_Ad3700",
                "score": 1
            },
            {
                "body": "Oh sure, its WordPress.",
                "author": "anonymous-a2",
                "score": 1
            },
            {
                "body": "Yep, I was dumb. Tried to initialize the page with a google tag but thats actually done just by the Code-Snipptets in Header and Body. \n\nThen I only used 1 tag for connecting to the Google Analytics and thats it\n\nTracking stuff is via analytics at least for the things I wanna do",
                "author": "anonymous-a2",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736330495.0,
        "title": "Help with sales tracking",
        "author": "Quirky_Secretary_306",
        "id": "1hwgomu",
        "selftext": "Hi everyone,\n\nI’m working on a task where I feel like I’ve tried everything, but I just can’t get it to work.\n\nWe have a webshop, and in customer service, we use a system where we send product links to our customers. When a link is generated in this system, it includes the following parameter: `netsag={agentname}`.\n\nI’m trying to set it up so I can create a report in Looker Studio showing the following for each individual agent:\n\n* Users\n* Sessions\n* Revenue\n* Transactions\n* Conversion rate\n\nThe URL parameter does not transfer to the checkout page, but I can see that the agent’s name is available on the checkout page under the cookie `lastAddedUrl`.\n\nI’ve created a tag that triggers upon purchase completion. It’s set up as below. I’ve also created ‘Value’ as a custom dimension in GA4. And when I check under events in the report, I do see `netsagskøb` appearing as an event, but there’s no total revenue displayed in the overview. When I click into the event, I can see the different agents who have generated sales, but I can’t see how much revenue they should be attributed.\n\nThe agents are displayed in a chart called ‘Agent’ separately, where the number of events and total users are shown. I also see a chart called ‘Value,’ and here I can see the purchase amounts, but they are listed without any additional information – as follows:\n\n|Custom parameter|Number of events|Total users|\n|:-|:-|:-|\n|Null|1.3k|568|\n|(not set)|381|234|\n|Undefined|77|77|\n|348|13|11|\n\nHow do I get the revenue to appear in the overview under events? And most importantly: how do I distribute the revenue among the different agents?\n\nI hope this makes sense and that someone can help me move forward 🙏\n\nThe tag is set up as follows:\n\nEvent name: `netsagskøb`\n\nEvent parameter: netsag | Event value: `{{Extract Netsag from lastAddedUrl}}`\\*\n\nEvent parameter: value | Event value: `{{eventModel.value}}`\n\nEvent parameter: `{{Extract Netsag from lastAddedUrl}}` | Event value: `{{eventModel.value}}`\n\nCheck in ‘Send e-commerce data’ – data source: Data layer\n\nTag trigger: Once per page\n\n**\\*{{Extract Netsag from lastAddedUrl}} Variable:**\n\nCustom JavaScript:\n\n    function() {\n        var cookies = document.cookie.split('; ');\n        for (var i = 0; i < cookies.length; i++) {\n            var parts = cookies[i].split('=');\n            if (parts[0] === 'lastAddedUrl') {\n                var url = decodeURIComponent(parts[1]);\n                var match = url.match(/netsag=([^&]*)/);\n                return match ? match[1] : undefined;\n            }\n        }\n        return undefined;\n    }",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hwgomu/help_with_sales_tracking/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Have you tried capturing netsag with a URL fragment variable then passing that as event parameter and registering it as a custom dimension?",
                "author": "HawkeyMan",
                "score": 2
            },
            {
                "body": "This would be my thinking as well. I would change what the links generate so that the parameters are as follows, fitting it all in the standard UTMs:\n\nutm_source=customerservices&utm_medium=affiliate&utm_campaign=cslinkgeneration&utm_term=customerservices&utm_content={agentname}",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "If you have the e-commerce dataLayer set up correctly for your purchase events, then yes.",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It doesn’t sound like your e-commerce data is available in the data layer at the point you’re trying to send it to GA4. Google has very specific/restrictive syntax requirements for passing e-commerce data - I’d start with the help documents and build out that solution vs. solely leveraging cookies. You can even include the agent’s name under one of the optional e-commerce dimensions (I wanna say there’s 5 different item_category dimensions, which one of them could be repurposed for your agent name)",
                "author": "Spleenbeansalad",
                "score": 1
            },
            {
                "body": "Adding the agent as a parameter of the e-commerce tag would be a simpler way to achieve this.\n\nStill pulling it from the cookie, but not into its own event.",
                "author": null,
                "score": 1
            },
            {
                "body": "Can you please provide pictures of exactly what you see in gtm debug mode. Open the fired event in debug mode and show us the values in the event tag. Also show us the variables that are present at the moment of the purchase in the variables tab. From the debugger. If we have this, we could give you a useful answer in like a minute.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "But when I look in the data layer, then I can see revenue, agent name, item ordered - everything. All the same data I see for our google ads event that fires based on the same trigger.\n\nWhen I place a test order, I can see all I need. Both in the tag manager debugger AND in the GA4 debugger. I just can't find out why I'm not getting the data in my report :(",
                "author": "Quirky_Secretary_306",
                "score": 1
            },
            {
                "body": "Already tried that, but I still don't get revenue :(",
                "author": "Quirky_Secretary_306",
                "score": 1
            },
            {
                "body": "So if I changed the link and added parameters as you specified, then I would be able to see revenue on each agent..?",
                "author": "Quirky_Secretary_306",
                "score": 1
            },
            {
                "body": "If I've got this right, you see the revenue, agent details and product details in the hit sent to GA, but not in reports?\n\nHave you got a user level dimension in the report and low volumes of events? This could cause the report to not meet thresholds required to keep users anonymous.\n\nIs the data showing up correctly in the BigQuery raw data export?",
                "author": null,
                "score": 1
            },
            {
                "body": "If you at some point decide you want to outsource all your tracking get in touch with shoplytics uk",
                "author": "RogervdMatten",
                "score": -2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742035938.0,
        "title": "Consent Mode V2 for Shopify",
        "author": "Nice_Pen_8054",
        "id": "1jbsjde",
        "selftext": "Hello,\n\nDid anyone obtained the value **13r3r3r2r3l1** or **13r3r3r2r6l1** for the gcd parameter in Shopify using a Google partner, like CookieYes?\n\nI get constantly **13t3t3t2t5l1**.\n\nThanks.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jbsjde/consent_mode_v2_for_shopify/",
        "num_comments": 6,
        "comments": [
            {
                "body": "You need to push consent on checkout page in Shopify",
                "author": "JarvanXL",
                "score": 2
            },
            {
                "body": "It is on all pages, why I would do only on checkout?",
                "author": "Nice_Pen_8054",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[https://shopify.dev/docs/api/customer-privacy](https://shopify.dev/docs/api/customer-privacy)",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Hi there,  \nYou can verify whether the consent state is set correctly using **Tag Assistant** by following our guide \\[[here](https://www.cookieyes.com/documentation/check-proper-implementation-of-gcm/)\\]. If you need any further assistance, feel free to reach out to us at [**support@cookieyes.com**](mailto:support@cookieyes.com), and our team will be happy to debug the issue and help you resolve it.",
                "author": "cookieyesHQ",
                "score": 1
            },
            {
                "body": "u/Nice_Pen_8054  it all comes down to whether your cmp sends the correct consent signals and if the update command is configured properly... you may want to give this tutorial a read: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739963627.0,
        "title": "GTM firing but not recording in Google Ads",
        "author": "LDixon5276",
        "id": "1it33lt",
        "selftext": "We have set some conversion up in GTM for someone depositing on the site, we have previewed the tags and they seemed to fire fine. Published the changes and no conversions seem to being recording in the conversion on Google Ads.\n\n  \nWe have gone through a separate email address and found one of our search campaigns to test this conversion but we can't seem to find why conversions are not showing in Google Ads.\n\n  \nUsing a purchase conversion action, with an element visibility from CSS Selector.\n\n  \nCould anyone please help?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1it33lt/gtm_firing_but_not_recording_in_google_ads/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "From what you saying you can see conversions fine in GA4, so just connect them up (to google ads) and import the conversion events/$ amounts.\n\nIf this is not the case, then focus on sending the conversion data to GA4.\n\nYou will be able to connect GA4 to all your paid/edm.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "If tracking is set up properly in GTM and is firing then it should show up within 1-3 days. \n\nIf you’re still not sure and uncertain then you can take this step:\n\n- Set up a manual conversion action from google ads\n- configure it manually in gtm with conv label and conv. id and whatever parameters you need to.\n- set up the trigger to what you mentioned (purchase conv. Action + element vis > css selector)\n\nAfter doing so you should see this new conversion in your list of conversion goals that would say that this conversion action is “INACTIVE” for status and under actions is should say “TROUBLESHOOT”. \n\nYou click on troubleshoot which opens google ads debug mode and then go ahead and do a test purchase and if it says that it triggered and is passing the correct variables then you’re good to go.",
                "author": "Plastic-Schedule-629",
                "score": 1
            },
            {
                "body": "Have you got any more context on your GTM and event setup? I have a similar issue that I'm trying to resolve at the moment",
                "author": "Mahdouken",
                "score": 1
            },
            {
                "body": "Ensure that you have setup \"conversion linker\" tag along with your Google ads event specific tag and trigger, just in case if that was left.",
                "author": "Gig-ripple",
                "score": 1
            },
            {
                "body": "If GTM is firing but Google Ads isn’t showing conversions, check these:  \n  \nMake sure the Conversion Linker tag is on in GTM. Check if the element visibility trigger is working, sometimes CSS selectors don’t track changes right. Use Google Tag Assistant and Ads Diagnostics to find issues. Also, Google Ads can take time to show conversions.  \n  \nTry Qwestify a free AI tool like ChatGPT for GA4 to debug your tracking setup and ensure everything is linked properly. It makes troubleshooting much easier!",
                "author": "the-fire-in-me",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1745421560.0,
        "title": "Issued with Hubspot CMP Config",
        "author": "Happy_Little_Leaves",
        "id": "1k61sqc",
        "selftext": "Hi everyone!\n\nI’ve been implementing Consent Mode using GTM in conjunction with HubSpot’s cookie banner. Most of the integration seems to work except for one major issue that I haven’t been able to resolve:\n\nProblem:\nConsent values are getting overwritten when a user accepts cookies—even though U.S. visitors should default to “granted.” Instead, the values are either not being set correctly at page load, or they’re being overwritten after a user clicks “Accept.” As a result, GA4 tags are firing inconsistently, and Consent Mode isn’t behaving as expected.\nHere’s what I’ve done so far:\n\n \nSet up HubSpot CMP using their native cookie banner with separate categories for marketing, analytics, functional, etc.\nConfigured GTM with a Consent Initialization Tag to run before any other tags:\njavascript\nCopyEdit\ngtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': 'denied', 'functionality_storage': 'denied', 'personalization_storage': 'denied', 'security_storage': 'granted' });\nEnabled “Respond to Global Privacy Control” in the HubSpot banner settings to respect user browser signals.\nTested behavior in GTM Preview Mode and confirmed:\nConsent values are initially set correctly when the page loads.\nBut once a user interacts with the banner and accepts cookies, the values are being overwritten instead of updated according to category selection.\nThis happens even when no GTM tags are firing at the moment of consent.\nChecked for firing tags and no conflicting tags or triggers seem to be running when the overwrite occurs.\nConfirmed U.S. visitors should be opted in by default, per agency recommendation—but this doesn’t appear to be happening. The defaults are still being treated as denied.\n\nQuestions:\nHas anyone else seen HubSpot CMP override Consent Mode values after interaction?\nHow can I stop consent states from being overwritten when a user accepts?\nIs there a recommended way to intercept or preserve the values during/after banner interaction?\nCould this be a sequencing issue between HubSpot and GTM tags?\n\nAny help would be hugely appreciated—thank you in advance! ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k61sqc/issued_with_hubspot_cmp_config/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you share a preview link of your container?",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738500349.0,
        "title": "How Can I Capture a Client ID or any identifier for TikTok , meta , etc Ad Impressions even they didn't open the website  ?",
        "author": "ecoKhaled",
        "id": "1ifwhbl",
        "selftext": "Hi everyone,\n\nI’m working on tracking the full user journey from my TikTok , Meta , Snapchat ads, and I’ve run into a challenge. I already have the TikTok Pixel and Conversion API set up on my website along with a server-side GTM container. My goal is to capture a unique identifier (like a client ID) for users who see my ads—even if they don’t click through initially. For example, if a user sees an ad on July 7, doesn’t click, but later on July 20 clicks through and makes a purchase, I’d love to correlate these events using a consistent identifier.\n\nHere’s what I’m considering/aware of:\n\n* **Click-Through Tracking:** I can capture parameters like `ttclid` on ad clicks and persist that via a first-party cookie on my website. This works well for users who click, and then I can tie subsequent events (pageviews, conversions, etc.) to that ID.\n\n**My Questions:**\n\n1. **Is it possible** to capture and correlate a client ID for users who just see my ads (without clicking) using any method (e.g., a custom tracking pixel in the ad creative) while staying compliant with Platforms policies and privacy regulations?\n2. If yes, **what’s the best practice** for implementing this ?\n3. If it isn’t feasible to capture identifiers for impression-only users, are there any alternative strategies or workarounds that can help approximate the full user journey from ad view to conversion?\n\nAny insights, experiences, or recommendations would be greatly appreciated. Thanks in advance for your help!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ifwhbl/how_can_i_capture_a_client_id_or_any_identifier/",
        "num_comments": 9,
        "comments": [
            {
                "body": "It's not possible to track users for impressions to the best of my knowledge. That would prove to be a business disaster for the advertising platforms. Even the clicks are not possible unless the user lands on your website. If a user clicks but closes the window before your site loads, you can't track him. \n\nWhy do you want l to track impressions as part of the user journey. User journeys start the moment the user decides to engage with you. Till such a time he's Just someone out there who is exposed to your ad.",
                "author": "ds_frm_timbuktu",
                "score": 3
            },
            {
                "body": "You can't. They have to land on your website.",
                "author": "spiteful-vengeance",
                "score": 2
            },
            {
                "body": "This is what an adserver attempted to solve but has come out short. Whether its a 3rd party cookie or alternative identifiers, they are all flawed.\nThe bigger walled gardens have data clean rooms to see their own data without the need for a click but nothing really can show it omnichannel.",
                "author": "goodgoaj",
                "score": 2
            },
            {
                "body": "If the user never clicked on ad A there was by definition no interaction.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "i want track the behavior of user interaction with ads \n\ni want see which segments interact with Ads A & B \n\nthe UTM isn't enoght",
                "author": "ecoKhaled",
                "score": 1
            },
            {
                "body": "can that done for individually channel ?\n\n  \nfor example\n\nknow customer x seen creative A1 in 7 july in tiktok and in 12 july purchase form creative B2 in tiktok  ?",
                "author": "ecoKhaled",
                "score": 1
            },
            {
                "body": "If you know deterministically (email) the customer then yes if you pass it via Events API you'll see a post impression attributed conversion in TikTok ads manager reporting.\nIf you don't, then TikTok do have a data clean room but is not avaliable to most brands.",
                "author": "goodgoaj",
                "score": 1
            },
            {
                "body": "so this the time line\n\ncustomer x seen creative A1 in 7 july in tiktok -> 12 july purchase form creative B2 after he click on the ads and entering my website and he provide his Email and Phone number in checkout so i have his phone number and email after he purchases \n\nso this will works (knowing that he is seen my A1 creative in 7 july without open my website and purchase from B2 in 12 july) for this scenario ?",
                "author": "ecoKhaled",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744049225.0,
        "title": "Form Submission event - Failed fired",
        "author": "Inevitable_Iron1839",
        "id": "1jtrxdu",
        "selftext": "Hello everyone,\n\nI would need some help on a Google Ads tag that I activated on a site that result active but from the screenshoot “failed”.\n\nThe tag is fired but there is the label failed, what could it be in your opinion? What does that mean? \n\nIs this a cookie policy issue that needs to be fixed within the site or do I need to set the trigger differently?\n\nLooking in Google Ads the event shows as active.\n\nThank you very much[https://drive.google.com/drive/folders/1fD3GAEWAUOpjQ-sh\\_cFFQCa4YzIDs10G?usp=sharing](https://drive.google.com/drive/folders/1fD3GAEWAUOpjQ-sh_cFFQCa4YzIDs10G?usp=sharing)",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jtrxdu/form_submission_event_failed_fired/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741942608.0,
        "title": "Meta Pixel implementation in browser GTM - send fbc and fbp manually????",
        "author": "alienfromoutterspace",
        "id": "1jazj9t",
        "selftext": "I think that Meta Pixel stored and send \\_fbc and \\_fbp values automatically and then matches them with these values that are being send via CAPI.\n\n  \nIs it a good practice to take these as variables from 1st party cookies and send them with config tag/events to Meta Pixel from browser GTM?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jazj9t/meta_pixel_implementation_in_browser_gtm_send_fbc/",
        "num_comments": 4,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It is good practice when you are sending data through ga4 client in data tag it is automatically sent to server container",
                "author": "MuhammadShoaibAmazon",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741957158.0,
        "title": "Ecommerce datalayer variables not filled in",
        "author": "Virtual_Season6705",
        "id": "1jb3b9h",
        "selftext": "Hi, I'm trying to measure my ecommerce events correctly. I have some issues with getting the variables from the datalayer push filled in. Can you please help me? \n\ntagTypeBlacklist: undefined,\n\n  event: \"view\\_item\",  \n  restricted\\_data\\_processing: false,  \n  eventModel: {  \ndeveloper\\_id: {dNzYwYj: true},  \necomm\\_prodid: \\[\"shopify\\_NL\\_7265492861117\\_52587898077507\"\\],  \necomm\\_totalvalue: 1.95,  \necomm\\_pagetype: \"product\",\n\nitems: \\[  \n{  \nid: \"shopify\\_NL\\_7265492861117\\_52587898077507\",  \nname: \"Logo koeken - Rond / Mini (4 cm) - Een subtiele blikvanger\",  \nbrand: \"Cookie Doos\",  \ncategory: \"\",  \nprice: 1.95,  \nvariant: \"Rond / Mini (4 cm) - Een subtiele blikvanger\"  \n}  \n\\],\n\nuser\\_data: {  \n   email: undefined,  \n   phone\\_number: undefined,  \n  address: {first\\_name: undefined, last\\_name: undefined}  \n   }  \n  }  \n}\n\n  \nI defined this as the variable: \"**eventModel.items.variant**\".   \nWhy is it not picked up? Preview says \"undefined\". \n\nThanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jb3b9h/ecommerce_datalayer_variables_not_filled_in/",
        "num_comments": 5,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hi OP how are you sending that dataLayer information - i'm seeing it on a GTM instance I'm looking at and I can't figure out where it's coming from (it's creating duplicate events). Is that a custom pixel or app?",
                "author": null,
                "score": 1
            },
            {
                "body": "this works, thank you very much!",
                "author": "Virtual_Season6705",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742034483.0,
        "title": "[Help Needed] Google AdSense CMP Not Passing Consent to Google Analytics 4 (GA4) via GTM",
        "author": "Feeling-Baker-2430",
        "id": "1jbs6vg",
        "selftext": "Hey everyone,\n\nI’m facing an issue with Google’s Consent Management Platform (CMP) provided via AdSense and the European regulations settings page. I want to ensure that consent choices from the CMP are properly passed to Google Analytics 4 (GA4) using Google Tag Manager (GTM), but right now, GA4 always shows consent as \"Refused\" by default, even when users accept cookies.\n\nBefore going any further, does the AdSense tool works for what I need (which is managing consent and track users on my website) ?\n\nHere is my setup:\nI’m using Google’s built-in CMP via AdSense (not a third-party CMP like OneTrust or Cookiebot).\n\nI haven’t manually added any scripts to my site—I want to handle everything through Google Tag Manager (GTM).\n\nI have enabled Consent Mode in GTM and activated Consent Overview in the container settings.\n\nI have no pre-existing GA4 tag in GTM.\n\nSo far:\nThe CMP is displaying correctly on my site and allows users to accept or reject cookies.\n\nHowever:\nEven after a user accepts cookies, Google Tag Assistant and GA4 DebugView still show:\n\nanalytics_storage: refused\nad_storage: refused\nOther consent categories also remain denied.\n\nThis suggests that GTM isn’t receiving updated consent signals from the CMP.\n\n\nQuestions:\nHow do I ensure that Google’s own CMP correctly updates GTM with the user’s consent choices?\n\nDoes Google AdSense’s CMP automatically send consent updates to GTM, or do I need to manually configure something?\n\nIs there a way to force GTM to listen for consent updates from Google’s CMP?\n\nAny insights or guidance would be greatly appreciated 🙏\n\nThanks !\n\n ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jbs6vg/help_needed_google_adsense_cmp_not_passing/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Please provide the regions that your struggling with and what settings you have set in your CMP. \n\nIf possible provide the URL of the websites that your trying to fix so we can see what is going on and advise you on possible fixes (understandably not always possible).\n\nGA4 being \"denied\" even after accepting cookies means there is some kind of disconnect between your CMP platform and your website, because what should happen is:\n\n1. Default settings should happen on each page (e.g. US all settings should be denied by default)\n\n2. A call to your CMP needs to be made at this point that needs to store your users settings (if they accepted cookies the settings should be over ridden to accepted).\n\n3. Now that the settings are accepted, your page load/whatever load event needs to happen that triggers your GA4 tags/marketing tags needs to happen. \n\nSounds like potentially its the order of tags thats the issue.\n\nUse your GTM preview mode to diagnose.\n\nMake sure you put your CMP tags to load first to make this happen.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hi, thanks for your answer, how can I be more precise in order to have a concrete answer ? What information should I add ?",
                "author": "Feeling-Baker-2430",
                "score": 1
            },
            {
                "body": "I have a multiple clients who have been threatened with lawsuits (6 figures) around this in the US. I think there are companies in the US that are just fishing for victims who violate.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "This is a very new industry and even established players like OneTrust haven't got it right. Your post is too general for you to get a concrete answer.",
                "author": "Mysterious_Swan_9941",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732989873.0,
        "title": "Fully server side tracking",
        "author": "Developer_Track",
        "id": "1h3ie7b",
        "selftext": "I’m trying to implement a fully server side tracking solution to get around all the cookie blocking going on and was looking for an in depth conversation about this but haven’t found anything so thought I’d start one. \n\nFirst, my biggest problem at the moment is being able to read the ga4 cookie so I can pass the proper client id and session id. Anyone know how to achieve this? I’m using Drupal 10 which uses php and symfony. \n\nIn the interim, I tried creating my own ids and passing those over instead but they keep changing on every request. The goal is to track an anonymous user through to a signed up user with my own user id. ",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h3ie7b/fully_server_side_tracking/",
        "num_comments": 14,
        "comments": [
            {
                "body": "Use stape.io and save yourself some heartbreak.",
                "author": "Frosti11icus",
                "score": 7
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "When you say 'fully', do you mean a Google Tag Manager server container? Do you think that you can run it without a web container?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "have you looked into using GA Measurement Protocol? It is a client in sGTM that is designed for server-to-server communication.\n\nGenerating your own client id and session id seems possible but certainly you need to ensure they stay consistent across multiple events.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "Like a full full SST solution? So that'd be outside of Google I reckon. Something like JENTIS, maybe Tealium (but I guess you need to buy their CDP too). I don't know many other companies offering a full end-to-end SST solution at this point that is data/GDPR compliant.",
                "author": "manciteh1",
                "score": 1
            },
            {
                "body": "From how I understand it, SST is not a work around for consent and cookies. Setting it up won't solve the problem of someone denying consent. It can improve data quality which can help out, but you will still have gaps from users who do not accept consent.\n\n  \nReally our best chance as marketers to mitigate the effects are predictive models. However you need a certain amount of data points for it to be applied to your account [https://support.google.com/analytics/answer/9846734?hl=en](https://support.google.com/analytics/answer/9846734?hl=en)",
                "author": "NegativeStreet",
                "score": 1
            },
            {
                "body": "Does this need to be integrated with a CMP as well to get user consent?",
                "author": "RandomUsername749",
                "score": 1
            },
            {
                "body": "Founder of Aimerce here – a server side tracking solution for Shopify. Happy to walk you through how to go about building this. You can also just install an out of the box solution. Eg. Aimerce just takes 10 min to install from the Shopify App Store. There are a few on the market and it's becoming a pretty mature space. You're definitely right in that going full server side tracking is a surefire way to go around the cookie deprecation problem. I've seen hundreds of brands see 10-30% revenue lift from their email/ads marketing, simply by fixing this problem and feeding their marketing platforms more accurate data.",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "You 100% have the right idea. But I would just use an existing app instead to do this. There are a lot of mature options on the market now – I've tried Stape and Aimerce. Recommend Aimerce. Stape's setup is a bit annoying and I wasn't 100% happy w my results.",
                "author": "No_Intros_Needed",
                "score": 1
            },
            {
                "body": "No, I just meant no need for client side tags so the tracking is resilient regardless of a user’s browser privacy settings. I would still have the client there to track other things like scrolling or client side behaviors. But these would only augment the server side tags which should reliably handle every page view and purchase.",
                "author": "Developer_Track",
                "score": 1
            },
            {
                "body": "I've got it setup with [stape.io](http://stape.io) and [cookiechimp.com](http://cookiechimp.com) recently and it just worked without any issues. Both the teams are super helpful (any go beyond expected support) in getting you up and running.",
                "author": "RandomUsername749",
                "score": 1
            },
            {
                "body": "I would think very carefully about how you'll go about ensuring the user's consent choice for tracking is always respected. This is much harder to do, especially in the EU GDPR zone, if not managed client side.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "And is there a specific reason why you wouldn't respect users privacy settings?",
                "author": "mar1_jj",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740068149.0,
        "title": "Limit tags firing to once per order id",
        "author": "No-Chicken-977",
        "id": "1iu27yx",
        "selftext": "Hello, I have an app that customers order services across multiple pages.  At the first step we create a unique order id.  We measure each of the steps the user takes using GTM.  \n\nHowever our numbers are always a little bit off because the user can either go back (back button) or the browser reloads.  Any suggestions?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1iu27yx/limit_tags_firing_to_once_per_order_id/",
        "num_comments": 7,
        "comments": [
            {
                "body": "What numbers are off exactly and why is it a problem to trigger the same event twice? Can you not filter your report based on the unique Id and session id?",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Create a cookie when the tag fires and use the existence of this cookie as a blocking rule. That way the tag will fire the first time (no cookie exists) but can't the second as the cookie now exists.\n\nYou'll need to set the cookie expiry time to the session in case the user comes back and places another order.",
                "author": null,
                "score": 2
            },
            {
                "body": "If possible, use sessionStorage instead of setting a cookie for this purpose. The only reason to use a cookie would be if the value needs to persist across subdomains.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Just use the unique id as event_id and the events will be deduplicated.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, the same tag will fire each time the page is reloaded. Which triggers a conversion to the marketing platforms, I.e. facebook",
                "author": "No-Guide-7481",
                "score": 1
            },
            {
                "body": "Alternatively if you really want to block the events manually on the client-side, you could check for a sessionStorage item unique to the generated id before sending the conversion. If it doesn't exist then that is the first occurrance of the event and you should store a new sessionStorage item and trigger the conversion. The next occurrance will then be blocked.",
                "author": "brannefterlasning",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737128536.0,
        "title": "New to GTM and I have questions :) ",
        "author": "MarieLigier",
        "id": "1i3j5z4",
        "selftext": "Hi GTM experts! \n\nI manage digital advertising for a web app and my objective is to get people to signup for this app.\n\nThe event I consider as a conversion is a form submission (to signup).\n\nI have setup a trigger with this event, which is defined in my platform (I can't use landing urls because all steps of the registration process are using the same url path - there's no such thing as a thank you page).\n\nI have setup tags for the various advertising channels I have, and those tags are all linked to this trigger, and have an exception which is a trigger I have setup for when cookies are blocked.\n\nDoes that setup sound correct to you? \n\nIn the previous setup, there was one trigger / channel and they would only fired when the url contains the appropriate utm source. Eg for Facebook, I had one form completion trigger that would only fire when the url contained `utm_source=facebook.` But it doesn't seem to be necessary, is it?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i3j5z4/new_to_gtm_and_i_have_questions/",
        "num_comments": 9,
        "comments": [
            {
                "body": "I think UTM’s can be used to shows which platform lead to the conversion but you shouldn’t include it to the trigger as you can use it automatically in GA4 reporting. with the source/medium dimensions you could see which platform resulted in most conversions, in your case the form\nSubmission for example. \n\nHowever, to measure if your form is successfully completed you can enable the built in history change variables and form variables. Check via preview mode if you can identify your form submission with the history change or form events that are pushed to the dataLayer as mentioned before.\n\nAn other option could be using CSS selectors. After a successful submission there must be some text that implies that the submission was successful right? In this case you could make a trigger that targets the CSS selector with the condition that that specific text was present.",
                "author": "Pretty-Appearance226",
                "score": 3
            },
            {
                "body": "Sounds good.\n\nI see no good reason for the trigger to fire only on a specific source. Basically, you want the ad networks (such as Facebook) to track all conversions and you can use attribution to tell the conversions apart (from which source they came).",
                "author": "MariusGMG",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Why would you want to have separate tags for different traffic sources? The goal is to track all sign ups to GA4 (so just one generic trigger), and let GA4 handle attribution to marketing channels automatically (provided the UTMs are in place).",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "If you are getting people from different sources you must do multi touch, to share gain between channels [https://dmcinsight.com/blog/unraveling-the-mysteries-of-multi-touch-attribution-with-google-tag-manager/](https://dmcinsight.com/blog/unraveling-the-mysteries-of-multi-touch-attribution-with-google-tag-manager/)",
                "author": "SpecialistScarcity47",
                "score": 1
            },
            {
                "body": "Thanks for your comment. But then how would my ads platform know that I received a registration? EG for Meta ads, I need a tag for Meta to attribute successes to the appropriate campaign/adset/ad so its algorythm can push the best performing ones, or is there another way to do that?",
                "author": "MarieLigier",
                "score": 1
            },
            {
                "body": "Apologies for the confusion, I have misread the question due to those UTMs. \n\nYou're right that UTMs in the triggers are unnecessary, as GA4 will process those automatically, and the marketing platforms will handle the attribution themselves (but it's important to send all events to those platforms either way - not just the ones originating in the platform; the more data, the better for the algorithms). \n\nHaving said that, yes, set the tags for the respective marketing platforms whilst reusing the trigger (but without any UTM conditions in it). Hope that makes sense!",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741140833.0,
        "title": "Meta CAPI Showing 4x More Purchase Conversions – Any Fix?",
        "author": "MuhammadShoaibAmazon",
        "id": "1j3sd5b",
        "selftext": "Hey everyone,\n\nI’m running both TikTok and Meta CAPI for purchase events, and both platforms are triggered under the same conditions. However, for some reason, Meta’s Events Manager is reporting **4x more purchase conversions** compared to TikTok.\n\nhttps://preview.redd.it/9i32ziji5sme1.png?width=1838&format=png&auto=webp&s=a05b9e143e279f0d72010f9ae75a3f6ba2b2ed46\n\n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j3sd5b/meta_capi_showing_4x_more_purchase_conversions/",
        "num_comments": 5,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I can see from your screenshot on the graph that you are definitely overreporting server events and have dedulpicating issues because of it. It looks like server events are sent from several sources, maybe some plugin/integration/sGTM/etc is also running in parallel which also sends server events. So for one real event you should receive maximum 1 web event + 1 server event. In your case it looks like 1 web event + 3-4-5 server events.",
                "author": "Bukashk0zzz",
                "score": 1
            },
            {
                "body": "Yes pixel and CAPI both have event deduplicated Ids, but tha actual number of sales is more correct in pixel the purchase from server are 4x..",
                "author": "MuhammadShoaibAmazon",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736968100.0,
        "title": "GA4 Tab Not Showing in DebugView?",
        "author": "nocturnal_anim4l",
        "id": "1i2522s",
        "selftext": "Hi there. I've been struggling with GTM for a few days now. I'm setting up an integration with GA4 and, later on, with Google Ads, all through GTM. However, when checking in Tag Assistant, the Analytics tab doesn't appear. For some reason, the events are also not being sent to DebugView.\n\nI have a Google tag installed and can't find any issues with it. I tried using incognito mode, in case it was an extension, and also accepted the cookies, but none of this seems to solve the problem.\n\nIs anyone else facing this issue and managed to fix it? Could it be a bug with GTM itself?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i2522s/ga4_tab_not_showing_in_debugview/",
        "num_comments": 9,
        "comments": [
            {
                "body": "I could fix it by installing the Google Tag with Google Ads ID. Not sure why this was happening. I picked this integration in the middle of everything so I don't know if the previous person did some weird stuff that made it only work with this tag.\n\nBut thanks for the help.",
                "author": "nocturnal_anim4l",
                "score": 2
            },
            {
                "body": "Yes, I've checked it many times. For some reason, debug view from analytics only started working after I installed de Google Tag with Ads ID. I'm not quite sure why, that container was created by another person and they called me to fix it. Not sure if it's some update ou perhaps something the other person did so it would only work with Ads Tag. But thank you for the reply and help.",
                "author": "nocturnal_anim4l",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I had this problem, but using incognito / deleting all cookies fixed it for me.\n\nDid you make sure GTM itself is loading correctly? Are the GA4 tags triggering at all?",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "Have you double-checked that your GA4 tag is properly configured and linked to the correct measurement ID? Also, ensure that your triggers are set up correctly for the events you want to track. DebugView issues can sometimes be resolved by using the GTM preview mode to test the setup step by step. Hope this helps!",
                "author": "taje_madina",
                "score": 1
            },
            {
                "body": "First, make sure that your GTM tag is properly configured and firing when expected. Double-check if the \"Enable overriding settings in this tag\" option is set correctly in GTM. Sometimes, using the wrong trigger or missing some configuration can cause the events not to send properly. Try testing with Tag Assistant and check the console for any errors. If everything looks good on your end, Qwestify can help you quickly track down any discrepancies in GA4 data and make sure the events are being recorded properly.",
                "author": "Voyager-77",
                "score": 1
            },
            {
                "body": "Hello maybe you need to install the debug chrome extension",
                "author": "Significant_Dream_36",
                "score": 1
            },
            {
                "body": "Big thanks",
                "author": "taje_madina",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740035746.0,
        "title": "Weird pattern in GA4 Client ID / Pseudo user id - Have you seen this before?",
        "author": "ds_frm_timbuktu",
        "id": "1itsscp",
        "selftext": "I've been using pseudo ids / client id for a long time now to debug specific user journeys and other tracking errors. Today i ran into something new  \nIn the exploration reports,   \nI see a client id like this which is the standard - 1885573814.1696491089  \nand then I also see this - GA1.1.1885573814.1696491089  \nand this - GA1.1.GA1.1.1885573814.1696491089  \nthe last 2 have most of the parameters to not set.   \n  \nI suspect all three are the same users however there is something failing.\n\nI presume somewhere the \\_ga cookie is getting modified in a weird manner on the site.   \n  \nHave you seen this before? What could be causing this? Any pointers on identifying the root cause?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1itsscp/weird_pattern_in_ga4_client_id_pseudo_user_id/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "No idea about question.\nBut do you mind revealing more about fake ids methodology? I was thinking about it from a while!",
                "author": "Forslav",
                "score": 1
            },
            {
                "body": "Yes, I had this experience. no, I don't know what it is and what is causing this. If you open Dev Console and look at page\\_view (or ther events) as you go from oage to page, you will notice GA1.1. being added to your id.\n\nThe client that I had this issue with had their own GTM person and they did not fix it, so I used regex in my queries to remove those GA1.1. and just keep the regular format of user\\_pseudo\\_id",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "This can happen when you have a user property of 'client_id' set to the value of the _ga cookie. Doing so will rewrite the value of the _ga cookie as either undefined or prefixing repeatedly with GA1.1. You must remove 'client_id' from your tagging.\n\n\nhttps://www.reddit.com/r/GoogleTagManager/comments/1gxk2d6/gaga11undefined/",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "This is not fake IDs. This is more of real IDs being duplicated.",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "What? I dont mean to be disrespectful, but this is shocking information.\n\nThere are lots of client_id tutorials out there by the top analysts.\n\nPlease provide more info.  This is not my experience",
                "author": "Far_Highlight_4334",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736974259.0,
        "title": "GA4 vs Google Tag: Attribution Discrepancies Despite Identical Settings - What's Going On?",
        "author": "adamfard",
        "id": "1i27fwd",
        "selftext": "I'm experiencing confusing behavior with conversion tracking between GA4 and Google Tag, and I'd appreciate your insights.\n\n**Current Setup:**\n\nGA4 conversion events imported into Google Ads\n\nGoogle Ads conversion tracking tag implemented on website + GTM (server)\n\nServer-side tracking sending events to both platforms on purchase events.\n\n**GA4 Settings:**\n\n* Count: Every conversion\n* Click-through window: 30 days\n* Engaged-view window: 3 days\n* Attribution: Data-driven / Scope: Google paid channels\n\n**Google Ads Tag Settings:**\n\n* Count: Every conversion\n* Click-through window: 30 days\n* Engaged-view window: 3 days\n* View-through window: 1 day\n* Attribution: Data-driven / Scope: Google paid channels\n\nDespite nearly identical settings, I'm seeing significant differences in attribution. I went through my server events and saw this:\n\n**Google Ads Tag:**\n\n* Only attributes conversions when gclaw cookie is present\n* Seems more conservative in attribution\n\n**GA4**\n\n* Attributes through client id (I assume)\n* Attributes some conversions to ads even without gclaw cookies\n* Attributes conversions even when referring URL lacks UTM parameters = I can't tell if they are from ads or organic search\n* Shows higher conversion numbers in Google Ads than the Google tag\n\nI do have purely organic conversions not reported in google ads, so something else is going on here.\n\n**Questions:**\n\n* Why is GA4 attributing conversions more liberally despite similar settings?\n* Which tracking method should I trust for accurate ad performance?\n* What's the best practice for handling these discrepancies?\n\nWould love to hear from others who've dealt with similar situations or have technical knowledge about how these attribution models differ.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i27fwd/ga4_vs_google_tag_attribution_discrepancies/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Google treats the UK the same as EU even though the UK isn't in the EU anymore. Caused a lot of pain when CoMo v2 came out last year.",
                "author": "goodgoaj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Modelled conversions for non consented users?",
                "author": "TedTheTopCat",
                "score": 1
            },
            {
                "body": "In GA4 can be influenced with cookie scope ... channel grouping ... etc [https://dmcinsight.com/attribution-modelling/](https://dmcinsight.com/attribution-modelling/)",
                "author": "SpecialistScarcity47",
                "score": 1
            },
            {
                "body": "That's a super common and frustrating issue, so you're definitely not alone in seeing these attribution discrepancies.\n\nIt sounds like you have a solid server-side setup, which is the best foundation, but let's dive into the likely reasons why GA4 is being more liberal and what you can do about it.\n\nThe core reason GA4 is attributing more liberally, especially without the `gclaw` cookie, is that GA4 uses Identity Resolution and Conversion Modeling which the standard Google Ads Tag does not.\n\nThe Google Ads Tag primarily relies on first-party cookies, specifically the `gclaw` (Google Click ID) and other click IDs, to link the ad click to the conversion.\n\nIf the `gclaw` cookie is blocked, expires, or the user switches devices, the Google Ads Tag can lose that signal.\n\nGA4, however, employs a user-ID (if implemented), Google Signals (cross-device/cross-platform), and device ID (client ID on the web) to create a more holistic user journey.\n\nWhen it can't observe a direct link, its Data-driven attribution model uses machine learning to model conversions, estimating conversions that would have occurred but for privacy restrictions, linking them back to an ad interaction even without the direct `gclaw` proof.\n\nThis explains why GA4 attributes conversions to ads even without the cookie and without strong UTM parameters - it's using internal signals or modeling to make the connection.\n\nYour observation that GA4 attributes via client ID (or Google Signals) and shows higher numbers is a direct result of this broader, modeled approach, which is why your organic conversions aren't being reported in Google Ads; Google Ads is only concerned with Google-paid channel interactions and their associated conversion value.\n\nRegarding which method to trust, generally, you should use the Google Ads Tag/API data for optimizing Google Ads performance.\n\nGoogle Ads is a self-attributing platform, meaning its data is what your bidding algorithm sees and uses.\n\nFor accurate ad performance, especially for bidding, the Google Ads Tag (or its server-side equivalent) is the primary source of truth for the platform itself.\n\nYou should use the GA4 data for a broader cross-channel understanding of the user journey, how Google Ads is assisting other channels, and a full-funnel view.\n\nThe best practice for handling these discrepancies and ensuring the most accurate data for Google Ads is to transition your tracking to include the Google Ads Conversions API (CAPI), implemented server-side.\n\nA great solution for this is to use Google Tag Manager (server-side container) hosted on a service like Stape.io.\n\nThis setup is superior because you send the conversion data *directly* from your server to Google Ads using the API.\n\nHere's why Google Ads CAPI + Google Tag Manager + Stape.io is the solution:\n\n* Bypasses Browser Restrictions: By sending the data directly from your server (via Stape's managed cloud environment), you bypass many client-side issues like ad blockers and aggressive browser cookie policies that affect the client-side Google Ads Tag.\n\n* Maximizes `gclaw` Preservation: In the server environment, you have more control over the first-party cookies, and Stape's Cookie Keeper feature can help extend the life of essential identifiers like `gclaw` beyond what the browser might allow, improving the match rate.\n\n* Enhanced Conversions: The server-side Google Ads tag allows you to easily implement Enhanced Conversions.\n\nThis means you can securely send hashed first-party user data (like email address) along with the conversion.\n\nThis user data is used by Google to significantly improve the match rate between an ad click and a conversion, especially across devices or when the `gclaw` is unavailable.\n\nThis is crucial for minimizing the data loss the standard Google Ads Tag is experiencing.\n\nSingle Source of Truth (Server): With this setup, your server is the central point for the `purchase` event, and it reliably dispatches the data to *both* GA4 and Google Ads, reducing the risk of one platform failing to track the event correctly while the other succeeds.\n\nIf you implement the Google Ads tag server-side and activate Enhanced Conversions, you'll see your Google Ads conversion numbers rise and the discrepancies narrow, giving you a more complete picture of your ad performance directly within the platform.",
                "author": "Mental_Elk4332",
                "score": 1
            },
            {
                "body": "Oh… but isn’t that only for EU? \nMy campaigns are targeting US, UK and AUS",
                "author": "adamfard",
                "score": 1
            },
            {
                "body": "UK privacy law is based on EU GDPR, etc. What about CCPA in California, etc? Australian APA requires a cookie banner.",
                "author": "TedTheTopCat",
                "score": 1
            },
            {
                "body": "Does google enforce those regulations when tracking (= hide data if no consent signal)? \n\nI only received a GA4 notification regarding consent for EU users.",
                "author": "adamfard",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743792546.0,
        "title": "consent: personalization_storage, functionality_storage && security_storage - can be granted in EU? require CMP question?",
        "author": "bytepursuits",
        "id": "1jrjgs7",
        "selftext": "Guys - does anyone know how these should be setup for CMP+GTM conesnt mode combo integration?    \n  \nCan I just set these as allowed in EU?  \n- personalization_storage        \n- functionality_storage        \n  \nI've setup Additional Consent Checks for one of the GTM tags like this:   \n- personalization_storage        \n- functionality_storage        \n  \n  \n\n  \n  \nHowever tag does not trigger -> becase CMP is typically only requesting these: \n- ad_storage   \n- ad_user_data  \t  \n- ad_personalization\t   \n- analytics_storage\t    \nhttps://support.google.com/tagmanager/answer/10718549?hl=en   \n\nAre - personalization_storage and functionality_storage supposed to be configurable in CMP?  \nare they legally required in EU?    \nis the problem in my raptive cmp?  anyone knows? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jrjgs7/consent_personalization_storage_functionality/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You've added consent categories to a tag. That implies you believe that tag writes or reads at least one cookie (or localStorage or sessionStorage value) that belongs in each of those consent categories.\n\nYour CMP will likely need to be configured to recognise that cookie / those cookies as belonging in those categories in order to allow users to opt-in to those categories.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736870718.0,
        "title": "Some settings are changing my URL",
        "author": "Just_Staff_9422",
        "id": "1i19dyl",
        "selftext": "I'm not new to GTM and GA4 but this is really giving me an headache.\n\nIf I don't accept the cookies (Iubenda) the normal URL turns into sth like this https://domain.com/?form\\_type=3&\\_gl=1\\*1soub8k\\*\\_up\\*MQ..\\*\\_ga\\*MTM2M...\n\nI set up my CM code like this\n\n    gtag('set', 'url_passthrough', false);\n    gtag(\"set\", \"ads_data_redaction\", false);\n\nIn GA4 I've deleted all the cross-domain in Data stream > Configure domain.  \nI still haven't connected it to Google Ads so the problem is not there.\n\nI've contacted Iubenda and they've told me the problem is not there.\n\nPlease please someone help 🙏🏻\n\nEDIT: for clarification, the problem is on a staging website. On the original website there's another container installed and we don't have access there, but I've confirmed that the problem can also be found here. We're using the same GA4 property\n\n  \nEDIT RESOLVED: the problem was with the configuration of Iubanda. In the settings of the site we had to turn off the url passthrough option, which is by default on. By doing this the script changes, and adds *\"googleUrlPassthrough\":false* to the banner.\n\nThanks to everyone who commented on this issue.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i19dyl/some_settings_are_changing_my_url/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check the settings in the Conversion Linker tag.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Confirm if cross-domain tracking in GA4 is enabled or not.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "It sounds like the issue might be coming from the way your cookie consent tool is interacting with your tracking setup. That \"\\_gl\" parameter is often related to Google’s Google Signals or Google Analytics 4 settings for user tracking across sessions.  \n  \nYou might want to try disabling the Cross-Domain Tracking option if it’s active or check your URL Builder in GTM for any additional query parameters being added unintentionally.  \n  \nAlso, if you're still struggling to pin down the issue, using Qwestify could help analyze your setup in more detail and spot what’s going wrong with the URL parameters. It could save you some headache!",
                "author": "Voyager-77",
                "score": 1
            },
            {
                "body": "I did disable it in the settings but it still gave me this error, so I deleted it but apparently it's not that either",
                "author": "Just_Staff_9422",
                "score": 1
            },
            {
                "body": "I've deleted all the domains in the list of domains, so this should disable this feature. Previously only the main domain was configured (we're currently testing this on a staging site, that's where we're having this problem)",
                "author": "Just_Staff_9422",
                "score": 1
            },
            {
                "body": "Which error?\n\n\nWhat do you mean by disabled it in settings? You cannot disab6the conversion liker tag in any settings. It is an individual tag in GTM.\n\n\nWhat exactly is the problem here? Is the linker parameter being appended on all pages when you move from page to page or just the landing page?",
                "author": "brannefterlasning",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741618788.0,
        "title": "Google tag: GTM-XXXXX not found. Some pages not all.",
        "author": "blibbet101",
        "id": "1j80lgl",
        "selftext": "Hello,\n\nWent to create a new GA4 event in GTM but came across an issue where GTM is firing on certain pages and not on others. When in Preview mode the page title appears ~~like this~~  and the error: \"Google tag: GTM-XXXXX not found\" is shown. These pages do not appear in 'Pages Not Tagged' - is this a false negative or something more sinister?\n\n1. GTM script is as high in <head> and <body> as possible\n\n2. No blockers or extensions in place to block\n\nAny bright ideas?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j80lgl/google_tag_gtmxxxxx_not_found_some_pages_not_all/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Yes, that's right. Does this image help? [https://postimg.cc/K4yhGYWc](https://postimg.cc/K4yhGYWc)",
                "author": "blibbet101",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If I understood you correctly, you go into debug view and it works, but you visit some other page and it is not working?",
                "author": "mar1_jj",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738682434.0,
        "title": "Server-side tagging vs. individual API integrations",
        "author": "TC-marketing",
        "id": "1ihk19k",
        "selftext": "Hi, my company is trying to improve tracking on ad platforms like Meta etc. in light of cookies being phased out. I'm trying to understand how server side tagging fits in with what we've implemented so far and how it would change our setups going forward.\n\nWe currently have client-side GTM tags set up for all platforms we advertise on, eg Meta pixel, Pinterest, etc. Additionally, a couple years ago our dev team set up an integration with FB/Meta's Conversions API, just as a one-off, but we do not have a server-side tracking server through GTM or another platform. ETA: Reviewing [this page from Meta](https://www.facebook.com/business/help/433493041367251?id=818859032317965), we did the direct integration.\n\nWhat is the difference between doing individual conversion API setups for these platforms to complement our client-side tagging, vs. setting up a server-side tagging solution and using that instead to connect to Meta & these other ads platforms?\n\nIf we went with a solution like Stape or Elevar that sets up & manages the server side tagging for us, and they have connections with things like the Meta Conversions API, does that basically just still use all these conversions APIs except that Stape/Elevar/etc. handles the APIs through their platform instead of our dev team manually connecting to these APIs?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ihk19k/serverside_tagging_vs_individual_api_integrations/",
        "num_comments": 6,
        "comments": [
            {
                "body": "> a couple years ago our dev team set up an integration with FB/Meta's Conversions API, just as a one-off, but we do not have a server-side tracking server through GTM or another platform. ETA: Reviewing this page from Meta, we did the direct integration. \n\n\nHow exactly is this set up? You're sending events directly from your site server to Meta? How are you handling consent?\n\n\n\n\n> What is the difference between doing individual conversion API setups for these platforms to complement our client-side tagging, vs. setting up a server-side tagging solution and using that instead to connect to Meta & these other ads platforms? \n\n\nTime, complexity and cost. By all means, a direct integration with each individual API is great but everytime you need to make a change or add something new you need to involve a developer.\n\n\nUsing a centralized solution means that the developer can manage the quality of a single API (the one to your tagging server) instead of however many for each individual vendor you want to integrate.\n\n\nAdditionally, a dedicated tagging server allows you to do stuff other than exclusively forward requests to vendors. You can set cookies and serve scripts in a first party context, modify requests, enrich data, etc.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "correct - Stape makes server management a breeze, adds a bunch of features, and is cheaper than Google servers for any real implementation. It doesn't do anything for implementation. That's still on you. Though it offers a cool data client if you don't/can't use the GA4 one server-side.",
                "author": "hiscapness",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Iirc - Stape handles the hosting of the sGTM container & things like the reverse proxy server, it doesn't setup the actual tags (I could be wrong here) - there are templates that help. \nMost sites use a hybrid client/server-side setup, largely because GA4 tag works better that way (or see Jentis.com).",
                "author": "TedTheTopCat",
                "score": 1
            },
            {
                "body": "Is not one or the other, is both, the server acts like a safety measure since people can have adblocks or other extensions the block the google or the meta urls that send the events, so when you create the server container the url that comunicates the events comes from your own domain and its not blocked.\n\nOther uses are the customization of the data that you capture and send to different services, and depending of your business, advanced logic for custom events",
                "author": "pgm094",
                "score": 1
            },
            {
                "body": "Thanks for the clarification. I've met the Stape founder several times & he's a really cool bloke. Stape also publish a load of support material & worked with Meta to release a server side API or endpoint (at the edge of my tech knowledge here).",
                "author": "TedTheTopCat",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736371169.0,
        "title": "Conversion Action Tag Fired But Says Failed",
        "author": "Touchdowns11",
        "id": "1hwv9n2",
        "selftext": "Wondering if anybody can trouble shoot this, I have a contact form submission conversion set up on Google Ads, that after submitting the lead form in tag assistant, the tag moves to the \"Tag Fired\" section but says Failed 1 time under it. This is for a Google Ads Lead form submission conversion. I used the \"Element Visibility\" - submit lead form trigger. The contact forms I'm trying to track are made with Contact Form 7 in Wordpress. Any help would be greatly appreciated!\n\nSee screenshot: [https://imgur.com/a/fcVwBTN](https://imgur.com/a/fcVwBTN)",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hwv9n2/conversion_action_tag_fired_but_says_failed/",
        "num_comments": 8,
        "comments": [
            {
                "body": "My understanding is that it can happen when the tag fires, but something interrupts it before it finishes. Most likely reasons are:\n\n1. Page reloading before tag ends running, moving it to the \"thank you\" page can solve it.\n2. Ad blocker of other similar plugin\n3. lack of consent when Consent Mode is implemented (which surprises me, become for me, it's always clear \"not fired because consent was granted\" message)\n4. Conflict with website CSP (Content security Policy)\n5. also, apparently, the Google Ads tags can sometimes simply \"look that way\" despite them working correctly. You can check the browser Developer Tools (F12) -> Network and see if the request have status 200. Which is \"all correct, don't worry about it\".\n\nSource for those is here: [Still running tags in Google Tag Manager - YouTube](https://www.youtube.com/watch?v=ArnDioxhFrM&t=410s) . The video is about \"still running\", but it seems that problem overlaps with \"fired but failed\". Out of two previous questions there were asked here, one was solved by pausing ad blocker and other by resolving CSP conflict, So I hope one will work for you as well.",
                "author": null,
                "score": 2
            },
            {
                "body": "We're tracking CF7 form submissions with a custom HTML tag that pushes an event to the datalayer upon successfully sending the form, and a custom event trigger that triggers the usual GA4 (for events in GA4 which can be set as conversion) and Google Ads (conversion tracking) tags.\n\ncHTML Event Listener 'wpcf7mailsent' (this is the listener tag that triggers after initialization - all pages.)\n\n    <script>\n    console.log('CF7 Listener');\n    document.addEventListener( 'wpcf7mailsent', function( event ) {\n     window.dataLayer.push({\n     \"event\" : \"cf7submission\",\n     \"formId\" : event.detail.contactFormId,\n     \"response\" : event.detail.inputs\n     })\n    }); \n    </script>\n\nThis tag pushes the event 'cf7submission' to the datalayer if the form has been sent successfully, the event can then be used by the custom even trigger below.\n\ncEvent 'cf7submission' (this is the trigger for the GA4 and AW tags)\n\n`Trigger > Custom Event; Event name: cf7submission`\n\nYou can also track the formID if need be, just add a variable for it and add it as parameter in the GA4 event mentioned above, but this is not really required.\n\nReference: [https://www.youtube.com/watch?v=aRa1n7bQ2Ls](https://www.youtube.com/watch?v=aRa1n7bQ2Ls)",
                "author": "robEunit",
                "score": 2
            },
            {
                "body": "I had a same issue, and it was because I use Firefox (which seems to block something here). After testing GTM Preview from Chrome, it shows that conversion fires and not fails.",
                "author": "BelgradeSD",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hatte das Problem mit dem Brave Browser. Bei Chrome ging alles problemlos",
                "author": "rolandrolando",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738852787.0,
        "title": "Google tag manager giving me an error whenever I try to put in my email",
        "author": "Adventurous-Emu4266",
        "id": "1ij40rm",
        "selftext": "I tried to enter my email into my google tag manager in the setup conversions, pls assist",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ij40rm/google_tag_manager_giving_me_an_error_whenever_i/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "you’re having trouble adding your email in Google Tag Manager for conversions. One thing to check is if there’s an issue with the email format or special characters. Try clearing your cache or using an incognito window to avoid any browser-related issues.  \n  \nIf you're still stuck, Qwestify offers an easy-to-use platform that might help streamline your conversion setup. It could give you clearer insights and a smoother experience with tracking conversions.",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "Thank you, I will try it.",
                "author": "Adventurous-Emu4266",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738254461.0,
        "title": "One trust cmp",
        "author": "Shot-Appointment3569",
        "id": "1idqu7o",
        "selftext": "Hi, please let me know if I need to add more detail, but I've added the onetrust cmp template and it's set up and running correctly. However since putting it live in tag manager our consent banner no longer shows. \n\nI then read that the template from onetrust creates it's own banner and needs to run by itself, so we paused the existing onetrust cookie banner but the new banner still didn't show up.\n\nWhen pausing the cmp tag, our old banner shows up again...I'm not sure what to do and can't currently get through to their support team.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1idqu7o/one_trust_cmp/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Could you share the website? So i can take a look",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "First advice: Get a staging server to validate things before pushing them live\n\nSecond advice: Currently for some reason (in some cases) Microsoft Edge is blocking OneTrust banners/security center from loading (so if your workplace uses that be aware.)\n\nThird advice: OneTrust CMP template should be inserted via GTM for maximal efficiency (they offer a template that you can download from the library and you can manipulate when it loads), If you hardcode it there can be issues with the timing/loading of cookies (if the firing trigger for marketing/analytics loads before OneTrust you have a problem).\n\nFourth Advice: Make sure you add the additional consent required on all your GTM cookies.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "We just implemented this ourselves in a different onetrust environment. How long ago did you make it active? In onetrust? When you did a preview with tag manager did the banner show when it the tags are live on the site? Sometimes onetrust has issues with other cookie banners and will different aspects to not show if they are not completely taken off the site. We used only tag manager to implement the scripts to our 15+ sites.",
                "author": "Ok-Establishment618",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732429501.0,
        "title": "Why is there a gap in conversions between my BI dashboard and the advertising platforms?",
        "author": "CarbonWave",
        "id": "1gykkxb",
        "selftext": "Hi all,\n\nI’m experiencing an issue where my BI dashboard consistently reports around 40% more conversions than my advertising platform. I’m using Google Tag Manager (GTM) to implement postback tracking for the advertising platforms. \nI suspect there may be a problem with how I store and retrieve the clickid parameter, but I’m not sure where the gap could be coming from.\n\nHere’s how my tracking is set up:\n1. Landing Page (LP): Capturing and Storing clickid. When a user lands on the LP, I capture the clickid parameter from the URL and store it in localStorage when they click the CTA button:\n\n<script>\n  // Define the variable to store\n  var stored_gclid = {{gclid}}; // GTM variable capturing the clickid\n\n  // Store it in localStorage\n  localStorage.setItem('stored_gclid', stored_gclid);\n</script>\n\n\n2. Thank You Page (TYP): Retrieving the clickid\nOn the TYP, I pull the stored clickid from localStorage using this custom JavaScript function in GTM:\n\nfunction() {\n  return localStorage.getItem('stored_gclid');\n}\n\n\n3. Firing the Postback\nThe postback is triggered using the clickid retrieved from localStorage:\n\nhttps://example.com/pixel?info=601023&unique_req={{Pulled CID}}\n\n\n\n* No significant browser/device differences: All users are on Windows, and Firefox is the browser.\n\nMy Questions:\n\n1. Could there be an issue with localStorage causing this gap?\n2. Is there a better way to store and retrieve the clickid to reduce these discrepancies? For example, should I switch to cookies parameters for better reliability?\n3. What else could explain the 40% gap?\n\nAny insights or suggestions would be greatly appreciated! Let me know if you need more details about the implementation.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gykkxb/why_is_there_a_gap_in_conversions_between_my_bi/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Do you have a copy of this data stored server-side or are you just hoping for the data to be reliably sent via the user’s web browser client-side?",
                "author": "Straight_Special_444",
                "score": 2
            },
            {
                "body": "Hey there!\nI have the click IDs in my data warehouse!\nCurrently to fill the gap in reporting we manually “fire” all the missing click IDs to the platforms.",
                "author": "CarbonWave",
                "score": 2
            },
            {
                "body": "Ok thank goodness, haha. So when you manually fire all the missing click IDs, do you still see a large discrepancy or is it satisfactory?",
                "author": "Straight_Special_444",
                "score": 2
            },
            {
                "body": "There are a multitude of reasons why client-side can fail, but you’ve stumbled upon the more sophisticated solution of doing both client-side and server-side tracking (which need to be deduplicated via some unique identifier for each conversion e.g. an order id). \n\nInstead of manually firing these conversions, you could just setup a “reverse ETL” tool like Hightouch or Rudderstack that connects to your data warehouse and automatically sends those click IDs (along with other data for improved quality/matching) to the advertising conversion APIs.\n\nOnce you do this for one ads network, then setting up additional ads networks is trivial, taking less than 10 minutes.",
                "author": "Straight_Special_444",
                "score": 2
            },
            {
                "body": "Thanks! I’ll dig into that 💪🏼",
                "author": "CarbonWave",
                "score": 2
            },
            {
                "body": "No problem!\n\nThere is an untold amount of power that you can unlock by leveraging those “reverse ETL” tools on top of your data warehouse.\n\nIt makes your data warehouse not just your crown jewel for BI reports, but also for data activation/automation for ads conversion APIs, custom ads audiences based on user behavior/critera from other sources of data in your warehouse, email marketing automation, customer 360 views for sales reps within CRM or support teams in ticketing systems, etc.",
                "author": "Straight_Special_444",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yessir! After manually firing all the missing click IDs we have a sufficient match rate between our data and the platforms.\nI wonder why some fires are successful while others not…",
                "author": "CarbonWave",
                "score": 1
            },
            {
                "body": "Are you tracking API responses, whether they're actually successful? I wonder if some may be outside of conversion window or possibly have IDs coming from a different account?\n\nAnother thing is, if you have campaigns in IOS apps (YouTube etc), it'd use IOS-specific IDs wbraid/gbraid instead of gclid. Specialized platforms like Able CDP or previously mentioned Rudderstack may be a better option for sending conversions than custom coding an integration from data warehouse or relying on GTM (which I suspect may not be getting correct values in all instances using the storage method employed).",
                "author": "paul_944",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1728574327.0,
        "title": "Which trigger to use?",
        "author": "itsJ92",
        "id": "1g0lj7y",
        "selftext": "I have a question regarding cookie banners and the best trigger to use for sending data to GA4. We often choose between using the consent update event (when the user makes a choice) or the page load event to trigger the Google Tag.\n\nIf we use the page load event, the hit is sent before consent is given on the landing page with UTMs, so it ends up as G100. Are the UTMs lost in this case, since the tag isn’t triggered again after the user accepts consent, meaning the landing page hit doesn’t get recorded as G111?\n\nWhat trigger is recommended to avoid this? Does Consent Mode still attribute the source correctly?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g0lj7y/which_trigger_to_use/",
        "num_comments": 12,
        "comments": [
            {
                "body": "The UTMs shouldn't be lost if you're using Consent Mode, at least for Google tags. You can fire them on normal triggers without worrying about it. \n\nSimo Ahava has [a good writeup](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#do-i-need-to-manually-resend-hits-when-consent-is-granted-when-using-google-analytics-4) on this, including some detailed debugging you can do via checking network calls. \n\nFrom what I've seen, when consent becomes granted you can see a call to the Protected Audience API (usually on a user engagement trigger) that sends what the temporary user/session IDs were for earlier calls on the same page in order for GA4 to stitch them together with subsequent calls that are checking the _ga cookies for user/session IDs.",
                "author": "winless",
                "score": 3
            },
            {
                "body": "It would also depend on whether users can navigate the site without making a consent selection",
                "author": "datamelon",
                "score": 2
            },
            {
                "body": "Very interesting, thanks for the ressource!",
                "author": "itsJ92",
                "score": 2
            },
            {
                "body": "Nice word salad. You should apply for work at Google.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Try this. Fire Google tag with send_page_view false as initializating trigger. Then fire a ga4 event \"page_view\" when the consent is updated",
                "author": "Chjji22",
                "score": 1
            },
            {
                "body": "Absolutely. Navigation is blocked",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "Would this really help if the two events were on the same page?",
                "author": "datamelon",
                "score": 1
            },
            {
                "body": "I’m not tracking users without their permission… I’m saying the Google tag fires in G100 before the user consented because it’s triggered on page load. Then, when the user accepts, since the page has already loaded, it’s not triggered again in G111 on the landing page, which means the source might be lost.",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "to ensure that after cookie consent is given, the page\\_view tracking is complete and non-anonymized, to fully leverage the capabilities of GA4\n\nIt may be redundant, but if you're having issues with tracking, I would give it a try",
                "author": "Chjji22",
                "score": 1
            },
            {
                "body": "I also always separate the config tag and the page view tag as it’s good practice, but I was just thinking that if op was using advanced consent mode, this wouldn’t matter as the hits on the same page will get automatically reprocessed to have the granted status.",
                "author": "datamelon",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715192444.0,
        "title": "Remote GTM jobs in agencies",
        "author": "KalaBaZey",
        "id": "1cnbi4x",
        "selftext": "Hello everyone, I’m a Google Ads freelancer and I love working in this field but I enjoy working with tracking & analytics even more. I have consulted for an in house team before where my sole job was to build their tracking in GTM and I recently reached out to an agency for a job & they told me they were relying on someone external for GTM but would be interested to bring it in house. \n\nThat didn’t pan out eventually as they said they dont have many new clients rn but it made me wonder if there’s other agencies that might need a contractor or in house specialist just for Google Tag Manager. Even with my limited number of G Ads clients I often have to redo the tracking because of changes in business goals and landing pages so agencies with more clients would need someone specifically for this. \n\nI’m looking for such agencies or in house teams who might need someone like me. I can setup all sorts of tracking including some simple Javascript & dataLayer.push() stuff, Enhanced Conversions and can also work with cookies & consent modes & what not. \n\nI want to work on more complex stuff in GTM which my small lead gen clients do not have the need for such as Server Side tracking and by being part of a bigger organization with bigger clients & more advanced systems I’d get the opportunity to do so. \n\nAny leads would be greatly appreciated. \n\nP.s I can only work remote since I’m based in Pakistan & the agency scene here is very rudimentary. ",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cnbi4x/remote_gtm_jobs_in_agencies/",
        "num_comments": 22,
        "comments": [
            {
                "body": "I’m literally you 😅. Feel like GTM and technical marketing is made for me, but still don’t have enough experience. Anyway, good luck!",
                "author": "Cotusie",
                "score": 5
            },
            {
                "body": "DM me contact details",
                "author": null,
                "score": 3
            },
            {
                "body": "Dm contact info please. Agency owner",
                "author": "found_it_online_01",
                "score": 3
            },
            {
                "body": "I think our agency could use someone specializing in this. Can you send me a DM?",
                "author": "dudieguybro",
                "score": 2
            },
            {
                "body": "DM me",
                "author": "andr3sr",
                "score": 2
            },
            {
                "body": "Send me a DM. I have a firm called TagHero that specializes in tagging/tracking, specifically in the DTC ecomm space, and we're always plenty busy and looking for additional contractors to source projects to.",
                "author": "brett_fish",
                "score": 2
            },
            {
                "body": "Same here! It resonated with me for some reason. Found out from using contentsquare at a prior gig.",
                "author": null,
                "score": 2
            },
            {
                "body": "Thank you.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "Done. ✅",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "Done.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "Done.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "juyst checked don't see any messages!",
                "author": "brett_fish",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "High Five Mate!\nSame here, I even looking for some opportunities.\nBest Wishes.",
                "author": "Evan-Ivan",
                "score": 1
            },
            {
                "body": "I've done over a 100 tag manager jobs on Fiverr to build experience (72 five star reviews) along side my day job.   I'm based in the UK. If anyone wants more info or to work on future projects together,  feel free to DM me.",
                "author": "Zealousideal-Age8860",
                "score": 1
            },
            {
                "body": "Just checking. Did you get my message request?",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Done.",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Thank you. You too.",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Looks fine on my end. Could you instead initiate the DM maybe its a bug.",
                "author": "KalaBaZey",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737983268.0,
        "title": "Meaning of the (purple) icon?",
        "author": "Far_Carpet9267",
        "id": "1ib8jgi",
        "selftext": "So I am a noob and I am trying to learn..\n\nI am trying to get a solution regarding a problem with Google Analytics. The problem is with the cookie consent and the problem states: consent signal missing. If I test the consent signal, I get a yellow/golden square or a blue circle below the overview (see below link) and the Event consent status is states as in the image is shown.\n\nImage: [https://freeimage.host/i/2LPiF49](https://freeimage.host/i/2LPiF49)\n\nIs this ok? There is no value in 'default on page' and the problem with cookie consent is still there.\n\n  \nMany thanks in advance",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ib8jgi/meaning_of_the_purple_icon/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How are you getting your consent?",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "It’s to see which venster or tab it’s connected to. You’ll see the exact same purple dot in the opened website preview tab. And has nothing to do with consent.\n\nAnd no it’s not okay to not have a default consent state. This will give problems in your measurement. If you need help pm me. You can pm me in dutch",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734867429.0,
        "title": "Google Tag / GA4 and Google Ads... what a mess :-)",
        "author": "Holiday_Activity9191",
        "id": "1hjwugr",
        "selftext": "Hej there,\n\n* I recently switched to a cookie banner with Consent Mode V2, which requires Google Tag for the consent setup. This has worked flawlessly.\n* In the past, we integrated GA4 directly via snippets into the website code. However, now that we’re using Google Tag as well, the GA4 snippet would be used twice since our GA4, Google Ads, and Google Tag are connected, this makes the direct snipped redundant, right?\n* Google Tag Manager is already firing our purchase events without any additional GA4 tag setup. Is this normal? Will I lose any tracking if I don’t set up an additional tag for GA4 and GoogleAds?\n* I am using a third-party booking software that sends the purchase event to GA4, and we’ve connected the same purchase event in Google Ads. Am I correct in assuming that I don’t need to install the Google Ads tracking code (AW) additionally since the purchase data is already coming from GA4?\n\nLast but not least, the Google Ads tracking gets quite often lost between my WebSite and the final purchase event on the third-party website... in almost 30-50% of cases (it just indicates direct source in GA4), is there any trick to keep the attribution?\n\nThanks a lot!",
        "score": 8,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hjwugr/google_tag_ga4_and_google_ads_what_a_mess/",
        "num_comments": 5,
        "comments": [
            {
                "body": "1. Congrats!\n2. Right.\n3. This one is a little confusing. In theory, you don't need GA at all, to connect GTM and Google Ads. You can create a trigger, and, well, trigger the Google Ads conversion tag when it happens.\n\nFor example:  \n\\-> someone visits the \"thank you page\" -> Google Ads Conversion Tracking Tag is firing.\n\nThis will work. You're very likely to use exactly this set up for the Facebook/Twitter/Whatever pixel conversion tracking\n\nBut alternatively (preferably?), you can use the above trigger to trigger not the Google Ads conversion, but to send the event to GA.\n\nExample\n\n\\-> Someone visits the \"thank you page\" -> Google Analytics: GA4 Even Tag is firing.\n\nThat tag sent the event and other information you choose to sent, to Google Analytics, and you'll see it in the settings (admin) -> property -> Data display -> events (note, it may take 24 hours or more before you see it there).\n\nThen you can mark this event as **key event** (if it's named \"purchase\", then it's likely already marked that way)\n\nThen you just need to link the GA and Google Ads(property setting/ product links).\n\nAnd you can go to Google Ads, and you can import your Key events from GA as Goals (Goals -> Create Conversion Action -> Import)\n\n4) So it's more or less the same thing that point 3, but instead of the GTM sending the event to GA, Booking platform do it, right? Sounds like it may work. I would be cautiously optimistic  about it (but not an expert, or experienced in that area).",
                "author": null,
                "score": 4
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "* Great, a lot of people don't even get that far!\n* You need to remove any tracking code which is hardcoded on the site, not just Google, and have it run through Google Tag Manager so that it can be integrated with Consent Mode.\n* See above\n* This could be a problem. Can you get your Google Tag Manager container on to the booking software?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Have you setup server side tracking?",
                "author": "RogervdMatten",
                "score": 1
            },
            {
                "body": "From your description, it appears that you are using GTM, GA4, Google Ads and Google Tag Script on your website. Yes, I think you have a redundancy problem.\n\n30-50% of traffic from the direct sources because of Incorrect Event Parameters or parameters are not sent with your purchase event\n\nAs a tracking professional, I think your tracking is not done in the right way. You could have done everything with Google Tag Manager so why do you use GA4, GTag, AW script? You also didn't mention how you enabled your Purchase Data Layer which is most important.",
                "author": "motiur_ak07",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1729603132.0,
        "title": "Issue with GA4 DebugView not showing activity during testing",
        "author": "Etianen7",
        "id": "1g9hxq1",
        "selftext": "Hey guys, I've been trying to get back into it and I've set up a localhost site to test things out with GTM and GA4. However, I can't seem to see any activity in DebugView? It says there are no devices available.\n\nThe site is on Wordpress and I'm using Chrome to test.\n\nWhat I've tried/checked so far:\n\n* All cookie blocking plugins have been disabled\n* Tag Assistant Companion and Adswerve datalayer inspector are enabled\n* I'm testing by going into Preview in GTM, so debug mode should be enabled (I do see \\_dbg=1)\n* There are no active traffic filters in GA4\n* I'm using the correct GA4 ID in tags\n* The GA4 tags are being triggered and also network hits are being sent to GA4 (according to Adswerve)\n\nThis has been going on for multiple days and I haven't been able to find a solution.\n\nIs it because the website is localhost or is there anything else I can look into to fix it?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g9hxq1/issue_with_ga4_debugview_not_showing_activity/",
        "num_comments": 10,
        "comments": [
            {
                "body": "The commenter had suggested that I enable Tag Assistant Companion in incognito mode and try debugging in incognito mode in case it was a cookie issue in my browser. DebugView worked fine in incognito, which means the solution was that I had to delete the cookies.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Why does the tag assistance detect the balises in incognito but not in normal mod ?",
                "author": "popey123",
                "score": 1
            },
            {
                "body": "That actually worked out! Thanks a ton!",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "Thank you, but access to DebugView is still a necessary part of the process.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "Hey, could you please share the solution? Comment is deleted 🙄",
                "author": "CarbonWave",
                "score": 1
            },
            {
                "body": "Have you tried using debuggers like dataSlayer or Omnibug? If not, try that.",
                "author": "no_bs_digital",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716569332.0,
        "title": "Does Safari block GTM? ",
        "author": "ewrjontan",
        "id": "1czpbtb",
        "selftext": "Hey all, I am having issues with my website and I am trying to figure it out. I have several third party scripts loading through GTM. Everything seems to work fine in Google Chrome, but when I try to load my website in Safari, I can see a bunch of \"Failed to load resource...\" and \"Cannot load \\*insert javascript file name.\\*...\\* errors in the console. \n\n  \nI am currently testing on Safari 17.3  (MacOS Monterey) and have also tested on ios 17.4.1. Based on my own research, it sounds like GTM isn't necessarily blocked but any scripts loaded through GTM are? I have checked my privacy settings and have unchecked \"Prevent cross-site tracking\", \"Use advanced tracking and fingerprinting protection\" and \"Block all cookies\". Not seeing any other relative settings. I am assuming my scripts failing to load (which are all through GTM) are failing because of Safaris blocking features. Are there any reliable work arounds for this?\n\n  \nI will say, I am also experiencing another strange phenomenon. If I clear my cache and cookies in Safari. Then go to my website. I dont see any errors in the console and all of my scripts seem to load just fine. However, once I refresh the page, that is when I start seeing all of the \"failed to load errors\" and is when things start to get blocked. What's up with that? Is this common behavior with Safari? Thanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1czpbtb/does_safari_block_gtm/",
        "num_comments": 21,
        "comments": [
            {
                "body": "No. Safari only gets rid of unique identifying numbers like gclid and whatever Facebook is called",
                "author": "honey22badger",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Basically yeah. Search for Apple ATT.",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "Safari blocks 3rd party cookies by default. Do your scripts use 3rd party cookies? Are your script doing anything that is forbidden by Apple ITP 2.3? But to your question - Safari does not block GTM or GA. Both use 1st party cookies.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Safari private browsing mode will block fb pixel.\nAnd AdBlock will block fb pixel,too.",
                "author": "Melodic_Big2581",
                "score": 1
            },
            {
                "body": "Interesting, in my experience Safari is not blocking tracking scripts including GTM when browsing in normal mode, only in incognito mode.\nFrom what I know Safari ITP do things like limiting lifetime of a cookie to 7 days if the cookie is set from a different IP than the main page.\n\nSo I would be curious to see that page (can I DM you?) because that would be something new to me.\n\nIf you need for some reasons prevent that from happening using server-side GTM with custom script names may help.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "It can. Especially with the 17 OS updates. You’ll have to do some testing and see- [IOS 17 Updates - Cardinal Path](https://www.cardinalpath.com/blog/ios17-updates-will-create-a-data-deprecation-ripple-effect-for-marketers-are-you-ready/amp)",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Google Tag Manager is blocked when someone uses **Safari Incognito mode** or has enabled **Safari Advanced protection**.",
                "author": "Head-Sherbet-6362",
                "score": 1
            },
            {
                "body": "Interesting. It seems like that is more applicable to actual apps though and not websites? Perhaps I am incorrect.",
                "author": "ewrjontan",
                "score": 1
            },
            {
                "body": "That makes sense. It does seem that gtm is able to get through but the scripts, which load via gtm, are the ones that seem to fail to load. These are for click tracking and other analytics so sounds like being loaded through gtm would be the problem?",
                "author": "ewrjontan",
                "score": 1
            },
            {
                "body": "Interesting article. I will definitely be doing some reading!",
                "author": "ewrjontan",
                "score": 1
            },
            {
                "body": "My bad, I meant Safari's \"Advanced Tracking Protection” + Safari ITP, not the ATT.",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "Being loaded through GTM should not be a problem. I have only ever encountered a few CMP scripts that could not be loaded through GTM. GTM supports click tracking natively - why do you need an additional script? Do your scripts violate ITP 2.3?",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I have it all unchecked, but this would only apply to private browsing right?",
                "author": "ewrjontan",
                "score": 1
            },
            {
                "body": "Ill have to look into if they are in violation. We use a third-party to handle our marketing and metrics, so for example, if someone adds a product to their shopping cart, this third party can track it and what not. The problem is, some thing  safari-specific is causing their just script to fail to load. It sounds like it might be something cookie related if GTM isn't technically blocking the scripts.",
                "author": "ewrjontan",
                "score": 1
            },
            {
                "body": "Nope, overall Safari browsing.",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "GTM would not be blocking the scripts only for Safari.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Not sure if that is a typo or not. Gtm isnt blocking anything nor does it seem to be blocked. It seems to be the scripts loaded through gtm.",
                "author": "ewrjontan",
                "score": 1
            },
            {
                "body": "I misunderstood your words. You wrote, \"might be something cookie related if GTM isn't technically blocking the scripts.\"",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "You’re correct that’s my bad. I meant if safari isn’t technically blocking the scripts. I’m thinking the scripts that are failing to load might be failing because of the cookies.",
                "author": "ewrjontan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709194275.0,
        "title": "My client (and boss) want page_view even when consent is denied, is it possible?",
        "author": "FeelingPicture7668",
        "id": "1b2v97h",
        "selftext": "Aloha people,  \n\n\nI've set Consent Mode v2 up with CookieBot and it works as intended. My client (and my boss) would like to have page\\_view even when consent is not given.  \nI've tried multiple things and the only thing that seems to work is our own website, where we run Zaraz which can send a page\\_view even when consent is not given, although it does place a cookie so not a viable solution...  \nDo any of you have a recipe to force a page\\_view even when consent is denied?",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b2v97h/my_client_and_boss_want_page_view_even_when/",
        "num_comments": 26,
        "comments": [
            {
                "body": "So your client and your boss want to install a CMP but not honor the consent given. Why did they have you install a CMP when it was only being done as a sham - a fraud? If there is no intent to actually comply with the consent given, running a CMP is pointless. ",
                "author": "Humble_Elderberry_25",
                "score": 8
            },
            {
                "body": "Use in GTM/G4 the native consent feature to enable page view triggers without requiring user consent. This configuration ensures that no cookies are stored. GA4 will then collect hits data, employing its own modeling techniques to estimate the number of actual sessions and users represented.",
                "author": "pixgarden",
                "score": 6
            },
            {
                "body": "*Why* do you / your boss or your client want to do this? What is the point of implementing user consent management if you are just going to ignore the user's consent decision and track them anyway?\n\nOf course you can override the user's decision, but this is ethically wrong as well as legally wrong in many significant jurisdictions. I'm not going to help anyone who asks how.\n\nPlease do not track users without consent and especially please do not track users without consent after the user has explicitly told you they do not want you to do that.\n\nGoogle Consent Mode is not a bypass to make specific data appear in GA4. It is a method where it will allow data modeling, but it will not directly give you page\\_view or any other events in the standard reports in a realtime way nor in any way where you can trace back to a specific user or session.",
                "author": "StefanAtWork",
                "score": 6
            },
            {
                "body": "Here is a link to potential legal action against companies who are doing what your boss is asking - fraudulent implementations of a CMP. Maybe you will be next on this list. https://noyb.eu/en/226-complaints-lodged-against-deceptive-cookie-banners",
                "author": "Humble_Elderberry_25",
                "score": 4
            },
            {
                "body": "Sorry. Looks like an extra space was added to the end of the URL by me somehow https://noyb.eu/en/226-complaints-lodged-against-deceptive-cookie-banners",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "You can trigger a pageview without enabling cookies. It respects consent",
                "author": "pixgarden",
                "score": 2
            },
            {
                "body": "^ and this is What we’re looking into, although I cannot get it to work properly..\n\nAny chance you Can share some screenshots of How your gtag is configured?",
                "author": "FeelingPicture7668",
                "score": 2
            },
            {
                "body": "No. You must honor the consent choice. \"Step 1 – end-user consent: You must ask for and obtain the explicit and valid consent from your users in order to use Google Analytics in GDPR compliance on your website.\" https://www.cookiebot.com/en/google-analytics-gdpr/",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "this is such an inane conversation . .. people will do whatever they want, so just save your breath...",
                "author": "bigtakeoff",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Trigger - Initialization \nSend event - page_view",
                "author": "d1vergent",
                "score": 1
            },
            {
                "body": "I'm a bit late to the game but I was searching for the same solution and was also wondering to what extend the consent mode was able to allow \"cookieless pings\" (which, at least officially, take into account the consent given, and in case it is denied, only shares data without PII).   \n  \nMy mistake was that I was triggering my GA4 tag only on the explicit approval of Analytics cookies, defeating the purpose of the cookieless pings.   \nThe trick is to trigger the GA4 on all pages, and depending on consent state, different data is being sent, always respecting the consent given. \n\nHappy to be corrected in case I have it wrong.",
                "author": "Public_Courage_6259",
                "score": 1
            },
            {
                "body": "There are real legal implications of what you are asking right now. I would push back on your boss / client.",
                "author": "dgpaul10",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Page views still send the IP address of the user if you don't redact it by proxying through a server. So even if you don't use cookies, this is still going to be a problem. \n\nThat said, it is only applicable in countries with strict privacy laws. As far as I know, if your traffic is US only, you are not legally required to add consent banners.",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "Sending page\\_view event to GA4 when user has declined consent is in violation of privacy law. You can capture pageviews of users who declined consent in self-hosted datawarehouse/datalake/cdp and not send it to any 3rd party. Usually it is useful in personalization for repeat anonymous visitors who've declined consent. Since you have not send their data to GA4/Meta/G Ads, only way to engage with them is with their first party id info.",
                "author": "1MagicPixel",
                "score": 1
            },
            {
                "body": "Can you elaborate on the native consent feature, maybe with a screenshot?",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "The IP address issue is much more a grey area now. Google has servers in the EU and if an EU user lands on a site where there is GA4, a European server will receive the hit, geolocate the user, remove the IP and forward the data to the server(s) in the US.\n\nDifficult to verify, because GA4 doesn't expose IP addresses in reports (or in a linked BigQuery) anyway.\n\nRedacting IP via sGTM is a valid option, but you then need to take some steps to preserve geolocation data, assuming you want to use geolocation data in reports.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[https://support.google.com/tagmanager/answer/10718549?hl=en](https://support.google.com/tagmanager/answer/10718549?hl=en)",
                "author": "pixgarden",
                "score": 1
            },
            {
                "body": "Landing on a 404 page",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "This I have set up, but I still don't get a page\\_view.  \nMaybe more specific is in order. I'm thinking realtime report, is it possible to get page\\_view there without consent given?",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "Yes from the page I’ve just sent. Look for « No additional consent required »",
                "author": "pixgarden",
                "score": 1
            },
            {
                "body": "The real time report exclude modelling",
                "author": "pixgarden",
                "score": 1
            },
            {
                "body": "I do have the \"no additional consent required\" on my page\\_view tag. And I still see no page\\_view in the real time report.. hmm..  \n  \nYou say \"The real time report exclude modelling\", does it mean the page\\_view is not collected in real time but stored later in GA4 ?",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "Yes. It depends on your identity resolution settings too",
                "author": "pixgarden",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732734774.0,
        "title": "GTM Thank You page question",
        "author": "EvidenceCool7206",
        "id": "1h1c9zb",
        "selftext": "I’m trying to understand what I’m doing wrong here. I’m trying to track a conversion by users clicking booking an appointment and landing on the thank you page. I created GTM tag and it seemed to be working when previewing my thank you page it loads and tag fires. But when I just put in the URL, the tag doesn’t fire.. what might be the issue? Thank you all in advance!",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h1c9zb/gtm_thank_you_page_question/",
        "num_comments": 7,
        "comments": [
            {
                "body": "As a side note it's better practise to track the form_submit event rather than the resulting confirmation page.\n\n\n* You can capture form inputs directly from the form (and store them as event-scoped custom dimensions attached to the actual event).\n* You can identify the form being submitted in cases where multiple forms go to the same thank you page. \n* You don't have to worry about people reloading the thank you page and registering more than one event per submission.",
                "author": "spiteful-vengeance",
                "score": 2
            },
            {
                "body": "This is very helpful advice but there are exceptions to collecting form fill data. For example in healthcare, insurance, jobs, finance, and several instances in higher education where form data is considered PII. Take a few minutes to learn if your client site has PII collection liability then decide on your data capture limits.",
                "author": "Mobile-Reveal-8938",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "1: publish the tags\n2: clear the cookies and check in incognito\n3: if it still doesn't fire, check the console for csp blockers on the tag type.",
                "author": "zenrayman",
                "score": 1
            },
            {
                "body": "Can you take a screenshot of the trigger condition ? Then take screenshots of the gem preview when and without inputting the url",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "Is the tag or event set for \"once per session\"? If so, you may have used up your \"allotment\" during testing, wait 30+ minutes and try again.",
                "author": "Mobile-Reveal-8938",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732314095.0,
        "title": "\"_ga=GA1.1.UNDEFINED\"",
        "author": "Humble_Elderberry_25",
        "id": "1gxk2d6",
        "selftext": "is anyone else seeing this pop up for the \\_ga cookie? - \"\\_ga=GA1.1.UNDEFINED\". UPDATE: I got ping'd by Julius on another platform. This particular error is caused by having the parameter name 'client\\_id' on an event passed from GTM to GA. I removed the entry and the problem disappeared.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gxk2d6/gaga11undefined/",
        "num_comments": 7,
        "comments": [
            {
                "body": "This can happen if you're manually setting the client ID to the literal string value of \"UNDEFINED\"",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Yeah that is indeed the expected behaviour. Check SSGTM preview mode and inspect the server response that sets the cookie. Does it have the same value there?",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "I got ping'd by Julius on another platform. This particular error is caused by having the parameter name 'client_id' on an event passed from GTM to GA. I removed the entry and the problem disappeared.",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "i am not doing anything to write to that cookie. i read from it yes, but i never write to it anywhere. and it is not my CMP - i just switched to a different CMP and get the same behavior. HOWEVER, i am doing some web site and tagging testing, and as part of that testing i am DELETING both the \\_ga and session cookie entirely. not writing to it but deleting it from the application tab in the developers console. i would think that deleting it would get a new cookie value pushed from the server on a new visit for a new session (deleting, then closing browser altogether).",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "You said you weren't messing with the client id at all in response to my first comment. 😂",
                "author": "brannefterlasning",
                "score": 0
            },
            {
                "body": "I am not. You are incorrect.  I am auditing a site where the guy who quit misused the client_id as an event parameter, loaded up the page_location with non URL values, and instead of fixing the stuff he broke, would create more and more custom events all with differing names. We were fortunate he quit.",
                "author": "Humble_Elderberry_25",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732008093.0,
        "title": "Google Tag Manager + Enhanced Conversions = Damaged Website",
        "author": "Mitsuoka123",
        "id": "1gut913",
        "selftext": "A few weeks ago we had a chat with Google tech who helped us set up GTM to track data for Enhanced Conversions in GAds. After we have set up everything they confirmed that everything is working, but once again we got an email saying that something is failing with enhanced conversions. It has been a process to get everything set up for GCMv2, especially as the site is driven by Joomla. \n\nBut that is not the biggest problem. We experienced unusual drop in page visits in Analytics (flagged also as anomaly by GA), and some users were complaining that they were trying to do a reservation and when they were trying to send us the reservation (click on a button), all the data from their form would disappear and they couldn't finish the process. \n\nAfter trying a few things, I found out that if the user does not accept cookies, a weird code gets generated and it is added after the original URL when they click on a link eg:\\_gl=5\\*122rme\\*\\_up\\*SQ..\\*\\_ga\\*BTc4STUzSzQyOC4xNzFxQUQ0OTgz\\*\\_ga\\_84KRT983QW\\*MTczMTk0PRDKi4xLjAuMTczMTk0NDkL3TSwLjAuMA (changed the codes with some random letters as I don't know if these codes can be used for something as there are our GA tags for example but the structure is there) and it throws 403. \n\nAt the moment I have disabled GTM and everything works fine again, but I am trying to understand what is happening and why this gets generated. Anybody has some experience with this?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gut913/google_tag_manager_enhanced_conversions_damaged/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Sounds like url_passthrough issues. Would do some reaearch on the topic.",
                "author": "Snusetvb",
                "score": 2
            },
            {
                "body": "Cross-domain tracking?",
                "author": "NoAge358",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Looks like cross domain as well. You can use doman exclusion list",
                "author": "gnaiz",
                "score": 1
            },
            {
                "body": "Cross domain is set in analytics. I would check there to see if the second domain is included.",
                "author": "NoAge358",
                "score": 1
            },
            {
                "body": "Yap, it looks like it, thank you!",
                "author": "Mitsuoka123",
                "score": 1
            },
            {
                "body": "That was my first thought.\n\nThey would need to add the code snippet to the other domain.\n\nI had similar issues with a reservation system that was on a different domain from the main site.",
                "author": "fappingjack",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732050376.0,
        "title": "Help RE:  ads_data_redaction",
        "author": "ozzieowner",
        "id": "1gv7ylp",
        "selftext": "I am a rookie on this stuff but when looking at my google ads, I see that 99.9% of my hits have ads\\_data\\_redaction as FALSE.  Isnt this bad?  When I look up that parameter I interpret that a false means that my website is collecting user info even if they do NOT consent.  First of all, I do not think that much of my users are not providing consent.  Any insight would be greatly appreciated.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gv7ylp/help_re_ads_data_redaction/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Thank you for your answer but let me make sure I understand:\n\n1. I previously thought that if user denied cookies, ads\\_data\\_redaction would be set as false, but I think you are saying that it is set as true\n2. so that my data which shows 99.9% set at false means that most users are accepting cookies.\n\nDo I have that right?\n\nIf that is correct, now it seems so obvious:  if a user accepts cookies then no need to redact.",
                "author": "ozzieowner",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you run your tags when consent is denied and ads_data_redaction is set to true ads data will not be redacted from cookieless pings",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "The default is false, and it totally ok.  I use false on all my tags when consent management controls the tags if they fire or not.",
                "author": "aaronebennett",
                "score": 1
            },
            {
                "body": "Its actually good to keep it false.  \nWhen someone denies consent then the any data is not stored resulting is your campaign not learning, if ads\\_data\\_redaction is true.\n\nIf its false, even if someone denies consent there values will be stored resulting in data being to passed to google for learning, if ads\\_data\\_redaction is true.",
                "author": "Glittering-Lack8940",
                "score": 1
            },
            {
                "body": "Not quite. Ads data redaction is a separate setting from consent flags. It's an option to further redact ads data when ad_storage is denied. It is set to \"false\" by default, meaning that you have to manually change it to \"true\". Depending on your CMP or consent mode setup in GTM the default value for this flag will differ. \n\n\nRead more in the last info box on this page:\nhttps://support.google.com/google-ads/answer/13802165?hl=en\n\n\nAnd here:\nhttps://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced#redact_ads_data",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thank you very much!",
                "author": "ozzieowner",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723472567.0,
        "title": "Server container setup issue",
        "author": "decker027",
        "id": "1eqf1wh",
        "selftext": "For my personal website, I have gone through the steps on [https://developers.google.com/tag-platform/learn/sst-fundamentals](https://developers.google.com/tag-platform/learn/sst-fundamentals) but rather than using Google Cloud for the hosting I have opted for [taggrs.io](http://taggrs.io)\n\nWhen running preview mode I can see data being captured on both the Web container and the server container.\n\nI have been trying to get the same setup working for my work websites but using Google Cloud hosting.  When I preview my work website I can see tags fired against the web container and I can see hits sent in the Measurement ID of the GA Data stream.\n\nThese hits have the destination of my https://{Google cloud domain}/g/collect but when I check the GTM preview for my server container no data is being captured.\n\nI have tested the server container by going to https://{Google cloud domain}/healthy and the favicon is being picked up in the results.\n\nAppreciating that above is light on detail (for not sharing work information) has anybody else encountered these setup issues?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1eqf1wh/server_container_setup_issue/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Next to the preview button on the server container there is a drop-down to select domains. If you've added multiple domains to the container you will have to select the correct one before launching preview.\n\n\n\n\nIf that is not the issue I would double-check that the domains you've added to the container settings are correct.\n\n\n\n\nIf it still doesn't work, use the browser dev tools to double-check that the outgoing requests from the browser are sent to the correct url.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Thanks u/brannefterlasning \n\nMy Server container has a 'Google Analytics: GA4 (Web) client that is configured to use the Measurement ID from the data stream on my web site profile within Google Analytics. It also has a 'Google Analytics: GA4' tag that triggers on 'some events' when the 'Client Name' is equal to 'GA4'There is no option on the Server container preview to select from multiple domains.The Admin > Container Settings have the Server container URLs' set to my Google Cloud Server URL  \n  \nMy Web container has a 'Google Tag' that has a 'configuration setting' or 'server\\_Container\\_url' and this is also set to my Google Cloud Server URL and this is set to trigger on 'Initialization - All pages'.  \n  \nWhen I run both the Server container and web container in preview mode and check the browser dev tools I can see a 'fetch' to my {Google Cloud Server URL}/g/collect/ followed by a number of querystring parameters, but nothing appears on the preview of my server container. However if I copy the whole fetch request (eg https://{Google Cloud Server URL}/g/collect/ followed by a number of querystring parameters) and paste this URL into a browser then I can see the data being shown in the preview of my server container.",
                "author": "decker027",
                "score": 2
            },
            {
                "body": "Hi u/TAGGRS\\_io \n\nThe company I work for is embedded in Google tech, I used TAGGRS outside of our company network to double check the setup process",
                "author": "decker027",
                "score": 2
            },
            {
                "body": "Clear. If you need help with your TAGGRS setup we are here to help!",
                "author": "TAGGRS_io",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you using a GA4 event tag for sending data and if so did you add the parameter `server\\_container\\_url` and set it to `https://{Google cloud domain}` ?",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Hi Decker,\n\nThank you for choosing TAGGRS as your server side tracking partner! What is the reason you want to set up the same set up for your google cloud run accounts? \n\nWe are happy to help!\n\nRegards, \n\nAte - TAGGRS",
                "author": "TAGGRS_io",
                "score": 1
            },
            {
                "body": "Hi u/StefanAtWork \n\nYes my Web container has a 'Google Tag' that has a 'configuration setting' or 'server\\_Container\\_url' and this is also set to my Google Cloud Server URL and this is set to trigger on 'Initialization - All pages'.",
                "author": "decker027",
                "score": 1
            },
            {
                "body": ">When I run both the Server container and web container in preview mode and check the browser dev tools I can see a 'fetch' to my {Google Cloud Server URL}/g/collect/ followed by a number of querystring parameters, but nothing appears on the preview of my server container. However if I copy the whole fetch request (eg https://{Google Cloud Server URL}/g/collect/ followed by a number of querystring parameters) and paste this URL into a browser then I can see the data being shown in the preview of my server container. \n\n\n\n\nInteresting discrepancy. What is the status code for the request you see in dev tools when previewing the client-side container?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Reddit editor messed up my post...\n\n  \nChecking you meant \"server\\_container\\_url\" and not \"server\\_Container\\_url\" ?",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "It is '200 OK'.\n\nAs the web container preview is running on servers within my company network (though externally accsessible) we are looking at network/firewall blocking, as the g/collect does not appear to be getting captured on the Server container when requested from the web site (within the browser), but does when requested from the browser directly.",
                "author": "decker027",
                "score": 1
            },
            {
                "body": "Yes, though the typo on my post was my own and not reddits, container should have a lowercase 'c'",
                "author": "decker027",
                "score": 1
            },
            {
                "body": "Turns out that Chrome was blocking 3rd party cookies, once this was turned off the data was being captured  \n#RookieMistake",
                "author": "decker027",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724397883.0,
        "title": "Consent mode v2",
        "author": "wardogfufu",
        "id": "1ez6mzk",
        "selftext": "I’m a bit unsure about which cookies should be set to “granted” by default when implementing Consent Mode v2.\n\n* 'ad\\_storage'\n* 'ad\\_user\\_data'\n* 'ad\\_personalization'\n* 'analytics\\_storage'\n* 'personalization\\_storage'\n* 'functionality\\_storage'\n* 'security\\_storage'\n\nAny help would be awesome! Thanks:)",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ez6mzk/consent_mode_v2/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Everything should be \"denied\" by default.",
                "author": "Low_Inspection6571",
                "score": 3
            },
            {
                "body": "Got it—makes sense why `ad_user_data` and `ad_personalization` usually cover most bases.  \nAbout `functionality_storage` and `security_storage`, it sounds like keeping them set to \"granted\" by default is usually fine, right?",
                "author": "wardogfufu",
                "score": 3
            },
            {
                "body": "If you want things to \"look\" correct, set those two \"essential\" categories to granted, but it is unlikely to make any difference because site security and functionality is not (in my experience) managed by tags in GTM.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Realistically, you only need to worry about analytics\\_storage and ad\\_storage. ad\\_user\\_data and ad\\_personalization tend to be set to the same state as ad\\_storage.\n\nI've gone through dozens of Consent Mode projects and I have yet to find a client who has a configuration that would involve any of the other Consent Mode categories.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This is a misconception. It highly depends on what you have on your privacy policy and how the consent is implemented on the website.\n\nThey are only set to 'granted' because no built-in tag uses it and people don't normally use those to configure something. Otherwise, what's the point on having those options if they were to be always set to 'granted'. \n\nJust because some guide follows it doesn't mean you should be following it blindly. Most of the guides out there just focus on analytics & advertising.\n\n[https://i.postimg.cc/RCY8X8H2/image.png](https://i.postimg.cc/RCY8X8H2/image.png) on amazon.\n\n[https://cookie-script.com/knowledge-base/kb-functionality-cookies](https://cookie-script.com/knowledge-base/kb-functionality-cookies)\n\n[https://i.postimg.cc/WbWMGLqJ/image.png](https://i.postimg.cc/WbWMGLqJ/image.png) on cookie-script.",
                "author": "Low_Inspection6571",
                "score": 1
            },
            {
                "body": "makes sense! thanks:)",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "In general you are right, but there is nothing wrong with GTM loading these two categories of tags in some cases (especially \"functional\" ones).",
                "author": "NetWitcher",
                "score": 1
            },
            {
                "body": "I've gone through dozens of implementeations and a dozen more fixes of failed implementations and have yet to come across any requirement for a tag to be controlled by security\\_storage. I've seen one tag for one 3rd-party platform that you might argue would be best suited to be controlled by functionality\\_storage, but the documentation for the platform was less than clear about what data they collected and how it was used, so in the end ad\\_storage was still the most appropriate option.\n\nSetting security\\_storage to granted is purely for show. Users should not be given the option to opt out of that category, which de facto makes it \"necessary\" or \"essential\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "You’re right and there definitely are 3rd-party services that I’ve seen deployed in GTM that are functional.\n\nOne example is accessibe, which definitely adds functionality, but arguably is also necessary or essential.\n\nThat’s is what tends to happen is something is either essential, or it’s used for analytics or it’s marketing. Anything functional or security is also deemed as essential, so there’s no option in the cookie banner to individually switch those off and thus no benefit to mapping them to the relevant CoMo parameters.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "You're correct, but they provide an improved user experience without sharing information with third parties and ensure good functionality and UX. \n\nYou can have them disabled, but I'd rather not have visitors leave the site because the login doesn't work, they can't leave comments, or anything else that might not work.\n\nThat's why I said they should be enabled, not that they must be enabled.",
                "author": "zenith66",
                "score": 0
            },
            {
                "body": "wrong, functionality and storage should be granted.",
                "author": "zenith66",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1725937662.0,
        "title": "Google Tag Manager: consent mode.",
        "author": "Brilliant-Expert-328",
        "id": "1fd85w7",
        "selftext": "Hi everyone. Hope you are having a nice day.\n\nI can't get tag manager to work with consent mode. It's frustrating.\n\nI have a Google tag set up already but I cannot get it to work with one of the crm tools that Google says you can use. I've tried about 5 or 6 of them. I must be doing something wrong. Could anyone give me some tips or help? I'd appreciate it as I am just wasting time. Have a good one and thanks to anyone who can help. \n\n",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fd85w7/google_tag_manager_consent_mode/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Which Consent Management platform do you want to use? If it’s Cookie yes or cookie bot or any other cmp you can easily find the template on Google tag manager. After adding the template to your gtm container you have to create a tag using that template and put the cmp's unique code here. You will find that on the script provided by the consent management platform. Note: As you're setting this up from google tag manager so don’t put that script to the header. Then trigger the tag to consent initialization. Then configure consent settings,  for google you can choose no additional consent is required cause google tags automatically collects the data for other platforms you have to choose specific consents. Let me know if that helps",
                "author": "analyst_bappy",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yeah second that cookie yes is easy to implement",
                "author": "FirstPlaceSEO",
                "score": 1
            },
            {
                "body": "There is a couple of ways to do this. \n\nI think something to look at might be trigger groups (if consent a GTMweb template and it can fire an event), once consent is provided via the GTMweb template (or howevers), then use the trigger group to fire the actual event.\n\n  \nlike others have said, hard to say without knowing the CMP tbh.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "What isn’t working? There are some things that consent mode does that can easily be mistaken for things not working properly.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Listen to this person (full disclosure, that's my main Reddit account).\n\nI've gone through dozens of CMP implementation projects and uncountable Consent Mode projects on top of that.\n\nIf you're wondering why some tags are still firing without consent when you're looking at Tag Assistant, that's normal, so long as the tags are related to a Google platform. GA4 Event, Conversion Linker, Floodlights, Google Ads... they will all still fire without consent.\n\nYou can check this in Tag Assistant, but in reality it is best to jump into Chrome dev tools to have a look in the Network tab.\n\nFor GA4, filter the Network tab data with \"collect?v=2\" (or your GA4 measurement ID. Click on one of the hits. Click on \"Payload\". Look for the **gcs** parameter.\n\nPrior to granting consent, users in the UK and EU should not be tracked and the value of the **gcs** parameter should be **G100**\n\nAs soon as the user grants full consent, the value of the gcs parameter should be **G111**.\n\nI can get into so much more detail about this that you might want me to just not... but shout if you need more help.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thank you so much. It's working like you described. However the following situation is not really clear to me. Could you explain that for me please?\n\nSituation example (user has given full consent already)\n\n* The page is loaded and I can see that the gcs value = G111 in the network payload\n* When the user changes the consent to 'deny all', I don't see a new network payload with the value G100 (there's no page refresh happening)\n* However when the user switches back to 'accept all' there is a new network payload with the value G111\n\nIs this the correct behaviour? Is it true that the G100 won't get a new payload after denying the cookies?\n\nAnd as my final question. I have 1 Google Tag that is firing on initialisation, then the same Google Tag that is actually sending the send\\_page\\_view = true set for all pages.\n\n* Do I need to specify send\\_page\\_view = false for the first Google Tag?\n* Do I need to specify send\\_page\\_view = true for the all pages one?\n* Does the Google Tag set for all pages need any additional consent settings? Or can I just set it to 'No additional consent needed'?\n\nThanks in advance!",
                "author": "Maikelano",
                "score": 1
            },
            {
                "body": "Not having another network hit when a user changes consent from denied to allowed (or vice-versa) is fairly normal. I grant you, it does seem odd. What I surmise is that Google have decided it's not needed, because the next time the user does something that causes data to be sent to GA4 will mean the gcs parameter is updated to the correct value.\n\nIf it's a navigation action, you'll see a \\`user\\_engagement\\` event with the updated value for gcs.\n\n*This changes if you implement server-side GTM!* i.e. if you wonder why your GA4 network hits look different to those of some other site, it might be because they are using sGTM.\n\nYou don't need a second Google tag. You only need one, fired on initialization and with send\\_page\\_view set to false.\n\nFor measuring page views, create a GA4 Event tag, the event name will be page\\_view and you fire that on all pages with an All Pages Page View trigger.\n\nAssuming you're OK with the Consent Mode modelling - i.e. gcs=G100 / \"cookieless pings\", then you don't need to add additional consent requirements to Google tags (or GA4 Event tags, Conversion Linker etc). If you wanted to absolutely block the tags so that no data at all was being sent to Google without consent, you could add more consent requirements and that would cause the tags to stop firing.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thank you for taking your time to respond, this is really useful!",
                "author": "Maikelano",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1733260965.0,
        "title": "Conversion linker across domains",
        "author": "pkrtrsr",
        "id": "1h5yknw",
        "selftext": "Hey guys! \n\nDo I need the use the \"Enable linking across domains\" feature, if the scenario is: \"ecommerce site that uses a third-party payment processor, and users return to your site after checking out on the third-party domain\"?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h5yknw/conversion_linker_across_domains/",
        "num_comments": 4,
        "comments": [
            {
                "body": "No.  ad click -> landing page (google ads cookie set) -> checkout -> payment (3rd party site) -> thank you/confirmation page (back to your site where conversion tag triggers.  If payment fails you just make sure you don't trigger the conversion tag.",
                "author": "sumogringo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "would you need it if everything stays in a 3rd party per say?",
                "author": "Successful-Cabinet65",
                "score": 1
            },
            {
                "body": "no, but you still need to trigger the ad conversion from that ad click.  If the user stays on the 3rd party site no conversions would be tracked, nothing triggers it. The alternative could be creating an outbound link trigger to the 3rd party for the conversion, not the most accurate but at least your feeding google ads.  Otherwise your site would have to capture the gclid data, pass that into your 3rd party with the transaction, then upload it to google ads as an offline conversion after.",
                "author": "sumogringo",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1728554281.0,
        "title": "Capturing unique sessions count",
        "author": "FullSpare1352",
        "id": "1g0f8z6",
        "selftext": "Hey All,\n\nLooking to capture each unique session and saving it to a cookie; wondering the best way to do this? \n\nPreferably I would capture utm_source as well in path and a timestamp. \n\nFeel like unique session of should be in gtm web somewhere, but just can’t find it ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g0f8z6/capturing_unique_sessions_count/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Hey, \n\nWhat I was hoping to achieve is get a session ID from GTM and not in GA4. I guess I could just dump a unique ID into sessionStorage and then timestamp. Then check if its there in sessionStorage on subsequent pages. just feel like GTM would have it somewhere",
                "author": "FullSpare1352",
                "score": 2
            },
            {
                "body": "Thanks!",
                "author": "FullSpare1352",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sessions are inherently unique and will be deduplicated when summed in GA4 and Looker Studio, but if you want the session ID it's already in the \\_ga\\_<container ID> cookie, where <container ID> is usually the measurement ID of your GA4 data stream.\n\nGA4 cookies are first-party so you should be able to access that one via a first-party cookie variable if you want to do anything with it in GTM.\n\nI don't think you can access it normally in GA4 itself, but you can get it if you use the BigQuery export via the ga\\_session\\_id event parameter. You might also be able to store it in a custom dimension using that parameter, though [it's not recommended](https://support.google.com/analytics/answer/12226705?hl=en) to create custom dimensions that will have that many different values.",
                "author": "winless",
                "score": 1
            },
            {
                "body": "The session id is part of this example.\n\n\nhttps://drewspen.weebly.com/blog/anonymous-browser-client-id-and-session-id",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "The referral source is part of this example.\n\n\nhttps://drewspen.weebly.com/blog/sending-the-source-and-landing-page-to-a-crm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Ah, okay. GTM doesn't persist anything across pages on its own, so it doesn't have its own session ID to use. \n\nWhat you're suggesting there might not work exactly the way you want, since if any pages are opened in a new tab they'll have their own sessionStorage.\n\nAssuming that you have GA4 on the site, you might still want to piggyback on its session ID so that it can handle updating it for you on new sessions. Then maybe use localStorage or a first-party cookie to store the timestamp along with the session ID?\n\nYou could compare the GA4 session ID to the session ID you have in localStorage, and if the one in localStorage is different or missing you replace it with the current GA4 session ID and set a new timestamp.",
                "author": "winless",
                "score": 1
            },
            {
                "body": ">Thanks!\n\nYou're welcome!",
                "author": "exclaim_bot",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1701013026.0,
        "title": "Struggling to get OneTrust Consent Mode To Work With Google Tags",
        "author": "Key-Mountain-3616",
        "id": "184dbcq",
        "selftext": "Hi folks, I've been trying to implement consent mode with OneTrust & GTM, but running into a few issues.\n\n**My setup is as follows**:\n\n1. Tags set up in GTM (UA, GA4, Google Ads, Bing, Meta)\n2. Triggers set up via page view URL on all relevant tags. conversion actions etc\n3. Consent mode enabled in GTM and tags configured with 'no additional consent required'\n4. Consent mode enabled in OneTrust & Auto blocking turned off.\n5. OneTrust script is hardcoded to the site rather than being set up in GTM, and the OneTrust script is the first one that loads up on my site. We are not using a CMP Template.\n\nFurther info:\n\n**I've added this script before GTM code on my site head:**\n\n    <script>\n  // Define dataLayer and the gtag function.\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n\n  // Default ad_storage to 'denied'.\n  gtag('consent', 'default', {\n    'ad_storage': 'denied'\n  });\n</script>\n\n**And added this to the body:** \n\n    <script>\n  function consentGranted() {\n    gtag('consent', 'update', {\n      'ad_storage': 'granted'\n    });\n  }\n</script>\n\n**Further Info**\n\nIn preview mode, I can see my GTM tags fire, but in the consent section in GTM preview. Ad\\_storage is set to denied as expected for default.\n\nOnce I click on 'accept all' on my site's cookie banner, the 'ad\\_storage' is still denied, meaning the user consent is not updating on GTM.\n\nOn the network tab in chrome, I can see GSC: 100, no matter if consent is given or not, this does not change to GCS: 111 which would show 'consent granted'\n\nWhat am I doing wrong? How do I get this to work properly?\n\nThe odd thing is, even though GTM says consent denied, after accepting cookies, I can see a pageview on UA, meaning that the cookie banner is working as it should, but why is it the case that GTM say's its not granted?\n\nBased on what I'm seeing in GTM, would this mean that no conversions would this mean that no conversions would be reported in Google Ads? And is it true that If you don't see any GCS parameter in the network console, this means that consent mode is not configured? The fact that I can see parameters means consent mode is working somewhat?\n\nThe reason I ask this is we had OneTrust set up before using GTM tags, as we had old gtags on our site and although conversions were still being reported in GA4 & UA, we had 0 conversions coming through in Google ads as consent was not configured at the time. Based on this current set up, if all traffic is being set to denied, would Google ads just only show modelled conversions?\n\nWhat would be the cause of the issues we're seeing? What is the perfect way to set up consent mode?\n\nI would greatly appreciate any feedback on this matter. \n\nThanks!",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/184dbcq/struggling_to_get_onetrust_consent_mode_to_work/",
        "num_comments": 28,
        "comments": [
            {
                "body": "This is my area of expertise. It’s early and I haven’t had any coffee, but at first glance this sounds like Consent Mode has not been switched on inside OneTrust. Or, if it has been switched on then the OneTrust config needs to be published to make the change live.\n\nI’ll read your post a bit more carefully after I’m properly awake.\n\nProperly awake edit:\n\nYou say you have CoMo switched on in OneTrust, but can you confirm you've re-published the OneTrust script afterward? This is exactly what a client of mine recently forgot to do and ended up with exactly what you're seeing.\n\nIt might not be 100% criticial, but I would ensure your scripts are in this order:-\n\n1. The Consent Mode \"default\" script. *Please also add* `wait_for_update: 500` *as the final line in that script.*\n2. Any existing data layer pushes for e.g. global variables (you might not have this at all, it's not required)\n3. GTM\n4. OneTrust\n\nI'm more inclined to rely on GTM being able to pick up all of the events OneTrust pushes to the data layer if GTM loads before OneTrust does.\n\nGoogle native tags firing prior to consent / with consent denied is entirely normal with Google Consent Mode. Once it's working and you see the 'update' that sets gcs=G111, look in the network tab and you'll see UA and GA4 both re-sending the previous hit (where gcs was G100) with some subtle indicators to the platform about why the hit was sent i.e. it's not a duplicatation.\n\nYour non-Google tags should not be firing from a standard Initialization, All Pages, DOM Ready or Window Loaded. Facebook, Hotjar, TikTok etc should all move to firing on the OneTrustGroupsUpdated trigger.\n\n&#x200B;\n\nEven **more** awake edit:\n\nI'd missed the part where you added a CoMo update script to the <body>. You should remove that. OneTrust will take care of issuing the correct CoMo update command.\n\nEven with everything else  working as expected, by pushing ad\\_storage: \"granted\" in the update, you would defaulting all users to gcs=G110 without their consent, which is also not enough consent for UA or GA4 to fire (both ad\\_storage and analytics\\_storage must be granted).\n\nYou'll also be interfering with OneTrust's own issuance of the update command, which it does immediately prior to pushing OneTrustGroupsUpdated to the data layer.\n\n&#x200B;\n\nA mostly good example of a working implementation: https://www.magnet.co.uk/",
                "author": "DigitalStefan",
                "score": 4
            },
            {
                "body": "I do have Consent Mode 'turned on' inside OneTrust. However OneTrust does not appear reliable with this, and using the tag templates from 8-bit Sheep seems the best route.",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "You're going to need to hire someone to check it out. \n\nUpwork probably has someone that's good at OT",
                "author": null,
                "score": 2
            },
            {
                "body": "Here is my OneTrust implementation \n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "Interesting. Getting OneTrust implemented purely from GTM can be a challenge. Thanks for sharing.\n\nWorth pointing out that OneTrust can take responsibility for the Google Consent Mode \"update\" command, which I prefer wherever possible. I've used Simo's tag template for Google Consent Mode implementations, but only as a workaround for when there's no other way.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Just do a job search for onetrust\nLook for the guy with all the certifications. \nThere is only one.",
                "author": null,
                "score": 2
            },
            {
                "body": "I mean... I work in that field but Im not on Upwork or Fiverr.  I can give you my company's website if you want but our packages is better fitted for businesses that has many more things to get done. Such as websites, online marketing (Google/Microsoft Ads), social media management, etc",
                "author": "Apart-One4133",
                "score": 2
            },
            {
                "body": "Your website doesn't have any consent management and neither do the first two of your clients I looked at. The third client had a cookie banner, but was tracking me before I could opt-in.\n\nSorry, but that's not a good portforlio example when we're talking about consent management.\n\nIf you or any of your clients want help with implementing a cookie banner and eiher basic or advanced Google Consent Mode, I'm more than happy to help on a priced outcome basis.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "u/DigitalStefan your good example website collects data and sends it to Google without my consent, including \\_cid which with consent mode v2 correctly implemented should be empty.",
                "author": "Fresh-Excuse8408",
                "score": 1
            },
            {
                "body": "Thanks, we’ve definitely published the OT script, i’ll try with removing the update command",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "Hi, just wondering if you have any experience of implementing consent mode via Adobe Launch instead of GTM?",
                "author": "Danger_Mouse8",
                "score": 1
            },
            {
                "body": "If anyone does find someone on UpWork (or elsewhere) who has a good understanding of consent management, please let me know as well!\n\nSeems to be a rare skill.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thanks all for your comments. Upon further testing, I’ve noticed that my tags don’t fire at all unless consent is given. On the gtm preview it can’t pick up the tag unless i click on accept all cookies. \n\nThis is testing after removing cookies and then testing again… \n\nScenario: land on site, click accept all cookies, tags fire, but consent state denied\n\nScenario 2: land on site, don’t accept cookies, nothing being shown in gtm preview. \n\nI’m getting really confused about what’s going on",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "Note the value of `cid` and then either refresh the page or navigate to a new page if it lets you.\n\nCoMo V1 and V2 *should* randomise the client ID on each load until consent is granted. To my knowledge it is not supposed to be empty, but I’m happy to be corrected on this.\n\nYou should also see gcs=“G100” until consent is granted.\n\nEDIT: I should mention I pushed an update to their GTM this morning (prior to your post) and they've also recently updated their OneTrust script because it was sequencing data layer events incorrectly, but it should all be perfect now.\n\nI've just checked and `cid` is indeed being randomised and gcs=\"G100\", which is CoMo working as intended.\n\nThe context for why I remember this randomisation thing for `cid` is that for SPA's you're expected to take care of this randomisation yourself for virtual pageviews.\n\nFinal edit: Thankyou for taking the time to create an account to comment on my post, B.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I don't. You might have some luck in /r/adobeanalytics maybe. I don't see a specific Adobe Launch subreddit.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "sounds like onetrust is configured to use the restrictive / opt-out until opted in GDPR template. if your audience is the EU then that is the way it should behave. if not then you may want to look at configuring in the onetrust admin console a different onetrust content template that is appropriate for the location of your audience.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Here's a sneak peek of /r/AdobeAnalytics using the [top posts](https://np.reddit.com/r/AdobeAnalytics/top/?sort=top&t=year) of the year!\n\n\\#1: [Does Page load time affect Conversion? — Analysis](https://np.reddit.com/r/AdobeAnalytics/comments/13fcdla/does_page_load_time_affect_conversion_analysis/)  \n\\#2: [How to find conversion rate from a particular page?](https://np.reddit.com/r/AdobeAnalytics/comments/16lsd39/how_to_find_conversion_rate_from_a_particular_page/)  \n\\#3: [Is there a course or courses that covers start to finish implementation?](https://np.reddit.com/r/AdobeAnalytics/comments/17ymb52/is_there_a_course_or_courses_that_covers_start_to/)\n\n----\n^^I'm ^^a ^^bot, ^^beep ^^boop ^^| ^^Downvote ^^to ^^remove ^^| ^^[Contact](https://www.reddit.com/message/compose/?to=sneakpeekbot) ^^| ^^[Info](https://np.reddit.com/r/sneakpeekbot/) ^^| ^^[Opt-out](https://np.reddit.com/r/sneakpeekbot/comments/o8wk1r/blacklist_ix/) ^^| ^^[GitHub](https://github.com/ghnr/sneakpeekbot)",
                "author": "sneakpeekbot",
                "score": 1
            },
            {
                "body": "I'd forgotten OneTrust certs existed.\n\nNot sure if those certs actually cover \"get OneTrust working perfectly with GTM\", but that is still interesting. Thanks.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I work in that field :)\n\nI'm the only full-time employee in our company that knows how to \"do\" consent management. We work with some regular freelancers who also have the knowledge, but it's a challenge to find people with this niche.\n\nAlways looking for more freelancers.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I'd maybe reach out to OneTrust support, because I've worked with a number of clients and it has been exceptionally reliable. We had one instance where the client published the script after switching Consent Mode on and it caused odd behaviour, but OneTrust support stepped in and resolved it.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I understand, but isn’t the google tag supposed to fire anyway but under the GCS:100 parameter, and change to GCS:111 once consent is given. It’s not doing that at all",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "I would take a look. \nPretty sure the freelancer i am thinking of is also a GTM specialist. But it's been awhile since I've checked.",
                "author": null,
                "score": 1
            },
            {
                "body": "Alright our Website is Racedesign . ca (Although we are currently rebranding everything with a new website but that doesnt matter much )  Add us to your list of freelancers and we'll see whats happening going from there.",
                "author": "Apart-One4133",
                "score": 1
            },
            {
                "body": "what consent category have you assigned to your Google Tag? it should be an analytics tag so not firing in accordance with GDPR until opted in",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "We didnt do consent on our current website cause we're building a new one currently. And also keep in mind that we do more than web design so if the client hired us for managing his social media, managing their online marketing or designing an app, then it wouldnt be us that would be in charge of that .\n\nAs far as Im concerned, I do Google Ads campaign but I can certainly relay your point to our web designer and see what he says. Thanks for the heads up !",
                "author": "Apart-One4133",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1731918116.0,
        "title": "GTM Consent Mode OneTrust",
        "author": "RvdmSmaran",
        "id": "1gu05py",
        "selftext": "Could someone please review the below settings for the for the GTM consent setup and let me know which one is correct? Both setups are using the GTM Consent Configuration (Consent Mode) with the Taneli Salonen template.\n\n# Setup 1:\n\n**Standard consent parameters**\n\n* `analytics_storage`: `{{CM - OneTrust - performance C0002}}`\n* `functionality_storage`: `{{CM - OneTrust - functional C0003}}`\n* `personalization_storage`: `{{CM - OneTrust - targeting C0004}}`\n* `ad_storage`: `{{CM - OneTrust - targeting C0004}}`\n* `security_storage`: `{{CM - OneTrust - necessary C0001}}`\n\n**Consent Mode V2 parameters**\n\n* `ad_user_data`: `{{CM - OneTrust - targeting C0004}}`\n* `ad_personalization`: `{{CM - OneTrust - targeting C0004}}`\n\n# Setup 2:\n\n**Standard consent parameters**\n\n* `analytics_storage`: `{{CT - OneTrust - Analytics Consent C0002}}`\n* `functionality_storage`: `{{CT - OneTrust - Functional Consent C0003}}`\n* `personalization_storage`: `{{CT - OneTrust - Functional Consent C0003}}`\n* `ad_storage`: `{{CT - OneTrust - Advertising Consent C0004}}`\n* `security_storage`: `{{CT - OneTrust - Functional Consent C0003}}`\n\n**Consent Mode V2 parameters**\n\n* `ad_user_data`: `denied`\n* `ad_personalization`: `denied`",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gu05py/gtm_consent_mode_onetrust/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Any reason in particular for choosing OneTrust?",
                "author": "RandomUsername749",
                "score": 2
            },
            {
                "body": "I wondered the same thing.",
                "author": "thatguyinline",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If I'm following what you are trying to accomplish, then set up 1 is correct.\n\nAre you in the EU? Are you using OneTrust's own CMP template in GTM? Have to enable Google Consent Mode in your banner and published this in OneTrust?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "I’m not based in the EU, but I do have traffic coming from there. I’m using a Custom HTML tag in GTM for the OneTrust cookie banner. I’ve enabled Google Consent Mode within the banner and published it in OneTrust.",
                "author": "RvdmSmaran",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724082343.0,
        "title": "Implementing Consent Mode on GTM?",
        "author": "RavenGirl12",
        "id": "1ew556z",
        "selftext": "Hi!\n\nWith Google's decision to stop third party cookies, I was looking into implementing Consent Mode on the website. The way I understand this works is that if a person accepts cookies, data will be tracked. If they reject cookies, some non identifiable data will still be tracked. If they don't interact with the cookie banner, no data will be tracked. How do I implement this consent mode via GTM?\n\nWould really appreciate your help! Thank you!",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ew556z/implementing_consent_mode_on_gtm/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Not directly answering your question, but in case you haven’t seen, Google reversed their decision to deprecate third-party cookies (https://privacysandbox.com/news/privacy-sandbox-update/).",
                "author": "dkzfifty",
                "score": 3
            },
            {
                "body": "[https://www.youtube.com/watch?v=yZjGzfWDc0Y](https://www.youtube.com/watch?v=yZjGzfWDc0Y)   \n[https://youtu.be/WhHn9emIKHI?si=UOnCpSR\\_ZWBJpAF-](https://youtu.be/WhHn9emIKHI?si=UOnCpSR_ZWBJpAF-)\n\n  \nThey both do exactly the same, except that loves data has some general explanations in the first bit.",
                "author": "Few_Gate8607",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How I do it for OneTrust.   \n[https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm](https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "How I do it for Osano.  \n[https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I saw that many people have shared videos and blogs that should be useful for you. However, if you still need expert assistance, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Are you using wordpress? We finally got complianz working pretty easily. Worth a shot they have decent support also.",
                "author": "lefglag",
                "score": 1
            },
            {
                "body": "Hi, we created a full step by step guide for implementing Consent Mode V2 in Google Tag Manager. [https://taggrs.io/en/consent-mode-server-side-tagging/](https://taggrs.io/en/consent-mode-server-side-tagging/)",
                "author": "TAGGRS_io",
                "score": 1
            },
            {
                "body": "I implemented this on my site using Google Site Kit, WP Consent API (a plugin recommended in Site Kit), and the free version of complianz cookie banner.\n\nBasicaly complianz generates the cmplz\\_functional, cmplz\\_marketing and cmplz\\_preferences cookie choices, and the WP Consent API plugin sets them in the Tag Manager you set in Google Site Kit.   \nThe actions are set automatically (aparently), I tested my setup on some laptops and everything as intended.\n\nI didn't even followed the instructions at 19:54 mark on Leon's video [https://youtu.be/yZjGzfWDc0Y?si=WXBodr2-CwIpWfrW&t=1194](https://youtu.be/yZjGzfWDc0Y?si=WXBodr2-CwIpWfrW&t=1194) and In my case, it worked out of the box like I said earier.\n\nBut if I sugest you watch the whole video to figure out the whats, hows and why it works.\n\nPS: Don't waste your money with the premium services that work on subscriptions for something like this. They simply profit on the lack of information there is out there in this matter. In the \"worst case scenario\", if you want a more premium looking cookie banner, just buy the complianz personal license. (I'm not affiliated with anyone).\n\nif you are good at coding, you could even make your own cookie banner. Or ask GPT to help you out.\n\nGood Luck!",
                "author": "ZmeuraPi",
                "score": 1
            },
            {
                "body": "You can find the software use for Consent Mode in GTM Gallery, you’ll need schema/code from the service provider, if setting it up in GTM there are work arounds for those not opting in.",
                "author": "JoanLockwood",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716297176.0,
        "title": "Meta integration vs. Gtm -Shopify ",
        "author": "Flaky_Can_866",
        "id": "1cx7l37",
        "selftext": "I set up Google Tag Manager with all the events in the last few weeks to feed this data into the Meta Pixel.\n\nHowever, in the last few days, I wanted to test the normal Meta Pixel integration with Shopify again.\n\nI've had the integration through the app in place for a few days now, and performance has dropped by about 50%. Hardly any carts are being recorded. With the Google Tag, I generated more than three times as many carts.\n\nWhat are your experiences? Is the Meta Pixel reliable, or did I do something wrong in the Google Tag setup causing the tag to fire multiple times for an event?\n\nI tested both variants with the Meta Pixel Helper to see if everything was firing correctly.\n\nAs mentioned, this is for a Shopify store. Has anyone had experience with this topic? I'm just not sure if the Meta Pixel integration with the \"Facebook & Instagram\" app is reliable. I use CookieBot with both setups.",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cx7l37/meta_integration_vs_gtm_shopify/",
        "num_comments": 16,
        "comments": [
            {
                "body": "this sounds like an AI generated response",
                "author": "rlewis2019",
                "score": 5
            },
            {
                "body": "I haven’t tested both but I’d think the app would be more reliable since they use the API. \n\nYou can test extensively and find out. Also obviously possible your tag setup was firing multiple times you can check that too.",
                "author": "KalaBaZey",
                "score": 3
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Yeah I have, before, installed Pixel through theme.liquid and then setup a click tracking through the helper. It wasn’t as reliable as GTM.\n\nBut I thought ecommerce auto events should be better tracked through integration.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "In the coming days, I will pay more attention to this. I also thought that auto events should be better. Nowadays, I don’t trust meta",
                "author": "Flaky_Can_866",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How have you been able to use gtm?\n\nLast I checked they no longer allow custom code during checkout. So you can't add gtm there. \n\nThey have a weird feature where you can add gtm in a sandbox type thing, but it puts gtm in an frame and it doesn't work properly. \n\nI always use the integration.",
                "author": "aRLYCoolSalamndr",
                "score": 1
            },
            {
                "body": "I’ve been testing different api methods\n\nThe Shopify app does a pretty good job, but it’s limited, and I’m not savvy enough to know exactly what data is being sent to Facebook other than what events manager can show me. \n\nI know there are ways to see it, just haven’t figured it out yet.\n\nCheck out stape.io - they have an interesting set up if you need something outside the default app. \n\nOtherwise agree with the other comments that learning how to leverage gtm is a good idea both client side and server side.",
                "author": "found_it_online_01",
                "score": 1
            },
            {
                "body": "\nIn my current experience, there must be a difference. I always test it through preview mode and with the Meta Pixel Helper. The Meta Pixel Helper does work with both methods, but particularly the ‘add to carts’ don’t appear in the same quantity as they should.",
                "author": "Flaky_Can_866",
                "score": 1
            },
            {
                "body": "Now I set it back to the GTM. I’ve read about a lot of issues with the integration. At least I have my GTM as a backup, but what are others doing? I thought the integration must be good because they use an API.",
                "author": "Flaky_Can_866",
                "score": 1
            },
            {
                "body": "Thanks :) \n\nI have heard that server-side tracking with GTM on a Shopify website is not a popular method because Shopify somehow blocks it. Is that true?\nIn some you tube videos they talked about server side tracking with gtm but they not recommended for Shopify.",
                "author": "Flaky_Can_866",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1735557074.0,
        "title": "page view event in hybrid SPA setup with advanced consent mode",
        "author": "Pretty-Appearance226",
        "id": "1hpl1du",
        "selftext": "Our e-commerce store has a hybrid SPA setup.  True page reloads happen at least when a user visits the website and on the thank you page when a purchase is made. We have advanced consent mode implemented and I’m trying to fix the page_view event for non-Google platforms when a user has not interacted with the cookie banner yet.\n\nIf a user has never been on our webshop then a cookie banner is shown and, since ads cookies aren’t accepted yet, the facebook pageview for example is blocked. If a user then accepts all cookies we would miss out on the first page view. So, I added the cookieScriptUpdate as a trigger too. Now, the users page view event would initially be blocked as it should. Then, after accepting cookies, it would fire the page view event. But this leads to a new problem, if a user had already consented, a page load would result in our custom page view and the cookieScriptUpdate event to fire a page view event, resulting in 2 page views being sent.\n\nI can fix a workaround with custom HTML and CJS triggers and variables but was wondering if someone has a ‘cleaner’ solution.\n\nExample 1:\nUser visits first time > \npage_visit is blocked because no consent is given > \nuser accepts cookie > \npage view is fired with cookieScriptUpdate event\n\nExample 2:\nUser visits and consent is accepted in a previous session > \npage view fires on page_vist > \npage view fires again on cookieScriptUpdate\n\nAlways triggering it on the update statement isn’t possible since it would only show once at multiple pages due to the SPA setup.\n\nThanks in advance!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hpl1du/page_view_event_in_hybrid_spa_setup_with_advanced/",
        "num_comments": 1,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716242915.0,
        "title": "Server-side GTM modifies cid/user_pseudo_id",
        "author": "trp_wip",
        "id": "1cwrwyw",
        "selftext": "I have this situation: I go on a site and trigger some event. My cid is 123456.654321. The event is sent to GA4 then to BigQuery using server-side GTM. When I look that event up in BigQuery, instead seeing 123456.654321 as user\\_pseudo\\_id, I see something like this: WWO92tT9hGigaTC/LMLhvDAIpv1CVw6D98tNGJNNne0=.654321. Is this normal and how to fix it?\n\nSome IDs are normal numerical format, but most of them are as shown above",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cwrwyw/serverside_gtm_modifies_ciduser_pseudo_id/",
        "num_comments": 15,
        "comments": [
            {
                "body": "When working with sGTM you want to use the sGTM FPID - first party cookie. https://www.simoahava.com/analytics/fpid-cookie-google-analytics-server-side-tagging/",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "Thank you very much for the link!",
                "author": "trp_wip",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I'm mostly using native GA4 -> BigQuery integration and our user\\_pseudo\\_id is definitely in format of 123456.654321. I'm curious if you have anything special in GTM server container writing to BigQuery that may be manipulating with that first part of client\\_id. Doesn't this string ending with equals sign (before .) look like base64 encoded?",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "Oh, sorry, I am also sending to GA4 -> BigQuery. I should have written that down. I'll edit the post.\n\nNo, as far as I know, we don't send anything like that. Even when I look at my server-side event in Chrome Console, cid looks OK. But then inside BQ it becomes like that. \n\nNow that you mention it, it definitely looks like base64 encode.\n\nIt is also strange that some IDs are weird and some are in normal format",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "When you are saying \"when I look at my server-side event in Chrome Console\" do you mean using GTM debugger/preview session?",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "I use Adswerve dataLayer Inspector+ Chrome extension which lets me see what events are firing and what is in the dataLayer. That's what I meant.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "I have an idea. I just did a test on my demo setup, I basically opened up GTM preview on both web and server containers to inspect the actual payload that goes out to GA4 just to find out that I see the exact same \"weird\" base64 like format.\n\nAnd I just realised that this is content of FPID cookie, not ga cookie and this is because on GA4 client in server container I have set cookies settings to server-managed and not javascript managed.\n\nThis is not something we use in production so that's why I probably haven't seen it in BigQuery. Could you check your GA4 client settings? It's under \"more settings\" toggle.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "Oh my God, it is set to Server Managed! To get normal cids, I should just set to JavaScript managed and not touch Server Cookie Settings below?\n\nOr should I tick Migrate from JavaScript Managed Client ID?",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "Yup, if you switch the dropdown to JavaScript Managed the settings below should disappear.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "I'll make a switch and report results in a few days. Thanks a lot, I would've never figured it out!!!",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "It would be awesome if you can let us know. I did a quick test on the same demo instance and I saw that cid query param changed immediately. Just be aware that switching this will probably have impact on GA4 reporting, I'm not sure how they are handling it internally but I think it is effectively a user\\_id reset, so if you are using it in production environment you may need to asses the impact.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "My supervisor told me to leave it as it is, so I didn't make the change.",
                "author": "trp_wip",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716237426.0,
        "title": "Missing the \"Google Tag\" option when trying to make a new tag.",
        "author": "Hamadyne-R",
        "id": "1cwpraa",
        "selftext": "Like the title says, I am trying to set up my server-side tag manager with the new \"Google Tag\" tag type. However, when I go to select it, all I can see under the Google Analytics category are \"Google Analytics: GA4\" and \"Google Analytics: Universal Analytics\". I do not see the Google Tag type at all, and searching for it does not reveal it, either. \n\nI have checked my account permissions and I have the ability to publish, read, and write changes, so I should be able to add the right types. \n\nIs there another setting/permission that I need in order to access the Google Tag type?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cwpraa/missing_the_google_tag_option_when_trying_to_make/",
        "num_comments": 15,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I think there is just no Google Tag in server containers at the moment. Is there anything specific you need?",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "thanks for sharing. The guide you've linked describes setting up Google Tag in Web container. This tag forwards all events from the browser to server container and if you check in a web GTM container it should definitely be available.\n\nPart that needs to happen in server container is another step that sends our those events to destination services and I'm pretty sure Google Tag isn't available in server GTM.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "Google Tag should be available but in GTM Web container (not server container).",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "sGTM is different. Try this. https://drewspen.weebly.com/blog/overview-of-google-server-side-tag-management-sgtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I am looking to route data through my server-side implementation. [Following this documentation](https://developers.google.com/tag-platform/tag-manager/server-side/send-data?option=GTM) suggests that the Google Tag type *should* be there, but it isn't. I understand that some things have changed after Sept. 2023 but other [articles referencing this](https://www.analyticsmania.com/post/introduction-to-google-tag-manager-server-side-tagging/) are saying to use Google Tag.\n\nIdeally I would like to use Google Tag as originally laid out in documentation.",
                "author": "Hamadyne-R",
                "score": 1
            },
            {
                "body": "I'm a little confused, as both articles talk about server-side implementation. If Google Tag is not available, how do I make sure my data is getting to the server implementation?",
                "author": "Hamadyne-R",
                "score": 1
            },
            {
                "body": "If that is indeed the case, how do I ensure I can get my data to get to my GTM server container? What tags/variables/triggers do I need?",
                "author": "Hamadyne-R",
                "score": 1
            },
            {
                "body": "Also when working with sGTM you want to use the sGTM FPID - first party cookie. https://www.simoahava.com/analytics/fpid-cookie-google-analytics-server-side-tagging/",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "The documentation is talking about Google Tag in a standard GTM container. This is required\\* in order to have the user's browser send data to server-side GTM.\n\nThere is no Google Tag in a server-side context.\n\nServer-side GTM needs to receive data from somewhere and that somewhere is a standard web GTM container (usually!).\n\nThe method of passing data from the web GTM container to server-side is usually via the GA4 *protocol*. That can be confusing, because when you build out your tagging you may use the Google Tag and GA4 Event tags, but these are just conveniences as a way to transport data in a consistent format natively understood by the GA4 **client** in your server-side container.\n\n  \n\\*Other ways to transport data into server-side GTM exist, but using the GA4 protocol is the most common.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "That was actually documented in that link you shared earlier.\nYou set up Google Tag but ensure you pass your server container url as the param so it does not send events to GA4 public api but to your GTM server container. You trigger this tag on every event you want to send out.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "But that's the problem -- **I cannot select Google Tag at all in my server instance**. When going to choose a tag type, I do not see the option to select \"Google Tag\" as the tag type.",
                "author": "Hamadyne-R",
                "score": 1
            },
            {
                "body": "But you need to create not in **server** container but in **web container**. That's probably the confusing part. In order to implement whole setup you need to have both web (classic) GTM container and server container.  \nThe Google Tag should be created in web (classic) GTM.",
                "author": "small_foot_2490",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709908169.0,
        "title": "A tag read consent state before a default was set - don't understand why or how to get around it",
        "author": "pongohopper",
        "id": "1b9p9xt",
        "selftext": "I am using CookieYes... the preferred method of firing the tags is to read the values directly from the cookie it sets.  Ie if 'cookieyes-consent' cookie contains 'analytics:yes' then analytics is granted.  I have access to that basically immediately so can fire tags quickly on page load (when the consent initialization event occurs).  I am finding a problem though in a few places and will use the below example to describe it.\n\nI have a third-party tag called 'Example' with additional consent checks for 'analytics\\_storage' setup.  That tag is of type custom html and loads a js script.  At the end of that script I have 'dataLayer.push({'event':'ExampleLoaded'});' to push a DL event so I know it is loaded.\n\nA second tag, 'Example2' of type custom html, loads another script and fires on event 'ExampleLoaded'.  When this tag fires I get 'A tag read consent state before a default was set' showing in Tag Assistant under 'Consent Configuration Status'.  Now, I do not have additional consent settings set for this tag so it fires fine, BUT when I set it for 'analytics\\_storage' required the tag does not fire and is blocked due to consent status.\n\nHow can that be?  It only fires AFTER the first tag loads, which also requires 'analytics\\_storage' and that first tag does not give me this error about reading consent state before a default was set.\n\nBefore someone tells me to remove additional consent for the second tag because it is not needed (it only fires after the first tag was loaded and that tag requires consent) keep in mind this was the most basic example I could give.  I am noticing the same issue elsewhere in a similar manner.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b9p9xt/a_tag_read_consent_state_before_a_default_was_set/",
        "num_comments": 19,
        "comments": [
            {
                "body": "This is very similar to what I changed to the other day.  The difference is I created a trigger for all the different consent categories for true/false.  So say if something needs to fire on analytics I only fire when analytics is true when the cookie\\_consent\\_update event occurs.  If it needs analytics and ads then I fire on analytics true and an exception trigger for ads false... and so on.  The reason I went this direction was if I had a tag set to once per page... if the fire failed due to consent, then the user changed consent, it wouldn't fire again (once per page).  Setting it up this way I ensure the tags will fire successfully when the requirements are met even if the tag is set to once per page.\n\nI also left the Google tags, such as the conversion linker, the way they were as there is no need to change them.\n\nAppreciate the help and clarification... that helped a lot once I figured out the inner workings and the flow of how the consent happens, updates, etc.",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you're firing a tag on Consent Initialization (or Initialization, or Page View), you'll be able to see in preview mode that the order of operations doesn't line up with what you're describing.\n\nYou say you're reading consent state from the CookieYes cookie and using that to fire a tag, but then you say you're using \"additional consent\", which is what you use when Google Consent Mode is implemented.\n\nIf you're using Google Consent Mode, you don't want to fire non-Google tags before there's been a consent mode \"update\" pushed (shows up as one of the \"Consent\" events in tag assistant). If you fire tags prior to the custom event cookie\\_consent\\_update, you risk those tags firing before the consent mode \"update\".\n\nAre you actually using Google Consent Mode? i.e. are you either issuing a consent mode \"default\" via a hardcoded script on site, or are you using the CookieYes GTM tag template to implement CookieYes, which also has the option to initialise Google Consent Mode?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "So why are you adding consent checks to that tag if you don't have to?  And especially if those additional consents cause tag blocking?\n\n\n\nI see a number of irregularities::\n\n>I have access to that basically immediately so can fire tags quickly on page load (when the consent initialization event occurs)\n\n1. No, the consent initialization TRIGGER doesn't happen on page load. It happens way before the page drawing even begins.  That's the whole point of consent initialization.\n2. The Consent Initialization trigger should do one thing, and one thing only: fire an event that establishes the default consent settings for the page.  Reading the Cookies or displaying the banner should be part of the Consent Update process...totally separate from Consent Default.  You seem to be mixing the two.\n3. Custom HTML are some of the last things addressed on a page. [ I'm troubled by the use of Custom HTML here because it doesn't work the way people think it does](https://www.simoahava.com/analytics/custom-html-tag-guide-google-tag-manager/), and it comes with complications.  Get your developers off their asses and have them take care of the Javascript includes...it's not your job.  I'm 99% certain that the Custom HTML is connected to your problem.\n\nPlease don't include additional consent checks if you don't have to.    Please don't remove required consents to get the system to work without the error.\n\nIf you set up your system like the above, you shouldn't have your problem.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "Defaults come from the CookieYes tag in GTM - not hardcoded.  The issue was the actual values never get passed until the cookie\\_consent\\_update event hits (the default is used until that event happens) which is considerably later in the chain on page load.  I do understand what you are saying now, BUT if that is the case why do certain 3rd party tags (aka not Google), where I have set additional consent settings, not throw the same issue in Tag Assistant?\n\nEDIT - and yes, I have set CookieYes to use consent mode in the settings... I don't get why the actual values, if there are any, are not set during the consent initialization - that is the whole point of that event.\n\nEDIT 2 - This is also how they say to do so on their [site](https://www.cookieyes.com/documentation/block-third-party-cookies-with-google-tag-manager-and-cookieyes/).",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Consent Mode status can be updated one of two ways\n\n1. Via a gtag.js call\n2. Via the consent API\n\nThe CookieYes (and other, similar CMP) tag uses the consent API to set the default state.\n\nEither way, consent state is one of those nice and quick, but asynchronous operations, which sets up a situation where if you're not fully disciplined on when you fire your tags you will see inconsistent results from one tag to the next.\n\nThe instructions on their site are not the correct instructions for a Consent Mode environment. They describe what to do when you're not using Consent Mode.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Wrong.  Default values do NOT come from cookies.  You don't understand the meaning of Default consent.  Update values come from either cookies or the consent banner if a cookie was not present.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "You're getting confused because you're seeing inconsistent results from incorrect process.   Everything you need to fix the issues is here in this thread.\n\nGet rid of the Custom HTML first.   It's sloppy technique, and it will bite you.\n\nFrom [Google's documentation](https://developers.google.com/tag-platform/security/guides/consent-debugging#tag-manager_4):\n\n**Caution:** Don't use a custom HTML tag in Tag Manager to call the `gtag consent` command. Instead, set consent states using a template tag that uses the [custom template API](https://developers.google.com/tag-platform/tag-manager/templates/consent-apis).\n\n(note, this might not be the exact command you were using, but the principle applies)",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "From what I am seeing the inconsistencies are from gtm.  Simple logic says that if both tags have the same additional consent and one fires when an event in the first's code happens that I shouldn't get the 'A tag read consent state before a default was set' message on the second and not the first (these are not Google tags either).\n\nI have to laugh sometimes about how Google does things.  They come up with this Consent Initialization event and how you use it to set consent before anything else and yada yada.  In reality, the way consent mode works, it isn't even needed as you need to restructure all your tag firing regardless.  Now, if whatever fired in Consent Initialization was guaranteed to complete before the Initialization event that would make much more sense - as in a default consent state was guaranteed before the next event, but as mentioned everything is asynchronous.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "I was going to say that I'm used to seeing \"a tag read consent state\" from when I was using CookieBot via the tag template, because the CookieBot tag was reding the consent state before setting the defult (I'm assuming, I never checked because it wasn't important).\n\nBut with both CookieYes and OneTrust via their official tag templates, I'm not seeing the same issue.\n\nShort of getting on a screenshare call with you, here's the tagging setup for my test site with CookieYes where I'm not seeing any issues and everything (as far as I know) is set up per best practise.\n\n[https://ctrl.vi/i/qbdctm1Yp](https://ctrl.vi/i/qbdctm1Yp)",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Lmao. 6 month old post. Those mystery pulsing lasers must’ve really messed with your head.  Have a good holiday season this year buddy.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Glad I was of some help!\n\nIn general, I don't like conditional firing of triggers based on consent. It can make life just a little harder when you add more tags or need to do any maintenance.\n\nIf you focus on consent conditions being used to block tags, you have a much happier life. This was true before CoMo became widespread, was adopted by CoMo as the paradigm surrounging built-in versus additional consent and it makes any transition from non-CoMo to CoMo so much easier.\n\nUsing consent conditions in firing triggers is a bad practise arising from more than one of the popular CMP's official \"how to\" guides.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Hi, I'm just using GTM and I'm trying to pass the email into the data layer and am not seeing the 'email' when I troubleshoot (I'm doing this through the CSS selector and a DOM element) any thoughts/help I'm desperately trying to figure this out, and am getting nowhere.",
                "author": "Serious_Category1908",
                "score": 1
            },
            {
                "body": "Thanks u/StefanAtWork this is really useful - my set-up was the same as yours except I was firing the GA4 Config tag upon the cookie state analytics:yes as well - but what you're saying here makes sense.\n\nI was also using additional consent settings to prevent it firing too early, but I will adopt it to fire on Initialisation now instead as per your recommendation.\n\nI also updated my GAW tag and FB Pixel to fire on ads:yes storage granted - so do you recommend that all of these tracking code tags should just be done on Initialisation instead?\n\nAnd I haven't changed any event tags other than to add the additional consent setting.\n\nThanks so much :)\n\nEDIT - Sorry I'm not sure if you and u/DigitalStefan are one and the same?  But I looked at the screenshot again and saw that the FB pixel is actually fired on the ads:yes cookie change\n\nSo my question is, why the GA4 tag is on Initialisation and the pixel on the cookie event, why not both on one or the other?\n\nTo me they follow the same rules - they should fire as early as humanly possible with consent...\n\nI just want to understand before I make any more changes, as every change I make has to be done across about 5 accounts, it's very time consuming 😅\n\nThanks :)",
                "author": "Casey-Marketing",
                "score": 1
            },
            {
                "body": "Oooookay. Well that went very weird very quick. They have hotlines you can call if you need one.\n\nFor the record, the entire ‘issue’ was the way CookieYes behaves. Once I stopped using their events and default consent methods - and did it myself - everything behaved as expected.  I’d suggest being familiar with the entire story (CookieYes in this case) before acting you did. I’m going to go out on a limb and bet that isn’t the first time someone has said that to you.\n\nAgain, have fun with those lasers later this year.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "CSS selectors are my least enjoyable thing to deal with.\n\nAny possibility of finding a friendly web dev who can explicitly grab the email address and create a genuine data layer push event / push to the data layer as a universal variable?\n\ne.g. have a look at the code here: https://www.digitalstefan.com/ec/",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I tend to make an assumption that Google Consent Mode is being used, in which case you can almost pretend that you're not having to worry about consent state when you're defining triggers for Google platform tags (Google Tag, GA4 Event, Floodlight, Conversion Linker etc).\n\nConsent Mode pretty much handles things for you in the background.\n\nNon-Google tags however do not (yet) have any integration with Consent Mode, so e.g. Facebook main pixel tag still needs to be manually managed for consent, e.g. waiting on consent signals from your CMP.\n\nI try to at least use the Additional Consent as the fire / don't fire logic for such 3rd-party tags, because then you have a tidy, presentable Consent Overview report (which is *just about*  copy&pasteable into a spreadsheet) to cover your backside if you get quizzed on \"are we compliant?\").\n\nCMP's have mostly got themselves into a good state of maturity, so you don't have problems like the CMP's \"cookie\\_consent\\_update\" (or equivalent) data layer event being sent prior to Google Consent Mode state being updated - which causes Google tags to behave properly, but 3rd-party tags to not fire on the landing page.\n\nEven as recently as December 2023, this was not reliable. OneTrust managed to mess this up and we had to work around it until they fixed the issue.\n\nI'm rambling a bit. It's a complex topic with plenty of pitfalls and involves a whole lot of me trying to avoid saying \"you do it this way because I've already experienced what happens when you don't\"!\n\n(and yes, DigitalStefan is my non-work account ... usual caveat of \"opinions and statements made on any social media platform are my own and not endorsed by my employer\").",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1731421361.0,
        "title": "Has consent banner implemented in GTM significantly increased the bounce rate of your landing page?",
        "author": "trucker-123",
        "id": "1gpltj5",
        "selftext": "Hi. To make a long story short, I tried to implement a Cookie Script consent banner in GTM (Google Tag Manager) that only appears for customers in the UK and EU. I am finding out that this doesn't work well, because many conversions outside the UK and EU are not being counted in Google Ads (the technical reason is because \"Default Consent (Global)\" being set to \"Denied\" for my Cookie Script GTM tag settings and Google Ads support says it must be set to \"Denied\" after I talked with them).\n\nMy original plan was to only show the consent banner in the UK and EU (and/or other regions where it's mandatory).  But because some conversions outside the UK and EU are not being counted in Google Ads, the only way to address this situation is to show the Cookie Script consent banner to all my customers around the world, and the consent banner also probably needs to cover most of the landing page, to force an \"Accept\" all cookies or \"Reject\" from the customer (hopefully I can get most customers to \"Accept\" the cookies).\n\nNow my questions is, after you put up a consent banner that took up most of the landing page to force an \"Accept\" all cookies or \"Reject\" it from the customers, how was your bounce rate on your landing page? Did the bounce rate on your landing page increase significantly after you put up a consent banner ? Or did the bounce rate only increase slightly and the consent banner didn't stop many customers from browsing your website?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gpltj5/has_consent_banner_implemented_in_gtm/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You do not have to show a banner in many jurisdictions and you can safely set the default to \"granted\" also in many jurisdictions. Google are not exactly consistent in their knowledge or advice on this and also asking them this type of question is borderline asking them for legal advice, which they are not able to provide.\n\nHowever, to answer your question, a consent banner *will* cause some users to bounce. You may never know exactly how many because bounced users will not have given consent for their data to be used in your reports, so GA4 will either receive no data about them or minimal, redacted data. At best, Google Consent Mode might be able to model that data into your reports or you could make some educated guesses based on your BigQuery data (if Google Consent Mode is active).",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "> Google are not exactly consistent in their knowledge or advice on this and also asking them this type of question is borderline asking them for legal advice, which they are not able to provide.\n\nI am worried that Google has some mechanism to detect that the cookies are being set to \"Granted\" for a country/region outside of the UK/EU, especially with changing laws in every country around the world on cookies, and if they detect one infraction on my account down the road, my account could be suspended. \n\n> However, to answer your question, a consent banner will cause some users to bounce. You may never know exactly how many because bounced users will not have given consent for their data to be used in your reports, so GA4 will either receive no data about them or minimal, redacted data. At best, Google Consent Mode might be able to model that data into your reports or you could make some educated guesses based on your BigQuery data (if Google Consent Mode is active).\n\nThanks!   I would imagine that UK & EU users are used to seeing consent banners now so their bounce rate would be low.   But I am not sure if other users around the world, outside of the UK & EU, are used to consent banners now, so their bounce rates could be much higher when they see a consent banner.",
                "author": "trucker-123",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719663416.0,
        "title": "What out-of-the-box things are you doing with GTM? ",
        "author": "Kooky-Minimum-4799",
        "id": "1dr9x84",
        "selftext": "Always curious to hear how people are leveraging GTM outside of the standard metrics/pixel tracking. I am in SEO so over the years I've needed to learn how to implement things onsite should websites not have the capabilities for what I need. \n\nHere's a few things I've done to get my job done, when things get a little more complicated: \n\n1. **Structured data implementation**, both page-by-page, as well as dynamically generated based on page type (using JS and schema templates, then pulling CSS Selectors on page to keep unique depending on URL).\n2. **Title tag/meta description implementation:** sometimes, I've need to override title tags for sites that either don't have the capabilities I need or for dynamic/filtered URLs that don't exist in CMS. \n3. **Content injection:** leveraging JS + lookup tables to inject content into a page for same reasons above. \n4. **dataLayer work:** recently I have been working on firing custom dataLayers via GTM to identify or track certain things, like IP addresses (identifying spam so I can block those. I know, a database log would be easier, but look, let's get creative).\n\nInterested to hear what you may be using it for, outside the norm 😈",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dr9x84/what_outofthebox_things_are_you_doing_with_gtm/",
        "num_comments": 12,
        "comments": [
            {
                "body": "These are 4 things that I would actually never use GTM for lol.\n\nAll of these should be handled at the application or server layer and have mixed reliability if handled by GTM. I would just tell the client no (and have actually). \n\nFor one thing, changing content via JS is just going to cause confusion and maintainability issues. Not to mention if GTM doesn’t load (Adblock) now you have users having different experiences.",
                "author": "nakfil",
                "score": 7
            },
            {
                "body": "I’m doing as much as I can server side. Stuffing functions into GTM never really worked for me.\n\nI mean, technically it was working, but the site speed was impacted, people with aggressive adblocking lost functionality, and so on.",
                "author": "StupidityCanFly",
                "score": 4
            },
            {
                "body": "One unusual thing was to create a cookie that reads URL and based on UTM parameters sends traffic type information to GA4. I needed to identify different users within a company, so I had to do it via cookie. The idea was that they open one url once and then the cookie gets created and stored on their device. Then I would read the value of the cookie and send that data with the other tags.",
                "author": "trp_wip",
                "score": 3
            },
            {
                "body": "Well its not in GTM itself but I created a Google Sheet script where it runs everyday checking if the GTM container label is added to the site HTML. If not, it sends an email to me. I did that because there were times the TI team would change the site infrastructure and change the container label to the homolog instead of the production one.",
                "author": "le_ble",
                "score": 3
            },
            {
                "body": "I also used lookup tables + JS code to get all product names from the checkout into a string (product 1, product 2), so this way I can create a custom parameter inside GA4 ecommerce tags so they can be used as custom dimensions to create sub-properties of each individual products. This was needed because these products were in different subdomains and the checkout was in the main domain so they couldn't be selected using the sub-property filter.",
                "author": "le_ble",
                "score": 3
            },
            {
                "body": "Using GTM to work around bad dataLayer implementation code or to inject new events is the top 1 use case I have seen constantly across customers. \n\nQuite uncommon, I also saw one customer using it to modify CSS on specific pages, still in that \"quick fix\" spirit",
                "author": "RCoffee_mug",
                "score": 3
            },
            {
                "body": "As a fun hack and to demonstrate GTM’s functionality to my team, I built a mini content management solution on GTM for a simple microsite. \n\nSite codebase was pure HTML, CSS, and JavaScript and zero content. All content was contained in Custom HTML tags in GTM. Page view triggers were set up for each URL path, which loaded the page content. \n\nWould never use this in production, of course. But a good way to demonstrate that GTM is not necessarily only for analytics and ad tags; it’s a versatile code injection solution that can support asynchronous loading of many types of scripts and snippets.",
                "author": "GreenLight711",
                "score": 2
            },
            {
                "body": "If possible, I would move those hreflang tags to the application code side.\n\nHowever, it's possible they are working. Since hreflang tags are for search engines, the question is how do search engines handle them when injected via JS?\n\nGoogle has said that it is ok to inject structured data via GTM, so I suspect it will work ok to do the same with hreflang.\n\nI would try using the URL inspection tool in Google Search Console to check if they display there as a first step. And of course there are tools online to validate hreflang which you've probably used, too.\n\nUnlike some other search features, Google doesn't have a dedicated hreflang testing tool or GSC report unfortunately. They used to, but they removed it.\n\nAnother question is what other search engines or crawlers consume your content, and does this method work for them, as well?",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I use GTM to deploy href lang tags to my sites, is that bad practise?",
                "author": "KGpoo",
                "score": 1
            },
            {
                "body": "I said if things get complicated lol obviously i want to get it on the site first and foremost but if i need an alternative i have one. Last resort.",
                "author": "Kooky-Minimum-4799",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1729748656.0,
        "title": "Server-side GTM vs offline conversion import for Google Ads conversions?",
        "author": "LetsRidePartner",
        "id": "1gavl6h",
        "selftext": "I'm researching solutions for improving our ecom conversion tracking. Which of these solutions is going to be more accurate for attributing conversions to ads?\n\n1. Server-side GTM (using Stape in our case) with GA4 handling the Google Ads conversions, and the conversion data provided in the data layer when the user reaches the order confirmation page. The main issue I'm concerned about there is ad blockers, some of which can even apparently block this setup. And apparently some of them fiddle with the actual GA4 events/data layer updates to do the blocking.\n2. Offline conversion tracking. We can grab the GCLID when the user arrives at our site, store it in a server-side cookie, and retrieve it when the user reaches the order confirmation page. Then we can submit it to Google Ads as an offline conversion. The potential issue there is that it doesn't capture conversions that occur over multiple devices (some of which can be caught in approach #1 above with enhanced conversions).\n\nWe can implement either of these on a technical level, it's just a question of which approach is going to give us more robust conversion data?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gavl6h/serverside_gtm_vs_offline_conversion_import_for/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hi. For the 1st question, can you put a script to push datalayer in HTML rendered by server side?",
                "author": "Normal-boy-in-life",
                "score": 1
            },
            {
                "body": "I will suggest using webhooks. Which CMS?",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "To mitigate ad blockers, you’ll want to take more ownership of the data collection e.g. setup custom domains for the tracking script of Rudderstack which can pass the gclid, etc. to Google Ads conversion API via server side (as well as save all this first party data in your data warehouse).",
                "author": "Straight_Special_444",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1722954064.0,
        "title": "cid keeps on changing on every page load",
        "author": "trp_wip",
        "id": "1elj1uk",
        "selftext": "I have a GTM setup for a client. It is part Shopify (native connection to GA4) - part GTM (some custom events my company needs). What has recently started going on is that cid parameter in events change on each page, so I cannot keep track of user behavior and I am getting useless data. Two clients are like this.\n\nThe thing they have in common is [GDPR Legal Cookie by iubenda](https://apps.shopify.com/gdpr-legal-cookie) Shopify app. I am not sure if it is the cause since it is 'deactivated' in both clients, but it is the only thing that can reset cookies.\n\nDo you have any alternative idea what may cause this?\n\nEDIT: I fixed the problem and it was the app. After its deletion, everything went back to normal",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1elj1uk/cid_keeps_on_changing_on_every_page_load/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "> It is part Shopify (native connection to GA4) - part GTM\n\n\n\n\nDon't mix. Move everything to GTM.\n\n\n\n\n>I am not sure if it is the cause since it is 'deactivated' in both clients, but it is the only thing that can reset cookies.\n\n\n\n\nAre you sure cookies are actually being reset?\n\n\n\n\nWhat does your consent mode implementation look like?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "within your site user experience, is there significant cross domain traffic where the domains are not subdomains of a single parent domain? in other words, is there significant traffic for a single site user experience where you are moving between [example.com](http://example.com), [abc.com](http://abc.com), [xyz.com](http://xyz.com) and sample.com? if so these would all need to be set up in your GA4 stream settings so that GA4 knows these is actually a single, cross domain site user experience. not doing so i believe would result in multiple client\\_id and session\\_id values.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "The client doesn't want to implement consent, so nothing is actually there besides that application. When run in preview mode, in GTM consent is always set to granted.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "No, everything is on the same domain, which I cannot share due to the NDA. This is applicable to both clients.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "is your client an EU based business, or operates in EU markets? \"the client doesn't want to implement consent\" could have significant, negative legal implications if so.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Alright we'll have you actually confirmed that cookies are being reset or not set at all? The common denominator could be a likely cause. Since the plugin is deactivated already, why not try to remove it from one domain to see if it is the culprit?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Yes. we notify them, but they still refuse.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "I made my clients remove it and it worked. The cid remains the same",
                "author": "trp_wip",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715624816.0,
        "title": "Adding a tag to the tag template gallery",
        "author": "Yallone",
        "id": "1cr6hom",
        "selftext": "Hi there. I have built my own CMP as an alternative to Cookiebot and CookieYes. Now I want to add our tag template to the gallery as we would like to make it easier for our users to install the GTM tag. I have submitted my Github repository several days ago through Google's submission form, however, I have had no communication from Google or whatsoever. \n\nHow will I know that they have successfully received my submission, as well as when the tag has been accepted or denied? \n\nDoes anyone have experience with this? I look forward to hearing from you how the process has been and also what the common types of feedback are. Any input is appreciated.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cr6hom/adding_a_tag_to_the_tag_template_gallery/",
        "num_comments": 14,
        "comments": [
            {
                "body": "I did went through that recently. Same experience, no feedback whatsoever. Few months after the submission they just added few issues on the github repository, pointing out some possible bugs and things to improve regarding consent mode. I fixed those issues and couple of days later it was live in the gallery.\n\nI can check exact timelines, but yeah, it may be tricky to see when I did the submission given no confirmation.",
                "author": "small_foot_2490",
                "score": 2
            },
            {
                "body": "Oh, I looked into your profile and find your tool interesting 😁. Right now we do not have a landing page. If you want to test it, it is on the latest website that we’ve launched: https://vanvulpen.eu. The tool can be found at https://consent.studio. The JS for the banners follows the pattern of https://consent.studio/[site url]/banner.js. Is there anything else that you need?",
                "author": "Yallone",
                "score": 2
            },
            {
                "body": "That’s so cool! I do see exclamation marks for some of the tags but I do not see an explanation as to why that is. And everything works fine. Let me know!",
                "author": "Yallone",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Awesome!\n\nAs I read online, the waiting time for approval is very long. I can’t tell you the exact timeframe, though.",
                "author": "finnrt",
                "score": 1
            },
            {
                "body": "Really cool, good job ! Can we test it somewhere? I looked your profile but did not see a link. Let me know when it's live, I'll add it to [tagstack.io](http://tagstack.io) so you can monitor adoption",
                "author": "RCoffee_mug",
                "score": 1
            },
            {
                "body": "I hope that helps a little I'm not sure if there is any way to speed this up.\n\nI guess you may instruct users to import the template file manually in the meantime.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "This input is really valuable. Now I know what to expect. Thank you!",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Thanks for sharing anyways. Yeah, it got me wondering especially since after having submitted the link to the Git repo, I was like: is this it? But I got no confirmation whatsoever.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "That’s weird! I’ve never tried it out. Did you get a on-page confirmation? I don’t know if you can submit it twice just to double-check.",
                "author": "finnrt",
                "score": 1
            },
            {
                "body": "That's perfect, thank you, detection is now working for your banner! You can check it here: [https://tagstack.io/scan?url=vanvulpen.eu](https://tagstack.io/scan?url=vanvulpen.eu)",
                "author": "RCoffee_mug",
                "score": 1
            },
            {
                "body": "Shoot, sorry for that, could you please DM me the domain you used to search where you saw those strange exclamation marks?",
                "author": "RCoffee_mug",
                "score": 1
            },
            {
                "body": "It was the one you mentioned as well.",
                "author": "Yallone",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723650482.0,
        "title": "GTM only triggering on first visit",
        "author": "Competitive_Radio453",
        "id": "1es52mc",
        "selftext": "Hello, I found an odd issue with multiple GTM accounts of websites I help manage and I hope someone can help me out here.\n\nWhen making sure everything works as it should I noticed that on multiple GTM Accounts the GTM container only loads upon first website visit. So it loads correctly (with all required tags triggering) on first visit and then contianer does not load at all on any subsequent page I visit on the domain. I verified with legacy tag assistant and with manual check to page source, the code is 100% correctly implemented directly on the website (no plugins) in head and body.\n\n* This is happening on multiple sites, some on Wordpress some not.\n* I tried in incognito debug with and without accepting cookies - no change.\n* Even just refreshing the page make the GTM container not load.\n* I tried copying the \"?gtm\\_debug=\" part of URL and just pasting at the end of URL - and it fixes the debug, but only until i visit next page.\n* There are other Google tags found on site (via debug mode) that trigger even on subsequent pages, and they have source \"Tag in container GTM-123123123\" but the GTM container it is referncing does not even trigger after the first visit.\n\nThis started to happen recently (in last month) without any edits to websites or GTM because last time I was checking these same websites GTM implementation, this was 100% not happening.\n\nPlease help :)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1es52mc/gtm_only_triggering_on_first_visit/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you share a url ?",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "Is this just in debug mode - are events still being sent to you analytics platform like normal?",
                "author": "jsmoak808",
                "score": 1
            },
            {
                "body": "only if an event happens within that page and the ones GA4 picks up without GTM",
                "author": "Competitive_Radio453",
                "score": 1
            },
            {
                "body": "Are they single page web apps?",
                "author": "jsmoak808",
                "score": 1
            },
            {
                "body": "no, many pages with products and stuff",
                "author": "Competitive_Radio453",
                "score": 1
            },
            {
                "body": "Signal page web apps are a type of website.\nThey are components based. The Dom technically doesn't change just the components. I'd look up how they are handled in the browser.\nAs for GTM you can trigger based on history change etc.",
                "author": "jsmoak808",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718035582.0,
        "title": "GTM4WP adding extension to the URL of my website",
        "author": "Competitive-Lie2806",
        "id": "1dcp7dc",
        "selftext": "Hello,\n\n  \nI am using this plugin GTM4WP to track conversions on my website and especially enhanced conversions and fill the needed variables from the contact form but the only thing I am disliking in this plugin is that it is changing the URLs of my website once I navigate through the website pages  ?\\_gl=1\\*nn87qz\\*\\_up\\*MQ..\\*\\_ga\\*MTg5MzQwOTMzMi4xNzE4MDM1NTI3\\*\\_ga\\_WVGBCB4P7Z\\*MTcxODAzNTUyNi4xLjAuMTcxODAzNTUyNi4wLjAuMA.. this extension is being added making my URLs so long and uncomprehensive why is this added and how to get rid of it? \n\nthanks.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dcp7dc/gtm4wp_adding_extension_to_the_url_of_my_website/",
        "num_comments": 11,
        "comments": [
            {
                "body": "That's cross domain tracking added by ga4. \n\nMake sure all your links point to the same domain. A common one is domain.com points to www.domain.com and it adds the extra code.",
                "author": "benl5442",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you need cross domain tracking ? This isn’t bc of GTM4Wp plugin but cross domain config as other commenter said",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "The problem was with the consent banner plugin there was \"  gtag(\"set\", \"url\\_passthrough\", false);\" set to true by default so when it was set to false the problem was gone.",
                "author": "Competitive-Lie2806",
                "score": 1
            },
            {
                "body": "All links point to same domain. I've added the normal code of tag manager in header.php before and this extension didn't appear in my URL but when I added the gtm4wp plugin it added that.. is there another way to remove this? thanks.",
                "author": "Competitive-Lie2806",
                "score": 1
            },
            {
                "body": "When I deactivate the gtm4wp pluging and add the tagmanager code to my header.php this extension is removed..",
                "author": "Competitive-Lie2806",
                "score": 1
            },
            {
                "body": "We use GTM4WP plugin on 120 websites so I can say with confidence that something else is going on here. \n\nAs previously asked, do you need cross-domain tracking? Do you link between two domains like [www.domainA.com](http://www.domainA.com) and [www.domainB.com](http://www.domainB.com) that are both part of your website and you want to track in the same GA4 property?\n\nIf not, check Data stream tag settings \"Configure your domains\" \n\nAre you sure you're using the same GTM container ID when hardcoding vs. adding to GTM4WP?",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "You are right it was not because of the GTM4WP it was because of the cookie consent banner when cookies are disabled by the user",
                "author": "Competitive-Lie2806",
                "score": 1
            },
            {
                "body": "Interesting. Glad you sorted it out",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "Sorry I edit my comment now I am sure about the reason, when my cookies are enabled this extension goes away, when the disabled in the consent banner this extension is re-added to my url... I guess that way they store the cookies between pages without sending them anywhere if they don't have permission to do it..",
                "author": "Competitive-Lie2806",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1729011919.0,
        "title": "(failed) net::ERR_INTERNET_DISCONNECTED // NS_ERROR_FAILURE",
        "author": "Superb_Technician769",
        "id": "1g4cqbe",
        "selftext": "I have a problem with Google Tag Manager. I'm integrating it into WordPress, and regardless of whether I embed it directly into the template or through Real Cookie Banner, I get error messages. In Firefox, I see \"NS\\_ERROR\\_FAILURE\" because \"an unencrypted connection was used to retrieve the resource.\" In Chrome, the error is \"(failed) net::ERR\\_INTERNET\\_DISCONNECTED.\"\n\nThe page loads without issues, so it's not a general network problem. Additionally, when I directly access the link in Chrome ([https://www.googletagmanager.com/gtm.js?id=](https://www.googletagmanager.com/gtm.js?id=)\\*\\*\\*\\*\\*\\*), I am getting ERR\\_INTERNET\\_DISCONNECTED as well. The JavaScript was copied directly from Google Tag Manager.\n\nGoogle says the Tag Manager is correctly integrated during the test.\n\nIn Google Tag Manager, there are only tags for Google Analytics.   \n  \nWhere is the problem, and what can I do for further debugging?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g4cqbe/failed_neterr_internet_disconnected_ns_error/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Any solution here? Did you get anywhere?",
                "author": "TicketElectronic521",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718889227.0,
        "title": "will Facebook Pixel be blocked in Safari’s Private Browsing mode",
        "author": "supermarketeer12",
        "id": "1dkbbq1",
        "selftext": "Hello everyone,\n\nCan someone confirm if tracking by the Facebook Pixel would be blocked in Safari’s Private Browsing mode if the pixel is implemented directly in the source code rather than through Google Tag Manager (GTM)?",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dkbbq1/will_facebook_pixel_be_blocked_in_safaris_private/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Safari’s Private Browsing mode blocks known trackers, and the Facebook Pixel is definitely a known tracker. It will be blocked whether you implement it directly in the source code or through GTM.",
                "author": "TAGGRS_io",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, Safari Browser and many other browsers, along with ad blockers, can block your Facebook pixel whether implemented directly in the source code or through GTM. For seamless tracking, it's essential to configure Facebook Pixel Conversion API using GTM and employ a custom loader to ensure tracking persists even with ad blockers active. Ad blockers frequently obstruct sGTM as well.",
                "author": "MarketerErfan_",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717404434.0,
        "title": "Cookieless pings. Getting different results.",
        "author": "Agreeable_Anteater21",
        "id": "1d6zsx5",
        "selftext": "Hi there,\n\nI recently landed a job as a data analyst and I take care of the integration with GTM, GA4, Ads, etc. It has been really fun so far, except dealing with cookie management, especially Consent Mode V2.\n\nNow to my question: I have a CMP installed, which supposedly already integrates the \"advanced consent mode\" that is supposed to send cookieless pings with anonymous data from users who do not accept consent. So far, my experiments have returned 0 information in GA4. I've also made conversion tests, and in 1 out of 2 cases, the conversion has shown up in Google Ads but not in GA4.\n\nIs anybody else experiencing such inconsistencies? Has anybody been able to set things up so that it's reliable and actually understands what is going on?\n\nThank you a lot in advance.\n\n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d6zsx5/cookieless_pings_getting_different_results/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Are you expecting to see the cookieless pings data in GA4? Correct me if I'm wrong but I think the whole point is that this data won't show up directly in GA4 reporting and will \"only\" be used for data modelling behind blended identity reporting option.",
                "author": "small_foot_2490",
                "score": 8
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 4
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You’re correct - hope OP sees this response!",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Thank you u/parkrangerDK , I found the menu in the GA4 admin section. Data modeling shows up as inactive still, probably due to lack of enough visitors.",
                "author": "Agreeable_Anteater21",
                "score": 1
            },
            {
                "body": "It's reasonable considering it's not easy to understand it since it's not really clear how it works, and nobody is getting the cookie banners/gdpr correct.",
                "author": "ResearchScience2000",
                "score": 1
            },
            {
                "body": "Got it. I don’t fully understand that either. I just thought that data analysts are exactly the people I would ask for help if needed.",
                "author": "jakub_curik",
                "score": 1
            },
            {
                "body": "You don't need to thank me. My comment is not related to problem with cookieless pings. Other redditors already answered and they're right.",
                "author": "jakub_curik",
                "score": 1
            },
            {
                "body": "u/jakub_curik thanks for your very useful comment.",
                "author": "Agreeable_Anteater21",
                "score": 0
            },
            {
                "body": "You landed job as a data analyst and still you are asking that? Don't get me wrong. I am happy for you and wish you the best but holy fuck.",
                "author": "jakub_curik",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716757058.0,
        "title": "Google Ads / Meta Pixel - is de-duplication merging or discarding?",
        "author": "small_foot_2490",
        "id": "1d1b0rw",
        "selftext": "I'm trying to combine browser- and server-side tracking for both platforms relying on transaction ID to let them de-duplicate each conversion.\n\nI'm thinking about that because with browser-side tracking I can more easily provide cookies and UTMs, while I can quickly enrich server-side calls with enhanced conversion / advanced matching data.\n\nBut I'm not sure if that would even work as expected.\n\nIs de-duplication simply about discarding any consecutive events or can it merge data together to maximise data tracked for certain conversion?\n\nTried to search any information about that, but well... those platforms are not very transparent.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d1b0rw/google_ads_meta_pixel_is_deduplication_merging_or/",
        "num_comments": 11,
        "comments": [
            {
                "body": "For meta the events need matching names (i.e Purchase) and event IDs.  You could use the transaction ids for events ids if they’re unique.  Or there’s a unique event ID variable template.  Then you just pass that to the server side.",
                "author": "brettfish34",
                "score": 2
            },
            {
                "body": "I cannot speak for Google Ads, but for Meta, the deduplication functionality does not merge the events; it only discards the deduplicated event.  \n  \nAdditionally, it is worth noting how Meta determines which event to discard. Meta will “prefer” (in their own words) the event that is received first, which in almost all cases will be your client-side event. I have done some testing to verify this and can confirm that if Meta receives an event from the browser and then receives the same event from the server-side Conversion API, the server-side event will be discarded because the client-side event was received first. From my testing, this will be the case event though you are sending extra identifiers with the server-side event.\n\nIn my opinion, this is a disappointing way of handling deduplication, but we have to work with what we got. If you’re looking to pass extra identifiers with the server-side event, then you’re probably better off only having server-side tracking, as having a client-side pixel will result in the server-side events being discarded most of the time. Keep in mind that you can still pass cookies and query parameters/UTM with the server-side events.\n\nI hope this clears things up.",
                "author": "dkzfifty",
                "score": 2
            },
            {
                "body": "The most specific answer I could find is \"If we find the same server key combination (`event_id` and `event_name`) **and** browser key combination (`eventID` and `event`) sent to the same Pixel ID within 48 hours, we discard the subsequent events.\" (from https://developers.facebook.com/docs/marketing-api/conversions-api/deduplicate-pixel-and-server-events/), but the rest of docs seem to be vaguely hinting on some obscure algorithms that intelligently decide which event to prefer (which IMO would be impossible without huge processing delays)",
                "author": "paul_944",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This is not entirely true. It seems as though Meta has advanced algorithms to determine which event to prefer. Their own documentation states: \"Once the events are received, we employ a number of strategies to deduplicate between the events which may help improve optimization and measurement. If server and pixel events do not differ meaningfully in their content, we generally prefer the event that is received first.\"\n\nIn our case, we send extra metadata using Conversions API and it seems that Meta is prefering and counting that event as it contains significantly more information than the event sent from pixel-side.",
                "author": "BleepBlob",
                "score": 1
            },
            {
                "body": "Thank you for pointing this out, as it wasn’t clear in my previous comment. Yes, Meta will try to select the richest request. The question here is how different the requests need to be for the server-side one to be favored.\n\nWe are enriching the server-side request with additional identifiers from the CRM; however, the requests apparently still aren’t considered to “differ meaningfully” and the server-side request is still discarded Therefore, it’s worth testing this out before deciding on a hybrid client/server-side approach, as the deduplication logic is not entirely clear",
                "author": "dkzfifty",
                "score": 1
            },
            {
                "body": "But how do you know it's discarded? In our case, it says deduplicated on the server events, but the parameters being sent in the server event are still getting propagated to the data source. For example: it includes the value, currency, etc. data (which does not come from browser-side).",
                "author": "BleepBlob",
                "score": 1
            },
            {
                "body": "Interesting. We have not seen this propagation of parameters from the deduplicated events.\n\nMeta states the following in a tooltip on the deduplicated event:  \n*\"This event was sent but dropped because it is a duplicate of an identical event that’s already been sent. Facebook de-duplicates events that have the same event ID to avoid over-counting the total number of events received.\"*\n\nThis is despite passing extra identifiers with the server-side request. Assuming this might be an interface issue or just unclear wording on the tooltip, we tested a hybrid setup using both the Conversion API and the client-side pixel, comparing it against a setup using only the Conversion API. When comparing Event Match Quality Scores, the setup running solely on the Conversion API received the extra identifiers much more consistently than the hybrid setup.\n\nIt’s possible that this behaviour has changed since our tests about a year ago, or that our case may have been an outlier. Still, I think it’s worth testing for anyone looking to use the Conversion API, before deciding on a hybrid vs. server-side-only setup",
                "author": "dkzfifty",
                "score": 1
            },
            {
                "body": "I'm in the same situation, glad I stumbled on this. Meta explicitly instructs you send both client side and server events and link them via event\\_id, so I find it hard to believe they're totally throwing out my server events which arrive .1 seconds later which contain the actual relevant info like click id and other stuff etc.\n\nside note -- implementing this tracking as a solo founder is an insane lift. I guess this is good knowledge to have for my actual job but still. or maybe I just need to get good",
                "author": "FormerObligation3410",
                "score": 1
            },
            {
                "body": "interesting, should I just throw out / disable client side events entirely and only use server? i've now wasted a week dedicated to sending everything client + server and linking the damn event\\_id only to now be questioning it.... arggg. wasn't sure if deepseek was capping so I stumbled on this thread",
                "author": "FormerObligation3410",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1726846933.0,
        "title": "No tag was found",
        "author": "LayerAdmirable3379",
        "id": "1flf3do",
        "selftext": "Hello,\n\n  \nI placed my google tag code on every website page I have. It looks like this works, since GTM says the 'tags' are being found. But when im previewing in the debug, it says no tags found, but when inspecting the page, I literally see the tag...\n\n  \nAnyone who has some recommendations?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1flf3do/no_tag_was_found/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Make sure your tag is the correct tag and the placement is correct. The script tag should be placed as high in the <head> as possible. \n\nScreenshots of your debug preview would be useful as well!",
                "author": "growthiqdigital",
                "score": 1
            },
            {
                "body": "Clear your browser's cookies for that site and then preview it again. When prompted for cookie consent, accept all of them and see you GTM debug.",
                "author": "Smooth_Dingo_8436",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723847196.0,
        "title": "Tag getting fired even when the trigger is setup",
        "author": "Recent_Marsupial_392",
        "id": "1eu1ur8",
        "selftext": "So currently i have a consent form which when accepted should trigger a tag only if the page path contains /test.  If i accept the consent cookie on page that doesnt have the page path /test, it shouldn't fire that tag but right now it's still firing even when i accept it from another page which doesnt have it.   \n  \nPlease help\n\n\n\n ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1eu1ur8/tag_getting_fired_even_when_the_trigger_is_setup/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you screenshot the tag setup ?",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "Trigger too please",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "Yeah OP, you've described what SHOULD happen, but the devil is going to be in how you technically implemented this. \n\n\nWe need those details.",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "Images are not allowed so unable to post it :(",
                "author": "Recent_Marsupial_392",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715013174.0,
        "title": "GTM Custom Javascript variable returning undefined whatever",
        "author": "Fakereke",
        "id": "1clng7k",
        "selftext": "Hello, i tried to find solution to my problem regarding custom javascript variable returning undefined whatever. I am new to GTM and I absolutly cant get why it behaves like it even for so trivial code like:\n\n`function(){`\n\n  `return \"test\"`\n\n`}`\n\nI get this result in Tag Assistent : **cjs\\_ad\\_storage undefined undefined.**\n\nI tried almost everything, seted default empty var variable, assigne value to it and after that return it. No matter what always undefined. I even tried to search for like settings if I have to allow it, couldnt find anything.\n\nI am already pretty desperate after 2 days fighting with cookies :D.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1clng7k/gtm_custom_javascript_variable_returning/",
        "num_comments": 12,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I am retrieving my own consent from the web and i want to like extract 1 specific cookie from it and thats ad_storage. And control Facebook pixel fbq tracking script by it, like track when ad_storage get granted. Dont see any other way how to enable it by consent, because in the original script, pixel is firing immidietly always with their init per page view.\n\nSo long story short, I just need to somehow start running the js custom variable but it always return undefined and i dont know why in every case, doesnt matter what i put in the function.",
                "author": "Fakereke",
                "score": 1
            },
            {
                "body": "i think you're trying to make this a little too complicated.\n\nif you want the fbq pixel to fire after consent is granted, make that your trigger. in the variables tab there are dozens of preset variables you can use. find an if else, and if the ad\\_consent is granted, set that as true, then your trigger for the pixel would be ad\\_consent = TRUE. \n\nDM me if you want me to take a look at what you're trying to do ... have 10 years of GTM experience",
                "author": "Broserdooder1981",
                "score": 1
            },
            {
                "body": "Thanks for help man 😄. I am more into FE developing than hacking cookies, they somehow looks easy but in reality accomplish there something like I had described is out of mind for me. I just cant find like the source of origin of the consenst i have manualy implemented in my project and pushing with gtag update consent function.\n\nSo I find that maybe i can put the values in cookies itself a reach them as 1st class cookies and from them get the value of ad\\_storage as trigger. So there is a way how to like take the ad\\_storage directly when i am updating with gtga consent update and have them in my data Layer? Searched like 8 hours today for it and couldnt find single clue how to reach it.... Thought it should be like the basics and mandarory itself 😄.",
                "author": "Fakereke",
                "score": 1
            },
            {
                "body": "Can I see, how the cookies values are appears in your datalayer?",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Today i discovered that exists the comunity template GTM consent state by [Ayudante](https://github.com/Ayudante), which watch the consents state value, so i am gonna use that when my own function doesnt work :D.\n\nAnd i even have find answer to my first question for another lost Develepers in future :D. https://stackoverflow.com/questions/77302341/always-undefined-javascript-function-in-google-tag-manager.  \nIts due CSP I set up.",
                "author": "Fakereke",
                "score": 1
            },
            {
                "body": "Which CMP do you use?\n\nIf, for example, Cookiebot, then after accepting/refusing cookies, you will have a cookie\\_consent\\_update push\n\nYou just select it as a trigger in the basic FB tag (aka page\\_view) and in the tag itself, set Consent Settings - Require additional consent for tag to fire - ad\\_storage\n\nThat's all)",
                "author": "Puzzleheaded-Week305",
                "score": 1
            },
            {
                "body": "{\n\n\"0\": \"consent\",\n\n\"1\": \"default\",\n\n\"2\": {\n\n\"functionality\\_storage\": \"granted\",\n\n\"security\\_storage\": \"granted\",\n\n\"analytics\\_storage\": \"denied\",\n\n\"personalization\\_storage\": \"denied\",\n\n\"ad\\_storage\": \"denied\",\n\n\"ad\\_personalization\": \"denied\",\n\n\"ad\\_user\\_data\": \"denied\",\n\n\"wait\\_for\\_update\": 2000\n\n}\n\n}\n\nI am taking them as 1st Party cookie in this format:\n\n{\"functionality\\_storage\":true,\"security\\_storage\":true,\"analytics\\_storage\":false,\"personalization\\_storage\":true,\"ad\\_storage\":true,\"ad\\_personalization\":true,\"ad\\_user\\_data\":true}\n\nSomehow i want to connect the value of ad\\_storage with separate script in GTM that just fires Facebook pixel\n\n<script>  \nfbq('track', 'PageView');  \n</script>",
                "author": "Fakereke",
                "score": 1
            },
            {
                "body": "I came here \"from the future\" to just say thank you, was just having the exact same issue and couldn't find a solution elsewhere, you saved me!",
                "author": "RSho3333",
                "score": 1
            },
            {
                "body": "Yeah it would be easy using any CSP unfortunaly we have embeded the whole gtm and banner manualy, so i am fighting with it 😄. I have already all prepared, but problem is the pixel is firing always when the container is loaded. I delete from the FB script the fbq track page View and let only the init there. Still it fires on PageView. Momentaly looking for any solid manual implementation, how to set up the FB pixel and connect it with my trigger functions  aka fbq(consent granted) and fbq(consent revoke) 😄.",
                "author": "Fakereke",
                "score": 1
            },
            {
                "body": "What are you trying to achieve? Seems like a cookie problem. You might need to store the JS variable in a cookie and then retrieve it.",
                "author": "KalaBaZey",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716050709.0,
        "title": "CMP for a SPA - Google Consent Mode v2",
        "author": "puk789",
        "id": "1cv1gt1",
        "selftext": "After multiple implementations of Consent Mode v2 via GTM (and having tried multiple different CMPs), I'm finding that it's quite a pain in the ass to work with SPAs (Single Page Apps).\n\nThe CMPs often don't send any data layer push when user chooses to change their consent after initially having accepted (e.g. for only a specific cookie category, not all), making it really difficult to update the consent in real time using GTM, and what's worse, potentially leading to non-compliance. \n\nOr, other CMPs don't work with SPAs in a sense that the Privacy trigger (the button with which user can change preferences that's meant to be visible at all times) disappears when navigating to a different page (again, hello non-compliance). And I'm not talking any CMPs here... but the big names like CookieBot or CookieScript.\n\nI have a skilled developer friend who has built his own cookie tool that can communicate the consent signals to Google on a regular website as well as SPAs and we're playing with an idea to build a simple CMP that would be easy to work with using GTM (would provide all the necessary data layer pushes, etc.) and would support not only regular pages, but also SPAs.\n\nWould there be anyone interested in helping us beta test when ready and potentially having a say in the tool's features? Or are y'all satisfied with the CMP(s) that you're using?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cv1gt1/cmp_for_a_spa_google_consent_mode_v2/",
        "num_comments": 11,
        "comments": [
            {
                "body": "I’d be interested. Though I have to ask, isn’t it possible to use JS to listen to the changes in consent and send them to the datalayer?",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "I'm interested too",
                "author": "analyst_bappy",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Funny, me and my team have built exactly this recently and we have just made it publicly available.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "In my experience, the popular CMP's always send a data layer event when consent is either established during page load (user previously granted / denied) or when a user makes any change to their consent.\n\nCookieBot, CookieYes, OneTrust CookiePro.\n\nDo you have an example where e.g. CookieBot is not sending the correct signal?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yeah, you can listen to clicks based on e.g. classes, or do other similar workarounds, however, I wouldn't vouch for the reliability of this approach. I'll DM you more info about the testing tomorrow!",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "great, sending you a DM! u/analyst_bappy",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "For anyone interested: the link is [https://consent.studio](https://consent.studio)",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "u/DigitalStefan for example, I'm working on a SPA that's using InstantClick, which is interfering with the CookieBot's privacy trigger, which disappears on the next page load. Also, for some reason it doesn't emit the cookie\\_consent\\_update data layer pushes and I often need to do workarounds and my own listeners, which isn't a very reliable long-term setup.   \nAlso, CookieScript and some other CMPs that I've worked with don't work well with SPAs, only pushing the data into the data layer for all categories, but not when users accept/deny just some of them.",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "I’ve not come across this behaviour at all. If you have any URLs you can share where there are problems I would like to dig a bit deeper into that.\n\nCookieBot certainly has not always been perfect but I’ve never had to fight with it in the way you describe.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721986493.0,
        "title": "User ID not showing up in Google Analytics",
        "author": "Inevitable_Job_492",
        "id": "1ecjxcp",
        "selftext": "I've set up Google Tag Manager for my website. I pull in User ID to a variable from a 1st party cookie I create when the user logs in, and I attach the User ID as a user\\_id parameter on my tags. In preview mode, I can see the user\\_id. However, when I go to Google Analytics, the user\\_id doesn't show up in either Realtime Reporting or the DebugView. It's as if the pathway to getting the user\\_id dies right at Google Analytics. Other parameters make it through just fine. It's just user\\_id that fails. Help?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ecjxcp/user_id_not_showing_up_in_google_analytics/",
        "num_comments": 7,
        "comments": [
            {
                "body": "What industry are you?   Finance not allowed to have userid\n\nChevk in the admin panel of GA4 for userid reference",
                "author": "Far_Highlight_4334",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "can't see it in DebugView either. I'm looking at the User Explorer report for debugging",
                "author": "ToughGreen1903",
                "score": 1
            },
            {
                "body": "Any news here ? Having the same issue",
                "author": "addict75",
                "score": 1
            },
            {
                "body": "How do you know this ? Is there a list of restricted industries for userid ?",
                "author": "addict75",
                "score": 1
            },
            {
                "body": "Same for me, but the user explorer updates so slowly.",
                "author": "Inevitable_Job_492",
                "score": 1
            },
            {
                "body": "little bit late but I saw user\\_id in debug view in a property from one of my clients. the difference is clients google tag set-up is old. we added user\\_id to user properties when google tag was a ga4 config. tag. now, the user properties section is deleted from google tag but old set-ups still work.",
                "author": "ToughGreen1903",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719933491.0,
        "title": "Need help setting up GTM4WP and consent mode",
        "author": "Dry-Connection9911",
        "id": "1dtod59",
        "selftext": "I have a WooCommerce site where I use GTM4WP for tag implementation. For the past month, data has stopped flowing into Google Analytics and other tools. I believe this might be due to incorrect consent mode settings. Could anyone help me set up consent mode properly to ensure the necessary attributes are tracked for analytics?\n\nIs there a CMP that is compatible with GTM4WP and easy to set up?\n\nI've found this guide from the official GTM4WP page: [WebToffee GDPR Cookie Consent Plugin Setup](https://gtm4wp.com/setup-gtm4wp-features/webtoffee-gdpr-cookie-consent-plugin-gtm4wp-how-to-setup), but I find the mentioned consent plugin expensive. Are there any other alternatives that are easy to implement?\n\nThanks in advance!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dtod59/need_help_setting_up_gtm4wp_and_consent_mode/",
        "num_comments": 8,
        "comments": [
            {
                "body": "You could use CMP's like Cookiebot, CookieYes and CookieInformation. If you implement them through their GTM tag templates, they should work out of the box. Just remember to:\n\n* activate consent mode in the CMP tag (if not on by default)\n* (activate 'consent overview' in GTM settings)\n* configure consent settings on the tags (all Google tags are automatically configured)\n* check the consent tab in preview mode\n* check the &gcs parameter on Google requests (value should be 'G100' for unconsented hits' and 'G111' for full consent)\n\nBut obviously also check other possible issues. Maybe the CMP is not the problem? Post the URL here and we can probably help debug the issue a bit more.",
                "author": "Drendo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you tell me where you're located, I may be able to help?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Send me a pm. I have a company in implementing consent mode.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Sure u/Taca-F ! Europe, Hungary is the location. Also the website visitors are from here.",
                "author": "Dry-Connection9911",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715857585.0,
        "title": "Looking for recommendations for alternatives to Cookieyes (Consent mode)",
        "author": "Robsonowskyy",
        "id": "1ctabg2",
        "selftext": "Hi, lately I started having issues with Cookieyes and looking for alternatives. My problem with it is optimization which isn't perfect. Load time takes up to 9sec on mobile devices. Also it started loosing data.\n\nDo you have recommendations? Factors I care about are:\n\n* Easy to integrate (best would be to tag manager)\n* Relatively cheap (most of my clients are small so it cannot be too expensive)\n* No data loss (I do not operate on a lot of data so any loss could change the outcome of my stats)\n* Polish language supported (I'm from Poland so I need it to support our language)\n* Better optimalized than Cookieyes",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ctabg2/looking_for_recommendations_for_alternatives_to/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Cookiebot all the way!",
                "author": "dowmi12",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Onetrust is pretty good. There’s a list of consent banners on googles support pages",
                "author": "xxlizardking-kongxx",
                "score": 1
            },
            {
                "body": "I built a lightweight 3kB banner for Google Consent Mode but I'm not sure if it would be okay to promote it directly here so I DMed OP.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "You can use [https://www.cookieconsent.com/](https://www.cookieconsent.com/) but you need to set up the tags yourself in GTM or code them directly.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "CookieBot has suffered the same problems OP describes.\n\nOP’s problem may be limited to Poland, because it loads essentially instantly on my site (UK based)",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks for response I'll look into it",
                "author": "Robsonowskyy",
                "score": 1
            },
            {
                "body": "DM it to me as well please, if you can/want to.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Thanks I'll try it. Didn't know there are tools that setup tags for you",
                "author": "Robsonowskyy",
                "score": 1
            },
            {
                "body": "That's just a free cookie banner. You need to use Simo Ahava's Cookie Consent templates to set it up properly.",
                "author": "Fine-Marketing-8134",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1706189829.0,
        "title": "Any CMPs that fire consent updates before Initialization?",
        "author": "TheTechLad",
        "id": "19f9i98",
        "selftext": "Hello,\n\nGiven how Consent Mode is a big subject nowadays, I was wondering if there are any CMPs that fire the consent update event before Initialization and/or Container Loaded.\n\nIt feels weird using Trigger Groups or consent\\_update events as triggers, though I might have to get used to it. \n\nSo far, I tested CookieYes, CookieBot and OneTrust.\n\nThanks. \n\n&#x200B;\n\n&#x200B;",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/19f9i98/any_cmps_that_fire_consent_updates_before/",
        "num_comments": 17,
        "comments": [
            {
                "body": "Trigger groups have no place in consent management. They were \"the\" solution before everyone got their act together and settled on a model where the CMP would send a DL event that could be used in place of a Page View trigger.\n\nThere are some aspects of consent management where order of scripts and timing of things is important, but GTM and your CMP can happily run asynchronously and we don't have to worry about it.\n\nThere are a few strategies for implementing consent management, but the ideal is you hardcode Google Consent Mode \"default\" script, followed by GTM and your CMP. Your CMP takes care of issuing both a DL event e.g. cookie\\_consent\\_update (CookieBot) and a Google Consent Mode \"update\" call immediately prior to that DL event.\n\nYou fire Google tags from Initialization, All Pages, DOM Ready etc and you fire non-Google tags on the DL event. Use the additional consent settings for non-Google tags to block them or add exception triggers.",
                "author": "StefanAtWork",
                "score": 5
            },
            {
                "body": "Google Consent Mode takes care of it, or rather your CMP should by sending a CoMo \"update\" command. You won't see the tag fire again in Tag Assistant, but if you keep an eye on the Network tab in dev tools, you'll see a hit get sent to GA4 with gcs=\"G111\" (assuming full consent was granted).",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "If you fire google tags from initialization, they will fire before the consent\\_update, so they will be blocked. Are you not using the \"required consent\" setting? I believe that's necessary, at least for GDPR. Am i missing something? Thanks!",
                "author": "serious_orangutan",
                "score": 2
            },
            {
                "body": "That's absolutely fantastic. I've been scratching my head about how to do it.",
                "author": "benl5442",
                "score": 2
            },
            {
                "body": "It's a tricky topic. Not helped by misinformation from otherwise reliable or seemingly trustworthy sources.\n\nConsent management has been a major focus for my day-to-day at work for more than 2 years and it's still sometimes challenging. Huge brand name companies are still struggling with this because their internal teams don't have the time avaialble to study consent management as a separate discipline.\n\nIt's really no surprise that most websites suck at user privacy. Even the ones that try will likely not succeed.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You might find useful my take on Taneli Salonen's technique for implementing OneTrust. https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "\"and you fire non-Google tags on the DL event. Use the additional consent settings for non-Google tags to block them or add exception triggers.\"\n\nThis is where I am having trouble.  I am using CookieYes which sends a cookie\\_consent\\_update DL event right after a Consent event.  You are saying to fire these tags on the cookie\\_consent\\_update DL event, but I don't see how to avoid using a trigger group here.  For example, say I have a custom\\_purchase DL event... now I would need to fire the tag on custom\\_purchase AND cookie\\_consent\\_update right?  So only when both events have happened does it fire.\n\nAnother example would be Bing UET Tag... rather than firing on Initialization All Pages I would fire on cookie\\_consent\\_update DL event?  Can't cookie\\_consent\\_update firing multiple times (say if a user kept changing their consent on the same page) really screw up these tags... firing multiples and what not which could skew analytics for example?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Thanks for this. Just wondering what you do on first view assuming the ga4 tag is on a page view, someone lands on the page, no consent, so it sends a cookieless ping. \n\nThen when someone accepts, how do you get google to send the page view again with all the information in it?",
                "author": "benl5442",
                "score": 1
            },
            {
                "body": "Here is how to set up consent mode with the Osano CMP\nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "When you're in an advanced Google Consent Mode context (which in my experience is 99% of all clients!), Google platform tags (Google Tag, GA4 Event, Floodlight, Google Ads etc) will take care of themselves in terms of consent, in which case you follow established best practise which is to fire Google Tag on Initialization, have a separate GA4 Event tag for page views, include a Conversion Linker (if needed) and generally do nothing specifically to those tags in terms of consent management other than mark them as \"no additional consent required\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Another question I can't find an answer to.  Say I have a tag set to fire 'once per page'... that tag also has additional consent settings set.  The same tag is used as a setup tag for multiple others.  If the firing is denied due to additional consent settings not granted... does that count as the 'once per page' fire?  In other words... will it continue to 'try' and fire until the additional consent requirements are met?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "The rule for 3rd-party tags is ...\n\nIf the trigger is based on All Pages, DOM Ready, Window Loaded etd (i.e. page view, but at different times), you should replace that with a cookie\\_consent\\_update CE trigger with the same conditions.\n\nIf your trigger is already a custom event (custom\\_purchase), you'll want to test whether the custom\\_purchase event is pushed to the data layer reliably later than the cookie\\_consent\\_update event.\n\nI don't like \"once per page\" and any platform that needs it is just badly coded. Microsoft UET included. I haven't had to play with that in a while and I might be wrong about this, but I think the first failed firing counts as that \"once\" and won't fire again when conditions are met.\n\nPossible solution off the top of my head:-\n\n* Remove all triggers from the main \"run once\" config tag. Use sequencing to make it run prior to all of the supporting event tags. Event tags checked to make sure they fire on or after cookie\\_consent\\_update.\n\nIf the config / setup tag is responsible for sending a page view event to the platform, fix it so that it doesn't and instead figure out an event tag separately to send a page view. I do this with every platform anyway because it's just a good idea all around.\n\nAlso... I am not a fan of trigger groups. They don't work intuitively and they harken back to the bad old days when cookie banners and GTM integration was first invented. A trigger group can save the day in the situation you describe, but far too many people think of them as \"triggers, but with an 'and' rule\" and they really are not that at all!",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "hey! could please help me, i set up cookieyes banner via gtm. noticed one situation: user accepted cookies, then goes to another page in gm I see container loaded with consent denied then I see update event with consent granted. Is that okay? i thought if user accepts cookies every time he goes to another page consent mode will be granted even on the container loaded level",
                "author": "Unique-Exchange-4075",
                "score": 1
            },
            {
                "body": "There are two way of doing it and both are valid.\n\n1. There is a simple Consent Mode \"default\" of denied consent on every page followed by an \"update\" with the correct consent.\n2. The Consent Mode \"default\" looks for the user's previously given consent and sends that consent status, followed by a Consent Mode \"update\" with the same status.\n\nWhat you're seeing isn't necessarily wrong, as long as there's an \"update\" with consent granted at some time during page load.\n\nOption 1 is the easiest to implement and is robust, because you can hardcode it as a simple script.\n\nOption 2 is a bit more sophisticated and I only use it if there's a clear benefit in doing so.\n\n  \nWorth a mention: Using the CookieYes template in GTM should take care of the CoMo \"default\" for you. I need to run a couple of tests on my own implementation because I've seen some strange behavior recently - but if it's working for you I wouldn't worry!",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719846147.0,
        "title": "Loading conversion linker on DOM ready",
        "author": "mapitchf",
        "id": "1dsv61w",
        "selftext": "Hi,\n\nWondering if anyone knows if it would be a problem in GTM to load the google conversion linker on DOM ready rather than container loaded. We have consent mode enabled but the linker tag is firing before consent so I think we are losing a lot of data\n\nThe recommendation seems to be to load the linker on Container Loaded, but right now we have another problem which means we can't load consent mode before the container is loaded, so as a solution I wanted to try and fire the linker on DOM Ready.\n\n  \nAny thoughts if it would be a problem? Or would the problem persist if we are loading cookie consent after the container has loaded anyway?\n\n  \nThanks for any help.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dsv61w/loading_conversion_linker_on_dom_ready/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Thanks both. Yes I know ideally firing it on initialization but that right now is out of our control unfortunately. Working towards it as someone else has implemented CM in a pretty weird way. Thanks though appreciate it",
                "author": "mapitchf",
                "score": 3
            },
            {
                "body": "thanks, good shout I've just done the test and can see the cookie there. Current people have done a custom setup directly on site rather than through GTM and Im sure its causing problems but they are reluctant to roll back and use and easier solution",
                "author": "mapitchf",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "No issues. If you want to make sure a tag fires after a specific event (e.g. consent) , you can use a trigger group with consent and gtm.dom, for example. This works if the consent event is fired on all pages",
                "author": "MariusGMG",
                "score": 1
            },
            {
                "body": "Frustrates me that there's plenty of best practise info out there and people still manage to tie themselves up in knots with the implementation!\n\nIf you have advanced CoMo, firing Conversion Linker \"too early\" is not a risk. As soon as the CoMo 'update' happens, Conversion Linker will do its thing. It won't reflect that in Tag Assistant, but it will e.g. copy gclid into the relevant cookie(s).\n\nYou can test it by manually putting ?gclid=TEST123 in the URL and then searching TEST123 in the Application tab in dev tools.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "The practise I follow usually involves a hardcoded consent mode 'default' script on site (assuming there isn't a complex / likely to change consent policy), followed by the hardcoded script for the CMP (Consent Management Platform, i.e. the cookie banner provider).\n\nThe CMP takes care of the CoMo 'update' API call.\n\nGTM is then not an active participant in the set up of CoMo or the CMP, but is able to perfectly respond to everything going on.\n\nImplementing CoMo (and the CMP!) via a tag in GTM can be fine and I've done a setup for my employer's site recently where their main brand site is all hardcoded CoMo setup, but a sister brand on a subdomain uses the OneTrust tag template. Same GTM container on both, just to have something to demo to clients who are undecided on best approach.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1693415863.0,
        "title": "Google Consent Mode",
        "author": "DigitalStefan",
        "id": "165kq9u",
        "selftext": "There haven't been many posts about Google Consent Mode in this subreddit, but there are a couple of common misconceptions which I've seen caused people to lose a lot of time trying to chase down a faulty implementation.\n\n1. Google native tags fire unexpectedly when there is no user consent.\n2. \"additional consent\" works exactly like an exception / blocking trigger.\n\nTrying to write up a complete how-to for implementing Google Consent Mode is a big project far outside the scope of a Reddit post or even a reasonbly sized blog entry.\n\nThe basics though:-\n\n1. \"CoMo\" is a good shorthand for Google Consent Mode and it's what Google use when discussing it.\n2. CoMo usually works alongside or is implemented by an existing consent management platform, such as CookieBot or OneTrust.\n3. CoMo affects all Google tags such as GA4 Config and Event, Conversion Linker, Floodlights and Google Ads.\n4. Google tags *should* fire without consent (in Tag Assistant in preview mode).\n5. Presence of the \"gcs\" parameter in network hits indicates CoMo is active.\n6. gtag.js retriggers Google tags when the user grants consent / when consent is established on each page load.\n7. You *will not* see tags retrigger in Tag Assistant in preview mode. Chrome dev console, network tab only.\n\nThere are many ways to implement CoMo incorrectly and validating an implementation is a 15-20 minute process.\n\nI can go into more detail if you are struggling with any part of CoMo or consent management in general.",
        "score": 14,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/165kq9u/google_consent_mode/",
        "num_comments": 23,
        "comments": [
            {
                "body": "I recently implemented cookiebot with CoMo enabled and it's dropped our traffic down 50% - we had a different cookie banner before and never had this issue. We only operate within the US. Do we need to have CoMo enabled?",
                "author": "Ok-Tiger-5200",
                "score": 4
            },
            {
                "body": "I have worked up an example implementation using a specific product for illustration. [https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "Spoiler alert for point 6: At some point CoMo stopped sending the page\\_view event to GA4 after consent was granted. Edit: Turns out this isn't true. DebugView doesn't show the page_view, but after 24 hours or so they surface in GA.",
                "author": "jamieburchell",
                "score": 2
            },
            {
                "body": "Thanks! The Onetrust tag template in gtm has major issues I spoke with their product manager on it. Not sure if there were any changes",
                "author": "Effective-Meat2546",
                "score": 2
            },
            {
                "body": "It’s not exactly required by GA4, but if you’re collecting or want to collect data in GA4 from EEA users with which you would like to generate remarketing audiences,   you’ll need CoMo V2 with the appropriate consent signals as of March 6th.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I've already set up Google Consent Mode with CookieYes.I needed a CMP to enable Google Consent Mode v2 on my company's website, and CookieYes stood out to me due to its many positive reviews on Reddit. Clear, straightforward documentation was provided, so the setup and integration via Google Tag Manager was a breeze. The dashboard is very simple and intuitive, and I had no trouble finding my way around and understanding the platform's features to get my job done.\n\n[https://www.cookieyes.com/documentation/features/integrations/implementing-google-consent-mode-using-cookieyes/#Method\\_2\\_I\\_6?ref=sooraj](https://www.cookieyes.com/documentation/features/integrations/implementing-google-consent-mode-using-cookieyes/#Method_2_I_6?ref=sooraj)",
                "author": "sooraj-s",
                "score": 1
            },
            {
                "body": "When is Google Consent Mode necessary?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Once you have the main tags (base pixel, page\\_view tags) loading based no consent, is there further trigger setup required for for the various events tags you want to fire?",
                "author": "chrismccreery",
                "score": 1
            },
            {
                "body": "Have a question, if I enable GCM in Google Tag manager but haven’t done it inside the cookie banner tool (Osano/Trustarc/Onetrust), what will happen. GTM controls the firing of the tags. If you enable GCM inside the cookie tool, it looks more like an UI to me. Or am my understanding incorrect.",
                "author": "Effective-Meat2546",
                "score": 1
            },
            {
                "body": "“Need” is a strong word!\n\nI’d compare the design of the previous banner to the current one. If you make it easy for users to opt out of tracking, they will. If your traffic is skewed toward mobile and “Deny All” is where your thumb naturally rests when holding a phone, that’s a sure way to increase opt-out rates.\n\nCookieBot is also a strange one, because if you implement via hardcoded script on site, the default behaviour is that it will enable consent mode but will only issue the CoMo “update” and you will need to hardcode the CoMo “default” gtag call yourself.\n\nIf you implement CookieBot entirely within GTM using the official tag template, it handles CoMo entirely for you. You still need to configure it, but you don’t need to worry about gtag scripts on site. \n\nIf you message me the URL of the site I can look and confirm if there are any technical issues artificially inflating your apparent opt-out rates.\n\nIs it possible the previous cookie banner was purely for show and was not effectively controlling consent? I see this happen a lot.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Great write up. Thanks for sharing.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "CoMo is evolving on almost a weekly basis.\n\nFun fact: It still behaves the “old” way when server-side is involved!",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I recently implemented CookieYes on my test site: [digitalstefan.com](https://digitalstefan.com)\n\nIt was a quick and easy process, including CoMo V2. It does handle CoMo update events in a slightly strange way, but it does work and shouldn't caused a problem.\n\nNo hardcoding. Purely using the CookieYes tag template.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Pretty much everywhere, now. Definitely if your website is visited by users within the EU and UK. Probably advisable even if every user is from a jurisdiction that doesn't expressly require user privacy controls.\n\nGoogle has started sending warnings out about improper consent management configurations for OneTrust customers. It's \"you should probably do something about this because your data could be affected\" for now, but could easily become \"if you don't resolve this, your account may be suspended\".",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Super late reply...\n\nYes. Every tag the reads or writes data to the user's browser needs to be considered for which consent category or categories it should be assigned.\n\n\"data\" means cookies, local storage, session storage... any possible way of recording and reading data that the browser provides.\n\nIf firing a GA4 Event tag writes or reads a cookie, it needs to be consent managed. GTM gives you a massive hint via \"built in consent\" for all Google platform tags. e.g. GA4 tags require ad\\_storage and analytics\\_storage (marketing consent and analytics consent).\n\nYou'll also now see ad\\_user\\_storage and ad\\_personaliztion attached to a lot of Google platform tags. Those aren't indicating \"tag requires this category to work\", but do have an effect on how the collected data can be used.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "If you have a CoMo \"default\" implemented and you don't enable CoMo inside your consent platform, you won't see CoMo \"update\" events. CoMo will not work. Tags will fire, but depending on your default consent state you may not see any data in GA4 etc.\n\nTrustarc recently integrated CoMo V2 in their script (within the past few months). Previously you had to do the entire integration. They also released an official tag template, which is fantastic. OneTrust also released their GTM tag template and now that's my preferred and recommended implementation method.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I see.  I don’t believe any of the websites we manage have users outside the U.S. and are not targeting anyone outside the U.S.  Is this requirement for the EU and EEA only for Google Ads or is it also for GA4?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "It’s mainly for EEA, but I would count on EEA similar law spreading slowly to other jurisdictions over time. There are already quite a few (I couldn’t name more than a couple… I don’t get professionally involved in the legal side of things)",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I saw people discussing language detection being problematic when using the tag template. Are there other concerns?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Gotcha’.  Do you know if it’s required in EU and EEA for GA4 or is it strictly related to Google Ads tags only?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Not that I’m aware of besides the template being useless in their last version that I imported.",
                "author": "Effective-Meat2546",
                "score": 1
            },
            {
                "body": "I’m on version 612c3 direct from the community gallery. I’m about to recommend this approach to a client (instead of hardcoding).",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718099782.0,
        "title": "Am I being silly, how do I pass conversions created in GTM to GA4 ",
        "author": "Blind_bear1",
        "id": "1ddackn",
        "selftext": "hey, long story short, I have created conversions in GTM that are working, the Google tag is also working but I cant see these events pass through into GA4? Is there anything I need to do in GA4 itself? If it helps the site isnt live yet so it wont record physical conversions but I thought the tags would appear.  ",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ddackn/am_i_being_silly_how_do_i_pass_conversions/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "No you don’t have to do anything on GA4. If you've created the tag perfectly on the GTM with the correct measurement ID then it must be shown in the GA4. But keep in mind that GA4 may take 48 hours to show the conversions properly.",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Does the event show up in Debug view within GA4? If it does then you are good to go, you'll just have to wait for the events to happen when the site is live. \n\nDoes the event have any parameters? You may need to register them in GA4 if so.\n\nJust a heads up, you don't create conversions in GTM, you create events that you can then mark as Key Events in GA4  (it used to be called conversions)",
                "author": "ArisBlint",
                "score": 1
            },
            {
                "body": "Go into preview mode on GTM. When the event occurs on the left click it to see if the tag was sent to GA4. It’ll show you which tags fired, which tags didn’t fire, and why they didn’t fire.",
                "author": "Hsabes01",
                "score": 1
            },
            {
                "body": "I can see debug mode but the default events are recorded in there i.e. form\\_start form\\_submit rather than the actual event I can see in the GTM preview mode.",
                "author": "Blind_bear1",
                "score": 1
            },
            {
                "body": "It's firing under form_start and form_fishish rather than the name I've set the tag at in gtm .",
                "author": "Blind_bear1",
                "score": 1
            },
            {
                "body": "If the measurement ID is correct for the tag then it should also show up in debug view. \n\nThe only other thing I can think of preventing it from showing would be cookies not being accepted yet. Make sure to accept cookies in the preview window.",
                "author": "ArisBlint",
                "score": 1
            },
            {
                "body": "Make sure you've properly submitted the updates in GTM and then as previous people have mentioned, wait for them to appear in GA4. The events will show up the following day usually since GA4's day-of analytics usually are not the best.",
                "author": "3du8",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1725630187.0,
        "title": "Saving variables across different domains",
        "author": "Recent-Echidna-2497",
        "id": "1fafisu",
        "selftext": "I have GTM container code inserted in 2 different domains (not sub domains). I have a specific link click that I would like to track. This link leads us to the other domain. I want to see how many purchases lead through this link click. If it was a single domain I would have used cookies but thats not the case here.\n\nBasically, is there a way to retain a variables value when a domain changes? Or any other approach I can use to solve this problem?\n\n",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fafisu/saving_variables_across_different_domains/",
        "num_comments": 4,
        "comments": [
            {
                "body": "On your first domain, write the value to a 1st party session cookie. Then when you arrive at the page with the link off URL, decorate the URL with a query parameter based on the cookie value - something like &cta\\_click=yes . Then on the second domain, write the cta\\_click URL query parameter to a 1st party session cookie. All the Javascript elements you need to do this can be found in the following blog post. [https://drewspen.weebly.com/blog/using-gtm-to-pass-your-utms-into-your-crm](https://drewspen.weebly.com/blog/using-gtm-to-pass-your-utms-into-your-crm)",
                "author": "Humble_Elderberry_25",
                "score": 4
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes. You can send your variable as a query parameter attached to your link (the one that leads to the other domain)",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "This is exactly what I have done before as well and it works well.",
                "author": "James_Edward_A",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1722503584.0,
        "title": "cJS Variable Bug",
        "author": "ToughGreen1903",
        "id": "1ehc5h3",
        "selftext": "Hi, I'm experiencing a weird bug. I'm getting a member\\_type parameter with dataLayer and can see it. My dataLayer variable can also take it from dataLayer. I'm trying to write that value to the cookie, and I have a custom js variable for that purpose. It works perfectly when I'm in preview mode. BUT when I try it without preview, like just entering the site normally, it doesn't work. I deleted all the set-up, submitted it, then did it again. I thought it might be a bug or something, but I still can't see any cookie. Any suggestions?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ehc5h3/cjs_variable_bug/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check if your JS code is properly setup and there is also many variables to create cookies you can try with that.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "So, it seems like you can't set cookies using JavaScript variables. But it's still weird that it works in preview mode",
                "author": "ToughGreen1903",
                "score": 1
            },
            {
                "body": "As I mentioned in the post, the js variable works perfectly but only in preview mode. However, which variable can create cookie?",
                "author": "ToughGreen1903",
                "score": 1
            },
            {
                "body": "Try searching in the variable gallery. There is many variable you can try with",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Same as creating a JavaScript variable. I'm sure my code works fine because I've used the same method with other clients but thanks for your help!",
                "author": "ToughGreen1903",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715935828.0,
        "title": "GOOGLE TAG MANAGER - TAG CONFIGURATION: Tag consent settings & Page view triggers",
        "author": "Skincare_boy",
        "id": "1cu0hvu",
        "selftext": "Dear our team,  \nTo set up a **Google Ads conversion tracking tag for a page view event**   \nthat **should be counted even when users reject all cookie**s on the consent banner,  \nthe **options in Tag consent settings & Page view triggers should look like below**, right?\n\nTag consent settings: additional content -> **Choose: No additional consent required**   \n Page view triggers - > C**hoose \"All Pages - Page View\"**  \n   \nIf so, can you help me with any personal experience  from the links I found from Google Support.  \n   \nGoogle Support links:  \n[Page view triggers](https://support.google.com/tagmanager/answer/7679319)  \n[Tag consent settings](https://support.google.com/tagmanager/answer/10718549?hl=en)  \n   \nThank you a lot and may you have a nice day!",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cu0hvu/google_tag_manager_tag_configuration_tag_consent/",
        "num_comments": 10,
        "comments": [
            {
                "body": "No. Do not track users without consent.",
                "author": "DigitalStefan",
                "score": 5
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Here is an OneTrust example.\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "\bIt doesn't actually track users though. GA4 will create a ghost ID (no device/location/other demo recorded; only events are recorded with a ghost user id) without identifying who the users are once they view our webpage. When they end a session and start another one, another ghost ID will be created.",
                "author": "Skincare_boy",
                "score": 1
            },
            {
                "body": "Here is a GTM Osano implemention \nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thanks mate. It's been nice knowing this. You have a great day",
                "author": "Skincare_boy",
                "score": 1
            },
            {
                "body": "If cookies are written or read, there is a moral and possibly legal requirement to request user consent.\n\nThere is a reason Google assign built-in consent requirements for Google Ads tags.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1722985706.0,
        "title": "Gtm code for 2 or more pageviews",
        "author": "elainebenesgothphase",
        "id": "1elw69b",
        "selftext": "Hi I'm trying to make a trigger to track two or more page views in gtm so that it can be part of a combined conversion.  Conversion triggers if 2 or more pages are viewed AND user spent more than 60 seconds on site.  Normally I build 2+page views in ga4 but in this situation that won't help",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1elw69b/gtm_code_for_2_or_more_pageviews/",
        "num_comments": 5,
        "comments": [
            {
                "body": "I recommend just doing this in GA4.\n\n\nBuild an audience with this criteria, as users become members of this audience you can fire an event.\n\n\nMark that event as a Key Event. \n\n\n(Your last sentence is a bit confusing, so forgive me if you're saying you already tried this)",
                "author": "spiteful-vengeance",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "upon site landing create either a session cookie or a flag in sessionStorage that writes a numeric zero to the location. As part of writing the cookie or flag in sessionStorage, check to verify that it does not already exist before doing it. if it does exist, do not write anything to the session cookie or sessionStorage. set it up, possibly, as a clean up tag for your Google Tag GA4 initialization tag. create a tag that increments the value in the session cookie or sessionStorage by 1, and fire it on dom ready pageview. a 3rd GA4 send event tag will trigger after this one, maybe on windows loaded pageview, but only when the cookie / sessionStorage = 2. i chose triggers which by necessity happen for each pageview, but happen one after another, for simplicity in setting this up, but you could trigger this in alternate ways.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "To view this data in GA4 as an event, use a trigger group to create a new trigger and then define a custom event. You can then locate the event in GA4.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Oh man this is such a simple solution, I can’t believe this never occurred to me. Thank you this is perfect ",
                "author": "elainebenesgothphase",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717704445.0,
        "title": "Question about server-side GTM + browser GTM events",
        "author": "pantone520",
        "id": "1d9ro5f",
        "selftext": "I recently helped with setting up Meta Conversions API events by sending GA4 events to server-side GTM and triggering the Conversions API tag in SSGTM to send data to Meta based on GA4 client events.  However, isn't this still introducing the limitations of browser/javascript-based data and therefore an inferior setup to an event setup that would be fully created/pushed server-side?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d9ro5f/question_about_serverside_gtm_browser_gtm_events/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "No... the Meta Conversions API tag template in sGTM has an option to extend FB cookies & it will set cookies for the _fbc, etc. in the HTTP response via the set-cookie header and (since these aren't JavaScript cookies) these cookies aren't limited by ITP, etc.  There are other considerations, such as if the server container is behind the CDN that serves the website to ensure there's no first half IP mismatch, etc. but generally speaking these cookies are much more durable  than cookies created in the browser via JavaScript",
                "author": "jaredrileysmith",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Thanks for taking the time to reply! Can you see the response below from the other commenter and let me know your thoughts here - my thinking is that, since CAPI is still dependent on client-side GTM, it isn't actually improving the number of events captured overall since the browser event has to work correctly first? But maybe it just helps with campaign attribution based on the cookie functionality you mentioned.",
                "author": "pantone520",
                "score": 1
            },
            {
                "body": "That's not true.  Ad blockers generally use the ublock origin list of known tracking domains to block outbound requests from the browser & these GA4 requests to sGTM should be going to a subdomain of the top level domain.",
                "author": "jaredrileysmith",
                "score": 1
            },
            {
                "body": "Tbh your answer strikes me as ChatGPT copy/paste & not someone speaking from experience.",
                "author": "jaredrileysmith",
                "score": 1
            },
            {
                "body": "I read the other response & I do not agree.  FWIW, I've been implementing CAPI via sGTM for over four years and there's been an increase in data capture every single time.  A lot of the extra data capture comes from users who have ad blockers, etc. that block requests to known 'tracking' domains (Google, Facebook, etc.) but since the requests to the server container should be going to a subdomain of the website (e.g. sgtm.site.com) & not to Google/Facebook the requesters aren't blocked & the net result is incremental data capture.  Feel free to ask other questions, but this is something that I'm quite certain of from experience implementing CAPI this way on nearly 100 websites (including at my current job, where we have 350-500k sessions a day & have observed an aggregate 8% lift in Facebook events due to CAPI over the last year since I implemented it).  To your points about attribution, it definitely helps since the cookies set by the server are more durable.",
                "author": "jaredrileysmith",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719163866.0,
        "title": "Trigger tag once per page issue",
        "author": "trp_wip",
        "id": "1dmrfij",
        "selftext": "Let's imagine this scenario: I have a tag that I fire on Initialization - All Pages, but the tag requires consent. The tag is set up to only fire once per page. However, for new users, because it fires before cookie consent banner loads, it gets blocked due to the lack of consent. If I set the trigger both on Initialization - All Pages and Consent update custom event, the tag will not fire since it is set to only fire once per page (Consent update would mean firing the tag for the second time). \n\nI had this problem and I found a solution in my setup. However, my question is: is there a way to set a tag to fire once per page, but to ignore that rule if it was blocked due to the consent in the tag settings? In the case above, I would be able to fire it again on Consent update because it was blocked the first time.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dmrfij/trigger_tag_once_per_page_issue/",
        "num_comments": 7,
        "comments": [
            {
                "body": "You could do it the old-fashioned way. Create an exception trigger that blocks your tag from firing unless the proper consent is given. ",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Oh wow, that's actually ridiculously simple, but didn't cross my mind. Exactly why I posted this. Thanks for the idea!",
                "author": "trp_wip",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Depending on your CMP platform, use `cookie_cat_necessary` or `cookie_consent_update` as your new `All Pages` trigger, and then use the built-in Consent feature to control triggering.",
                "author": "mbkjeldsen",
                "score": 1
            },
            {
                "body": "There’s no such config option within GTM that achieves what you’re asking. The best way to deal with it is to avoid painting yourself into that particular corner in the first place.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yeah, that's what I did basically. Since cookie\\_consent\\_update happens before anything else, I set it to fire on that and also set up tag sequencing on other tags, so Google Tag fires before any other tag if not fired already. I wanted to see if there is another way to solve it.",
                "author": "trp_wip",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717608997.0,
        "title": "Using same GA4 tracking code & Tag Manager code on root domain and subdomain",
        "author": "Mental-Pen-4223",
        "id": "1d8vtb7",
        "selftext": "I have an e-commerce website that will go live soon. We are using spp.co \"service provider pro\" for checkout & as a crm.\n\nSpp functions on a subdomain, so the user will first land on the root domain (landing page eg. mywebsite.com), then when they decide to buy one of our service they will be redirected to a sub-domain (eg. order.mywebsite.com) where they can place the order. Now we want GA4 and conversion tracking on both root domain and sub-domain, if I install same GA4 and GTM code on both root domain and sub-domain will I face any difference in reporting or any issues?\n\nI havent done such setup before, therefore I don't know what will happen.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d8vtb7/using_same_ga4_tracking_code_tag_manager_code_on/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Set it up as one GTM and one GA4 for the whole thing. Same GTM and GA4 used on both. No cross domain tracking or anything needed. It'll be treated as one domain.\n\nYou can differentiate views, sessions, etc. between the subdomains using the hostname parameter.",
                "author": "TheHobbyist_",
                "score": 5
            },
            {
                "body": "Subdomains share the same cookies as root domains. No cross domain tracking needed.\n\nhttps://developers.google.com/tag-platform/security/concepts/cookies#cookie_domain_configuration",
                "author": "TheHobbyist_",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "There is a feature in the GA4 admin to add subdomains as referral exclusions. I think it’s under data streams. Make sure to do this so your attribution doesn’t get allocated to the subdomain/shopping cart.",
                "author": "Spinning-Coin",
                "score": 1
            },
            {
                "body": "Sounds like you're getting everything set up for your launch. Best of luck getting things ready for go live. 😊",
                "author": "OpsAlien-com",
                "score": 1
            },
            {
                "body": "Thank you, will setup under one property only.",
                "author": "Mental-Pen-4223",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719909605.0,
        "title": "New / existing customer data layer variable Shopify",
        "author": "Worldrazor",
        "id": "1dtgzbi",
        "selftext": "Is there really not an “easy” way to push a variable to the data layer that tells if it’s a new or existing customer? \n\nWe have just upgraded to the new extensibility checkout, and what a mess that is… Before I could just make a simple data layer with an order count variable, but Shopify has removed that\n\nAn externally tracking guy has told us that the only way to do it either through a cookie or that we start using something like fire base.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dtgzbi/new_existing_customer_data_layer_variable_shopify/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It depends on your theme mainly. If customers have accounts on your shop there are easy ways to do it. If no there are workarounds usually based on cookies.",
                "author": "mrsmolacar",
                "score": 1
            },
            {
                "body": "customer.orders_count is definitely still available. I push it into my customer layer and utilize it for some JS logic in GTM.  \n\nAlternatively you could do it on the Customer ID variable.  If it returns null or undefined - they’re not logged in.",
                "author": "OrangeFancy",
                "score": 1
            },
            {
                "body": "And do you also use the extensibility checkout? - because yes sure, before we updated I could also easily create a datalayer with \"customer.orders\\_count\" variable, but it dosen't seem to be available anymore",
                "author": "Worldrazor",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724114804.0,
        "title": "Shopify Extensibility vs Consent Mode",
        "author": "Longjumping-Smile796",
        "id": "1ewi97u",
        "selftext": "Hi everyone, i'm joining the list of people having nightmarish issues with consent mode and shopify. We are currently using Iubenda, with some extra custom code ( i know it does not sound like much, but unfortunately the developer agency is not collaborative).\n\nThe idea is using simo ahava's tags to read the cookie that is correctly passed on the checkout domain, to set the consent statuses. But unfortunately, it does not seem to work, no matter what we try. The tags are firing (we are logging that on the console) but after they fire the url requests that are sent to both *doubleclick* and *analytics* present a wonderfully nightmarish *gcd=13l3l3l2l1l1.* i can also see that the variables that are used by simo's tag are correctly set\n\nCould it be that the new checkout stops simo's tags from properly working? i don't have that much JS experience to tell.\n\nAny help would be wonderful, thank you!\n\nexample 1 of request with gcd=13l3l3ll2 etc:\n\n    //googleads.g.doubleclick.net/pagead/viewthroughconversion/1001470150/?random=2146052697&cv=11&fst=1724113002197&bg=ffffff&guid=ON&async=1&gtm=45be48e0v9170531726za200&gcd=13l3lPl2l1l1&dma_cps=syphamo&dma=1&tag_exp=0&u_w=3440&u_h=1440&url=https%3A%2F%2Fcommerce.pittarosso.com%2Fcheckouts%2Fco%2F3932f84c736c6f35f977e64d0457d586%2Finformation&ref=https%3A%2F%2Fwww.pittarosso.com%2F&label=vkl1CLOu-vUBEMbxxN0D&tiba=Informazioni%3A%20PittaRosso%3A%20Check-out&hn=www.googleadservices.com&frm=0&gtm_ee=1&npa=1&ecsid=1319655296.1724111252&pscdl=noapi&auid=1028822444.1723105006&uaa=x86&uab=64&uafvl=Not)A%253BBrand%3B99.0.0.0%7CGoogle%2520Chrome%3B127.0.6533.120%7CChromium%3B127.0.6533.120&uamb=0&uam=&uap=Windows&uapv=10.0.0&uaw=0&ec_mode=a&fdr=CA&capi=1&data=event%3Dpage_view%3Bpage_path%3D%2Fcheckouts%2Fco%2F3932f84c736c6f35f977e64d0457d586%2Finformation%3Bignore_referrer%3Dtrue&em=tv.1~em.n6BT6T52TGYPzfcGTHzz0UagGd_UeoELRM_ycyNdi1Y&fmt=3&ct_cookie_present=false&eoid=CkUKEQjw2ou2BhCpoOfBsYGkuoIBEjAARiyE4-r8zE3lCSXTtZmxy9FDW6ds8WbZ4MG9GlRgwToEg6Q2JhoJsz9z4hrX_Hjw_wcB&crd=CLHBsQIIsMGxAgi5wbECIgEBKAFAAUondHJpZ2dlcj1uYXZpZ2F0aW9uLXNvdXJjZSwgZXZlbnQtc291cmNlWgMKAQFiBAoCAgM&pscrd=COTKgs--vKzF3AEiEwiX_Mi4pYKIAxVzi4MHHf0xH1oyAggDMgIIBDICCAcyAggIMgIICTICCAoyAggCMgIICzICCBUyAggfMgIIEzICCBI6IGh0dHBzOi8vY29tbWVyY2UucGl0dGFyb3Nzby5jb20v\n\nexample 2 of a request with the correct parameters that is sent before example 1 (is the only one correctly sent in the whole checkout process):\n\n    //googleads.g.doubleclick.net/pagead/landing?gcs=G111&gcd=13v3v3v2v5l1&tag_exp=0&rnd=352796852.1724113003&url=https%3A%2F%2Fcommerce.pittarosso.com%2Fwpm%4082c6a06ewf1f3532dpf3117147mbf87ca39%2Fcustom%2Fweb-pixel-106692932%402%2Fsandbox%2Fmodern%2Fcheckouts%2Fco%2F3932f84c736c6f35f977e64d0457d586%2Finformation&dma_cps=syphamo&dma=1&npa=0&gtm=45He48e0n81WST26P8v811526269za200&auid=1028822444.1723105006",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ewi97u/shopify_extensibility_vs_consent_mode/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "There are tags available for Iubenda. Have you checked those? Try using them, and if you need help setting it up properly, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "u/Longjumping-Smile796  have you figured this out? If not, you might want to check out [Cookifi](https://www.cooki.fi/) \\- it's a new CMP that works seamlessly with Shopify - here's a guide on how to integrate it with Shopify's custom pixels: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715859918.0,
        "title": "Consent Mode Set Up Tutorial With GTM",
        "author": "Minute-Property-7745",
        "id": "1ctayhv",
        "selftext": "Hey! Thought I'd post the recent [tutorial](https://youtu.be/8UWD5pxcAxk?si=ZFVu3B8FAnth6jQG) we made on how to set up consent mode for almost any cookie banner using GTM. ",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ctayhv/consent_mode_set_up_tutorial_with_gtm/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thanks Lucy",
                "author": "santino-corleone-1",
                "score": 1
            },
            {
                "body": "Potato quality and not very informative. Only covers one use case and will only work as intended if your site makes a page refresh on user selection.\n\n\nAlso you completely butchered Simos name! 😂\n\n\nAlthough you get a +1 for the effort and sharing.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Really well done and will help alot of those with a CMP that is not integrated with consent mode and does not handle these update cm states! \n\nOne bit of extra feedback (note for your website this does not need it as the page reloads when user interacts with cookie banner but for 95% of websites it does not reload the page after banner interaction therefore i would of showed this and talked about it) is that you need to add a second trigger on the update consent mode command when a user interacts with a cookie banner and chooses their preferences. The reason is for those first pageview hits to google platforms wont be picked up on those landing pages. I also suggest firing a second ga4 page view event after a user clicks accept analytics cookies on the cookie banner as otherwise you can see not set landing pages in your ga4 reporting :(\n\nAlso great debugging technique, but i also recommend checking in addition to this the network hits of your google tags events and check the gcs ans gcd query parameters in the payload that will finalise it is working 100 percent to that specific website.\n\nAlso I love your pronunciation of Re(eeee)gEx Tables 🤣\n\nGreat work 🙌",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "Noted RE quality, this is a new venture for us so equipment is being upgraded with progression. We’ve tested this on a few different cookie consent banners and it’s worked successfully each time. If and when we encounter a situation where this method doesn’t work we will update with an additional method!",
                "author": "Minute-Property-7745",
                "score": 1
            },
            {
                "body": "I thought it was very useful for small businesses that don't have complex cookie consent requirements (which are loads of small businesses). This person could of spent a 12 hour video talking about every little bit of detail of cookie consent and consent mode (who would want to watch that 🤣) but for a small business with no dev budget it covers the essentials. \n\nI think this is not just specific to cookieyes but applicable to any cookie banner that is not integrated with consent mode. Of course, edge cases are edge cases, but for a lot of people, I think this will help.\n\nYou have to remember that the target audience is people with no/minimal technical knowledge that operate in the UK or EU, so you have to keep it simple.",
                "author": "dowmi12",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709916979.0,
        "title": "Fast redirect is causing conversion tracking loss?",
        "author": "PreSonusAmp",
        "id": "1b9sybv",
        "selftext": "We've recently revised our method for tracking ad conversions on our website. Previously, conversions were identified through URL rules, such as when a user arrives at a 'thank you' page.\n\nNow, we've implemented a listener code directly on our site that triggers the conversion code upon a successful form submission.\n\nDespite this, users are still redirected to a confirmation page for tracking in GA4.\n\nIn GTM preview mode, the conversion tag activated by the form submission listener is shown as \"still running,\" even though it has been marked as fired.\n\nConversion count from the new method is now lower (30-40%) than the old method in Google Ads.\n\nWe're trying to determine if this disparity between our primary and secondary conversion tracking methods might be due to the redirect occurring too quickly after the form is submitted.\n\nIs there a straightforward way to verify if this is the case?\n\nUpdate: For those that may find this down the road, the issue was a mix of the custom code we had in place, how the Gravity Form submission event was being used to trigger conversion code, which had an unintended consequence of disturbing Google reCAPTCHA. (A hot mess). We modified the EC method to instead pass user info to first-party cookie and capture it from there. So far, we have a 100% capture rate.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b9sybv/fast_redirect_is_causing_conversion_tracking_loss/",
        "num_comments": 10,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Did you set useBeacon=true?\n\nIf not, that's it.\n\n[https://developer.mozilla.org/en-US/docs/Web/API/Beacon\\_API](https://developer.mozilla.org/en-US/docs/Web/API/Beacon_API)\n\n[https://caniuse.com/?search=navigator.sendBeacon](https://caniuse.com/?search=navigator.sendBeacon)",
                "author": "ArkessSt",
                "score": 1
            },
            {
                "body": "Try to avoid using Form Submit in GTM. It's totally inaccurate. Instead, use a custom Event Trigger.",
                "author": "starzynski_p",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Not fired on page view, fired on specific URL rule. We also have conv rule set to one and not every.",
                "author": "PreSonusAmp",
                "score": 1
            },
            {
                "body": "Appreciate those links. Will explore!",
                "author": "PreSonusAmp",
                "score": 1
            },
            {
                "body": "It is custom js listener, not the native Form Submit trigger.",
                "author": "PreSonusAmp",
                "score": 1
            },
            {
                "body": "Set transport = beacon in the advanced setting of the GTM tag.",
                "author": "starzynski_p",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723651931.0,
        "title": "Enabling Analytics Storage In Consent Mode",
        "author": "NegativeStreet",
        "id": "1es5ouj",
        "selftext": "Would setting the analytics\\_storage functionality to granted be against policy/law? Any tips on how I might figure that out for myself?\n\n  \nMy thought was that since it's not directly related to advertising, just actions taken on the website, it might be ok to use and the default being denied is for more strict regions?\n\n  \nThis is for a Canadian audience, the law is a little more lenient than EU and CA.\n\n  \nThanks",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1es5ouj/enabling_analytics_storage_in_consent_mode/",
        "num_comments": 3,
        "comments": [
            {
                "body": "https://secureprivacy.ai/blog/canada-pipeda-cookie-banner#:\\~:text=Non%2Dcompliant%20cookie%20banners%20can,before%20placing%20non%2Dessential%20cookies.\n\nYou need explicit user consent before placing non-essential cookies. Likely aligns with GDPR and ePrivacy insomuch as you can't read or write non-essential data using a browser storage API (cookies, localStorage, sessionStorage etc) without consent.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This is great, thank you for the resource and the response! Denied as default it will remain lol. I'll give the rest of that page a review too",
                "author": "NegativeStreet",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718713052.0,
        "title": "Consent Mode Parameters for a Substack",
        "author": "emilepetrone",
        "id": "1dip8wt",
        "selftext": "I have a substack blog, and need to set up consent mode. I am following this template:\n\n[https://developers.google.com/tag-platform/tag-manager/templates/consent-apis](https://developers.google.com/tag-platform/tag-manager/templates/consent-apis)\n\n  \nHowever I am not sure what values to insert for:\n\n\"Your\\_cookie\\_name\"\n\n\"your\\_developer\\_id\"\n\nAny help would be greatly appreciated!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dip8wt/consent_mode_parameters_for_a_substack/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Ok great thank you for your help. That is super helpful",
                "author": "emilepetrone",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "While you can still use these instructions to create your own custom template they were really meant for CMP providers.\n\n\nThe cookie name is supposed to be the name of the CMP providers cookie that stores the user-selected consent.\n\n\nThe developer id is the id of the template creator so that they can be recognized in the publishing process and so that users that utilize the template know who developed it.\n\n\n\n\nIf you just want to get up and running quick, I suggest you just pick a ready-made template from the community gallery. Either pick a template developed by your CMP provider or a standalone template by Simo Ahava or other trusted sources.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Did you ever get consent mode set up for your substack site? I am dealing with the same thing currently.",
                "author": "finnwriteswords",
                "score": 1
            },
            {
                "body": "I dont think so",
                "author": "emilepetrone",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710156500.0,
        "title": "On-page consent update trigger",
        "author": "e0nblue",
        "id": "1bc0yr4",
        "selftext": "I've implemented Iubenda as a CMP on my website and I use Google Tag Manager to deploy most of my tracking scripts.  \nI've configured all my tags to require the right consent before firing.  \nBut when a visitor hits my site, obviously the consent state is set to Denied by default to be GDPR compliant. When my tags such as GA4 fire on an All Page Views trigger, they therefore see a Denied consent state and do not fire. If the visitor accepts the right cookies, I see in GTM's debug/preview mode that there is an on-page consent update but no tags figure. The tags only fire on the 2nd page view.  \nIs there a way to fire my basic tags on All Page Views OR an additional trigger that would fire when the right consent is granted so that I can track the landing page hit?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bc0yr4/onpage_consent_update_trigger/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Maybe you can try trigger group?\nI am Still on the way to set consent grant for Facebook pixel in tagmanger.",
                "author": "Charliesue_china",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you followed Iubenda's own guide? https://www.iubenda.com/en/help/74198-google-consent-mode-set-up-google-tag-manager-with-iubenda",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I have, that was the first resource I checked out.  Unfortunately, like I mentioned, most \"Pageview\" tags will only fire on the 2nd page view.",
                "author": "e0nblue",
                "score": 1
            },
            {
                "body": "Hi, so I added a trigger group that then triggers the Facebook page view. However can I add that trigger group to the GA4 page view as well? So that server side can also send the page view (conversion API)",
                "author": "LocksmithAware4210",
                "score": 1
            },
            {
                "body": "If you've followed that exact guide closely, then you should be seeing GA4 page\\_view events being sent even with consent denied. Google Consent Mode will take care of signaling when consent has been granted and you won't see the tag fire again.\n\nEveryone has jumped into learning how to implement consent since the DMA went into effect, so everyone is now speed-running learning just enough of how consent management works to make their site(s) \"compliant\".",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Use your CMP dedicated datalayer push events as trigger instead of pageview. This way the tags fire as soon as the event is pushed and will fire in the same page and all following ones.\n\n  \n\n\nIm on mobile but an example would be Cookiebot event called \"cookie\\_conscent\\_update\" event for example.\n\n  \n\n\nUse GTM debug on your website and accept or deny cookies and monitor which event related to the conscent changes and use that one.",
                "author": "TheMagam",
                "score": 1
            },
            {
                "body": "I had this with Cookiebot before realizing I hadn’t set the correct trigger for all base tags, regardless of whether they are Google ones and should have appropriate cosent checks built in or not.\nLooks like iubenda’s custom trigger event is called “iubenda_gtm_consent_event”. I’d start from there.",
                "author": "Kacay",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708614117.0,
        "title": "Consent Mode: Targeting Consent granted, however, Facebook tags not firing",
        "author": "Affectionate_Golf581",
        "id": "1ax8h7g",
        "selftext": "I am currently using the CookieYes CMP, with a SimoAhava consent update tag as part of the cookie banner implementation. \n\nI have set Facebook tags to require additional consent: ad_storage and have also created a JavaScript variable to listen for this consent have used that within the consent mode update tag. \n\nHowever, when consent is granted, the Facebook tag appears to fire within GTM preview mode, however I cannot see a server call for the tag.  \n\nWould appreciate advice on what needs to be changed ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ax8h7g/consent_mode_targeting_consent_granted_however/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Yes! So in the end what happened for my case was that the CMP automatically classified certain cookies under other consent classifications, so some FB cookies were classified under analytics consent within the CMP. As a result, granting analytics consent worked but only targeting did not. So would recommend checking out the classification of cookies within the CMP and rearranging if need be.",
                "author": "Affectionate_Golf581",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Why are you using consent update tag. A Cookieyes CMP should be enough.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you using this process for your Facebook tag? [https://www.cookieyes.com/documentation/features/integrations/block-third-party-cookies-with-google-tag-manager-and-cookieyes/](https://www.cookieyes.com/documentation/features/integrations/block-third-party-cookies-with-google-tag-manager-and-cookieyes/)\n\nEDIT: Took me 15 mins to register for CookieYes and implement in GTM. Facebook tag works as expected. If you can, please post screenshots of your Facebook tag and trigger configuration.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Just from a quick look at CookieYes, it does seem to send more than the required number of CoMo update events. I can understand a desire to have more manual control, which a CoMo tag would be useful for.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "No, I am not using that configuration. \n\nThe tag in question is a Facebook base pixel, and the trigger is the all pages trigger. The only thing that has been changed is the required consent, for which I have stated ad_storage. \n\nAdditionally, I have already created a variable that is looking for ad storage and it seems to be working as other marketing tags fire correctly. Only Facebook is not firing, however when I grant consent to analytics and targeting I can see the tags fire correctly",
                "author": "Affectionate_Golf581",
                "score": 1
            },
            {
                "body": "Did you ever find a solution for this? I'm having a similar issue with a LinkedIn tag.",
                "author": "Prestigious_Ad_5155",
                "score": 1
            },
            {
                "body": "Thanks!",
                "author": "Prestigious_Ad_5155",
                "score": 1
            },
            {
                "body": "I think I'm having this problem too,  did you have to start a \"Cookie Scan\" to identify these cookies in the CookieYes CMP?  \n\nMy current issue is since I have now set the Consent Mode settings in GTM (e.g. LinkedIn is set as \"analytics\\_storage\" these are now NOT being picked up by the CMP scan, and thus not firing at all. \n\nI think the CookieYes Scanner and the GTM \"Consent Mode\" settings are conflicting with each other right now.",
                "author": "buzbe",
                "score": 1
            },
            {
                "body": "Let me know if this worked! Happy to look into it and help out if it did not.",
                "author": "Affectionate_Golf581",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721290279.0,
        "title": "Google Ads Tags show status \"Still running\" in debug mode for no apparent reason. Any ideas?",
        "author": "ApprehensiveTale6164",
        "id": "1e664lz",
        "selftext": "Google Ads tags show \"still running\" status in debug mode for no apparent reason. Other tags (GA4, FB, Linkedin) with the same trigger are fine and show as \"secceeded\". I've tried multiple solutions but still won't work.\n\n- More milliseconds   \n- tried changing the tag firing options\n\n- Tried all the \"additional consent checks\" options\n\n- even forced all cookies to be granted to try\n\n  \nThis randomly started happening across many gtm containers i have access to maybe 1 month ago and it's been going on since then. Does anyone have any idea what might be causing this and how to fix it? Is anyone else experiencing this? Atm i'm completely clueless. Thanks in advance to everyone for the help!!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1e664lz/google_ads_tags_show_status_still_running_in/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check things like your websites CSP policy. You may need to add the googleadservices.com domain to your sites CSP to allow the script to run on your site. \n\nCheck the network tab in dev tools and see what’s taking the script ‘so long’ to run. Do debug this properly you’ll need to get out of tag manager ‘preview debugging’ and go to devTools.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Are your GAds tags being triggered by an event that happens immediately before a page load?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "In addition to this it might not be an issue and more a bug in gtm preview mode. Fundamentally check the network tab in dev tools and see if the network hits are occuring and if they are panic over.",
                "author": "dowmi12",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1714582657.0,
        "title": "GoogleTags third-party (default script) + GTM first-party (Stape) to save money?",
        "author": "guilhacerda",
        "id": "1chr506",
        "selftext": "Can I work with my **GA4/GoogleTag on third-party-cookie** (google default script) for collecting pageviews and cookies; and with the **GTM on first-party-cookie** (stape hosted) only for collecting important events and optimize the cookies?\n\n**Some like that:**\n\n1. Google Tag/GA4 default script injected on my landing page (all page views).\n2. GTM first-party (stape hosted) run only on strategic events (leads, purchase, checkouts) and send to GTM-server-side (stape hosted).\n\nIf this is possible, I think I will be able to save a lot with the subscription at Stape.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1chr506/googletags_thirdparty_default_script_gtm/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "That sounds like a smart approach to managing your tags and cookies efficiently! Using Google Tag for basic tracking and GA4 for third-party cookies, alongside a GTM setup with first-party cookies for crucial events, seems like a solid strategy. It could indeed help you optimize costs, especially with Stape-hosted solutions for the more critical data. Just make sure your configurations align well so that you're capturing all the essential data without any gaps. Have you tested this setup to see if it captures everything accurately?",
                "author": "leadadvisors-",
                "score": 1
            },
            {
                "body": "I am uncertain how you could make Google Analytics and Tag Manager stop using 1st party cookies and use 3rd party cookies instead. I would think Apple ITP 2.3 would also be a problem for such a scheme. Why use 3rd party cookies when the entire industry is making them obsolete and difficult to use? Here is a blog post on Stape.io. https://drewspen.weebly.com/blog/overview-of-google-server-side-tag-management-sgtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Possible",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "But GTM and GA4 will continue running in strategic events on first-party cookie + server-side.\n\nI’ll use third-party ga/pixel only for page views.",
                "author": "guilhacerda",
                "score": 1
            },
            {
                "body": "\"Apple's Intelligent Tracking Prevention (ITP) 2.3, released in September 2019, blocks third-party cookies by default.\"\n\n[https://www.google.com/search?q=apple+itp+2.3+and+third+party+cookies&sca\\_esv=f977441fd745688c&sca\\_upv=1&rlz=1C1CHBF\\_enUS1027US1027&sxsrf=ACQVn0\\_auPOzImlK5HxCGlULIVCCFlWnbQ%3A1714669106081&ei=MsYzZoLTBMjAp84P0ai-mAI&ved=0ahUKEwiCtOaXuO-FAxVI4MkDHVGUDyMQ4dUDCBA&uact=5&oq=apple+itp+2.3+and+third+pary+cookies&gs\\_lp=Egxnd3Mtd2l6LXNlcnAiJGFwcGxlIGl0cCAyLjMgYW5kIHRoaXJkIHBhcnkgY29va2llczIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYR0j0EFAAWABwAHgCkAEAmAEAoAEAqgEAuAEDyAEAmAIBoAIImAMA4gMFEgExIECIBgGQBgiSBwExoAcA&sclient=gws-wiz-serp](https://www.google.com/search?q=apple+itp+2.3+and+third+party+cookies&sca_esv=f977441fd745688c&sca_upv=1&rlz=1C1CHBF_enUS1027US1027&sxsrf=ACQVn0_auPOzImlK5HxCGlULIVCCFlWnbQ%3A1714669106081&ei=MsYzZoLTBMjAp84P0ai-mAI&ved=0ahUKEwiCtOaXuO-FAxVI4MkDHVGUDyMQ4dUDCBA&uact=5&oq=apple+itp+2.3+and+third+pary+cookies&gs_lp=Egxnd3Mtd2l6LXNlcnAiJGFwcGxlIGl0cCAyLjMgYW5kIHRoaXJkIHBhcnkgY29va2llczIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYRzIEEAAYR0j0EFAAWABwAHgCkAEAmAEAoAEAqgEAuAEDyAEAmAIBoAIImAMA4gMFEgExIECIBgGQBgiSBwExoAcA&sclient=gws-wiz-serp)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "But my first-party cookies will send data updates when any strategic conversion occurs 🤔\n\n* In cases for iOS devices",
                "author": "guilhacerda",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711105757.0,
        "title": "No conversions in GA4 with cookieless setup and server-side tagging.",
        "author": "T-Ik-zei-emes",
        "id": "1bkwofa",
        "selftext": "I have implemented Google Consent Mode V2 and server-side tagging on multiple accounts to meet privacy requirements and still collect important analytics data. However, since this implementation, I notice that none of the accounts are recording conversions in Google Analytics 4 for users who do not accept cookies, despite this configuration being intended to collect certain data via cookieess pings anyway (advanced mode). This problem occurs consistently across all accounts since switching to Consent Mode V2. I have carefully checked the implementation of both the cookie consent solution and server-side tagging, and I have also looked at any delays in data reporting, but the problem persists. I am looking for insight or solutions to understand why these conversions are not showing up in GA4 and how to fix this.\n\nEDIT: I use GTM to load the cookiebanner, and I see all my tags firing in preview mode, however the events don't appear in GA4 (even when I check days later).",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bkwofa/no_conversions_in_ga4_with_cookieless_setup_and/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Absolutely correct. You need a certain level of traffic to build the model. I'm assuming it's because the model really does need a decent amount of data to be anywhere near useful / accurate.\n\nThere's some detail about it as part of this article: [https://www.optimizesmart.com/ga4-behavioral-conversion-modeling-and-consent-mode-guide/](https://www.optimizesmart.com/ga4-behavioral-conversion-modeling-and-consent-mode-guide/)\n\nI couldn't immediately find Google's own documentation on this.\n\nIf you have half a million events per day, I'd expect the model to kick in quickly. Close to the lower limit... maybe 2 weeks.\n\nThat's assuming everything is set up perfectly.",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Did you set up GTM as technically necessary in your cookie banner?",
                "author": "kathars1s-",
                "score": 1
            },
            {
                "body": "Look in GA4 admin > Reporting Identity.\n\nYou will need \"Blended\" as the selected identity to be able to see the modeled data that CoMo enables. Modelling is available for both basic and advanced CoMo, but advanced will obviously give more / better data.\n\nIf you see \"1 inactive method\", the model isn't active yet and either may take some time to build or it will never build if there's not enough traffic (consented and non-consented).",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Hi, how do I do this? I do use GTM to load the cookiebanner, and I see al my tags firing in preview mode, however the events don't appear in GA4 (even when I check days later).",
                "author": "T-Ik-zei-emes",
                "score": 1
            },
            {
                "body": "So you are saying that the Cookieless Pings (Advanced Consent Mode setup) only work when you have enough traffic for modelling? So: no modelling = no data from cookieless pings in GA4?",
                "author": "T-Ik-zei-emes",
                "score": 1
            },
            {
                "body": "Probably in the backend of your banner provider.",
                "author": "kathars1s-",
                "score": 1
            },
            {
                "body": "Thanks you so much for your reply! I was under the impression that GA4 would directly record the Cookieless Pings but anonymized (so without IP or any other Personal Information). But sadly, that doesn't seem to be reality...\n\nEDIT: In the article it also says that Server Side Tagging is a way to fix this, but I don't understand how. In my experience: if users do not consent, GA4 just does not accept the data coming in. And it does not matter if the data is comming in through Server Side Tagging or Client Side Tagging.",
                "author": "T-Ik-zei-emes",
                "score": 1
            },
            {
                "body": "\"turn 3rd-party data into 1st-party\". I'm not a legal professional, but in my opinion that *sounds* like a faulty interpretation.\n\nYou expressly are not allowed to use server-side to in any way circumvent user privacy laws.\n\nYou either have consent or you don't. Server-side can move data into a 1st-party context, but that's nothing to do with being able to get around the user's wishes in terms of what they allow their data to be used for.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718447189.0,
        "title": "Prevent click events?",
        "author": "SkinnyCheff",
        "id": "1dgeyza",
        "selftext": "Hi, I'm trying to block the click event tags from firing unless cookies are accepted. \nThe problem is when I edit the triggers I don't know how to change the \"or\" to \"and\" so it's when consent is given and the user clicks something.\n\nPlease let me know how this is done.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dgeyza/prevent_click_events/",
        "num_comments": 5,
        "comments": [
            {
                "body": "You can add exception triggers to tags, aka blocking triggers. Make a trigger that matches any event (Regex .*) and where a variable that corresponds to cookie consent is off (usually a data layer variable).\n\n\nNext, add that exception triggers to your tag.",
                "author": "MariusGMG",
                "score": 2
            },
            {
                "body": "This is the way. You could also use the built in consent manager if you're utilizing consent mode. Saves you adding an additional exception trigger on each tag.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "1. Make a variable that captures the content of your cookie (1st Party Cookie variable should work fine). I believe dataLayer should also have some indicators of accepted/denied consent\n\n2. Identify which part of your cookie tells you whether the consent is given or not\n\n3. Create Click trigger, choose Only some click events and as a condition choose that your cookie variable is equal/contains part that tells that consent is given\n\n4. Set your click event tags fire on that new click trigger",
                "author": "trp_wip",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711548983.0,
        "title": "Exclude customers from ads",
        "author": "Historical-Ad-1391",
        "id": "1bp2ygi",
        "selftext": "Calling all experts!!\n\nI have a problem on how I would set up an exclusion on customers that uses our software.\n\nHow am I able to set up a tag that would exclude my customer from entering the ads retargeting layher? \n\nI want to exclude them from google ads, Microsoft advertising and Meta. \n\nTagtype? Fire on page view? Etc\n\nAny valuable information would help 👍\n\nExplain to me like I am 10 years old 😂",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bp2ygi/exclude_customers_from_ads/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If you have a purchase event, you have an exclusion event.\n\nThis should be done by your media buyer",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It would depend on your specific scenario. This could be done if a cookie is set for logged in customers. You could create a blocking trigger for when when the cookie is set, for example.\n\nIs the software is SaaS and the user logs in is the web?",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "If you have PII, just send it to CAPI as a separate event or better still as a customer list audience. Is effectively what a CRM tool or Customer Data Platform does but will be dependent on Meta's ability to match a hashed PII to its identity graph.",
                "author": "goodgoaj",
                "score": 1
            },
            {
                "body": "No, you cant buy the software, it is B2B technical that requires integrations.\n\nWe can see if the client is logged in the system, and need to place something in the software so we can exclude our remarketing",
                "author": "Historical-Ad-1391",
                "score": 1
            },
            {
                "body": "Correct! \nHow would i add it for logged in customers?",
                "author": "Historical-Ad-1391",
                "score": 1
            },
            {
                "body": "Okay, still should be done by your media buyer.\n\nExclude rule for visitors of the login page. \n\nOr create a data layer push event for successful login and then tie that to any platform conversion you want for exclusion.  \n\nExcluding at the retargeting level of the pixel is not how it’s intended to function, and even if implemented successfully prevents you from gathering an audience to your current users which is valuable data to capture.",
                "author": null,
                "score": 1
            },
            {
                "body": "Exclude the very last trackable page/button click your customer uses",
                "author": "lollllllops",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1714130523.0,
        "title": "GTA GET API doesn’t work after logging in",
        "author": "Vegetable_Solid7613",
        "id": "1cdiuf1",
        "selftext": "Hey all,\n\nI am currently creating tags for a Wordpress website with the possibility to login with the build in Wordpress login. Now, I noticed that whenever somebody is logged into the website, the tag I have created to track the client ID is stuck on ‘still pending’. Whenever somebody isn’t logged in, everything is fine, but logging in seems to create this issue.\n\nDoes this sound familiar to anyone? And does anybody know how I could fix this?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cdiuf1/gta_get_api_doesnt_work_after_logging_in/",
        "num_comments": 7,
        "comments": [
            {
                "body": "That resolved my problem. Thanks!",
                "author": "Desperate-Musician81",
                "score": 2
            },
            {
                "body": "This really helped me. Thanks!",
                "author": "Vegetable_Solid7613",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "When the Google Tag came out, I stopped using the GET API template and switched to getting the anonymous browser client id from the _ga 1st party cookie with a GTM 1st party cookie variable. ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I finally decided to write a blog post about the anonymous browser client id and session id since the implementation of Google Tag in GTM.\nhttps://drewspen.weebly.com/blog/anonymous-browser-client-id-and-session-id",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "If you also need the anonymous browser session id, I actually do it in 4 parts using 4 GTM variables. The #1 is the only 'fixed' value. The rest is 'automatic' and 'agnostic' of site and installation.\n\n\n\n1) GTM variable - constant - Google Analytics Stream\n\nG-xxxxxxxxx\n\n\n\n2) GTM variable - Javascript function - Google Analytics Session Cookie Name\n\nfunction () {\n\nvar gaStream = {{Google Analytics Stream}} ;\n\nif (typeof gaStream == 'undefined' || gaStream == '') {\n\n}\n\nelse {\n\nif (gaStream.search(/\\[0-9A-Za-z\\]+/)>=0) {\n\nreturn \"\\_ga\\_\" + gaStream.replace(\"G-\",\"\");\n\n}\n\n}\n\n}\n\n\n\n3) GTM variable - 1st party cookie - Anonymous Browser Session ID Cookie\n\ncookie name\n\n{{Google Analytics Session Cookie Name}}\n\n\n\n4) GTM variable - Javascript function - Anonymous Browser Session ID\n\nfunction() {\n\nvar theParts;\n\nvar theValue;\n\ntry {\n\ntheParts = {{Anonymous Browser Session ID Cookie}}.split(\".\") ;\n\ntheValue = theParts\\[0\\] + \".\" + theParts\\[1\\] + \".\" + theParts\\[2\\] ;\n\n} catch (err) {\n\n}\n\nif (typeof theValue == 'undefined' || theValue == '') {\n\n}\n\nelse {\n\nif (theValue.search(/\\[0-9A-Za-z\\]+/)>=0) {\n\nreturn theValue;\n\n}\n\n}\n\n}",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708628847.0,
        "title": "What are the telltale signs that a GA4 tag is fired correctly without consent?",
        "author": "ChocolateYoghurt",
        "id": "1axep44",
        "selftext": "I've worked with a bunch of Consent setups these last few months, but one thing I've been struggling to find out is the actual difference in the firing of GA4 tags that without consent. \n\nOutside of relying on GTM consent and preview, are there any telltale signs f.ex. in certain cookies not being set? Or how the request is modified?\n\nBeing able to investigate this without having access to the GTM container would be beneficial as well.\n\nThanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1axep44/what_are_the_telltale_signs_that_a_ga4_tag_is/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Go to the website in your browser (Chrome) and Right-Click: Inspect > Application tab > Storage > Cookies. There you can see if certain cookies are being loaded or not.\n\nEdit: look up how to set up advanced implementation of Google Consent for the Consent Mode Platform you are using. Then you will see the tags firing in preview mode, if preview mode can’t read find your GTM, then tags don’t fire aswell.\n\nI hope I understood, and answered your question well.",
                "author": "takkietnawie",
                "score": 3
            },
            {
                "body": "Google don't like us doing it, but I'm using the gcd parameter in GA4 hits to debug / validate consent management.\n\nYou can use this to decode the contents: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#consent-mode-v2-signals](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#consent-mode-v2-signals)\n\nGoogle have warned that it's a parameter purely for Google internal use, can change at any moment without notice and is not to be relied upon.\n\nTo which I took that to mean \"don't build important tools that rely on this paramter\", so I'm going to continue to use it for the exact purpose you're asking about until Google change it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Always network view. If you want an easier life, install Adswerve DataLayer Inspector+ to unearth GA4 hits to the dev console. \n\nYou'll see the gcd parameter in every GA4 network hit, whether Google Consent Mode is present or not.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "> Adswerve DataLayer Inspector+\n\nThanks, will test it!",
                "author": "ChocolateYoghurt",
                "score": 2
            },
            {
                "body": "Hey.\n\njust want to say that the 13r3r3r and 13p3p3p worked great. thanks!",
                "author": "ChocolateYoghurt",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can also use the content check site by Analytics Debugger to quickly decode the gcd parameter:\n\n[consentcheck.analytics-debugger.com](https://consentcheck.analytics-debugger.com)",
                "author": "datamelon",
                "score": 1
            },
            {
                "body": "Hey buddy :) \n\nConsent view in GTM answers some questions, of course, but not specifically how the tags behaviour is modified. \n\nThanks for your reply though!",
                "author": "ChocolateYoghurt",
                "score": 1
            },
            {
                "body": "Aha, this seems to be more in line with what I'm looking for.\n\nUsing the word parameter, I assume you don't mean adding this in any way to the GA4 tag itself, but rather looking at the cookies? or network? Or debug view?",
                "author": "ChocolateYoghurt",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715195393.0,
        "title": "Sending GA4 events from my server (through server GTM)",
        "author": "wizbcn",
        "id": "1cnco3u",
        "selftext": "Hello,  \n\n\nI am trying to record a purchase event into Google Analytics (GA4). I want to do it from the server (using a webhook from Stripe that notifies a purchase has been completed) instead of the client because it is more reliable.  \nI managed to send the events to GA4 using the [Measurement Protocol](https://developers.google.com/analytics/devguides/collection/protocol/ga4) API correctly.  \nNow, I have a server GTM running and I'd like to use it instead of the Measurement Protocol API since it makes sense that I use the server GTM to be notified of all my tracking events and I just distribute them later to whatever services I want in the future (e.g. Facebook).  \nSo you can make the server GTM have the same Measurement Protocol API simply by adding the client called Measurement Protocol (GA4).  \nMy problem is, that when using the Measurement Protocol from server GTM the events do not appear in GA4. I debugged the server GTM and they are being sent to GA4, they just simply don't appear.  \nBoth calls are exactly the same, I only change the URL of the request...\n\nI found some people saying I need to attach the session\\_id but I am already doing it.\n\nAny ideas would be appreciated!  \n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cnco3u/sending_ga4_events_from_my_server_through_server/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hi, we have the same issue. If you were able to solve it, it would be great if you could share some suggestions. We are trying to use the Stripe webhook to send data to server GTM but we get error from Stripe about failed attempt to send data. We are using google cloud and a data client on GTM to listen to the webhook’s incoming requests but without success. Do you have any suggestion? Thank you",
                "author": "ranaldiale",
                "score": 1
            },
            {
                "body": "In the Server GTM install:  \n\\- The \"client\" with name \"Measurement Protocol (GA4)\"  \n\\- A \"tag\" with of the type \"Google Analytics: GA4\" (leave all the fields blank so it reads the values from the incoming request)\n\nHave your own server receive the webhook from Stripe and from there do a request to your sGTM url.  \nThe url will be something like:  \nhttps://your-sgtm-url.com/mp/collect?measurement\\_id=MEASUREMENT\\_ID\n\nHere are some links to figure out the parameters of the request:\n\n[*https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client\\_type=gtag#payload*](https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#payload)  \n[*https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference/events#purchase*](https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference/events#purchase)  \n[*https://developers.google.com/analytics/devguides/collection/ga4/set-up-ecommerce*](https://developers.google.com/analytics/devguides/collection/ga4/set-up-ecommerce)  \n[*https://ga-dev-tools.google/ga4/event-builder/*](https://ga-dev-tools.google/ga4/event-builder/)\n\nFinally, if you are tracking conversions from Google Ads you will need to include the gclid in a cookie, I explained it here how to do it:  \n[https://www.reddit.com/r/GoogleTagManager/comments/v93pnb/comment/lu6edc5/?utm\\_source=share&utm\\_medium=web3x&utm\\_name=web3xcss&utm\\_term=1&utm\\_content=share\\_button](https://www.reddit.com/r/GoogleTagManager/comments/v93pnb/comment/lu6edc5/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button)",
                "author": "wizbcn",
                "score": 1
            },
            {
                "body": "Many thanks, we started using Stape servers and we managed to have the GTM client to listen to the webhook incoming requests.\n\nWith regards to the conversions tracking (for Facebook), I noticed Facebook is not always getting the fbp information (only 25%-30% of events have fbp). Before the webhook configuration on GTM, we had 100% of events with fbp. Do you have any suggestion on how to make sure Facebook always receive the fbp parameter?",
                "author": "ranaldiale",
                "score": 1
            },
            {
                "body": "You need to send it as a cookie also.  \nCheck this documentation if you need to build the value of the cookie:  \n[https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc](https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc)\n\nIn my case, when I create the Stripe checkout I save the cookie value to in the checkout session (in metadata) and then read it in the webhook.",
                "author": "wizbcn",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715272303.0,
        "title": "Google Ads conversion serverside outgoing req None",
        "author": "Mrjeepleet",
        "id": "1co1had",
        "selftext": "Hello,I have setup Google ads conversion serverside, but when i test it - it says None for outgoing reqeust from server. what could be wrong?\n\n[https://assets.circle.so/a9oxk2qy7pa8fy3boqlf8e3hi4vy](https://assets.circle.so/a9oxk2qy7pa8fy3boqlf8e3hi4vy)\n\n",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1co1had/google_ads_conversion_serverside_outgoing_req_none/",
        "num_comments": 6,
        "comments": [
            {
                "body": "nah i fixed it. The reason it shows no outgoing request to server is because i had no gclid in my preview url. It requires glcid for fpgclaw cookie",
                "author": "Mrjeepleet",
                "score": 3
            },
            {
                "body": "Nothing is wrong. There is an outgoing request from the browser, meaning the server returned a response to the browser which tells the browser to make a request to googleadservices. Check your browser network tab.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I can confirm that the outgoing requests from the Google ADS Conversion Tracker tag, specifically the entry under \"Outgoing HTTP Requests from Server,\" are active when the \"gclid\" parameter is present. I tracked this parameter with Hotjar and used a user with low interaction to test the various conversions, ensuring that they were also correctly sent from the server side. It works!",
                "author": "Raidrew",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711473419.0,
        "title": "GA4 audiences with backend data not populating in Google Ads",
        "author": "Kowaldo",
        "id": "1bodbcm",
        "selftext": "Hi, so basically I've built some audiences in GA4 with data comming in via Measurement protocol. All is fine in GA4 - the audiences have millions of users. Everything is linked with Google ADs for remarketing purposes but the audiences just arent populating. I'm having daily increments of 100 users (on some days 0) while in GA4 the audiences are rising by 50k a day. My conset setup is good - GA4 config tag is firing only after consent is granted. \n\nI've tried everything in my might but can't seem to find a solution. Google's documentation on the subject is sparse at best. \n\nAlso I've observed that the collect cookies we generate don't have t=ga-audience in the payload even when GADs remarketing tags fire. Is this the case? T=dc calls are going out and display audiences are populating faster all beit very slowly in comparison. \n\nAny one else encountered this problem. ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bodbcm/ga4_audiences_with_backend_data_not_populating_in/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I haven’t encountered this problem but I’m interested to hear the solution!",
                "author": "coffeeandbags",
                "score": 1
            },
            {
                "body": "Admin > Data collection and modification > Data collection\n\nTurn on Google signals data collection and acknowledge the User Data Collection Acknowledgement",
                "author": "Barmy90",
                "score": 1
            },
            {
                "body": "We aren't sending user provided data so this shouldn't be the case right?",
                "author": "Kowaldo",
                "score": 1
            },
            {
                "body": "You have to turn all this stuff on to activate audience sharing.",
                "author": "Barmy90",
                "score": 1
            },
            {
                "body": "I'm sorry I misread. You meant the User Data Collection Acknowledgement not the user-provided.\n\nWe have this on from the start so it's not the case.",
                "author": "Kowaldo",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708979074.0,
        "title": "Trigger for session-time or number of pages visited",
        "author": "jorritba",
        "id": "1b0roz5",
        "selftext": "I want to fire a tag once a user is more than 5 minutes on my site (not the page, but the full site). Alternatively, fire a tag when the user has visited 10 pages in a row on my site.  \nHow can I achieve that?  \nThe timer trigger is only related to time on that page.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b0roz5/trigger_for_sessiontime_or_number_of_pages_visited/",
        "num_comments": 9,
        "comments": [
            {
                "body": "There exists no native pageview counter or timer that spans multiple pages in GTM. If you want this functionality you will have to create a custom tag.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "To create such a trigger (aka visit duration trigger) you need to first create a \"timer\" that would track user's time as they browse through pages on your site (should work across multiple pages tracking total time) - and have this timer fire a custom event at the time interval/s you are interested in (example after 5 minutes into the session, or fire at multiple thresholds - 5, 10, 30 mins etc) then you need to use this custom event (or multiple events) fired by the timer as triggers for your tags.    \n  \nI have a blog post here [https://axxondigital.com/time-on-site-or-visit-duration-custom-trigger-in-gtm/](https://axxondigital.com/time-on-site-or-visit-duration-custom-trigger-in-gtm/) that explains how to create such a timer and triggers - you can just copy the code and adjust it for your needs.",
                "author": "axxondigital",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Variables in GTM can be evaluated multiple times in the same event, meaning that this solution could increment the value multiple times on the same pageview. It's better to have a custom html tag that handles the counting that then pushes an event to the dataLayer once the target has been reached.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thought this as well. Also, sessionStorage won't work cross-domain or on subdomains if that's something you have to deal with. You'd have to set and update a cookie value for that to work.",
                "author": "mkt_jaguar",
                "score": 1
            },
            {
                "body": "Thanks all for your thoughts and ideas.\n\nIsn't there any 'native' trigger in GTM I could use for this? I don't exactly need this, I just want to show a message to free users on our site (but not on the first page directly). Just after they have spent some time on the site (or visited multiple pages)...",
                "author": "jorritba",
                "score": 1
            },
            {
                "body": "You could try having ChatGPT give it a go for the code you'll need to put in your custom HTML tag. It'll at least be good starting point if you need some JavaScript. You can test it and see if it works.    \nIf you don't know any JS and the script doesn't work, have a dev or someone familiar with JS fix it.",
                "author": "mkt_jaguar",
                "score": 1
            },
            {
                "body": "So you could create a variable that works as a page counter.   As an example create a custom javascript variable with the following code:\n\n    function() {\n      var counterKey = 'gtmPageViewCounter';\n      var pageViewCount = sessionStorage.getItem(counterKey);\n      if (pageViewCount === null) {\n        pageViewCount = 1;\n      } else {\n        pageViewCount = parseInt(pageViewCount, 10) + 1;\n      }\n      sessionStorage.setItem(counterKey, pageViewCount);\n      return pageViewCount;\n    }\n\nThis will use session storage to track each pageview and increment the number by 1.  \n\nYou can then create a trigger, where you can use this page counting variable.   e.g. when this variable equals 10",
                "author": "dirtymonkey",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707764358.0,
        "title": "Consent Banner without a subscription",
        "author": "FastWave",
        "id": "1ap7rwa",
        "selftext": "Hi.\n\nI am looking for a consent banner solution that would integrate with Google Tag Manager and support GDPR. \n\nHowever, all the common solutions that I've come across (like CookieBot and CookieYes) are great but considering they are $100+ per year for a single site (e.g a site with a blog and 2 languages often already exceeds the free tier), it seems a bit excessive to pay this money, especially considering that web hosting itself is almost as expensive. \n\nAny recommendations? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ap7rwa/consent_banner_without_a_subscription/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can try Klaro (open-source). I've checked their documentation and this guide so far\nhttps://measureschool.com/cookie-consent-banner/\n\nI haven't tried it yet. I prefer to pay 10€/month for cookiebot and spend my time elsewhere.\n\nGood luck !",
                "author": "yerdna",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "The cost of non-compliance could be a lot more.\n\nAlso, CookieBot has a free tier. You could use that.\n\nThe cost to *them* is it takes bandwidth and compute resource to run scans of your site and also to maintain the database of known cookies. That's why they have paid tiers.\n\nCookieBot is also one of the easiest (if not the absolute easiest) to integrate with GTM.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "If you use wordpress complianz pro is 59 euro for one license and as far as I know, keeps working even after the subscription runs out. You won't get updates though.",
                "author": "benl5442",
                "score": 1
            },
            {
                "body": "I sell ready to use code for 50 euro. Dm me if you’re interested.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "would your traffic fall within the limits of osano? https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thanks for the response. If on a free tier, do I understand correctly that Cookiebot will stop showing the banner if their scan detects that subpage count exceeds 50? Or is it rather that they only scan up to 50 and just ignore the rest for their 'analysis'?",
                "author": "FastWave",
                "score": 1
            },
            {
                "body": "I’ve never tested the theory to find out. At the stage where I’d have 50 pages, I’d just pay for the service.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711276694.0,
        "title": "Impression Tag",
        "author": "chellauhuy",
        "id": "1bmhsv0",
        "selftext": "Hi friends. I hope you are in a good condition.  \nAs a publisher who has several blog sites, I receive many advertising requests from advertisers, generally in the form of banners, such as 300x250 and 728x90 displayed in the top or sidebar. Usually, I only need a tracking link from the advertiser along with a banner.  \nHowever, a new advertiser asked us this:  \n\\- Can you install campaign manager impression tags?  \n\\- Can you install our pixel on the website so we can collect the visitors and retarget them?  \n\\- Do you accept impression tags? If yes, kindly also provide all the materials required from our side (exact size of all tags, etc.)\"  \nPlease help me, what should I answer/do, my assumptions are related to GA and GTM? Thank You.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bmhsv0/impression_tag/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Nope, those are two different products. Like supper different. Word tag here brings a confusion",
                "author": "_practical_data_",
                "score": 1
            },
            {
                "body": "Google has a support page for this. https://support.google.com/campaignmanager/answer/2826133?hl=en#zippy=%2Ctrack-clicks-and-impressions%2Ctrack-only-impressions",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "It it is google Ads then you can track it as following video:   \n[https://youtu.be/oBJOQFJUfq8](https://youtu.be/oBJOQFJUfq8)",
                "author": "webhasan89",
                "score": 1
            },
            {
                "body": "Thx mate, appreciate it.",
                "author": "chellauhuy",
                "score": 1
            },
            {
                "body": "It will be a third party cookie, collecting data and user interaction, soon going to stop working, as third party cookie procedures are being demotivated.",
                "author": "Brave_Mission_4682",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710957241.0,
        "title": "Trigger Group does not fire",
        "author": "AdOld7347",
        "id": "1bjjq7e",
        "selftext": "Hello to all.\n\nI have a problem with the trigger group, I try everything but is doesn't work.\n\nI have a trigger group with two triggers, once fired when customers registrate and once fired when a customer made an order. \n\nOn the GTM Assistant, the triggers individually fired but in the trigger group the triggers doesn't fired....\n\nI don't know what to do anymore, please help.\n\n&#x200B;",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bjjq7e/trigger_group_does_not_fire/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Trigger groups only work when both/all triggers are firing on the same page. Those sound like things that often happen on different pages. \n\nIf that's the case, you may need to use a first-party cookie instead. Or if you're capturing user ids, you could do a check for whether or not the user has one (assuming they only get one upon registration).",
                "author": "winless",
                "score": 1
            },
            {
                "body": "Can you give more context? Why didn't it work? Is there registration page and order confirmation page on different domains?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Hello u/brannefterlasning.\n\nFor the registration, the trigger fires when the user submit the form and the order trigger fires when the a specific URL is displayed.\n\nRegistration page and order confirmation page have the same domain.\n\nOn the Google Tag Manager Assistent the triggers, fires individually and it works but the trigger group doesnt fires because the it says one trigger doesnt fires but individually it did....\n\nThanks for you help.",
                "author": "AdOld7347",
                "score": 1
            },
            {
                "body": "As the previous person stated, trigger groups only work if the events happen on the same page.\n\n\nYou were given the advice to instead set a cookie on the registration event and then use that as a condition on the confirmation page.\n\n\nYou replied that doesn't work but everything you just told me points to the fact that it would indeed work.\n\n\nSo, why doesn't it work? Have you tried it?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "thank you for your reply but also with an firt-party cookie doesnt work...",
                "author": "AdOld7347",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711789811.0,
        "title": "CMP integration with GTM",
        "author": "danielpaulme",
        "id": "1brdjwg",
        "selftext": "I'm looking to integrate [CookieChimp](https://cookiechimp.com) (CMP) with GTM. The only way we have to trigger a consent change is based on a custom trigger event and mapping tags to fire based on that. Is this the best way to implement tags with consent management platforms? \n\nThis is the current implementation docs on setting up a custom event: [https://cookiechimp.com/docs/block-scripts-cookies/block-tags](https://cookiechimp.com/docs/block-scripts-cookies/block-tags) ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1brdjwg/cmp_integration_with_gtm/",
        "num_comments": 6,
        "comments": [
            {
                "body": "There does not seem to be much documentation from Google side on how to do this. Without the custom trigger the consent only takes effect after a full page reload and no in the same page view action after consent. Is there a documentation on how to do the implementation correctly on Google that a CMP should implement?",
                "author": "danielpaulme",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Tge way you have followed is right.",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Yet another CMP with poor documentation!\n\nThey show Google Consent Mode intergration being included, but then they tell you not to fire your Google Tag until \"cookie\\_consent\\_update\".\n\nThat's not how Google designed Google Consent Mode to work. Unfortunately, I don't know enough about CookieChimp to say whether it will work properly if you implement tags and triggers the way Google intended.\n\nKnowing how to test and QA a consent management system is key.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I don’t think Google document this because their responsibility is to say how Consent Mode should work, it’s the consent platform provider’s responsibility to say how their platform should work.\n\nThe classic “consent doesn’t update until the next page load” problem was solved years ago by the big name consent platforms. I’ve dealt with numerous of them and whilst some still have quirks, they have all honed in to a specific solution and way of operating that it is by now an effective standard.\n\nEdit: The real answer here is “pick a popular, well supported content platform”.\n\nThe big name platforms are not necessarily expensive. Except TrustArc. They are expensive and have recently made some errors in what they are telling their clients to do, so I can’t even argue they are providing excellent support.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1714837708.0,
        "title": "Google Ads conversion serverside outgoing req None",
        "author": "Mrjeepleet",
        "id": "1ck3cr8",
        "selftext": "Hello,\n\nI have setup Google ads conversion serverside, but when i test it - it says None for outgoing reqeust from server. Is this normal?\n\n[https://assets.circle.so/dqdo2iyrf5bf62rxvfs09b2iimks](https://assets.circle.so/dqdo2iyrf5bf62rxvfs09b2iimks)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ck3cr8/google_ads_conversion_serverside_outgoing_req_none/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Is it because G ads still uses 3 party cookies on chrome?",
                "author": "Mrjeepleet",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes it’s normal. It’s pretty confusing and I admittedly didn’t take the time to fully understand it, but it actually has the browser send the data after going to the server",
                "author": "RoosterCapable8443",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710942269.0,
        "title": "GTM vs Direct Coding for Google Ads Conversion Tracking",
        "author": "Axxi222",
        "id": "1bjds6l",
        "selftext": "I'm currently evaluating the best approach for implementing Google Ads conversion tracking on my e-commerce platform for most accurate conversion tracking.\r  \n\r  \nThe choice stands between embedding the Google Ads conversion tracking script directly into the site's HTML with a built-in module that we've been using for 10 years, but there is no option for \"enhanced conversion\" here. Or would Google Tag Manager (GTM) be better for potentially more accurate conversion datat to Google Ads.\r  \n\r  \nTo put it simply:\r  \n\r  \n**Direct Code with Built-in Module**: We've been using this traditional method for 10 years. However, it lacks the option for \"enhanced conversion.\"\n\nOR\n\n**Google Tag Manager (GTM):**\r  \n\r  \nGiven the impending changes with third-party cookies and the need for more adaptable tracking solutions, would GTM provide a significant advantage in terms of capturing more accurate conversion data compared to the built-in module approach we've relied on for a decade?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bjds6l/gtm_vs_direct_coding_for_google_ads_conversion/",
        "num_comments": 6,
        "comments": [
            {
                "body": "GTM has been the better option for over 10 years. I can't think of a single reason to code tags directly to the page. You will have an entire world of options available to you. Or, take a look at Zaraz from Cloudflare. Either option will be a massive step up from where you're at now.",
                "author": "griz_fan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thanks for the response. We've made the switch to GTM, and it's working well so far. However, we encountered an issue, detailed in this post:\n\n[https://www.reddit.com/r/GoogleTagManager/comments/1biqqki/migrating\\_google\\_ads\\_conversion\\_tracking\\_to\\_gtm/](https://www.reddit.com/r/GoogleTagManager/comments/1biqqki/migrating_google_ads_conversion_tracking_to_gtm/)\n\nWould you possible know why we are getting this error? I resolved it by setting up a 'Google Tag' in GTM with our Google Ads ID, and then the error ceased. But from what I've read and understood, setting up the 'Google Ads Conversion Tracker' and 'Conversion Linker' should have been sufficient. I'm affriad that now with the recent \"Google Tag\", it might cause some problems, for example i'm seeing a few double conversions registration in Gads now, that later are being corrected.",
                "author": "Axxi222",
                "score": 1
            },
            {
                "body": "unfortunately, these things can be difficult to diagnose without access to the GTM account. GTM has a great preview and debug mode feature that should help a LOT. This article is from a source I trust, and walks you through using debug mode to understand how the tags are firing, what events are triggering each, the variables and data layer available at each event. Hopefully, this will not only help solve that immediate problem, but also help you understand how GTM works a bit more, so you can take full advantage of what it offers.\n\n[https://www.analyticsmania.com/post/google-tag-manager-debug-mode/](https://www.analyticsmania.com/post/google-tag-manager-debug-mode/)",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "Yes, I've tried every possible combination and nothing works except adding this \"Google Tag.\" Looks like I'll need to consult with an expert. Thanks for the reply!",
                "author": "Axxi222",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707337378.0,
        "title": "Modify script call in header?",
        "author": "pookadooka",
        "id": "1alcmvi",
        "selftext": "I have a client that is adding cookie consent code to their site and I need to modify the actual script call that loads the GTM, I need to change the type and add a class. Is there a way to do this with this plugin or will I have to manually load the script?\n\nScript needs to look like this for reference\n\n> <script type=\"application/plain\" class=\"optanon-category-c0002\" >",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1alcmvi/modify_script_call_in_header/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Having GTM integrated into your website doesn't violate any privacy laws. It collects no information about the visitors whatsoever. The tags however can and should be bound to the OneTrust cookie consent states.",
                "author": "amlozek",
                "score": 2
            },
            {
                "body": "This. No need to modify how GTM loads.",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": ">is there a way to do this with this plugin\n\n\nWhich plugin?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "\r  \nHave you considered loading OneTrust from INSIDE GTM?\r  \nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Oh, I was linked here from a different page and didn't realize that this was just the general GTM sub.\n\nI am on wordpress using the Google Tag Manager for WordPress plugin. \n\nI can delete this post and retry in a different spot.",
                "author": "pookadooka",
                "score": 1
            },
            {
                "body": "As far as I can see in the plugin files there is no out of the box support for OneTrust. If you can't find a way to load the GTM script based on consent then you will simply have to add exception triggers that block your tags instead. Onetrust is well integrated with GTMso that should be an easy task.",
                "author": "brannefterlasning",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715772069.0,
        "title": "Check GA4 session source medium",
        "author": "Annual_Scratch9029",
        "id": "1csid4c",
        "selftext": "Hello! My organic results have encountered a major growth  after implementing consent mode v2 on my site. I used debug view in order to check if the session source medium is maintained if I enter the site without accepting the cookies, and then the page is refreshed and the session source medium has not changed.\n\n  \nIs there any other way to check if google consent mode can affect results in session atribution?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1csid4c/check_ga4_session_source_medium/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you're not accepting the consent then the session source medium will not change,  when you accept then it should be changed this is the way that the consent will work. If in your case It's not working then I think your consent setup is not configured properly. Which cmp are you using?",
                "author": "analyst_bappy",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1704987722.0,
        "title": "Consent Mode V2",
        "author": "Shazacar",
        "id": "1944mm7",
        "selftext": "Hi all,\n\nWith the new consent mode V2 we need to implement that before end of March (in UE). We gonna have 2 possibilities : Advanced mode and Basic mode. To be fine with RGPD and don't go to the war against the DPO the Basic Mode is the best solution. I don't find a real tuto that explain how to setup these mode. What I see is: for the Basic Mode I need in GTM to add additionnal consent in the tag setup (even if the tag is already in the default setting of the tag) OR add a blocking trigger if the consent is not give. \n\nFor the Advanced we must let the setting as now and don't add a blocking trigger or a additionnal consent (like now in the consent mode V1).\n\n2 questions: is that correct? And how can you check if the basic mode is correctly setup and that no pings are send to Google (Advanced)? \n\nThank's ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1944mm7/consent_mode_v2/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Generally you never need to block any tag, the built in consent settings for each tag will be enough. At least for native google tags.  \nThird party tags might need a trigger like cookie\\_consent\\_update, and within the tags you will specify if it requires ad\\_storage or whatever, but generally that's it.  \n\n\nYou might see a tag firing even with consent denied, but there will be no cookie set",
                "author": null,
                "score": 1
            },
            {
                "body": "We implemented Consent Mode via GTM. \n\nYou can check if it's correctly implemented in Conversions > going to the conversion itself, for example, Form > clic in Diagnostics > and then you will see if everything is working correctly.\n\nBtw, I have a legal question. Do we have to specify in our Privacy Policy that we're using this set up or there's no need. Our lawyer made us put we were using Google Signals, so I was wondering if that's the same case with Consent Mode.",
                "author": "Green_Matcha89",
                "score": 1
            },
            {
                "body": "That's what Google refer to as \"CoMo advanced\".\n\n\"CoMo basic\" retains the tags fire / don't fire logic, so no cookieless pings are sent to Google.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I haven't really looked at the v2 documentation yet.  I'll check it later.  \n\n\nThe entire point of the consent mode is to collect anonymous pings so that google can model data. If we block tags, we block consent mode. At least this is how it is working now.",
                "author": null,
                "score": 1
            },
            {
                "body": "Yeah that’s the point, v1 CoMo is the news advanced mode on CoMo V2. But I saw some info that the advanced CoMo is not legal for EU and the RGPD. At this point I want to block the tag if the consent is not given but I litterally don’t know how to check if pings are send even with the blocking trigger. Google launch this new CoMo but what about a real technical doc…",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "That was the original intended use case for CoMo, but that's no longer true.\n\nWith the DMA looming (March 6th), CoMo is now recommended if you want to continue to use GA4 audiences. There are other caveats because it's a bigger topic, but the \"point\" of CoMo now is to ensure Google platforms receive the signals they need in order to retain full functionality.\n\nThere are good arguments against advanced CoMo. There are potentially some jurisdictions (Finland) where cookieless pings are disallowed. You would still want CoMo, but you would be limited to a basic implementation.\n\nCoMo is not the modelling that happens. CoMo enables it, but each platform (GA4, gAds, SA360 etc) does their own modelling based on the redacted, cookieless pings.\n\ntl;;dr: You won't see the benefit of advanced CoMo if you don't allow the tags to fire, but you will still be able to use GA4 audiences after March 6th in certain (large!) jurisdictions.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "There are technical docs. Simo Ahava posts about this a lot. You should follow his posts on LinkedIn and sign up for his newsletter.\n\nHow to look for pings: Look in dev tools -> Network tab. For GA4, search/filter on \"collect?v=2\" and you will see (or not!) your `page_view` event.\n\nIf you have advanced CoMo (tags are not blocked), you will see the `page_view` event carries a `gcs` parameter with a value `G100` before you grant consent and for all subsequent events if you deny consent.\n\nIf you have basic CoMo (tage *are* blocked), you will see no hits prior to consent and no hits if you deny consent, but if you grant full consent you will see `gcs=\"G111\"`.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710350374.0,
        "title": "Open source Consent Management Platform (CMP) compatible with Google Consent Mode v2 (GCMv2)?",
        "author": "vppromoter",
        "id": "1bdx21q",
        "selftext": "Hi, in recent past I have setup quote some CMPs with GTM and right now I'm facing a tricky case. Maybe you will help with your ideas or experience.   \nThere is a website with data flowing into GTM (Enhanced ecommerce, conversion events etc.) but there is no Cookie Consent Banner. If I would need to use compatible extension, I would need to remove current working extension and go through a lot of customization work which is not a solution at this point. Let's not consider it for this thread.  \n3rd party CMPs with free plans are also not in the radius. Let's not consider it.  \nBecause of that I'm thinking to implement 3rd party solution and then use Consent mode template inside GTM which can catch consent mode v2 states.  \nSo the missing part is a cookie consent banner which can generate calls to data layer with consent states.  \nDo we have something in open source space for this? From what I've checked, most of the solutions are really poor in functionality and/or outdated.  \nIt would be great to get your valuable input.  \n",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bdx21q/open_source_consent_management_platform_cmp/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I'm not aware of any that are completely open source, but I'm interested to follow this post if anyone does know of one.\n\nThe difficulty with open sourcing would be how does the cookie scanning work? It's one of the significant costs of running a CMP due to the traffic and computation involved. Looking up a cookie name for one page on a website isn't taxing. Looking up 100 cookie names across 10k pages on a site starts to become a significant resource usage.\n\nYou can't just have a cookie banner and not an accompanying page that lists all of the cookies, their category and their reason for existing.\n\nNot open source, but I have recently signed up for the absolute lowest tier service from OneTrust. It works just fine for what I need.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I have built a CMP that is based on open-source and has all the back-end features required for geo-targeting, etc. Checkout the docs here: https://cookiechimp.com/docs/overview",
                "author": "danielpaulme",
                "score": 1
            },
            {
                "body": "You can try out [c15t.com](http://c15t.com) — it’s an open source CMP built with TypeScript, Node, and React. It supports Google Consent Mode v2 and lets you push consent states to the data layer via GTM. It’s still early days, but we’re working hard to bring it up to the level of the bigger players. Would love any feedback if you give it a spin!",
                "author": "aburnedchris",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711051189.0,
        "title": "GTM Consent Firing",
        "author": "danglefest19",
        "id": "1bkfuc9",
        "selftext": "I've set up our cookie banner using Cookie-Script and had a couple of questions to make sure this is set up properly. I'm receiving the gsc=G100 and G111 codes for approvals and denies, I also have this tag firing before the consent state (this tag fires before my Google Conversion Link and G Tag). Based on my research with the order of these tags firing, I have a feeling something is off. I have a couple of screenshots [linked here](https://drive.google.com/drive/folders/13tHIed1uCDKELBlbPI795llIzwOPRjYl?usp=drive_link) from Google Drive. One screenshot is from the Preview tool within GTM, another is of the consent template, and then one is for the entire container. I feel I need an Initialization trigger somewhere, but can't seem to find any detailed, step-by-step processes; there's seemingly a step missing for every resource I find.   \n\n\nAny help or initial thoughts would be greatly appreciated, and thank you.   \n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bkfuc9/gtm_consent_firing/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Google Tag should fire on Initialization. send\\_page\\_view should be false in that Google Tag and you should have a separate GA4 Event tag with an All Pages trigger to send your page\\_view\n\nYour \"Pixel FB\" tag should not be using an All Pages trigger, because All Pages can/will happen prior to the consent state being known. Not familiar with CookieScript, but hopefully there should be a \"cookie\\_consent\\_update\" event that is sent when users choose their consent and then on every page after CoMo state has been updated.\n\nYou should use that as a custom event trigger for all non-Google tags (where those tags read or write data to cookies).\n\nYou don't need to set Conversion Linker as a cleanup tag for the CookieScript tag. Fire Conversion Linker on All Pages and it will take care of itself.\n\n**If your cookie banner allows users to ignore it and they can navigate the site, there is a setting within Conversion Linker and in the Consent Mode default script that can preserve conversion link / attribution parameters. If you don't enable either mitigation, you will lose attribution for users who navigate prior to allowing cookies.**\n\n&#x200B;\n\nCMPs the definitely provide a reliable data layer event for replacing an All Pages for 3rd-party tags:-\n\n* OneTrust / CookiePro\n* CookieBot (unless you switch off CoMo)\n* CookieYes\n\nI'm sure there are others. These are the ones I've worked with recently.\n\nTrustArc can be coerced into working nicely as well, Google \"TrustArc GTM integration\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "If you are curious about in-details how cookie consent works and how you need to setup it for different method then you can follow this play list. Where you will every single details related to cookie consent setup with google tag manger: [https://www.youtube.com/playlist?list=PLI9byqXbTk7kqR5ZJoPsNnuZv4W8D8f1Z](https://www.youtube.com/playlist?list=PLI9byqXbTk7kqR5ZJoPsNnuZv4W8D8f1Z)",
                "author": "webhasan89",
                "score": 1
            },
            {
                "body": "This was extremely helpful, Stefan, thank you so much for the detailed reply. Apologies this kudos comes 8mo. late",
                "author": "danglefest19",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711016380.0,
        "title": "sGTM in a different domain than the website",
        "author": "Expert-Maintenance-7",
        "id": "1bk38o8",
        "selftext": "Hi, are there any drawbacks of having sGTM in a different domain than the website itself? For example, sGTM runs on tracking.example.com but it's used on example.de? Would this cause anynissue with setting up  GA cookies?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bk38o8/sgtm_in_a_different_domain_than_the_website/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Well, you will kill first party context. That is bad, when Google gonna kill 3-rd party cookies, it will cause a problem.  \nIf you multiple domains, it is better map sgtm to multiple subdomains  \nFor example  \n[tracking.example.com](http://tracking.example.com) for [example.com](http://example.com)  \n[tracking.example.de](http://tracking.example.de) for [example.de](http://example.de)  \nAnd so on.",
                "author": "_practical_data_",
                "score": 3
            },
            {
                "body": "Thanks for the reply. I'm more in a testing phase and I'm wondering if for testing purposes my domain setup has any negative impact on tracking and on how cookies are set up?\nIn the future I will for sure create sGTM in the same domains",
                "author": "Expert-Maintenance-7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "For testing it is ok, but I would still move it to proper domain. It is fast process and allow test more things.",
                "author": "_practical_data_",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1703031007.0,
        "title": "GTM on corporate dealership website.",
        "author": "keenjt",
        "id": "18mgoz4",
        "selftext": "I'll attempt to be as specific as possible by changing names of companies etc to get the best possible answer to my question, so forgive the at times vagueness of naming conventions.  \n\n\nI work for a dealer of a global manufacturing company.  \n\n\nThe parent company has an ecom site that all dealers must use (send their customers to) and on this site, once you enter your location which is mandatory to place an order/check stock or prices you are loaded with a URL like this: [websitename.com/en/dealername](https://websitename.com/en/dealername)   \nThe problem I have is that this parent company does not allow us access to this website (even our dealer page) and as such we only have read only GA4 and NO ability to enter conversion tracking codes, pixel etc.  \n\n\nI can see that this dealer landing page has a GTM folder in it, but after months and months of emails I still have no access.  \n\n\nToday I got an email from their digital team saying that it isn't possible and it would slow down site speed etc. All generic stuff that isn't quite true.  \n\n\nI'll attempt to be as specific as possible by changing the names of companies etc to get the best possible answer to my question, so forgive the at times vagueness of naming conventions.  \nany needs to have numerous GTM folders (for all the dealers across the globe) how badly would this impact load speed? or would a data layer help?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/18mgoz4/gtm_on_corporate_dealership_website/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Thanks Alex,  \n\n\nYou're right a slight change in loadspeed can be a gain or loss of millions of dollars, that's why in essence having 50+GTM containers doesn't really make sense. However, I do need a solution and their team just isn't coming to the table. Very frustrating",
                "author": "keenjt",
                "score": 2
            },
            {
                "body": "Good input, I’ve exhausted all corporate avenues and we aren’t able to edit the dealer website in any way. Sometimes you can’t win but I’ll try.",
                "author": "keenjt",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Tell your boss the problem and see if they can help you with web developer aholes. If they were a client, I'd tell you to dump them. I have been down this road before and it rarely ends well. The other option is to create a landing page - dealername.com/websitename.",
                "author": "Sniflix",
                "score": 1
            },
            {
                "body": "Focus on off-site SEO and use UTM links to measure success.",
                "author": "Sniflix",
                "score": 1
            },
            {
                "body": "I appreciate that, but the complexities are beyond UTM they run tier 1 cookie standards that strip utms… great situation",
                "author": "keenjt",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1712307699.0,
        "title": "No consistency in Google picking up Consent Mode V2 in Google Ads?",
        "author": "Podbyrin92mm",
        "id": "1bwdct2",
        "selftext": "So Consent Mode V2 should be implemented since the last few days.\n\nI manage about 30 Google Ads campaigns and I face quite some inconsistencies.\n\nThere are Google Ads accounts where Google indicates Consent Mode V2 is in place while I made zero changes in the corresponding Google Tag Manager (e.g.: no Consent Mode on my tags).\n\nAnd vice versa: I have clients for which I did the entire setup in GTM and tested it (plenty of documentation out there). But no mention whatsoever in Google Ads (conversions > diagnostics).\n\nI can't wrap my head around this why?\n\nDo I need a certain amount of conversions or clicks (I read 700 ad clicks the last 7 days?). But this seems to be inconsistent too. There are low traffic sites that are approved and high traffic sites that aren't. More worryingly, they have first-class cookie banners in place, not something obscure self-made.\n\nConversions still coming in for all accounts it seems, that's something at least.\n\nSeems like Google is shooting around blindfolded once more. Pushing to implement it but Consent Mode in GTM still in 'beta'?\n\nAny experiences or explanations?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bwdct2/no_consistency_in_google_picking_up_consent_mode/",
        "num_comments": 4,
        "comments": [
            {
                "body": "I think all Google cares about is if it gets those two new signals. At least with GA4.\n\nIt's not about Tag Manager settings. I've tested it. All you have to do is make sure that ad_user_data and ad_personalization signals are pushed to the data layer.\n\nYou SHOULD also change the tag consent settings in GTM to follow GDPR and so on, but that's another thing.",
                "author": "No_Celebration1487",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I just used https://termly.io/ In the end as its cheap and handled it all in GTM fine",
                "author": "mustardpete",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709340165.0,
        "title": "Implementation working when using tagassistant, but not when using actual site.",
        "author": "Normal_Capital_234",
        "id": "1b4aujk",
        "selftext": "I'm new to using GTM and GA4.   \nI can see events and page views flowing through to GA4 realtime report with all the expected variables when connecting to my site using tagassistant. However no data is flowing through to GA4 when using my site normally (without tagassistant).  \nWhat could be causing this and how can I fix it?  \n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b4aujk/implementation_working_when_using_tagassistant/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Did you publish the container? Anything like a cookie banner blocking gtm loading?",
                "author": "veknoslo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Couple of quick things:\n- make sure you publish your GTM container\n- check CSP’s to make sure script isn’t being blocked",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "publish the container and check again",
                "author": "motiur_ak07",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710931038.0,
        "title": "Need one tracking tag before cooking tracking code",
        "author": "A-Web-G-",
        "id": "1bjadk5",
        "selftext": "Hi there, \nAt my work we now use a service called leadfeeder, it track what companies visits your website. \nThey told us that because our leadfeeder tracking tag is after the cookie banner that we are missing out on picking up so much traffic.\n\nI’m not too good with tag set up, aside from using Google tag a manger. \nHow could I change it so that this leadfeeder tag is firing before our Hubspot cookie on all pages?\n\nThanks for any help.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bjadk5/need_one_tracking_tag_before_cooking_tracking_code/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Any tag that reads or writes data in the user’s browser that isn’t absolutely essential should be subject to consent.\n\nEveryone would collect a lot more data if the relevant tag ignored consent.\n\nYou need to determine whether leadfeeder sets or reads a cookie, local storage or session storage before allowing to run before the cookie banner.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "you are not missing out on the traffic. the consent manager is giving the site visitor the option of not sending their site visit information to your GA4 property. the traffic still exists. you just cannot measure it in GA4 because the site visitor has explicitly said using the consent manager that they do not want you to measure their traffic. note that if you are operating in the US, i believe the rules are still opted in for measurement until explicitly opted out. so if your CMP is configured correctly your US traffic should still have some sort of measurement of initial landings. for the EU it is opted out until explicitly opted in so you are likely out of luck if in the EU. can leadfeeder send you any information about how much traffic they send to your site? they should be able to tell you that, or have a very, very good reason they cannot tell you that.",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1684865295.0,
        "title": "Can anyone see your dataLayer?",
        "author": "mr-nobody1992",
        "id": "13pw0ts",
        "selftext": "This might be a dumb question but when I google this nothing comes up. Can anyone see your dataLayer? If someone is savvy enough can they just right click, inspect, and find the dataLayer events pushing in the network or something?",
        "score": 8,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/13pw0ts/can_anyone_see_your_datalayer/",
        "num_comments": 15,
        "comments": [
            {
                "body": "Yes, they can, either by using the Chrome Dev Tools or by installing an extension (dataslayer, for example).\n\nOf course, if I inspect the datalayer from my browser I will only see the info and events that I'm triggering. \n\nThere are also tools that can download your entire Google Tag Manager container and see what's inside (tags, triggers, variables).",
                "author": "caballero87",
                "score": 7
            },
            {
                "body": "If you think that’s crazy, think about all of the unsecured PII floating around in cookies that anyone could literally read.",
                "author": "lyradnis",
                "score": 5
            },
            {
                "body": "Open your console and type \"dataLayer\".\n\nIt's that easy.\n\nPeople use plugins to monitor it more easily though.",
                "author": "spiteful-vengeance",
                "score": 5
            },
            {
                "body": "Haha yeah. At my agency we downloaded every gtm script of companies of a certain size too see if they had got ga4 or not. Was a realty long prospect list for our ga4 offer",
                "author": "CapnDeadEye",
                "score": 3
            },
            {
                "body": "To my understanding: Yes.",
                "author": "Gagazet",
                "score": 2
            },
            {
                "body": "If you work with gtm you should, for your own sake learn this. It's great for debugging or pushing fake events to see how gtm interprets them.\n\nI use adswere dataLayer inspector which pics up all GA4 events aswell which is good sometimes too",
                "author": "CapnDeadEye",
                "score": 2
            },
            {
                "body": "Yo WHAT. What tools can download someone’s entire container?!",
                "author": "mr-nobody1992",
                "score": 2
            },
            {
                "body": "The (compiled to Javacript) container is just the script being loaded from that bit of boilerplate you initiate GTM with. It's not dark magic to be able to go to that script using the URL and figure out what's in there.\n\nUsers browsers need to run the code for the tags in your container, so there's no way to keep anything like that secret!\n\nIf you want to keep secrets, you need to move things server-side.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "1. Personal data is stored in a cookie that is not secured\n\n2. A request is made from your browser that includes the cookie\n\n3. The server that handles the request can read the cookie data",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes. But as you mentioned, they must be a bit savvy to go out of their way to see it. You can test it yourself and go to any google website, open up the console log and see all the dataLayer pushes they're sending 🙂",
                "author": "adambirgenheier",
                "score": 1
            },
            {
                "body": "Not only everyone can see your datalayer, but anyone can see your : html and css code that builds your website, your JavaScript code and features, each ENDPOINT being called inside your backend server to GET images, font, js file and so on. Everyone can also have a look at ALL the data being collected and sent and knowing to WHERE it was sent. Everyone can also know all the SOFTWARE that you use whether it is MARKETING softwares, analytics, functional like New Relic, etc.\nWell, if you’re knowledgeable you can know a lot of things about a company website and how they use, market and treat their users.",
                "author": "tagexpertagency",
                "score": 1
            },
            {
                "body": "Yep, gives me the ‘Sunday scaries’ everyday thinking about it",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Can you explain more?",
                "author": "surfersbay",
                "score": 1
            },
            {
                "body": "GTM Spy used to do the trick, not sure if it still works. If not, there are some paid tools that can do that.",
                "author": "caballero87",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1705413834.0,
        "title": "Why is it suddenly \"No Tag Found\"",
        "author": "shreesh20",
        "id": "1983lpi",
        "selftext": "Can anyone help me with my debugging, why I'm getting 'No Tag Found\"  \nI have installed Gtag on my website  \nThese same tags have been working in the last month but this new problem suddenly exists.\n\nPlease help!\n\n&#x200B;\n\n[Screenshot of my debug](https://prnt.sc/LkmcE6r98LsO)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1983lpi/why_is_it_suddenly_no_tag_found/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Maybe you didn't accept the cookies? Otherwise the Google Tag Manager isn't installed correctly",
                "author": "Critical_Pie23",
                "score": 2
            },
            {
                "body": "Yeah brave can hold back some tracking. Be aware that chrome is exluding third party cookies as from january for 1% of there users. They will get ride of 3th party cookies as from this year.",
                "author": "Critical_Pie23",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "But the Googe Tag has been working fine for the last 1 year without any problems, now suddenly from last 1 month this new error is showing up.",
                "author": "shreesh20",
                "score": 1
            },
            {
                "body": "So the tags are working on chrome, I was using brave when I got these errors.",
                "author": "shreesh20",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707166478.0,
        "title": "Trying to understand the difference between StackAdapt and Meta tags.",
        "author": "QuiteAnalytics",
        "id": "1ajracb",
        "selftext": "Currently have set up StackAdapt tags and Meta tags via GTM for the same conversion. However, there is a difference between how conversions are being recorded on both platforms. I understand that there are generally differences between how each platform records conversions, but what's perplexing is that there is a difference between the time since last fire on both platforms. I have used the same trigger for both the tags so technically these tags should be firing 1:1 correct?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ajracb/trying_to_understand_the_difference_between/",
        "num_comments": 5,
        "comments": [
            {
                "body": "From my understanding Stackadapts conversion tracking doesn’t just rely on just a 1st Party Cookie to attribute conversions.  They use other techniques that don’t rely on cookies.\n\nIf you are using just the Meta pixel or the Conversion API for Facebook, I could see instances where the firing isn’t 1:1 even if the triggers for both StackAdapt and Facebook are identical.",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It might be that Facebook tracks conversions at the point of the conversion after the click, whereas StackAdapt attributes the conversion to initial click but that's a general rule so actual attribution settings might differ.\n\nIf you check the Pixel settings on both platforms rather than the ad performance then you should see the numbers match up a bit more closely.",
                "author": "hussinppc",
                "score": 1
            },
            {
                "body": "So what would a recommendation to make sure they are 1:1 be? Is that even possible?",
                "author": "QuiteAnalytics",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1702904179.0,
        "title": "Tracking TrustArc opt-in",
        "author": "beenzie",
        "id": "18l81na",
        "selftext": "We are using TrustArc for our cookie policy and want to try to understand user opt-in rates, is there anything we can do to track this?  I'm guessing the issue is that until they opt-in we don't fire any tracking tags.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/18l81na/tracking_trustarc_optin/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If you look at the platform you’d think the answer is yes, but the data looked off to us, when we spoke to them they said “oh yeah that doesn’t work probably and we’re beta testing an update to it” with no idea on timescale for rollout.",
                "author": "beenzie",
                "score": 2
            },
            {
                "body": "I have no loyalty to TrustArc and I don’t think my client particularly does.  If OneTrust provides better reporting then maybe it’s the way to go.\n\nIs the GTM side of things good with OneTrust?",
                "author": "beenzie",
                "score": 2
            },
            {
                "body": "The GTM side of things is *amazing* with OneTrust.\n\nThere’s more of a learning curve with the admin side of OneTrust, but that’s because it’s super flexible.\n\nCookieBot is my go-to for simplest possible solution, but they don’t have multi-user admin login (or they didn’t, last time I created a new account).\n\nCookieBot is also super nice with GTM. Both also have great Google Consent Mode support.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do TrustArc not provide any reporting in their platform? CookieBot and OneTrust definitely do.\n\nI’ve only interacted with TrustArc just enough to make some changes to a script someone else developed to help integrate with GTM. I didn’t explore their platform because I was focused on the GTM integration.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This makes me hate TrustArc a little bit more than I already do.\n\nYou hit the nail on the head, you can’t measure opt-in without measuring opt-out and you can’t measure opt-out without breaking consent.\n\nEven then, you can’t get an accurate figure because you’ll also not be able to measure people with ad-blockers.\n\nHow set are you on using TrustArc? I would recommend CookieBot as a low-cost option or OneTrust as a slightly higher cost (depending on desired features), but OneTrust is an absolute industry leader and exceptionally easy to deal with.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710433148.0,
        "title": "Google Enhanced Conversions - Multiple Tags Options in GTM??",
        "author": "whythinksomuch",
        "id": "1bep2ad",
        "selftext": "I am having some confusion and trepidation on Google's Enhanced Conversions for Leads.  For one, they have some tags that seem to be dedicated to it \"Google Ads User-Provided Data Event\" but they also offer \"Include user-provided data from your website\" in the standard tag that has a conversion label.    \nI am also confused that they have \"Enhanced Conversions\" and \"Enhanced Conversions for Leads\" as seperate account settings.  I thought Enhanced Conversions were all already supposed to be appending the lead data instead of using the gclid and cookie values with the conversion label.    \n\n\nAlso their documentation still states to use the \"Import\" option when setting up a conversion goal in the account - but they moved the option for \"track clicks\" to a new one called \"Manual import using API or uploads\". \n\nDoes anyone know the differences between tagging and the difference in EC and EC for Leads?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bep2ad/google_enhanced_conversions_multiple_tags_options/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    }
]