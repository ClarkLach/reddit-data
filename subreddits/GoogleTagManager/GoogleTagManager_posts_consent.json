[
    {
        "subreddit": "GoogleTagManager",
        "created": 1758110992.0,
        "title": "Can I use the same Cookiebot ID for 2 different websites (Consent Mode V2)?",
        "author": "pelayosn14",
        "id": "1njbd2n",
        "selftext": "Hey everyone,\n\nI’m dealing with a Consent Mode V2 setup and have a question:\n\nI manage two websites:\n\n* **Site A**: a landing page (mine)\n* **Site B**: the final purchase website (belongs to my client, I don’t have direct access to it)\n\nWhat I’d like to know is if it’s possible to **use the same Cookiebot ID across both websites through GTM**.\n\nThe goal is to have one unified consent solution applied to both domains so that I can:\n\n* Stay compliant with Meta Ads consent policies\n* Track everything more accurately (especially purchase conversions)\n* Build remarketing audiences properly\n\nHas anyone tried this before or knows if it’s technically possible/allowed by Cookiebot?\n\nThanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1njbd2n/can_i_use_the_same_cookiebot_id_for_2_different/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Yes it is indeed possible:\nhttps://support.cookiebot.com/hc/en-us/articles/360003792573-Cross-domain-Consent-Sharing\n\n\nKeep in mind that the way cross-domain consent works is through 3rd party cookies so it does have limitations.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Assuming your two sites are at different domains not a subdomain.\n\nI would normally say look into your CMPs cross domain tracking options. Then implement the same banner in both sites.\n\nBUT from personal experience, this doesn't work as intended which comes down to browser security (SOP)\n\nthere are workarounds for subdomain that should work with cookiebot (but don't as well).\n\nEdit - meant to say from personal experience.. with Cookiebot...",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "cross domain consent but as someone said, falls down ro 3rd party cooki, unless you use server-side and host/serve GTM.js from your own hostname, then you could \"bypass\" good part of these issues.",
                "author": "BackYx",
                "score": 1
            },
            {
                "body": "Yeah, use domain group in cookiebot and cross-domain consent sharing afterwards.\n\nKeep in mind you need to have the same cookiebot id installed on your page and your clients page for it to work.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "yes, you can technically use the same cookiebot id on two different domains, but there are a few things to be aware of before you go that route.\n\ncookiebot’s consent banner and preferences are tied to the domain where the script runs. if you use the same id on site a and site b, users will see the same banner style and categories, but consent choices will be stored separately per domain unless you enable cross-domain consent sharing.\n\ncross-domain consent sharing works by setting a shared cookie that both domains can read, but for that to work you need:\n\n• both domains listed under the same cookiebot account  \n• both domains added in the cookiebot admin under the same configuration  \n• users to navigate between the domains in the same browser session so the consent state can be transferred\n\nthe bigger challenge is that you don’t control site b. you’d need your client to implement the cookiebot script (with the same id) on their checkout site and configure gtm there to respect consent mode. otherwise, your setup on site a won’t influence tracking on site b.",
                "author": "AdhesivenessLow7173",
                "score": 1
            },
            {
                "body": "I’m not super deep with Consent Mode but from my own view I think using one Cookiebot ID on two sites with different owners might be tricky. Maybe easier if both are under same account or full access. If not, could be better to just keep them separate.",
                "author": "i360051",
                "score": 1
            },
            {
                "body": "Yes, in this case it is not a subdomain. It's a whole different website.",
                "author": "pelayosn14",
                "score": 1
            },
            {
                "body": "How could you do that???",
                "author": "pelayosn14",
                "score": 1
            },
            {
                "body": "But in CookieBot with my account I can have more than one domains. If I add the client one also there the thing is that I will have to pay 7€ monthly. I want to find the gap where I won\\`t need to pay it but make them run together",
                "author": "pelayosn14",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1759273089.0,
        "title": "ad_storage still denied after consent was accepted (WP & Usercentrics CookieBot)",
        "author": "AwareCauliflower7635",
        "id": "1nurz0t",
        "selftext": "All my settings enable Google Consent Mode V2 and I all my tags are loaded in <head> and <body> with default denied settings. \n\nI use custom functions for the Tag placement and usercentric cookiebot for the consent. \n\nafter accepting the consent - no tags a fired?   \nI tried all the claude suggestion without any success \n\ncan it be that the trigger for \"consent\\_status\" has to be added to Google Tags?\n\nI currently have no access to the Google Tag Manager. What else can i try? ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nurz0t/ad_storage_still_denied_after_consent_was/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Are your tags deployed directly to the website, or via GTM? Cookiebot and Consent mode are fairly easy to implement via GTM or even via Cookiebot WordPress plugin + GTM. With Cookiebot, tags are not supposed to fire on `consent_status`, but either on Initialization (for advanced consent mode for google tags) or on `cookie_consent_update` (for basic consent mode + all non-google tags).",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "The fact that your tags aren't firing after consent acceptance tells me the consent update signals aren't reaching GTM properly. Usercentrics on WordPress has a gap where the consent status changes but GTM doesn't receive the proper trigger events.\n\nYou can verify this by checking your browser's Network tab after accepting consent - you probably won't see the gtag('consent', 'update') calls that should be firing. The dataLayer isn't getting\nthe consent status changes that would trigger your tags.\n\nThe plugin fires its own consent events but doesn't translate them into the GTM consent signals your tags are waiting for. This creates a disconnect where consent is granted but tags never know about it.\n\nI am a wordpress developer and if you would like some help with that plugin, I can assist. My diagnostic approach would be to verify whether consent update events are reaching the dataLayer after acceptance, and check if the tags have proper consent status triggers configured. \n\nThe systematic 4 layer troubleshooting I use points to a consent signal transmission problem rather than tag configuration or platform processing issues.",
                "author": "vscodr",
                "score": 1
            },
            {
                "body": "It sounds like your tags aren’t firing because the consent update isn’t reaching Google after users accept. You need to hook into Cookiebot/Usercentrics’ consent callback and call gtag('consent', 'update', { ad_storage: 'granted', analytics_storage: 'granted' }), then re-fire your tags.\n\nI can set this up properly for you so everything tracks correctly. If you want, contact me on WhatsApp: +8801639846857.",
                "author": "abdullahadsbd",
                "score": 1
            },
            {
                "body": "If you don’t have GTM access, the main reason `ad_storage` stays denied is that the consent signal isn’t actually reaching the tags. Your tag scripts need to wait for the consent event before firing. Check in the console that Cookiebot or Usercentrics is updating the consent state. Then wrap your tag initialization in a callback that only runs when `ad_storage` is granted. For Cookiebot:\n\n    document.addEventListener('CookieConsentDeclaration', function() {\n      if (Cookiebot.consents.ad_storage) {\n        // fire Google tags here\n      }\n    });\n    \n\nFor Usercentrics:\n\n    window.addEventListener('UC_UI_Update', function() {\n      if (Usercentrics.getConsentStatus().consents.ad_storage) {\n        // fire your tags here\n      }\n    });\n    \n\nbasically, make sure the tags load after consent, not before. If they still don’t fire, the consent event isn’t propagating or the script runs too early.",
                "author": "AdhesivenessLow7173",
                "score": 1
            },
            {
                "body": "So, the default consent is set to denied. After a user accepts consent or with any other choice, does a consent update event fire? with correct implementation of cookiebot this should be the case. Also, are you using advanced consent mode? This means that any Google related tag is allowed to fire with or without consent. If consent is denied, Google will send cookieless pings, if consent was accepted, all events that fired before accepting will still get the consent accepted. \n\nAnother thing, the consent update event should trigger on EVERY page. Again, with the correct cookie bot setup this should work. \n\nVisit your site, accepts cookies, in the console from dev tools type dataLayer and enter, check if you see a cookie consent update event with the assigned value for every category. Also check if it fires really early, because if you have consent for specific cookies as blocking triggers then this might be an issue. But with advanced consent mode Google related tabs are allowed to fire at all times whether consent is granted or not. One note, very privacy aware companies don’t use advanced consent mode and don’t want tags to fire at all when consent hasn’t been given since it’s still some kind of a grey area if Google actually removes enough data so that no user identifiable data is collected at all.\n\n\n\nBy they way, not sure if this is mandatory, but in GTM in the container settings there’s an option to apply consent mode to the container.",
                "author": "Pretty-Appearance226",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752218256.0,
        "title": "Advanced Consent Mode Issue: Google Ads Tags Not Loading Without Accept",
        "author": "wardogfufu",
        "id": "1lx0imd",
        "selftext": "Hello,  \nI am currently using the CookieYes banner on two of my websites.\n\nGoogle Tag Manager (GTM) is installed, and the CookieYes banner is implemented via GTM using a Consent Initialization trigger.\n\nI have enabled Advanced Consent Mode, but I am facing issues:\n\n* When users do not interact with the banner, Google Ads tags do not fire.\n* Even when users reject marketing cookies, Google Ads tags still do not fire.\n* Tags are only firing after users accept marketing cookies.\n\nHowever, since I am using Advanced Consent Mode, Google Ads tags should still load in \"default\" mode (with limited functionality) even if consent is not given.\n\nAm I missing anything?  \nDo I need to change any settings in the CookieYes CMP, or apply any updates to GTM?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lx0imd/advanced_consent_mode_issue_google_ads_tags_not/",
        "num_comments": 18,
        "comments": [
            {
                "body": "u/wardogfufu by the looks of it, it seems like the auto blocking feature is causing issues. Have you tried turning it off?",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check cookies auto blacking. https://www.cookieyes.com/documentation/implement-prior-consent-using-cookieyes/\n\nIn general this problem was generated by auto blocking CMP feature.",
                "author": "enrico-chiolo",
                "score": 1
            },
            {
                "body": "Hey OP, can you screenshot or list the exact reason for condition failure, i.e. what conditions aren't met according to your triggers at the point you expect the Tag to fire (window or container or DOM).",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Cool, then I think you are good but are you sure the tag isn't sending any consentless or anonymised pings at all on fire?\nIf you check your browser dev tools, go to network tab and see if there is anything sent that contains \"ads\" or \"collect\" for example.\n\nIt doesn't help you in terms of reporting but it does supposedly help with modelling or conversion modelling for Ads/GA4.",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Hi, tags will only fire if the **\"Allow Google tags to fire before consent\"** setting is enabled in the CookieYes web app. If you've turned it on and still face issues, reach out to us at [support@cookieyes.com]() and we’re happy to help troubleshoot.",
                "author": "cookieyesHQ",
                "score": 1
            },
            {
                "body": "Yep its disabled.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "* Before accepting consent, the **Google Ads tag fires**, but **no data is sent** to Google Ads (verified via Omnibug).\n* After accepting consent, the same tag fires and **data is successfully sent** to Google Ads.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Nope it doesn't share cookie less pings even.\nNetwork tab shows no logs.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Hello,  \nYes, the \"Allow Google tags to fire before consent\" setting is enabled in CookieYes. We also reached out to [support@cookieyes.com](mailto:support@cookieyes.com), but unfortunately, we did not receive a satisfactory response.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "So to confirm:\n\nIs it:\n\"When users do not interact with the banner, Google Ads tags do not fire..\"\n\nOr:\n\"Before accepting consent, the **Google Ads tag fires**, but **no data is sent** to Google Ads\"\n\nIf it's the latter, this would be expected behaviour for advanced consent mode which is the default consent behaviour unless you have taken steps to actively block tags\n\nIf it's the former, it's a trigger issue which is why I asked if you can confirm the trigger conditions are met.",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Hi,  \nWe're sorry to hear you had that experience with us. \n\nCould you please share your support ticket number? We’ll prioritize this internally and get it checked right away. Appreciate you flagging this.",
                "author": "cookieyesHQ",
                "score": 1
            },
            {
                "body": "Hi, did you find the solution for it maybe? Facing the same problem.",
                "author": "Infamous_Chart",
                "score": 1
            },
            {
                "body": "Its the latter one.  \nAnd yes to confirm the triggers conditions are met fully.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "No i did not :(",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "I am facing similar issues, i am using cookiebot, when i reject cookies, no hits are sent in Google ads, it does send G100 cookieless ping in GA4 tag, but nothing for Google ads.",
                "author": "Maegor_Cruel",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756115419.0,
        "title": "Analysing consent vs. no consent via GTM",
        "author": "sabwin",
        "id": "1mzm5s6",
        "selftext": "I'm not 100% sure if this is the right subreddit for my question, but here goes anyway:\n\nA customer of mine wants to know how many people consent to being tracked vs don't consent. I know that many out of the box tools already store this kind of information, but my customer's website agency use their own custom-made cookie banner which works just as well - they just don't store the total number of users. My question is if there is a **legal, GDPR-compliant** way to analyse their traffic? I was thinking along the lines of using a custom parameter that stores the value of the \"analytics\\_storage\" Consent Mode Variable and passes it on to Google Analytics, but I'm not sure if this would be compliant with the GDPR since I'm not allowed to track users that don't consent. Can I even use Consent Mode Variables this way? Or do any of you know a better solution, that's not switching to a different Cookie Banner?\n\nThanks in advance for your answers!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mzm5s6/analysing_consent_vs_no_consent_via_gtm/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Link GA4 to BigQuery (you should do this anyway!).\n\nConsented versus unconsented can be analysed from there.\n\nAlso the agency providing the banner should step up and provide an opt-in, opt-out report.\n\nIn fairness, I wouldn’t be allowing an agency to persuade me that their cookie banner is sufficient. I would at minimum go with CookieBot, CookieYes or Enzuzo instead.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I’d be careful with “send a GA4 event when they say no.” Even in Advanced Consent Mode, that’s still data going to Google (IP, UA, etc.) and many EU lawyers won’t consider that consent-free. If the user denied tracking, they denied that stuff as well ... \n\nSafer pattern: record the consent choice locally only. Fire a first-party call to your own endpoint (or log on the server) that increments an aggregated counter (opt-in / opt-out), with no IDs, no IP storage, no cookies. \n\n& Yes. The cookie solutions should ideally do this, not you ;) \n\nOther solution: go for a second consent free analytics tool like plausible / simple analytics and have a look at the difference between GA and those.",
                "author": "philipp_roth",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can track metrics that are just counts, as long as the key doesnt have a relation to who.",
                "author": "History86",
                "score": 1
            },
            {
                "body": "If you are using a CMP, like OneTrust for example, OneTrust will have this in the OneTrust dashboard on app.onetrust.com. If you wrote your own CMP, it would be a big miss if the developers who wrote it failed to do something like that.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "This has to be tracked by the CMP itself, trying to do this in GA4 is impossible without ignoring consent.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Send only yes events and track all banner loads.",
                "author": "Fearless_Parking_436",
                "score": 1
            },
            {
                "body": "Yes, but can i save DataLayer Variables to this count if the user denies Consent?",
                "author": "sabwin",
                "score": 1
            },
            {
                "body": "What do you need a dlv variable for? I assume analytics storage is a dlv variable too?",
                "author": "History86",
                "score": 1
            },
            {
                "body": "I mean yeah, sorry I meant can i send the information to ga4 if they denied tracking? With consent mode I should at least get a ping right?",
                "author": "sabwin",
                "score": 1
            },
            {
                "body": "Yeah just send it as a GA4 event the moment they say no to cookies.",
                "author": "History86",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1757435904.0,
        "title": "Shopify + GTM Server-Side AddToCart always “Failed” in Preview (EU, Consent Mode)",
        "author": "Ordinary_Creme8718",
        "id": "1ncnveq",
        "selftext": "Hey guys,\nI’m trying to get server-side tracking working on my Shopify store with GTM and Stape, but I keep hitting the same problem. The GTM Web container fires GA4 events correctly, sends them to my server container, and the ecommerce data (items, value, currency) is all there in the preview. My Google Ads tags for AddToCart, Purchase and BeginCheckout are set up with the right Conversion ID and Label. So far so good.\n\nThe issue is that in the server container preview, the Google Ads AddToCart event always shows as “Failed.” In all the tutorials I’ve watched, people see “Successful” in the preview, but mine never works. When I look at the event payload, my custom_fpgclaw value is not a real GCLID but just a fake placeholder (something like fake123…). Even when I test this by clicking on my own live Google Ads campaigns with a real ?gclid parameter in the URL, the server-side AddToCart still fails. In Google Ads itself, the AddToCart conversion has stayed “Inactive” since I set it up.\n\nI’ve already checked the obvious things: Conversion ID and Label in Google Ads are definitely correct, the ecommerce parameters are being passed through, and the AddToCart action is set as a primary conversion in Ads. The connection between GA4 and the server container also works fine. I even tested with real clicks, but the problem persists.\n\nWhat I suspect is that Shopify’s built-in EU cookie banner is the real issue. It sets ads_storage=denied until the user accepts, which means the _fpgclaw cookie never gets a proper GCLID and only writes a fake one. Because Enhanced Conversions are not enabled for AddToCart in my Ads account, Google ends up rejecting the event entirely. So basically, in EU setups you won’t see “Successful” in the server preview like in US-based tutorials unless Enhanced Conversions or a proper Consent bridge is configured.\n\nHas anyone here managed to get AddToCart server-side conversions working with Shopify and GTM in an EU setup with Consent Mode? Did enabling Enhanced Conversions for AddToCart fix the “Failed” status in preview, or did you have to explicitly bridge Shopify’s cookie banner into GTM Consent Mode for it to work?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ncnveq/shopify_gtm_serverside_addtocart_always_failed_in/",
        "num_comments": 8,
        "comments": [
            {
                "body": "I know this won't be popular, but if possible, I'd recommend dropping Shopify's consent banner and using one that integrates well with Google Tag Manager, such as Cookiebot or CookieYes.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "Just the Webinar of stape",
                "author": "Ordinary_Creme8718",
                "score": 3
            },
            {
                "body": "Integrating and handling Google Consent Mode is a story in itself in the EU. \"explicitly bridge\" is a provided service by most compliance apps on the app store. Actually, this is a case which will happen again and again for almost all other tracking scripts relying on consent. Same case is for Microsoft Ads & Clarity in case you have those active as well",
                "author": "consentmo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you please share a screenshot of your Server container, specifically the Add to Cart tag and trigger?  \nAlso, let me know whether your Add to Cart event in the Web container is firing successfully or failing.",
                "author": "motiur_ak07",
                "score": 1
            },
            {
                "body": "Could you share which setup tutorial did you follow?\nI’m also interested in server side tracking",
                "author": "Grinchiul",
                "score": 1
            },
            {
                "body": "Yeah, what you’re seeing is actually pretty common with Shopify + GTM server-side in the EU. The reason tutorials look “clean” is because they’re usually recorded in US setups where ads\\_storage isn’t blocked by default. In your case, Shopify’s native consent banner fires before GTM can touch anything, so your \\_fpgclaw never gets a real GCLID → Google Ads sees “fake123” and just drops the event.\n\nTwo things people usually do to fix it:\n\n1. **Bridge consent properly** → You need GTM’s Consent Mode to reflect Shopify’s banner state. Right now GTM thinks ads\\_storage is denied, so it never writes the GCLID cookie. Passing the Shopify consent state into GTM fixes that.\n2. **Enhanced Conversions** → Enabling Enhanced Conversions for AddToCart (and Purchase) helps because Google can fall back to hashed user data when the GCLID is missing. Without it, those AddToCarts will keep failing.\n\nSo, no, you won’t get “Successful” in server preview until either (a) consent mode is wired up correctly or (b) you give Google a fallback via EC. That’s why your setup looks broken even though everything else is correct.\n\nIf you’re testing with real traffic + consent accepted, but it *still* fails, double-check your Stape settings for forwarding the `gclid` → `fpgclaw` mapping. Sometimes it’s just the forwarding template not being enabled.",
                "author": "AdhesivenessLow7173",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756473595.0,
        "title": "Storing data and Consent Management",
        "author": "KingStonk69",
        "id": "1n379er",
        "selftext": "I am trying to store some trafic data during the visitors sessions.\n\nThe data is sent to an external CRM when a form is filled.\n\nI decided to store it in **Local Storage.** However the data is not persistent.\n\nThen I tried in **Session Storage.** \n\nSurprisingly, the data is more persistent there along the session.\n\nHowever there is a consent management sytem on the website (Cookiebot). \n\nAs soon as you accept the consent box (even if you accept all cookies and tracking systems) the data stored is deleted.\n\nI'm not sure I can whitelist this specific data in Cookiebot.\n\n  \nI also installed a **GTM Server-Side container**.\n\nIs it possible to store the data with sGTM ? And create a persistent cookie ?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1n379er/storing_data_and_consent_management/",
        "num_comments": 9,
        "comments": [
            {
                "body": ">  I decided to store it in Local Storage. However the data is not persistent. Then I tried in Session Storage. Surprisingly, the data is more persistent there along the session. \n\n\nThat doesn't make sense. How are you interacting with the APIs? Can you share some code or explain the flow? \n\n\n\n\n> As soon as you accept the consent box (even if you accept all cookies and tracking systems) the data stored is deleted.\n\n\nCookieBot does not do this unless custom code has been added for this purpose. Most likely there is something wrong with the method you are using to store the data.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Then you shouldn’t be doing that (assuming EU / UK based users) without their consent.\n\nIf they agree to cookies, you’ll get a “cookie-consent-update” data layer event and you can then look up the consent state. If consent is granted, you can create your cookie / local storage.\n\nIf for any reason there is some active, automatic blocking taking place and your data is deleted, you need to resolve that. Bypassing it, even for the right reasons, is risky business.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "I would the Data Tag, Data Variable and Data Client for this type of use case.",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "Storing data in localStorage/sessionStorage doesn't make any sense. whatever the ideal formula is, window.localStorage.setItem('key','value').",
                "author": "motiur_ak07",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Don’t attempt to use sGTM to circumvent consent.\n\nWhat is the data going to be used for? Have you considered the impact of using that data?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yes obviously!",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "The data consists in identifying the trafic source (ads, organic, campaign, social...), store it, and send it to the CRM when the user fill a form.",
                "author": "KingStonk69",
                "score": 1
            },
            {
                "body": "Thanks! I'm not trying to bypass the legal consent mode.\n\nEven when full consent is given, the data is not persistent.",
                "author": "KingStonk69",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754131236.0,
        "title": "How many of you have had problems setting up Cookie Solution and Consent Mode with Iubenda + Wordpress + GTM?",
        "author": "Equivalent_River_870",
        "id": "1mfngdw",
        "selftext": "I did it recently and found it really chaotic. The Iubenda guides are scattered and got me drunk but fortunately I followed several Youtube videos that explained everything easily.\n\nHow many of you have been in my situation?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mfngdw/how_many_of_you_have_had_problems_setting_up/",
        "num_comments": 12,
        "comments": [
            {
                "body": "I *have* worked with Iubenda and it is definitely not one I would look forward to working with again, although it's perfectly functional.\n\nGTM + Wordpress + Any CMP is already a challenge, so working with a not-great CMP just makes it frustrating.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Ah, I feel you that combo (WordPress + GTM + Consent Mode + Cookie Solution) can definitely get messy. I actually work on the content team at iubenda, and you're right: we’ve got a lot of guides, but not all of them are as streamlined or centralized as they should be. It's something we’re actively trying to improve.\n\nOut of curiosity, do you remember which YouTube videos helped the most? We’re exploring ways to simplify the setup process and maybe even collaborate with creators who explain it better than we do.\n\nReally appreciate you bringing this up, feedback like this is gold for us.",
                "author": "Reasonable-Newt-7926",
                "score": 2
            },
            {
                "body": "u/Equivalent_River_870 I feel you. Over the years, I’ve shed plenty of tears over major CMPs too… which is exactly why we built our own - [Cooki.fi](https://cooki.fi). It's straightforward to configure and designed for freelancers and agencies. Feel free to give it a try if you ever feel stuck with OneTrust again.",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "I completely agree with you.  \nAs I was setting up the whole system, I had the rage several times to abandon Iubenda, request refund and switch to another CMP.   \nWhen I finished the setup, however, I thought it was worth it (the subscription price is not really excessive for a new website).",
                "author": "Equivalent_River_870",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What so you use for handling the GTM code on WordPress?",
                "author": "Neinhalt_Sieger",
                "score": 1
            },
            {
                "body": "I placed the GTM snippet directly on my website via File Manager.",
                "author": "Equivalent_River_870",
                "score": 1
            },
            {
                "body": "CookieYes was great, last time I tried it. CookieBot is mostly OK, but they are squeezing features and pricing and are single-user focused.\n\nOneTrust is turning into an expensive option, but they have some decidedly “enterprise” level features in case they are needed.\n\nUserCentrics is on my radar if I need a OneTrust alternative.\n\nAvoid TrustArc though. Their product works, but their technical level support is dire.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thank you very much for your suggestions!",
                "author": "Equivalent_River_870",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1750348724.0,
        "title": "Consent inactive + Analytics stopped tracking data",
        "author": "Elizanutu",
        "id": "1lfef1v",
        "selftext": "Hi everyone,\n\nI'm pulling my hair out with this problem, I hope someone can help me resolve it, please! It's way too technical for me.\n\nI tried to implement for a customer Consent Mode via Cookiebot plug-in, on his WordPress website.\nHe has Google Sitekit plugin installed (GTM, GA4, Console, Google Ads), and initially I disabled for all of them the option \"insert code on site\". I chose this way because I installed manually the tags for each one in Google Tag Manager. \n\nAfter that, Google Analytics stopped receiving data, says that there is no tag (even though it is installed in GTM). I even enabled Google Analytics to place it's code on site. Also, the option \"enhanced measurements are enabled for this data stream\" and \"enhanced conversions tracking\" are on.\n\nThe consent mode is in the air, saying that \"consent mode is installation out of order\" and \"consent signals inactive\".\n\nI don't know what to do next or what I'm doing wrong. What's the correct order? What to enable, what to disable? \n\nPlease, please help!\n\nAnd first thing first, thank you for reading it all!",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lfef1v/consent_inactive_analytics_stopped_tracking_data/",
        "num_comments": 15,
        "comments": [
            {
                "body": "u/Elizanutu firstly, get rid of Google Sitekit plugin - it's a pain in the ass. The cleanest way is to consolidate all your tracking to GTM and enforce consent through GTM's triggers and Consent settings (based on your CMP's consent signals).\n\nTypically, this is the order of the code snippets on your site (but make sure to follow the documentation of the CMP you're using):\n\n1. Google consent mode Default command\n\n2. CMP\n\n3. GTM \n\nYou can check out [this article](https://docs.cooki.fi/guides/update-your-tracking-setup/) for deep dive into how to enforce consent via GTM.",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "I'm using Usercentrics plugin for Wordpress.",
                "author": "Elizanutu",
                "score": 2
            },
            {
                "body": "It's important to follow the CMP's documentation instead of winging it, so here are a couple of articles to start:\n\n[https://support.cookiebot.com/hc/en-us/articles/360003793854-Google-Tag-Manager-deployment](https://support.cookiebot.com/hc/en-us/articles/360003793854-Google-Tag-Manager-deployment) \\- you can skip the section about implementing Cookiebot via GTM since you're using the plugin, and go straight to the Control cookie setting tags section.\n\n[https://support.cookiebot.com/hc/en-us/articles/360018413380-Checking-if-consent-mode-is-properly-implemented](https://support.cookiebot.com/hc/en-us/articles/360018413380-Checking-if-consent-mode-is-properly-implemented)\n\nTheir AI chatbot is trained on their docs and also pretty good for answering implementation questions.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Ok, I will try that way. Thank you! Any thoughts in Analytics stopped receiving data?",
                "author": "Elizanutu",
                "score": 1
            },
            {
                "body": "Could you please tell me what your CMP is exactly? Cookiebot or Usercentrics. I mean, what are you using with GTM, Domain group ID, or Setting ID?",
                "author": "mdshofiulalam",
                "score": 1
            },
            {
                "body": "Have you checked whether GTM is deployed on your website? You mentioned you disabled it via sitekit but you didn't say whether you re-enabled it via Cookiebot plugin or elsewhere.\n\nIt says consent mode installation is out of order - when you debug in Tag assistant, how are things looking? Are the consent events correct in relation to your other tags? Debugging will give you clarity on what exactly is wrong with the implementation.\n\nHow are your GTM tags configured for consent? What kinds of triggers are you using? etc",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "Thank you for your help! 🙌",
                "author": "Elizanutu",
                "score": 1
            },
            {
                "body": "Implement consent mode either via cmp or plugin and have gtm read it.",
                "author": "Interesting-Plan-618",
                "score": 1
            },
            {
                "body": "Yes, GTM is deployed, it appears in the head section of the website. Yes, my bad, I forgot to tell that I only enabled it via Cookiebot plugin.\n\nWhen I debug in Tag Assistant, things look normal (but I'm not sure what to look at, to be honest). The consent changes the status when accepting / denying the cookies. 🫣\n\nI'm not sure if GTM tags are configured for consent or if I use the right triggers. They're mostly configured with the default settings. \nWhat exactly should I use, please?\n\nThank you!",
                "author": "Elizanutu",
                "score": 1
            },
            {
                "body": "I'll go through all the documentation. Thank you for your help! 🙌",
                "author": "Elizanutu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742050969.0,
        "title": "OneTrust pro's only: Refresh after consent in US",
        "author": "Mysterious_Swan_9941",
        "id": "1jbx1er",
        "selftext": "What is the most elegant solution for loading marketing/analytics tags after someone consents. Is there no other solution then creating C0001, C0002, C0003, C0004 triggers (feels very messy). I would appreciate this communities views, please and than you.",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jbx1er/onetrust_pros_only_refresh_after_consent_in_us/",
        "num_comments": 23,
        "comments": [
            {
                "body": "You shouldn’t take every trigger you have and add a second condition based on consent groups. Keep your triggers as they are and add a blocking trigger based on the consent group",
                "author": "richdotnet",
                "score": 3
            },
            {
                "body": "You could just buy Osano and not deal with this dumpster fire. Honda just got fined $650k in Cali for cookie popup violations. OneTrust was their provider and the California privacy board seems to have  a bone to pick with OT. Run!\n\nDisclaimer. I own Osano.",
                "author": "thatguyinline",
                "score": 3
            },
            {
                "body": "I've worked with 2 enterprise company Implementation of OT. The standard is to fire it on onetrustgroupsupdated. Create a variable for the OT optanon cookie. Then in your blocking trigger look for optanon to have ,3,",
                "author": "gnaiz",
                "score": 3
            },
            {
                "body": "Some of us don't need to fish for work with cryptic answers and are here to share knowledge. You do you.",
                "author": "Mysterious_Swan_9941",
                "score": 3
            },
            {
                "body": "Google Consent Mode",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "Read this: [Integrate OneTrust with Google Tag Manager - tanelytics.com](https://tanelytics.com/integrate-onetrust-with-google-tag-manager/)",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "I followed this on our opt-in flow. Works well - https://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7?language=en_US&topicId=0TO1Q000000ssbSWAQ",
                "author": "martinbethann",
                "score": 2
            },
            {
                "body": "You can reach our support team and you won’t get billed for product help.\n\nWe offer a $500k no fines guarantee. No Osano customer has ever been fined when Osano was in place. The Hondas of the world come to us after they get in trouble.\n\nWe build regulations into code so you don’t have to be a privacy professional to understand what you are required to do in different regions and states.\n\nWe aren’t the cheapest or always the best choice, but if it involves cookie consent, we serve billions of cookie pop ups per month across 30% of the F500 and 45000+ small businesses across millions of sites. We really know what we are doing.\n\nIf you want to check a box, we are the wrong company. If you want to build trust with customers partners employees and vendors, we are the right choice.",
                "author": "thatguyinline",
                "score": 2
            },
            {
                "body": "Thank you",
                "author": "hashtag_RIP",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "For those reading and not realizing whats going on this is the story: [https://captaincompliance.com/education/honda-settles-with-cppa-over-privacy-violations/](https://captaincompliance.com/education/honda-settles-with-cppa-over-privacy-violations/) \n\nHonda was using a consent management solution that had misconfigurations amongst other issues with users ability to easily opt-out without asking for too much data. The end result is a fine of $632,500 and to get this fixed up and monitored. Now the question is will Honda remain with OT or not? Do they shift over to a Bigid, Captain Compliance, Osano, Securiti AI, or Transcend or stick it out?",
                "author": "captain-compliance",
                "score": 1
            },
            {
                "body": "You can streamline it by using **OneTrust’s** built-in consent categories with a single data layer event instead of multiple triggers. That way tags fire only after consent is granted, cleaner and easier to manage. Some also recommend tools like ***Ketch*** for more elegant consent orchestration.",
                "author": "Initial_Delay2536",
                "score": 1
            },
            {
                "body": "What's your elevator pitch on Osano over OT?",
                "author": "hashtag_RIP",
                "score": 1
            },
            {
                "body": "This doesn't address my question. The Google Consent mode works fine and we are using it. What I am asking is around once the user accepts the cookies, how do you fire off the GA4/marketing tags.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "u/Mysterious_Swan_9941 we're you able to get this resolved? If not the team here at Captain Compliance is an alternative solution and we'd be glad to handle the integration and setup for you.",
                "author": "captain-compliance",
                "score": 1
            },
            {
                "body": "Thank you, all resolved.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "Please expand on that, I would like to know how to do it properly. I have enabled it in OneTrust, I have used the OneTrust CMP template in GTM, I have added additional consent settings on all the tags. I am not sure what is missing to trigger tags once consent is granted.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "Of course have a wonderful weekend!",
                "author": "captain-compliance",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "If you're asking that, you haven't implemented GCM properly.",
                "author": "Taca-F",
                "score": 0
            },
            {
                "body": "Have you published the change in OneTrust?",
                "author": "Taca-F",
                "score": 0
            },
            {
                "body": "I don't have to legitimate myself to a random person on Reddit. Also, why should such knowledge be given away for free when I could charge for this? If it's that important for your business, but you don't have the know-how to execute, you should pay for someone who does. There is a lot of documentation provided by both OneTrust and Google to help as well.",
                "author": "Taca-F",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734571003.0,
        "title": "Do you re-fire a GA4 pageview tag after consent is granted?",
        "author": "tresslessone",
        "id": "1hhh7jh",
        "selftext": "**Edit:** thanks all. Found the answer (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.\n\nHi all,\n\nI have a client with an on-page hardcoded gtag.js implementation of GA4. Since they have a global audience including EU, I have implemented a consent management platform (CookieBot) through Google Tag Manager. This seems to work in that all GA4 hits are fired in consent mode until the user provides consent. However, because all hits before consent approval are fired in consent mode, we end up without a starting page\\_view event on the original landing page, which can screw with source attribution if there's UTM tags etc present.\n\nSo I guess the question I have, is whether it is a good idea to re-fire the GA4 pageview tag through GTM after consent is granted? Or does the gtag consent update call already make sure that previous hits in the same session are re-processed without consent mode?\n\nThe complication I have, is that GA4 is installed on-page using gtag.js, whereas the CMP is installed through Google Tag Manager. So just blanket firing the pageview tag on the cookie\\_consent\\_update datalayer event will result in duplicates in cases where people have already provided consent.\n\nWhat would be a good solution here?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hhh7jh/do_you_refire_a_ga4_pageview_tag_after_consent_is/",
        "num_comments": 30,
        "comments": [
            {
                "body": "You shouldn't be missing your starting page\\_view event *if* Google Consent Mode is in place. You say \"GA4 hits are fired in consent mode\", so I'm assuming there's a GA4 page\\_view hit with the gcs parameter = G100\n\nYou 100% do not need to retrigger a page\\_view after the user grants consent as long as there is a proper update of Google Consent Mode state to \"granted\"\n\nYou *should* see perhaps a user\\_engagement event at the moment when the user navigates to a new page. That user\\_engagement event should have a gcs parameter = G111 (assuming the user granted full consent).\n\nGA4 backtracks from there to understand \"hey, this user consented. That previous page\\_view event is therefore consented\"\n\nEDIT: Have a look at the GA4 network events when you land and grant consent on [https://www.britishlegion.org.uk/](https://www.britishlegion.org.uk/)\n\nTheir site is a good example of a \"proper\" flow of GA4 events in a Google Consent Mode environment.\n\nBonus: They also use CookieBot.\n\nThis was the first ever consent management project I completed for a client.",
                "author": "StefanAtWork",
                "score": 5
            },
            {
                "body": "Can you remove the hard coded gtag and implement via gtm? Or hard code the cookie bot so gtm doesn’t fire until consent is given? \n\nI’m no expert on consent mode but usually our clients implement in one of those two ways above.",
                "author": "turbopenguin",
                "score": 2
            },
            {
                "body": "Advanced Google Consent Mode makes this not always true. It also makes it much more complicated to understand and validate a working implementation.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Yep, that’s what I mentioned 😉Good to hear it’s fixed 🙂",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "Some user data can still be sent along with cookieless pings, such as user\\_id, which could be argued is PII. So some companies may still choose to block tags from firing until consent is given.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "Just checked, but the tags fired before the banner interaction keep the G100 value in the network tab and in the gtm debug view. I remember Simo checked this with bigQuery. Just make sure that your page does not reload on banner interaction to prevent duplicates. Also check in GTM preview mode under the consent tab that the moment the Consent update event fires, the On-page update shows granted (if you consent of course)to all categories and you should be fine!",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "With advanced consent mode all Google tags are allowed to fire at all times. If consent is given at the same pages; this will retroactively grant consent to all tags that have been fired. However, if a user comes in via a landing page, ignores the cookie banner and than goed to the next page and accepts consent then. Than the first pages does count as a consent declined. So make sure your banner can’t get ignored.\n\nDon’t refresh the page on cookie consent or sent another page view, you will get duplicates.\n\nBut as mentioned above, add the Google config trough GTM instead of hardcoded.\n\n\nBTW, if the default consent state and the update comes from GTM, than you should check carefully whether GTM is loaded before the Google Tag fires.\n\nIn my opinion, use hardcoded CMP and use GA4 config within GTM. If a user has a ad blocker for example, it might block the GTM tracking script which will result in no cookie banner shown if it’s fired trough GTM. And if you’re fully compliant, which almost nobody is, without consent you couldn’t even load like a YouTube vid for example on your website because they automatically set cookies.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Does the gtag send data like a page view, or is that GTM?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "So, if a gtag send everything anyway. How would GTM help you than? Every thing you would set up will create duplicates. They must have a solution for this, did you reach out to them?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Are you not able to put any kind of script in the header. How did they get Gtag in the header and how did they get the GTM script in the header. They just need very little adjustments so that everything would work as it should.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "You’re stating that consent mode works by the way. If you go to tag manager preview mode. Is consent set to denied before the gtag script triggers the event? If so, and the user interact with the banner, does it show the update statement? As mentioned earlier, with advanced consent mode, all Google tags will still get assigned the consent accepted status if the interaction with the banner is on the same page.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Yeah that’s pretty much how it goes. It does seem like as long as you don’t rename the datalayer, gtag.js and gtm are able to share consent signals.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Yeah why not just fire the gtag once consent has been provided?",
                "author": "scotty_ducati",
                "score": 1
            },
            {
                "body": "I wish, but it’s a third-party platform and whilst GTM is provided, the hard-coded GA integration provides a lot more data. The datalayer is pretty scant, so it’s not really an option.\n\nHard coding cookiebot also won’t be possible as a result I’m afraid. It’s a bit of a Frankenstein approach but it’s what we got 😢",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "I’d like to but this is a third party platform and we don’t have the option to take out gtag, as the GTM integration provides a lot less data than the gtag integration. Shitty but it’s what we’re stuck with.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Update: found the answer (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Yea this is an important point. A popup that forces the user to make a decision is much better than a banner that can easily be ignored",
                "author": "turbopenguin",
                "score": 1
            },
            {
                "body": "gtag. Unfortunately we are stuck with a hybrid solution because it’s on a third-party platform. Their GA4 gtag solution is complete, but the datalayer on GTM is quite bare bones, so yeah… GA4 through gtag, CMP through GTM.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "GTM is literally only there so that I can run the consent management platform at the moment, but in the future will be used for other pixels such as FB. Luckily the gtag and GTM use the same datalayer, so the CMP is able to communicate with the gtag setup.\n\nNote that I found the answer to my problem (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Yes, consent mode works. The tags fire but they are in consent mode (G100). Only the tags that fire after cookie acceptance fire in 'full' mode (G111).",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Update: found the answer (as always) on Simo Ahava's blog: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "All Google tags may be fire at any time as long as default consent is set to declined. If you don’t fire your Google tags prior consent you will never benefit from the moddeling features. It will use cookieless pings to fill in the gaps.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "But as far as I can see in the Preview mode, my GA4 Google Tag doesn't get fired again after I update the consent. It fired before but at that time I had \"denied\" for all consents. Then I updated and there is not GA4 Google Tag at the top (Initialization event). \n\nDid you solve this somehow? Is it working for you?",
                "author": "MapeSVK",
                "score": 1
            },
            {
                "body": "In that case, if consent update is on the same page, as the landing page. Google will still set them to G111. I’m at work in about an hour, I’ll test if it applies G111 to the tags with the debugger or not, I don’t remember that. But, if it works like you described it should retroactivly set them to G111, I’ll have a check if it shows in tag manager. If it does with my inplementation than you would probably still have to adjust something in GTM to make it work. I’ll get back to you in 1-2 hours.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Thanks!\n\nNote that Simo Ahava is pretty clear on this: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\n>If consent is *granted*, then any hits collected on the same page while consent was *denied* will get automatically **reprocessed** to have the granted status.\n\nWill be good to get this tested though, so please do get back to me. I'm currently using GA debugger and it doesn't allow me to inspect retroactive changes like this. Not even sure the GTM debugger will do this, but worth checking.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Thanks. Yeah I guess I could look in BQ once we get some data but I pretty much take Simo’s word for gospel in this space.\n\nI think all is well in my client’s setup but I’ll monitor for any weirdness in attribution and / or (not set) landing page instances.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "What Simo says is a 100% correct for sure, no doubt. He’s a legend haha. But because you’re not having the usual setup it’s always good to check. If you have bigQuery connected you can test it yourself which is also documented in Simo’s article!",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Yeah we have a BQ setup so I’ll have a poke around there",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "EU regions usually has GDPR rules and we cannot fire any tags without user consent. So it's better to fire the tag only after user approve cookies.",
                "author": "zenrayman",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754994807.0,
        "title": "Blocking Third-Party Cookies in iframes Before Consent",
        "author": "CountDirect5522",
        "id": "1mo53yw",
        "selftext": "I’m working on a website that has an iframe in it, and I’ve noticed some cookies are being set from a different domain inside that iframe. The problem is, I can’t figure out the script URL pattern for them.\n\nApparently, I need to block these cookies until the user gives consent, but without identifying the script pattern, I’m stuck.\n\nHas anyone dealt with this before? How do you block cross-domain iframe cookies before consent when the script URL isn’t obvious?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mo53yw/blocking_thirdparty_cookies_in_iframes_before/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I guess you can’t reliably stop a third-party inside an iframe from setting cookies & stuff unless you don’t load the iframe before consent. Parent-page scripts and CSP don’t reach into a cross-origin iframe - or am I wrong? If it loads, that server can send Set-Cookie in its response.\n\nIsn´t that the reason for two-click-solutions and placeholders? (that suck). Don’t set `src` until consent. Use `data-src` (or a stub `srcdoc`) and swap it in after opt-in.",
                "author": "philipp_roth",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747822484.0,
        "title": "Consent with UET ms ads tag -they keep telling me I need to do consent mode, but I already set it up months ago",
        "author": "Numerous_Test_7858",
        "id": "1kru98j",
        "selftext": "I keep getting chased by MS for implementing consent mode, but AFAIK I have had it implemented for months.\n\nI have cookie bot banner which is configured working correctly.\n\nThe UET tag consent settings I have are on\n\n**Consent mode settings (EXPERIMENTAL)**  \nEnable consent updates from GTM\n\n**Consent settings (beta)**\n\nbuilt in consent checks\n\nad\\_storage ad\\_personalization, ad\\_user\\_data  \n  \nNo additional consent required\n\nSo the tag doesn't get blocked, but still fires like google tags do, but as I understand the built-in consent means that nothing is recorded unless the user consents, but it means you don't need them to reload the page after consenting to get the hit.\n\n  \nIs this the issue?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kru98j/consent_with_uet_ms_ads_tag_they_keep_telling_me/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Built in is for google tags, set the ms tags to use additional consent and set to marketing or analytics… that should work",
                "author": "Interesting-Plan-618",
                "score": 2
            },
            {
                "body": "Have you tried simo ahava consent tag to set the update/default status? It inclused ms too",
                "author": "Interesting-Plan-618",
                "score": 2
            },
            {
                "body": "By the way, nice approach, i like the thinking behind it",
                "author": "Interesting-Plan-618",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have the same issue. I can see from the console that all the consent updates are being put into the uet queue but the emails keep coming and the call to \\`https://bat.bing.com/action/0\\` does not have the \\`asc\\` parameter as discussed at the bottom of [https://help.ads.microsoft.com/?ocid=#apex/ads/en/60119/1-500](https://help.ads.microsoft.com/?ocid=#apex/ads/en/60119/1-500)\n\n  \nIt feels like their tag just doesn't actually look at the consent settings it has sent itself.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "Had similar problems. We kept getting the messages from Microsoft about consent not being set up properly, GTM preview mode had all the statuses being set to granted but Bing UET refused to recognise it.\n\n\nFound this solution where you check if adstorage consent is granted in google, and if so run a custom html to force bing to update the consent state, and then set the uet tag to fire in sequence after that script runs. Just have to remove any other triggers from the uet tag so it can only fire if consent is granted and that script runs. \n\nhttps://www.reddit.com/r/GoogleTagManager/comments/1e8kl85/microsoft_consent_mode/\n\nThe first script that sets the default state to denied, they say should be hardcoded before gtm. I set it as a custom html to fire on initialisation and that worked fine and saves some time arranging dev.",
                "author": "whydidthathappen",
                "score": 1
            },
            {
                "body": "Same here.  The most annoying is the popup when in your account.  The only way to close the popup is by emailing yourself a reminder or starting a chat with support.  After about the 10th time I did the chat option.  Support told me to ignore the popup.  I explained to them that you really can't do that and it forces you to choose one of the options to close it - they didn't seem to understand that is how it worked.  While they were with me they asked if they could check consent mode manually and confirmed everything was setup properly and working as it should.  These last few days though I am getting bombarded with emails telling me to implement consent mode.  I am chalking this up to someone or some department not thinking this all the way through when it was implemented.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "We’ve always fired them only when marketing consent is present but now Microsoft want to receive the consent value.  \n\nOnly their GTM tag itself doesn’t actually read it correctly, though it claims, to be fair, that doing so is “experimental”. \n\nWe’ve moved to firing a community UET consent tag once for the default and then again when the CMP sets it. The UET tag the  correctly picks it up and sends the `ack` parameter.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "It's all working fine now, cookieyes and a custom html to help ms ads read the status properly. But thank you",
                "author": "whydidthathappen",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749843109.0,
        "title": "Cookie Consent Mode Setup for GA4",
        "author": "eduardol-eleve",
        "id": "1laovxk",
        "selftext": "If I set up the consent correctly, denied for everything at the start and granted in case of cookie acceptance, is it enough for GA4 to handle all cookie consent properly without affecting attribution?  \nI want to implement this by setting up consent correctly and then configuring all required permissions in the \"Require additional consent for tag to fire\" setting.  \nThen, I trigger an initial page\\_view event within consent (restricted data, only for modeling) and fire it again in case of cookie acceptance (non-restricted data sent through the tag).\n\nShould I do the same for all Google Ads tags as well?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1laovxk/cookie_consent_mode_setup_for_ga4/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Not for Google tags, just other ones",
                "author": "jb_dot",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sounds like you're looking to do \"Advanced Consent Mode\" (V2) - which will send a cookieless ping before consent is granted and then will automatically update when consent is given. You don't need to fire the pageview event again, for GA4 it'll happen automatically. All Google tags are consent mode aware, so you don't need to add any additional consent. Doing this will allow better modeling of conversions/events.",
                "author": "jb_dot",
                "score": 1
            },
            {
                "body": "If you put anything in \"require additional consent\", you're implementing basic consent mode - no pings, no modeling. If you leave it with only \"built in consent checks\", then you have advanced consent mode - pings and modeling until the user has consented.\n\nIn neither scenario should you ever re-fire the google tag or page view event. It's going to mess your data up big time, because it's not meant to be used that way.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "u/eduardol-eleve \n\n>*I want to implement this by setting up consent correctly and then configuring all required permissions in the \"Require additional consent for tag to fire\" setting.* \n\n\\- Configuring 'Additional consent checks':\n\n**'Not set'** and **'No additional consent required'** \\-> both of these options mean the tag will fire regardless of the visitor's consent choice... if you/your CMP correctly sets the defaults to denied, Google tags (GA4, GAds, ...) will automatically adjust their data collection behaviour based on the consent status... This is what's known as **Advanced Consent Mode**, and only applies to Google tags. Keep in mind though that the legality of this setup is debatable despite Google promoting this as compliant. \n\nNon-Google tags (like Meta) don't support this behaviour - they can't adapt automatically to Google Consent Mode signals. For these, you need to select 'Require additional consent for tag to fire'.\n\n**'Require additional consent for tag to fire'** \\-> this option ensures the tag only fires when the required consent type has actually been granted, and is mandatory for non-Google tags. You can also apply it to Google tags - this approach is called **Basic Consent Mode**. While you may lose some data (since tags won’t fire without consent), this approach is far more safer from a compliance perspective.\n\n>Then, I trigger an initial page\\_view event within consent (restricted data, only for modeling) and fire it again in case of cookie acceptance (non-restricted data sent through the tag).\n\nDon't trigger the page\\_view twice manually (once for restricted data and once after consent).\n\nIn Advanced Consent Mode, when Google tags fire before consent (with a GCS value of G100), Google’s backend will automatically retroactively upgrade those hits to G111 (fully consented) once consent is granted - as long as you’ve properly implemented the update consent command. \n\nWhile many CMPs support sending this command, not all of them send it at the right time, which is crucial for this to work properly. So be sure to verify. If I can recommend one CMP that does this well, it's [Cooki.fi](https://www.cooki.fi)\n\nIn Basic Consent Mode, you should only trigger page\\_view after consent is granted. This typically means relying on your CMP’s “consent update” data layer event.\n\nFeel free to check out this [Consent Mode guide](https://docs.cooki.fi/concepts/google-consent-mode/) if you want a deeper dive.",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "As others said, no need to adjust firing based on additional, since it’s integrated in google tags, what you need to make sure is that no actions is made and sent to ga4 before user interacts banner. If user send data before and after, this will lead to not set or unassigned values. I also personally don’t like to send user_id as standart dimension but i prefer to let ga4 set it itself",
                "author": "Interesting-Plan-618",
                "score": 1
            },
            {
                "body": "So this \"Require additional consent for tag to fire\" won't be crucial?",
                "author": "eduardol-eleve",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748699589.0,
        "title": "Google Tracking has stopped working - is consent being denied?",
        "author": "Andkeep100",
        "id": "1kzxmtj",
        "selftext": "Hi. So we've got an issue where Google Ads and GA4 has stopped tracking conversions. We have a custom pixel doing the work from Shopify set up by the team at [fueled.io](http://fueled.io) . It's worked fine for a couple of years until the last 5 days. Can anyone tell me if the output below from the Google Tag Assistant would suggest why the tracking is failing i.e. wait\\_for\\_update being set to Denied?\n\nThank you :-)\n\n|Type|On-page default|On-page update|\n|:-|:-|:-|\n|ad\\_storage|Granted|Granted|\n|analytics\\_storage|Granted|Granted|\n|ad\\_user\\_data|\\-|\\-|\n|ad\\_personalization|\\-|\\-|\n|wait\\_for\\_update|\\-|Denied|\n\n  \n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kzxmtj/google_tracking_has_stopped_working_is_consent/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You need to transition over to the new Shopify checkout events.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "You are missing important consents. Since the consent signals are incomplete, you no longer see your conversions increase. Normal. I have this case with many clients.",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "u/Andkeep100 this table looks weird :D wait\\_for\\_update is a numeric parameter, it definitely shouldn't be 'Denied'... also, your default and update commands are apparently incomplete, which can definitely cause issues... not to mention the on-page default should be denied, if you have visitors from EEA countries... You can read more on best practices setting up Consent Mode with Shopify's Custom Pixels & GTM [in this article I wrote](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm).",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Thanks - where do I set this?",
                "author": "Andkeep100",
                "score": 1
            },
            {
                "body": "There is a decent explanation here: https://stape.io/news/shopify-checkout-extensibility-upgrade",
                "author": "Amazing_Cod6382",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748778751.0,
        "title": "Session Cookies & Google Consent Issue",
        "author": "ReadingMaleficent121",
        "id": "1l0n3sg",
        "selftext": "I have setup Cookiebot with GTM and it is working fine and updating the consent with no issues. However, when someone adds a product to their cart and it takes them to the cart page, the cart is then empty. It seems as though the consent initialisation is loading before the default consent or not remembering prior consent. Any help appreciated",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l0n3sg/session_cookies_google_consent_issue/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Do you mean that the user's actual shopping cart on the site is empty because the cookie that holds the items in it is being blocked on page load?\n\nI'm not sure about your region, but I would expect that a shopping cart cookie would be considered strictly necessary, and wouldn't require you to ask for permission or allow users to opt out. \n\nOr, even if you have to allow opt outs for it, could you set the consent default for functionality_storage to allowed, so it only gets blocked once consent settings are checked?\n\nIf you're talking about an ecommerce tracking issue, it's not possible to answer without seeing your site. Make sure that you've set everything up exactly as the documentation says.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you share your website url?",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "u/ReadingMaleficent121 have you checked all cookies detected by CookieBot? Verify the specific checkout/cart cookie hasn't been incorrectly classified as 'marketing' or 'analytics'.",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Perhaps the problem is resolved with another CMP. Try Axeptio, OneTrust, Consent Studio or others too, I'd say.",
                "author": "Yallone",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1735655521.0,
        "title": "Consent Mode Woes",
        "author": "Budget_Wrangler511",
        "id": "1hqfu72",
        "selftext": "Background is our google ads conversions have gone through the floor this year and we strongly suspect it's because we weren't using consent mode. (years of past good data)\n\nWe've finally set up Cookiebot banner to fire in the EEA GDPR required areas, but how do we set up default / triggered states properly? \n\nWe have Plerdy (site analytics) tags as well as google standard ones, which as we understand from cookiebot setup we'll need to require additional consent for. \n\n**Question:** If we leave consent as the default (denied), then how will users outside of the EEA ever be able to give consent? (As we only fire banner in EEA area). Is Google Ads effectively saying we need to have a GDPR banner up everywhere regardless to be compliant with consent mode?\n\nWhat are the correct options - do we:  \n\\- Set default to be 'Granted' everywhere, and let EEA users choose correct consent (this is risky option?)  \n\\- Set default to denied and require consent for Plerdy tags to fire somehow (which I don't understand how anyone outside the EU ever will be able to since there's no banner, only in EEA?)  \n\\- Set default to denied, and require banner worldwide?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hqfu72/consent_mode_woes/",
        "num_comments": 23,
        "comments": [
            {
                "body": "> Set default to denied, and require banner worldwide? \n\n\nThis is the most user-centric option. It actively shows that the company values user privacy and respects the users choice to be tracked or not. It is also the simplest solution as you won't have to configure region-specific behavior. It also negates the need for additional changes if the local regulations of a region are updated at some point in the future.\n\n\n\n\n>  Set default to denied and require consent for Plerdy tags to fire somehow (which I don't understand how anyone outside the EU ever will be able to since there's no banner, only in EEA?)\n\n\nIf you don't care about consent for specific regions then you will have to configure your consent mode to default to granted in those regions. That can be done manually or automatically based on your CMP and setup. You will also have to configure your tags to trigger unconditionally for these regions as well.\n\n\nThis option is technically possible but legally a gray area. I know for a fact that many regions outside the EU also require some sort of consent.\n\n\n\n\n>  Set default to be 'Granted' everywhere, and let EEA users choose correct consent (this is risky option?)\n\n\nThis is called opt-out tracking and is areal gray area. Any company I've worked with has deemed it not legal in the EU as (without additional configuration) you would still be tracking a user on the first page load even if the user ultimately decides to not give consent.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "The options are referenced from my initial comment, not the OP. I.e denied by default and cookie banner worldwide.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Not sure what you mean by \"it's not right\". Your whole comment basically explains why a lot of international organisations decide to implement opt-in consent management globally.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you sell to EU/UK customers?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "How are you implementing CookieBot? Hardcoded script on site, CMS plugin, their tag template in GTM or Custom HTML tag in GTM?\n\nIf you're hardcoding, you need to put together a gtag consent \"default\" script that handles your default according to the consent policy you wish to implement. It's not a horrible task.\n\nIf you visit [https://www.lowrance.com/en-gb/](https://www.lowrance.com/en-gb/) , have a look at the page source. You'll see a script starting at line 26. It's fairly simple. It sets consent to denied for all regions except for the US, which is set to granted by default.\n\nYou can obviously get a bit more granular with it to narrow down the rules or make them more complicated in order to fit your policy, but I would absolutely set out in writing / in a spreadsheet what you want your policy to be and then use the tools at your disposal to implement that policy. Do not let your tools dictate what your policy is.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Just to add a few more details to what others have already said:\n\n\\* Unless the site can reliably send EEA users to a different area than non-EEA, you will have to adopt \"denied\" and \"opt-in\" mode globally in order to be compliant. \n\n\\* If the site has a clear \"US-only\" section / view, that section only can be set to \"granted\" and \"opt-out\". But this is normally only acceptable if the site has some geolocation logic to redirect non-US traffic to their own separate section.\n\n\\* Typically, any site analytics tags are classified as \"Performance\" and any advertising conversion tags like Google Ads or LI Insight or Facebook, etc. are classified as \"Targeting\".\n\n\\* If you're firing Google Ads conversion tags on campaign page landings, you may need some expert help in order to ensure that people who do opt-in from default \"denied\" state fire conversions (and analytics) belatedly instead of not at all. This is usually accomplished via GTM Trigger Groups.",
                "author": "plamzito",
                "score": 1
            },
            {
                "body": "This is great thank you. \n\nis option 1 just the industry standard nowadays? (I just checked a bunch of random websites from a US browser and it seems that almost all of them have a GDPR banner even if visiting from a random state)\n\nFor option 3: would it make more sense to have 2 region setups like this:  \n\\- Granted everywhere by default, except  \n\\- Denied everywhere there's a GDPR flavor requirement (EEA, Aus?)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "As someone who has spent the last few weeks learning this stuff in and out (as much as I wish I didn’t want to)- you hit the nail on the head with everything. Kudos",
                "author": "elizabeth4156",
                "score": 1
            },
            {
                "body": "Yes but 90%+ in the states - hence needing to figure out both somehow",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "Great resource thank you - we're using the GTM tag template. So there is an option to set regional defaults, I'm just wondering what the implications of 'granted' everywhere (or at least US / non-eu areas) would be.",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "For your first two points, we're using Cookiebot template via GTM - this has regional control ability (i.e. setting EEA users to default denied, or setting US users to default granted, for example). Does this suffice for what you mean? \n\nFor your last point, do you know of any resources that have the proper instructions for completing this step? (I've seen conflicting setup for trigger groups)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "Thank you for this.   \n  \nFor your first two points, we're using Cookiebot template via GTM - this has regional control ability (i.e. setting EEA users to default denied, or setting US users to default granted, for example). Does this suffice for what you mean? \n\nFor your last point, do you know of any resources that have the proper instructions for completing this step? (I've seen conflicting setup for trigger groups)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "> is option 1 just the industry standard nowadays?\n\nFor most companies that operate on a global level, yes it seems to be.\n\n\n>For option 3: would it make more sense to have 2 region setups like this:  \n\\- Granted everywhere by default, except  \n\\- Denied everywhere there's a GDPR flavor requirement (EEA, Aus?)\n\nYeah for sure, if that's what you want to do then it seems like a sensible option.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "The tag template is definitely one of the easiest methods, so long as there are no hardcoded marketing / analytics scripts on site.\n\nIf most of the jurisdictions you're serving are happy with \"granted by default\", then I would definitely set all regions to granted by default and then set the exceptions to \"denied\". The CookieBot tag template sends the same calls to the Google consent API as a hardcoded gtag default script would. The only difference is it's slightly less visible in some debug tools (AdSwerve dataLayer Inspector+ being my preferred option).\n\nYour only other restriction arising from implementing CookieBot with a tag template is when / if you add a second GTM container to the site. It's far too easy to do so in a way that results in the second GTM container firing some tags before the first container has finished running the CookieBot tag.\n\nHardcoding is more work, but eliminates any possible future issues, but using the tag template is a perfectly valid option as long as you keep the caveats in mind!",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "According to CookieBot's own documentation, it uses geolocation lookups that can let you limit a banner to EU users, e. g:\n\n[https://support.cookiebot.com/hc/en-us/articles/360003782954-Display-the-cookie-consent-banner-to-visitors-from-specific-regions-only](https://support.cookiebot.com/hc/en-us/articles/360003782954-Display-the-cookie-consent-banner-to-visitors-from-specific-regions-only)\n\nIt's not clear to me from their documentation whether they can identify users from California (CCPA) and whether you can easily have several different banner configurations side-by-side on the same site. That's work for you.\n\nA couple of gotchas when you're using geolocation:\n\n\\* The location arrives late in the page load. You have to know how to delay everything until it's known where the user came from.\n\n\\* Debugging for different regions can be tricky. Hopefully, CookieBot would provide you with a way to spoof your location easily.\n\nI haven't implemented consent via Google's baked in Consent Mode properties--this is a relative newcomer to the field. But if you're looking for an authoritative source, you can't go wrong with Simo Ahava's blog:\n\n[https://www.simoahava.com/analytics/consent-mode-v2-google-tags/](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/)\n\nAs for how compliant your final implementation is, that is a question for your legal team or a hired expert.",
                "author": "plamzito",
                "score": 1
            },
            {
                "body": "Yeah that's one thing I was worried about in particular, i.e. other tags firing before the Cookiebot consent banner settings firing. \n\nis there a way to amend the settings with the Cookiebot template to ensure that the consent checks always fire first?",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "But don't both options #1 & #3 (as discussed with branner above) in fact actually match your stated requirements?  \n\\- In option 1, the banner is required everywhere, including EEA  \n\\- In option 3, consent from EEA traffic will still be defaulted to denied with banner, it would just be defaulted to granted from non GDPR required countries (say, US as an example)",
                "author": "Budget_Wrangler511",
                "score": 1
            },
            {
                "body": "As long as you fire the CookieBot tag using the Consent Initialization trigger and you don't fire any other tags with that same trigger, you're good.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "You agreed that option 1 (granted by default) is the standard. That absolutely is not the case in Europe and would not be acceptable.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Option 3, though you pretty much should assume GDPR rules apply globally *unless* you specifically know it to be different, such as in individual US states.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Oh I apologise then, you are correct",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It's not right though.\n\nEEA/UK/Swiss citizens have a right to a default of no tracking **before** consent is given. This is why US sites not willing to abide by this directive have, and should, block European traffic.\n\nThis right is absolute regardless of where the site's server or owner is based, so if a US site ignores this, then I, as a European could seek legal recourse with my national privacy regulator.\n\nBasically, if you want to sell to Europeans, you need to respect our laws in the same way that Europeans respect US law.",
                "author": "Taca-F",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748550886.0,
        "title": "Consent Checks On Checkout Page - Shopify Checkout Extensibility",
        "author": "Plastic-Schedule-629",
        "id": "1kylfzc",
        "selftext": "Hi all,\n\nDoes anyone know how to check the current consent status on Shopify checkout pages that use Checkout Extensibility? Aside from reviewing the `dataLayer` or using the Consent Inspector (which doesn’t appear to work reliably on these pages), is there anything we can run in the browser Console to verify consent state?\n\nThe reason I’m asking is that we have two Google Ads Conversion Tracking setups: one implemented via GTM and the other through a Customer Events pixel. The pixel-based implementation is recording conversions accurately, but the GTM-based one is significantly underreporting. I suspect this may be due to the built-in consent checks in the Google Ads Conversion Tracking tag template--where it won't fire unless it has ad\\_storage | ad\\_personalization | ad\\_user\\_data consent as granter (or atleast that's my belief)\n\nFor context, the client is using OneTrust for consent management, but no custom consent update scripts are currently pushing consent state into the GTM `dataLayer`.\n\nLooking for your guidance!\n\nFor reference: i am using this script and aligning the variables using this:  \n[https://docs.google.com/document/d/12So6IxULwH0\\_wPhhL3bUqDc1DJPYwZx1twMWQqOqdQg/edit?usp=sharing](https://docs.google.com/document/d/12So6IxULwH0_wPhhL3bUqDc1DJPYwZx1twMWQqOqdQg/edit?usp=sharing)  \n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kylfzc/consent_checks_on_checkout_page_shopify_checkout/",
        "num_comments": 7,
        "comments": [
            {
                "body": "The bottom to last one (not required one) for both of the parts!",
                "author": "Plastic-Schedule-629",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "In Customer Events, which setting is selected for privacy?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "GTM tags won’t fire if consent isn’t passed in.\n\nShopify Checkout Extensibility limits access to window.Shopify.customerPrivacy so GTM can’t reliably read consent there.\n\nOneTrust must push consent into gtag() or dataLayer. If it doesn’t, GTM treats consent as denied by default.",
                "author": "thehighesthimalaya",
                "score": 1
            },
            {
                "body": "any idea how to update the script to push consent into gtag via OneTrust? Not a dev so at a loss here!",
                "author": "Plastic-Schedule-629",
                "score": 1
            },
            {
                "body": "By default, OneTrust doesn’t push consent into gtag() or dataLayer, which is why GTM treats everything as denied.   \n  \na quick fix your dev (or you, if you're comfortable) can add **after consent is granted**:\n\nfunction applyConsentToGtag() {\n\n  gtag('consent', 'update', {\n\nad\\_storage: 'granted',\n\nad\\_user\\_data: 'granted',\n\nad\\_personalization: 'granted'\n\n  });\n\n}\n\n\n\n**To run this after OneTrust consent, you can use:**\n\nwindow.OptanonWrapper = function() {\n\n  if (OneTrust && typeof OneTrust.GetConsentStatus === 'function') {\n\nvar groups = OneTrust.GetConsentStatus();\n\nif (groups.includes('C0004')) { // C0004 is usually advertising, confirm in your dashboard\n\napplyConsentToGtag();\n\n}\n\n  }\n\n}\n\n\n\nThis will sync your ad tags once the user accepts. You can also verify it's working in GTM’s Preview mode by checking the consent state.",
                "author": "thehighesthimalaya",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708197448.0,
        "title": "Issues with OneTrust & Consent Mode V2",
        "author": "Aries2ka",
        "id": "1at9saw",
        "selftext": "Regular consent mode is working fine in our set up.\n\nSince the intro to consent mode v2, the onetrust banner is not updating consent in the datalayer correctly.\n\nClicking \"Accept All Cookies\" changes consent to granted for all **except** for the two new ones\n\n* ad\\_personalization\n* ad\\_user\\_data\n\nThese two new values have been added to the list of values when setting default consent, but they never update after someone interacts with the Onetrust banner.\n\nSpent over a week back and forth with OneTrust support who are just copy pasting the same info from the docs which is slightly frustrating.\n\nFollowing their steps word for word is not helping at all.\n\nWondered if anyone here had any luck with Onetrust and Consent Mode V2?  \nHow did you get it working?\n\nEDIT:  \nFigured it out in the end and got it working, then woke up to a video tutorial from onetrust on the topic 🤦🏽‍♂️  \n  \nI guess posts like this got attention because we also just received a warning email about consent mode v2 coming soon + a video update guide 🤣",
        "score": 10,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1at9saw/issues_with_onetrust_consent_mode_v2/",
        "num_comments": 51,
        "comments": [
            {
                "body": "800 a day...\n\nThere's a *lot* of demand for consent / consent mode work right now.\n\nDoing the work can be relatively straightfoward. Testing and validating takes longer.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Onetrust apparently now have an official tag template. I haven't tested it (but I will quite soon), but if it is anywhere near good it will be a vast improvement over implementing it via a CHTML tag.\n\nI'm still not a fan of CHTML implementations for CMP scripts. They just run too late for my liking. Doesn't matter what trigger you use, there's no way to guarantee their firing order (hence the tag sequencing part).\n\nI'm *just now* coming around to the idea that initialising CoMo via a tag template might be somwhat OK, but i'm still leaning toward hardcoding it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Thanks. The new V2 params already were mapped to consent options in one trust. \n\nI was advised to disable it, republish, enable it and republish.\n\nDid that about 5 times, still no luck.",
                "author": "Aries2ka",
                "score": 2
            },
            {
                "body": "OneTrust seem to be suffering some issues just recently (past few months!) and despite being market leader in CMPs, it’s not being reflected completely in their code quality.\n\nIf rolling back a script version doesn’t work, I’d log a support ticket with them. You won’t be the only one having the same issue.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I've been chatting with someone who had the same issue. Turns out it was caused by there being a global geolocation rule overriding things.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Thanks. Got it working in the end.",
                "author": "Aries2ka",
                "score": 2
            },
            {
                "body": "What testing are you doing?\nDid you already have v1 set up?",
                "author": "Aries2ka",
                "score": 2
            },
            {
                "body": "Test it out. \n\nWas testing it for cookiebot in some staging environment, looked okay (for my own purposes, just to have it as a backup if someone needs it).",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "I enjoy experimentation, but tag firing priority is one of those features that is hanging around for backward compatibility and I hope to never have to use it.\n\nWe have tag sequencing now and it is far more logical.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I agree with your point of view, just for me it was easier to try this out instead of setting up tag firing priority in each tag.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "Please don’t rely on tag firing priority for something as important as consent management. It’s not required. You don’t even need to use sequencing except for badly behaved tags like Microsoft UET.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sounds like you need to go into your geolocation rules in OneTrust, map marketing consent to the two new V2 parameters and potentially also republish the script afterwards.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": " Hi, where you able to sort this? We have the same issue",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "I am having the same issue. How did you guys sort it out? Since we integrated OneTrust natively into out Website, I do not want to use GTM to Push consent Mode Information into the DataLayer.\nOneTrust only passes the „original“ parameters.",
                "author": "Han_Yolo95",
                "score": 1
            },
            {
                "body": "u/Aries2ka , can you share how you solved this problem?  I also see in my datalayer that some parameters are denied, although there was а click on \"Accept All Cookies\" button.",
                "author": "Mysterious_Excuse_34",
                "score": 1
            },
            {
                "body": "Mentions nothing of v2",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "Nah, an agency we work with are quoting 800 for a day of work to update it.....  \nOneTrust support have been very unhelpful. \n\nWhat have you tried?",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "Here is how I got it working.\n\n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "\"no way to guarantee their firing order\" You can control the tag firing order through the use of content initialization, initialization, pageview, DOM ready, windows loaded, event and custom event triggers. And further conttol is added through the use of tag sequencing 'set up' and 'clean up' tags.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "We’ve mapped the parameters to OneTrust, updated to the latest version of the script, but still seeing denied for the extra parameters in GTM. \n\nOneTrust said to wait a few hours",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "I’m not convinced a CHTML tag will fire reliably earlier from a Consent Initialization trigger than a Page View trigger.\n\nGTM asks the browser to insert the content of an HTML tag. The browser decides when. \n\nDon’t believe Tag Assistant on this. It will only reflect when the trigger fired, not necessarily when the tag was run and certainly not when a script contained within a CHTML tag was run.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Which consent script are you using?\nWe were using GDPR one but experimented with IAB or something like that. Still no luck.",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "Could be OT slow, or OT stuck on their settings. Once I had to play with Consent Mode settings (like, on and off) and republish multiple times to get it to work.\n\nOT is terrible, I don't get where its value is",
                "author": null,
                "score": 1
            },
            {
                "body": "Have you used tag firing priority in GTM?",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "\"The browser decides when.\" So are you saying it is an illusion that tag management triggers and tag sequencing work / have value? ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Solution? What was it?",
                "author": "Extension-Delay5428",
                "score": 1
            },
            {
                "body": "Various clients. Some already have V1, some have a broken / non-standard V1, some have none at all, some have a half-baked V2... \n\nOne has a thoroughly broken V1 with multiple CoMo default calls caused by misconfigured triggers across two GTM containers (both present on 2 domains) resulting in 2 default and 4 update calls per page with contradictory signals across most of them.\n\nI can't remember how much my agency charge for my time, but it would embarass a small number of lawyers. A lot of it is fixed-fee, but usually 4 or 5 figures.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Did you change to IAB?",
                "author": "Eastern-Operation189",
                "score": 1
            },
            {
                "body": "I have never used tag firing priority in GTM.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Absolutely not. Tag sequencing is effective. Timing CHTML tags based only on the trigger type is where things aren’t so neatly defined.\n\nI mention this mainly because inexperienced GTM users might get into difficulty if they think a script contained within a CHTML tag will run before a GA4 Event tag fires purely because the CHTML tag is triggered by Consent Initialization and the GA4 Event Tag is fired on Page View.\n\nIt will look correct in Tag Assistant.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I'm in the wrong field.",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "nah, i think it was gdpr we had in the end",
                "author": "Aries2ka",
                "score": 1
            },
            {
                "body": "\"Tag sequencing is effective.\" In my OneTrust example I use tag sequencing and do not rely on the consent initialization trigger alone.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I do try to encourage people to upskill into this field.\n\nI mention this only as a motivator and not a brag, but in 3 years I've had 2 promotions and 2 salary increases. The first was 30% and the second was 66%.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I recognise that and my apologies if I jumped the gun with my reply.\n\nTag sequencing is a life saver, but if I can avoid using it I will. With OneTrust offering a “proper” tag template now, it might mean we don’t have to use sequencing for a good implementation.\n\nI’ll see if I can find time to test it today.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "My solution is based on the work done by Simo's 8-bit Sheep. I will be curious if OneTrust tops 8-bit Sheep. ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Last time I looked OneTrust were still recommending their platform could be implemented happily with a CHTM tag, so I’m not arguing that we must not do it.\n\nIf the tag template works though, the OneTrust script will run earlier than it would via CHTML. If CoMo were implemented within GTM as well, I would still use sequencing because I’d want the CoMo default to happen on Consent Initialization but I’d also want the OneTrust tag to fire on the same event. It’s likely not even critical as to which one runs first, but I would be more comfortable knowing the CoMo default ran before OneTrust.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Here is how I got it working.\n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 0
            },
            {
                "body": "Getting ready for GCMv2 begins with implementing GCM.\n\n\n\"In light of regulatory changes and increased demand for protection of users’ privacy and consent choices, Google is now updating Consent Mode to Consent Mode v2. The main difference is the introduction of two additional consent states: ad_user_data and ad_personalization, which can be attributed to a user’s consent.\n\n\nad_user_data is used to determine whether the user gives consent for Google’s advertising purposes. This will be set to ‘granted’ when the user actively agrees to their data being shared with Google through a consent banner interaction.\n\n\nad_personalization controls whether data can be used for ads personalization (e.g. for remarketing). It can only be set to ‘granted’ when users specifically agree (through the consent banner) that their data is shared with Google for the purpose of ad personalization.\"\n\n\nhttps://cookieinformation.com/resources/blog/google-announces-consent-mode-v2/ ",
                "author": "Humble_Elderberry_25",
                "score": 0
            },
            {
                "body": "Here is how I got it working.\n\n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1745844174.0,
        "title": "Advanced consent mode V2 setup",
        "author": "Shazacar",
        "id": "1k9ulsd",
        "selftext": "Hi all,\n\nJust one question because I checked every where on the Internet and once it's A solution and once it's B solution. So for the Advanced consent mode V2 in GTM, in the Consent Parameter part on the tag. For GA4 tag should we use the \"not set\" or the \"no additional consent is required\"? I'v read that is in fine the same. In my setup I use \"Not set\" and it's seems everything works well (GCS, GCD parameters are set). What is the real difference between these 2 choice? \n\n  \nThanks",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k9ulsd/advanced_consent_mode_v2_setup/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Function wise, they work the same - the tag will fire without needing additional consent. From an organizational point of view, it's better to choose \"No additional consent required\" - that indicates to you, to GTM, and to anyone else using the container, that you've gone through the consent settings of this tag and made a decision. Otherwise, if you leave it as Not set, it will still work, but when publishing a GTM version, GTM will prompt you to review the consent settings of this tag.",
                "author": "Etianen7",
                "score": 7
            },
            {
                "body": "\"No additional consent required\" = tags whose consent is directly integrated into the tag (only valid for Google vs Bing Ads mode consent)\n\"Additional consent required\" = tags that do not have built-in consent, you will therefore need to add \"analytics_storage\" or other depending on the type of consent required for triggering and tracking. \n\"Not defined\" = integrated consent is preferred but for other tags they will not have an automatic consent trigger.",
                "author": "Chemouel_Dgx",
                "score": 2
            },
            {
                "body": "At your disposal if necessary",
                "author": "Chemouel_Dgx",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Oh I never thinking in this way but it’s make sense. 🙏🏻",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "This! And is your tag set on the regular “All Pages” trigger?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Thanks it’s very clear",
                "author": "Shazacar",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740855919.0,
        "title": "Consent Mode Template Tag",
        "author": "jen25854",
        "id": "1j171f2",
        "selftext": "Hello everyone,\n\nI have implemented Consent Mode V2 in my website. I created the Tag Template according to Google's Create a consent mode template. It gathers data and I thought everything was OK, but I was checking Page Views, Exits and Entrances for pages in GA4 and they all have the same numbers. Example, Page 1, has 40 Views, 40 Exits, 40 Entrances. This is not right and this change in data started after implementing CM2.\n\nDoes anyone know what I'm doing wrong with the Tag?\n\nThank you",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j171f2/consent_mode_template_tag/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Why don't you just use a template from the community gallery? There are tons of ready-made consent mode templates.\n\n\n> Does anyone know what I'm doing wrong with the Tag?\n\n\nThis is impossible to answer unless you share the template with us.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Yes but this is just boilerplate. Without details on what you've added or changed and without any type of test results I can only speculate on why it's not working in your specific situation.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What CMP are you using to solicit / collect the user consent? CookieYes? CookieBot? CookieHub? OneTrust? Osano? Use the consent tag template for your particular CMP. Following the installation instructions for that CMP.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "It's this one, as explained by Google\n\n[https://developers.google.com/tag-platform/tag-manager/templates/consent-apis](https://developers.google.com/tag-platform/tag-manager/templates/consent-apis)\n\nI want to do it myself, don't want to use from the comm.galley",
                "author": "jen25854",
                "score": 1
            },
            {
                "body": "I have created the template myself, as explained by google in https://developers.google.com/tag-platform/tag-manager/templates/consent-apis.\n\nI don't use any CMP and don't want to use any.",
                "author": "jen25854",
                "score": 1
            },
            {
                "body": "I have made very small, customizing, changes to the template. What can be edited, otherwise everything is done as explained.  I don't understand if the issue lies in the template or the tag setting. The template is a copy the one fro google. I don't have ads data redaction and passing through URL parameters.",
                "author": "jen25854",
                "score": 1
            },
            {
                "body": "Can you share the template you made or screenshots of your setup? What is triggering the consent change? What do you see in the GTM preview consent tab?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "I'm unable to put screenshots. The consent change is triggered when a someone clicks Accept All in the banner for example. And I see the consent change in GTM preview, can see the real time user in Analytics and thought it was OK. The collected Data doesn't look OK. I have the same numbers on Page Views, Page Exits and Page Entrances in Analytics. The \"Consent\" Tag fires once per event (GTM event).",
                "author": "jen25854",
                "score": 1
            },
            {
                "body": ">I see the consent change in GTM preview\n\nDo you also see that all required consent types have a value of `granted`? Additionally, what value does the `gcs` parameter have in your GA4 events?\n\n\n>The \"Consent\" Tag fires once per event (GTM event)\n\nThis does not sound right. Normally the consent tag should only fire on 2 occasions. First for setting default consent, which should be fired on the `\"Consent Initialization\"` event. The second is when consent is updated, which really only happens on interactions with the consent banner or if you're unable to read existing consent as early as the `\"Consent Initialization\"` event and need to update it at a later time.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Yes, I can see the changes of consent state (for any of the 4 consent types), when consent is given fully or only for some.\n\ngcs parameter has the value G100, when consent is denied, G111, when both Analytics (analytics\\_storage) and Ads Consent (ads\\_storage) is given, or all 4 (ad\\_user\\_data, ad\\_personalization) and G101 or G110 if only Analytics or only Ads Consent is given.\n\nTag fires once per GTM event is exactly what you have explained. Firstly on default consent and then on update consent.",
                "author": "jen25854",
                "score": 1
            },
            {
                "body": "Well, from your explanation it seems like it's all set up correctly on the front end. Have you checked the \"Consent settings\" under \"Property settings\" in GA4? Does it all check out?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Yes, everything in GA4 is correct under \"Consent Settings\"",
                "author": "jen25854",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740962875.0,
        "title": "How to make Cookiebot remember user consent across pages instead of resetting to 'denied'?",
        "author": "mdex2k",
        "id": "1j26dbe",
        "selftext": "I'm using Cookiebot on my website, but I'm running into an issue where it resets the user's consent preferences to 'denied' every time they navigate to a new page, before updating it again. In contrast, Borlabs Cookie keeps the last consent state and applies it immediately on page load.\n\nIs there a way to configure Cookiebot so that it remembers the user's consent settings across different pages and applies them instantly, rather than defaulting to 'denied' and then updating afterward?\n\nAny insights or solutions would be greatly appreciated!",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j26dbe/how_to_make_cookiebot_remember_user_consent/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Cookiebot should load before other scripts to ensure it applies the correct consent settings immediately.\n\nMake sure the initialization script is placed in the <head> section with async disabled.\n\nEnsure that \"Prior Consent\" is enabled in your Cookiebot settings. This ensures scripts aren't loaded until consent is confirmed.\n\nIf the issue persists, a workaround is to manually apply the stored consent state immediately.",
                "author": "wardogfufu",
                "score": 3
            },
            {
                "body": "The way you describe it, this could be entirely perfect behavior from CookieBot.\n\nWhen you say consent reverts to denied until updating it... do you mean that the default Google Consent Mode state on a new page is denied and then, when Google Consent Mode state automatically updates on that same page, that is when consent is correctly changed to \"granted\"?\n\nIf so, that's fine. I *have* seen implementations where the default state of Google Consent Mode is changed to reflect the current, known user consent choice, but it's strictly not necessary and arguably not advisable to do it that way.\n\nIf, however, you're saying that the user must update consent on every page then you definitely have a problem and the likely cause of that is something (some script, somewhere) is deleting the relevant cookie that CookieBot creates in order to remember the user's consent choice.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Hi Stefan,\n\nqq -> is there a specific reason why you prefer to have it denied on default regardless if users already have choices and navigated to another URL?",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you tried getting in touch with Cookiebot support? They can also look into it for you. Afaik it's not supposed to reset the consent at every page, maybe something in your current implementation may be causing it to do so.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "The Google Consent Mode is working correctly on my website. By default, ad\\_storage and analytics\\_storage are set to denied, and when a user accepts cookies, these values change to granted. So far, this functions as expected.\n\nHowever, I’m facing an issue when a user who has already given consent navigates to a subdomain (e.g., sub.domain.com), which hosts my external booking software. Despite having the Google Tag Manager code installed on the booking software, the consent settings reset to denied upon entering the subdomain.\n\nI’ve noticed that no Cookiebot popup appears on the subdomain, which is fine. However, in the background, the consent preferences do not update to reflect the user's previously granted permission from the main site. As a result, tracking and analytics remain blocked, even though the user has already consented.\n\nHow can I configure Cookiebot (or Google Consent Mode) to ensure that the user's consent preferences from the main domain are automatically applied to the subdomain instead of resetting to the default?\n\nThanks in advance for any insights!\n\nHere is a screenshot:\n\n[https://ibb.co/p6yfG184](https://ibb.co/p6yfG184)",
                "author": "mdex2k",
                "score": 1
            },
            {
                "body": "Unfortunately, they don’t offer support for setting everything up.",
                "author": "mdex2k",
                "score": 1
            },
            {
                "body": "Main reason for this: The default Google Consent API call is hardcoded on site. This is pretty common and I like this method of implementation because it removes many potential ways for someone else to screw things up later.\n\nOther main reason: This is how Google designed it to work. The default consent state should reflect the consent model applicable within that user's jurisdiction. The Consent Mode update should reflect the user's known preference.\n\nEDIT: For a real world example of a \"good\" hardcoded CoMo default script, pull up the page source for [https://www.lowrance.com/](https://www.lowrance.com/) and look at lines 26 through 47.\n\n[https://ibb.co/rK2LRcgG](https://ibb.co/rK2LRcgG)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "If you have two subscriptions (one for main domain, one for subdomain), you want them to be in the same \"domain group\" within your CookieBot configuration.\n\nThis might be helpful (or might not!): [https://support.cookiebot.com/hc/en-us/articles/360003760813-Can-I-handle-multiple-domains-from-one-account](https://support.cookiebot.com/hc/en-us/articles/360003760813-Can-I-handle-multiple-domains-from-one-account)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "That's how I have for most of the websites I'm running (except US part, mine are EU based), but didn't rethink if there are any reasons why not to do it like that. Thanks for the input, appreciate it.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Hi, I've already done this. I grouped the two domains and enabled cross-domain consent sharing. It works perfectly on the main site, but as soon as someone navigates to the subpage, the cookie banner tries to load again, and no consent data is shared. Maybe I did something wrong in the GTM setup? Here is how the subdomain looks like: [https://ibb.co/VWT72SBs](https://ibb.co/VWT72SBs)\n\nhere is the GTM set-up\n\n[https://ibb.co/bM91cC7t](https://ibb.co/bM91cC7t)\n\n[https://ibb.co/wFnpH8Cz](https://ibb.co/wFnpH8Cz)",
                "author": "mdex2k",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743097754.0,
        "title": "Consent mode help - Consent Update, Consent default, and Container Loaded are firing in the wrong order",
        "author": "Etianen7",
        "id": "1jl9yz9",
        "selftext": "I'm implementing Consent Mode v2 and Cookiebot manually on a Next.js app, with advanced consent mode. Cookiebot is enabled only for users in certain regions. After some issues in getting the consent mode code to load properly, I've run into the following issues:\n\n* on the first page the user visits, everything works well - Consent Default happens first, the google tags fire on Container loaded, and when the user interacts with the banner - Consent Update.\n* on the second page however, Cookiebot sends the Consent Update super early, wayy before Consent Default, which is obviously not recommended.\n* for users in regions where our banner isn't allowed, the Consent Update happens after Container initialization, meaning after my google tags have fired. Will this be an issue (meaning will they still be treated as cookieless pings)?\n\nDoes anyone have any tips how to fix the timings of all this (or any helpful info I could relay to our devs)?  \n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jl9yz9/consent_mode_help_consent_update_consent_default/",
        "num_comments": 8,
        "comments": [
            {
                "body": "It isn't hard-coded per se. Since the website is a SPA, the devs are using conditional logic and flags to make sure Cookiebot, consent mode and GTM fire in the correct order on pageload. Our order was Cookiebot, Consent Mode, GTM/other cookie-setting scripts, but it turns out it worked better when we made it Consent Mode, Cookiebot, GTM and so on. This way Consent Default always happened before Cookiebot's Consent Update for returning users.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Never had any issues like this one.\n\nIs consent default hardcoded in all pages? Right above GTM?\n\n[Implementing Google consent mode – Cookiebot Support](https://support.cookiebot.com/hc/en-us/articles/360016047000-Implementing-Google-consent-mode)",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Key question - is your site a single-page application by any chance?\n\n  \nCan you confirm if the consent default is hardcoded or loaded as a cHTML tag in GTM?",
                "author": "plango_",
                "score": 1
            },
            {
                "body": "Yes, it's a SPA in Next.js. We're deploying both Cookiebot and Consent mode outside of GTM since we have other cookie-setting scripts that are outside of GTM as well.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "If your devs are setting default consent manually on virtual page views then that is the cause of your timing issue. They only need to set default consent once, on the initial page load. Consent states persist across history change events. Also, Google tags don't really care about which command that sets the consent flags first, they only look at the value of the consent flags at the time of execution.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "I would highly recommend managing all your consent handling via GTM. This gives you the greatest degree of control!\n\n  \nThis makes sense, so with a SPA page loads are not 'page refreshes', which usually for Consent Mode the configuration in GTM handles those tags 'per page'. This requires a slightly different implementation - rather than using 'Page Initialization' as a trigger, you need to use 'history change'",
                "author": "plango_",
                "score": 1
            },
            {
                "body": "Yes, as I said, we're doing this on pageload, not on history change. Today we're releasing on prod and the struggle will be coming to and end lol",
                "author": "Etianen7",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724943192.0,
        "title": "I'm struggling a bit with key concepts for consent mode",
        "author": "griz_fan",
        "id": "1f44fob",
        "selftext": "Either there's some big gaps in my understanding (entirely possible) or the ad agency we're working with if full of crap. Here's the situation.\n\nWe have a WooCommerce website in the US that does not have any form of cookie consent banner implemented. There's a very barebones GTM setup, too. We've had GA4 loaded by GTM for a couple of years now, and no signs of problems that we've noticed. We recently started our first banner ad campaign and need to deploy 3 tracking tags: A site-wide retargeting tag, an add-to-cart retargeting tag, and a conversion tag on the order confirmation page. Since this is a WooCommerce site, I set up GTM4WP, which created all the necessary data layers and events. \n\nWe used the GTM preview mode, which shows all the various tags firing at the right time, picking up the right values from the datalayer and passing them into the tag variables. All looks good, but the ad agency says they're not seeing anything coming through for conversions. They said they have \"been seeing a lot of issues with google tag manager and the changes related to consent mode, and this is not just for XXXXXX but even for Google Ads.\" And then they suggested hand-coding the conversion tracking tag on the order confirmation page. This sounded like BS to me, but at the same time, I've not been keeping up with consent mode like I should have been. \n\nSo, is this plausible? There have been zero changes in our GTM container related to consent. I heard that retargeting for Google Ads would need additional set up, but we're not running Google Ads at the moment. The tags in question are clearly firing, and if there was a problem with consent mode, wouldn't that be preventing the tags from firing at all? The fact that the tags are firing means, to me at least, that is the same result as if we'd hand-coded the tag to the confirmation page; in both cases, the script for the tracking pixel loads. Am I missing something?\n\nthanks!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1f44fob/im_struggling_a_bit_with_key_concepts_for_consent/",
        "num_comments": 26,
        "comments": [
            {
                "body": "I don’t think what they are saying is true. No need to hand code, I use GTM4WP for this and it works well. The issue is elsewhere.\n\nFew things -\n\nYou should fire conversion on purchase event, not on thank you page. That way you can get value and other data layer values, and prevent any possible duplicate conversions \n\nAre you sure you published the container?",
                "author": "nakfil",
                "score": 4
            },
            {
                "body": "You’re right to be suspicious and if the issue was consent mode, which it isn’t, hard coding the tag wouldn’t make a difference. I think the agency is just trying to come up with excuses for bad performance.",
                "author": "moonsal71",
                "score": 4
            },
            {
                "body": "yeah, I should have mentioned that we're using the events created by GTM4WP to trigger the tags, including the event-purchase for the conversion tag. I actually published it twice, just to make sure, too :) \n\nIt just sounded like a BS answer from someone hoping we wouldn't know any better. To clarify, if consent mode is set up, GTM won't even fire the tags if consent is not granted, right? There's no way the tags would fire, but GTM would somehow interfere with the cookie?",
                "author": "griz_fan",
                "score": 3
            },
            {
                "body": "I agree, I've been kicking consent mode down the road for while now, so it will need to be dealt with on this site sooner than later. But, at least I know things are set up properly in this specific case.",
                "author": "griz_fan",
                "score": 3
            },
            {
                "body": "Switching the method of implementing conversion tags from GTM to code won’t change anything. Personally, I’ve always preferred working with GTM for my clients for reasons of organization and clarity.\n\nHowever, based on what you wrote, it’s indeed possible that Consent Mode is playing a role in the misattribution of key events. Many agencies don’t have internal resources to investigate tracking issues, so they turn to Google’s Tag Team. The feedback you received from the agency seems to indicate a misunderstanding of the problem.\n\nOver the last six months, I’ve had many clients approach me due to attribution issues. These problems often stem from improper implementation of the consent banner and Google Consent Mode.\n\nYou can check this by looking in GA4 under “Report > Acquisition > Traffic acquisition.” Select the dimension “Session source/medium” and see if there is a significant portion of (direct)/(none) in the key events. If so, there’s likely an issue that requires further investigation.",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": "This should not have anything to do with consent mode as you are not in Europe. But what you can do is set consent anyway using GTM.\n\nIn the community library there is a tag called Consent Mode (Google + Microsoft tags), add this to your workspace and then configure a tag for default and set all the consent signals to granted. You could also configure an additional one for update and then also set all to granted. These tags need to fire in Consent Initialization. \n\nThis is not going to show anything to your customers and this is not going to make you legally compliant, what it will do is send the consent signals so you can completely rule out Consent Mode being the problem.",
                "author": "James_Edward_A",
                "score": 2
            },
            {
                "body": "Okay, in that case, it could indeed be a way for them to shift attention away from poor performance.\n\nStill, make sure that the \"Conversion Linker\" tag is present and triggers at the same time as the \"Remarketing\" tag.",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": ">If Google Consent Mode is implemented, the default behavior is that Google tags (GA4, Floodlight, Google Ads etc) *will still fire*, but they modify the data they send to the platform to redact or anonymize what is being sent.\n\nDigitalStefan is 100% correct.  We learned this the hard way: Our company does not have a banner, and consent mode was accidentally activated by a Website plugin.     \n\nAll metrics disappeared from the GA4 UI....it flatlined like a heart attack.   We couldn't figure out what was going on because everything looked like it was working correctly in GTM preview mode, and the DevTools network pings to Google.\n\nOur big break happened when I was in BigQuery and noticed the missing data there, but it had been anonymized: all session IDs and user\\_pseudo\\_id's had been stripped out.   That was when I knew it was consent mode.",
                "author": "Firm_Sense9730",
                "score": 2
            },
            {
                "body": "Wait, just to clarify. Which tags did the agency ask you to hard-code if they’re not Google Ads?",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": "So if I understand correctly, their solution's tag is currently implemented through your GTM container, and they want to move it to the source code.\n\nIf that’s the case, I don’t see any reason to change the integration method; the result will be the same. To ensure their tag is working correctly, it would be wise to check on the confirmation page if the HTTP request is being sent to their platform (Inspect > Network). But in principle, I don’t see why it wouldn’t be unless your CSP is blocking their domain.",
                "author": "Difficult-Jaguar7402",
                "score": 2
            },
            {
                "body": "Your understanding is correct. I'll run another test order and this time pay extra attention to the HTTP requests. I'll even save the HAR file for reference. Thanks again for the helpful answers :)",
                "author": "griz_fan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "When I read what they said, it sounded exactly like some non-technically inclined agencies I've had to support or have been in meetings with. In all cases, they weren't trying to hide poor performance. Rather, they were just being advertising folks that Googled the issue for 15 minutes, grabbed a theory that included a lot of the same words in the email describing the problem, etc. You get the idea. :-)",
                "author": "Strict-Basil5133",
                "score": 1
            },
            {
                "body": "Vanishingly few agencies have the requisite in-house knowledge regarding consent management at all, let alone Google Consent Mode.\n\nsource: Am the in-house agency expert for consent management and Google Consent Mode (and now Microsoft Consent Mode, it seems).",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks - since we don't have a cookie consent banner and consent mode hasn't been configured yet, I think we're in the clear from that causing issues. Also, I checked that GA4 report, and no issues there. \n\nI think the ad agency guy was just making things up and doesn't have a clue how this works.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "**A word of caution from our experience:**\n\nWe did this exact suggestion (artificial update tag in addition to default tag) and to our surprise, experienced continuing problems.  Not as big as our initial problems, but we determined GA4 wasn't capturing all data.\n\nIf Consent Initialization is used as a common trigger, it's assumed the Default tag will be fired first.\n\nIn testing, we found that the Update trigger sometimes fired first, even when we set Update to fire after the Default tag.   (The \"fire this tag before\" setting didn't seem to make a difference).\n\nLogically, it shouldn't make a difference if the permissions are the same.  But we found it did.\n\nWe eventually came to the conclusion that these tags are designed to work with a banner system, and it's really difficult to artificially replicate those interactions.\n\nThis was our experience.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "eh - not exactly the point of my original question, and this isn't about Google Ads, yet you share a link about using GTAG to track Google Ads? Sorry, way off base with this confusing answer.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "If you're not managing consent and Google Consent Mode is not being initiated on the site, your tags will fire as normal when their trigger conditions are met.\n\nIf Google Consent Mode is implemented, the default behavior is that Google tags (GA4, Floodlight, Google Ads etc) *will still fire*, but they modify the data they send to the platform to redact or anonymize what is being sent. If you've ever tested / QA'd or done debugging for GTM before, the way Consent Mode works looks *weird* and not a little bit unintuitive.\n\nIf you don't implement Consent Mode at all, Google will let you collect your data as you have been until now, but data collected from certain jurisdictions (mainly the EU and UK) will be unavailable for remarketing and GA4 / Google Ads audiences.\n\nIf you're operating within the US, you shouldn't be affected. Yet.\n\nThat being said, Google are continually making changes to Consent Mode and the latest (within the last few weeks) is they are signaling back to their servers the state of a \"do not track\" style signal for users based on Colorado.\n\nIt's a matter of time I think before Google start to become quite strict about \"thou shall implement Google Consent Mode\". They already made a *big* move in this direction on March 6th of this year.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I completely agree, that agency is worthless. But, I hadn't dealt with GTM for a few months, so I started to doubt myself :( Thanks for clarifying.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "I haven’t experienced this exact issue but I have had issues with sequencing especially when it comes to cross domain consent. \n\nYou can try moving your update to fire on Initialization instead of Consent Initialization. That could help you. I have found that ‘fire tag before’ can be a bit stubborn.",
                "author": "James_Edward_A",
                "score": 1
            },
            {
                "body": "\n\n* The link I provided was Google's WooCommerce page.  GTAG isn't mentioned.\n* If Google Ads isn't relevant then why  did you mention it twice in your question?\n* To make this more hilarious, your question fails to explain how the ads are being delivered, despite you whining on Reddit about conversions not showing.....",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "So I don't have a conversion linker tag set up. I thought that was only for Google Ads, but I might be mistaken. Is this needed for 3rd party tracking tags to pick up conversions, too? We're not running any Google Ads right now.\n\nIf I do need to set up a conversion linker tag, do I just fire on all pages with the default configuration?",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "oh go fuck yourself you useless twat.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "Everything is a learning experience. I bet you know what the gcs and gcd parameters are supposed to look like now! 😎",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "the agency is a 3rd party digital ads platform. So it is their tracking tags. They suggested adding the pixel code for the conversion tracker directly to the order confirmation page.",
                "author": "griz_fan",
                "score": 1
            },
            {
                "body": "Could you clarify something?   I know you tested in GTM's Preview mode, but did you verify in GA4?  (and going further, did the agency receive the test conversions?)\n\nGTM isn't the source of truth.....GA4 is.   If you believe that GTM's preview mode guaranteed that GA4 will be accurate, you're in for a surprise.\n\nGTM's preview mode doesn't catch everything.  Or more accurately, the problem might not be obvious in GTM.\n\nI feel like further testing should be done to better isolate the problem.\n\nPS: Like you, I prefer GTM, but [Google's documentation](https://support.google.com/google-ads/answer/12973528?sjid=15508887817259528492-NC) describes two methods for installing GA4 or Ads in WooCommerce, and neither of them involve GTM.  If I'm having problems, I start with the official route, then deviate once I have a working path.",
                "author": "Firm_Sense9730",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746600135.0,
        "title": "How to verify your cookie consent is working",
        "author": "websecret_by",
        "id": "1kgqu1n",
        "selftext": "Got your cookie banner set up with Google Consent Mode? Now comes the critical step – verifying that it’s actually respecting user choices.\n\nHere’s how to ensure everything is working smoothly:\n\n1️⃣ Use Browser DevTools. Before and after consent, check cookies and requests to ensure compliance. Is Google Analytics firing only after consent? Are non-essential cookies blocked before? Make sure your users’ privacy is protected.\n\n2️⃣ Google Tag Assistant. This Chrome extension shows consent status changes in real time, so you can track whether analytics and ads are only enabled when users say \"yes\".\n\nAnd don’t forget about a detailed cookie policy that aligns with regional laws (GDPR, CCPA). \n\n📘 Learn more in [our full guide with examples](https://dev.family/blog/article/how-to-customize-the-consent-cookie-banner-to-comply-with-gdpr-google-consent-mode-and-country-specific-laws?utm_source=reddit&utm_medium=post&utm_campaign=dev-family&utm_content=how-to-customize-the-consent-cookie-banner-to-comply-with-gdpr-google-consent-mode-and-country-specific-laws) of cookie policy for EU and US",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kgqu1n/how_to_verify_your_cookie_consent_is_working/",
        "num_comments": 3,
        "comments": [
            {
                "body": "The irony of the *absolute state* of the consent management on the site you linked!",
                "author": "DigitalStefan",
                "score": 4
            },
            {
                "body": "There are errors in the article regarding the descriptions for the différents consent types.",
                "author": "Dam_",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738675905.0,
        "title": "OneTrust x GTM: Trigger blocked Cookies NOT firing in US after consent",
        "author": "Mysterious_Swan_9941",
        "id": "1ihhp91",
        "selftext": "The issue I am trying to solve is the first page that user lands on, and that user clicks accept all cookies. In a ideal world everything that was blocked before now fires, i am not able to come up with a efficient solution. \\[Mainly because the accept all cookies event occurs BEFORE the consent update event\\]\n\n\\- LOSS: Metadata, source, referall, UTM tags, Marketing tags etc.\n\nWhat are the most efficient ways you guys have deployed to trigger/fire the blocked cookies once the user clicks \"accept all cookies\".  The OneTrust support team main solution seems to be that you create specific triggers for your C0002, C0003, C0004, C0005. \\[This does not seem very optimal and requires maintenance\\]\n\nAlso have you guys had issues with the Autoblocker? (blocking out product images in specific)",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ihhp91/onetrust_x_gtm_trigger_blocked_cookies_not_firing/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Onetrust documentation used to be worse, but I am surprised they are still recommending adding C0003, C0004 etc checks into the firing triggers. You're right, it's absolutely not the best way.\n\nIf you want to use \"old school\" (non Google Consent Mode) consent control in GTM, the absolute best way to do this is by creating a Custom Event trigger with a regex match against \".\\*\" (i.e., all events) and a condition that looks for the presence of e.g. C0004 and if it's not there, the trigger will fire. Use this as an exception trigger added to every tag that requires C0004 consent.\n\nThere's a community gallery custom variable by \"taneli-salonen1\" that is possibly the best way to retrieve the C000X values because it looks at both the data layer and the relevant cookie. Super reliable.\n\nThus adding consent requirements to a tag is just adding the relevant exception trigger. Even works for tags that need both analytics and marketing consent, just add both exception triggers.\n\n  \nWhere you have existing tags firing on All Pages, DOM Ready, Initialization etc., you will have to move those to a Custom Event trigger of OneTrustGroupsUpdated. Doing this is a matter of editing the trigger, clicking on the trigger type and changing it to Custom Event. This way you keep any existing additional trigger conditions. Saves you having to create a new trigger and manually recreating the conditions, which is long-winded and prone to error.\n\nAll that being said, it's *so* much easier to implement Google Consent Mode!",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "Make sure you respond to the consent updated event. Even OneTrust themselves forgets to; I fixed this for a client who had them implement everything in GTM for them, and THEY forgot to handle the consent updated event. Then all your tags trigger based on normal trigger conditions + consent updated (use trigger groups). If that all makes sense.",
                "author": "hiscapness",
                "score": 2
            },
            {
                "body": "I have run out of time to work on this client but will try to test and see, thankyou for your suggestions.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you have consent update event? \n\na) you can use trigger groups -> consent update + event name = trigger for event\n\nb) you can use consent update event and then use consent mode settings (e.g. if analytics service add analytics\\_storage as condition), and if user accepts analytics cookies, consent update event happens and recognizes analytics\\_storage is allowed -> fire tag",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Several things here do not make sense.\n\n\n\"the accept all cookies event occurs BEFORE the consent update event\" - Correct, the visitor must make the choice to accept or reject before that update is ran. How could you know what to update before the choosing?\n\n\n\"firing in the US\" and \"everything that was blocked before now fires\" - Why is your initial state blocked? That is EU / GDPR - not US. US is opted in (not blocked) until explicitly opted out. \n\n\n\"OneTrust support team main solution seems to be that you create specific triggers\" - This has not been the correct/ modern way to configure OneTrust since October 2023. Use the GCM integration technique that OneTrust publishes on their web site. Following the instructions for using the tag template integrated with Google Consent Mode. On the individual tags set the consent settings. All CMPs (CookieYes, CookieBot, CookieHub, etc) work nearly identical to this.\n\n\n\"issues with the Autoblocker\" - The technique that OneTrust details on their web site does not employ the obsolete autoblocker.\n\n\n\"trigger/fire the blocked cookies\" - You do not trigger the cookies. You trigger the JavaScript tags. The cookies are just small tools that the tags use to 'remember' things - like PostIt notes. The tags are 'the thing'. All modern Consent Management Platforms (CMPs - the C stands for Consent not Cookie) including OneTrust control the firing of JavaScript tags and also the older image pixel tag technique.\n\n\n\"UTM tags\" - UTMs are not tags. UTMs are initial site landing URL query string parameters. Specifically URL query string parameters that trace their use back decades to the Urchin Tracking Module web analytics product offering.\n\nhttps://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7?language=en_US",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I think I avoided this solution because Consent update event occurs multiple times per page, and if a user goes to security center has another consent update, and you cant use fire once per page because it counts blocked tags as firing.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "Wait I think I might have missed something here, by trigger groups do you mean, I can dictate something to not cause a double firing",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "I appreciate the time you took for the feedback, you make some great points.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "All my clients are pushing for complacency with Opt-in solutions for US, I imagine they want to be all Opt-in compliant before it becomes law country wide",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "Opt in until explicitly opted out is the current state of legislation in the US. Go ahead and implement such a solution now. In the OneTrust administration console configure your geolocation rule accordingly for the pop up widget and privacy panel. Test for correctness using the &otreset= &otpreview= and &otgeo= URL query parameters. www.bankrate.com is a good example of what you want to achieve.",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1733481766.0,
        "title": "Freelancers with Consent Management Platform (CMPs) experience - help please",
        "author": "puk789",
        "id": "1h7ymqb",
        "selftext": "As a freelancer and CMP implementor, I’ve had countless frustrating experiences implementing various CMPs - hacks, workarounds, and support that’s clueless about anything remotely technical. So, I decided to develop my own CMP, tailored specifically for freelancers, to make our day-to-day tasks easier. It’s designed to handle all the necessary data layer pushes, GTAG consent commands, and more, so the GTM implementation of consent mode is as seamless as possible.\n\nNow, I’m stuck on a name and could use your input! I’m deciding between:\n\nkukie\n\nkookie\n\ncookiwarden\n\ncookify\n\n\n\nWhich one do you think fits and resonates best? Let me know in the comments - your feedback would mean a lot!",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h7ymqb/freelancers_with_consent_management_platform_cmps/",
        "num_comments": 17,
        "comments": [
            {
                "body": "Cookify",
                "author": "zombiekop",
                "score": 3
            },
            {
                "body": "Can i sqew you away from focusing on  cookie  in the name when your adventage  is focused on GTM integration? Go with Taggie CMP or something like that",
                "author": null,
                "score": 3
            },
            {
                "body": "I’m not creative so I’m not going to suggest a name, but I would be interested to test out your CMP when you’re ready to share.\n\nExtensive experience with most of the top 10 CMPs.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Tagalong\n\nIt's the name of a girl scout cookie and it has a \"this is an addition to tag manager\" vibe.",
                "author": "youareseeingthings",
                "score": 2
            },
            {
                "body": "Hmm, fair point!",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "Feedback from experienced users like you will be invaluable for us :) We are currently working hard on releasing the beta version in the near future. In the meantime, feel free to submit the beta testing form:\nhttps://karolkrajcir.com/\nYou can find it by scrolling down. Looking forward to collaborating soon",
                "author": "puk789",
                "score": 2
            },
            {
                "body": "Thanks for sharing. I’ll take a look at it tomorrow.",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "Interesting. I see what you did there (kreechr domain / starlight).\n\nWhat I would say is currently missing...\n\n1. A list of identified cookies and their purposes. This is where you start to incur costs, but this one of the selling points of e.g. CookieBot, OneTrust etc.\n2. A quick \"opt out\" and \"opt in\" when users bring up the config dialog by clicking the floating cookie widget. It's not obvious you can click the \"back\" arrow to get to the basic cookie banner.\n\nEDIT: One thing, quite important... [https://thehackernews.com/2022/01/german-court-rules-websites-embedding.html](https://thehackernews.com/2022/01/german-court-rules-websites-embedding.html)\n\nI'm guilty of not doing best practise related to this ruling, but it will be important if you start to get more interest in your CMP.\n\nI pulled apart someone else for doing a similar thing many months ago, except in their case they were also genuinely tracking visitors without consent and when I pointed it out they said \"shhh, keep it quiet\"!\n\nTheir CMP, as far as I know, did not (successfully) launch.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "We use iubenda for consent that play well to gtm. Same as cookiebot but I have experience with iubenda. \n\nTrigger groups are you freind.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "How do you make it work with Google Consent Mode that is easier than other CMPs? Most of the setups I've done include installing a template, a bunch of config to setup, custom code to setup defaults, etc. This pretty much describes my usual setup that I have to do to setup most CMP: [https://www.cookieyes.com/documentation/implementing-google-consent-mode-using-cookieyes/](https://www.cookieyes.com/documentation/implementing-google-consent-mode-using-cookieyes/)\n\n  \nHow will your solution make this process simpler?",
                "author": "RandomUsername749",
                "score": 1
            },
            {
                "body": "You're more than welcome to check out Consent Studio. We're a relatively new player in the world of CMPs. We're a Certified Partner with Google and our public offering is only a straightforward €7/month. We do not have tiers and no limit on page count.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "We’ve just launched Cookifi into beta and are looking for testers! 🚀\n\nIt’s completely free during beta - give it a try here: [admin.cooki.fi](http://admin.cooki.fi)\n\n📖 Docs: [docs.cooki.fi](http://docs.cooki.fi)\n\n💬 Join our Slack community: [https://join.slack.com/t/cookifi/shared\\_invite/zt-2yv939ymv-KX5nJxqajMEg3MkLRDQ\\_Rg](https://join.slack.com/t/cookifi/shared_invite/zt-2yv939ymv-KX5nJxqajMEg3MkLRDQ_Rg)\n\nWe’d love your feedback!",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Thank you!",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "u/zombiekop we’ve just launched Cookifi into beta and are looking for testers! 🚀\n\nIt’s completely free during beta - give it a try here: [admin.cooki.fi](http://admin.cooki.fi)\n\n📖 Docs: [docs.cooki.fi](http://docs.cooki.fi)\n\n💬 Join our Slack community: [https://join.slack.com/t/cookifi/shared\\_invite/zt-2yv939ymv-KX5nJxqajMEg3MkLRDQ\\_Rg](https://join.slack.com/t/cookifi/shared_invite/zt-2yv939ymv-KX5nJxqajMEg3MkLRDQ_Rg)\n\nWe’d love your feedback!",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "This is super cool actually, but the domains are already taken :/",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721562761.0,
        "title": "Microsoft Consent Mode",
        "author": "DigitalStefan",
        "id": "1e8kl85",
        "selftext": "We've already been through the \"slight challenge\" of Google's Consent Mode V2 update, but now Microsoft have decided they don't want to feel left out, so they are mandating use of their own Consent Mode (did you know it existed?), meaning if you or your clients are making use of data collected by their Universal Event Tracking for marketing purposes, you are going to have to implement their Consent Mode.\n\nOf course, Microsoft being Microsoft, their CoMo is *not* like Google's. You can't set it up and use it in the same way, it has no integration in any of the popular consent platforms (OneTrust, CookieBot, CookieYes etc) and, worse still, their \"denied\" setting doesn't prevent the Microsoft Universal Event Tracking tag from dropping a pair of cookies. There's also of course no native integration with GTM.\n\nI've tested a few iterations of a possible best practise GTM implementation and I think I have a potential winner.\n\nEDIT: Step zero: Add the hardcoded script to your site (prior to the GTM script) :\n\n    <script>\n    window.uetq = window.uetq || [];\n    window.uetq.push('consent', 'default', {\n        'ad_storage': 'denied'\n        });\n    </script>\n\n1. Configure your Microsoft UET config tag to require ad\\_storage as additional consent (not strictly necessary, but makes your Consent Overview report make sense\n2. Remove all triggers from the tag\n3. Set \"Once per page\" in Tag firing options\n4. Create a new custom HTML tag with the following script at the bottom of this list\n5. Set tag sequencing to fire your Microsoft UET config tag after the custom HTML tag\n6. Set \"Don't fire if \\[this custom HTML tag\\] fails or is paused\" (may not be needed?)\n7. Add `ad_storage` as additional consent\n8. Add your consent platform's data layer event e.g. `OneTrustGroupsUpdated`, `cookie_consent_update` etc.\n\n&#8203;\n\n     <script>\n        window.uetq = window.uetq || [];\n        window.uetq.push('consent', 'default', {\n            'ad_storage': 'granted'\n            });\n      </script>\n    \n    Links:\n\nMicrosoft Consent Mode: [https://help.ads.microsoft.com/apex/index/3/en/60119](https://help.ads.microsoft.com/apex/index/3/en/60119)\n\nMicrosoft enforcing their own CoMo for Microsoft Ads: [https://web.swipeinsight.app/posts/microsoft-ads-enforces-consent-mode-for-tracking-in-europe-8734](https://web.swipeinsight.app/posts/microsoft-ads-enforces-consent-mode-for-tracking-in-europe-8734)\n\n**Notes:**\n\nDuring testing I did see that the network hits being sent by the UET config tag would redact visitor and session ID if the tag fired with Microsoft CoMo set to denied, but as the tag still dropped a couple of cookies I didn't want to implement it in that way and call it good. Hopefully Microsoft amend this and we can have a much simpler solution in future.",
        "score": 15,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1e8kl85/microsoft_consent_mode/",
        "num_comments": 26,
        "comments": [
            {
                "body": "People aren't going to bother and MS will have to adopt Google CM.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "It would have to address all the shortcomings of GTM (container size, iFrame detection etc), and even then I doubt people would take to it - MS Clarity is fantastic, free and yet people just don't know about it.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "That should be redundant as well unless you're loading the UET tag prior to consent being given.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "~~Not sure if this is an oversight or not but what's the point of running a script that sets the MS CoMo to \"denied\" when ad_storage is \"granted\"?~~\n\n\n\n\nAlso, I don't see a reason why you would need to set the default MS CoMo to \"denied\" unless you're loading the UET script when consent is denied. With the setup described you would only ever need to set it to \"granted\", i.e. when the UET tag fires and in that case you could switch up the tag sequencing to fire the consent tag prior to the UET tag. \n\n\n\n\nAdditionally, the documentation linked states: \n\n\n>You must set the consent setting on every page of your website. If it is not set, then UET uses granted by default. \n\n\n\n\nThis confuses me a bit since it seems that if you're already blocking the UET tag until consent is granted, there should be no need for setting a consent flag in the first place.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "This could be a bit risky for MS because it adds a dependancy they can't control. It makes sense for them to go their own way unless they actually sit down with Google to firm up the consent API as a truly interop, public API, which would actually be a great outcome because then others (Meta, ByteDance etc) could hop on board.\n\nIf anything, this move they've announced might prompt some clients to rethink the value they are getting from their MS Ads spend and just drop the platform entirely because it's too much hassle.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Well spotted. I copy pasted the wrong script during my fight with Reddit's semi-broken editor!\n\nCorrected now.\n\n  \nEDIT:\n\n  \nFlow of logic (if I haven't screwed up) is\n\n  \n1. Prior to user granting (marketing) consent, the Microsoft CoMo script in the CHTML tag won't fire and thus the UET config tag won't fire.\n\n2. As soon as the user grants consent, the script runs, then the UET tag fires, drops its cookies, doesn't redact session or visitor ID.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "The comedy outcome of this would be Microsoft developing their own tag management system.\n\nI dread to  even imagine.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "You’re probably right. I’m just so used to implementing Google CoMo that I feel weird *not* adding the script.\n\nEdit: If MS actually figure out that their tag shouldn't drop cookies when their Consent Mode says \"denied\", their CoMo init script will be important to add.\n\nWould like to get my hands on the source for their UET tag. Not sure that's publicly available (it's a native tag).",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I’ll see if I can set up a couple of dedicated web pages each with a slightly different implementation.\n\nTime permitting. This week looks like a busy one though.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Maybe you can help out here, as I didn't find any info on this, u/DigitalStefan: Is there any word on a deadline or date for this implementation?",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "Did you ever get round to figuring out how to fire the cookieless pings, without blocking the tag entirely? No matter how I sequence the tags, I get those \"MSPTC\" and \"MUID\" cookies dropping regardless, as you mentioned in another thread",
                "author": "domss-lite",
                "score": 1
            },
            {
                "body": "Honestly I didn’t see a deadline mentioned. I’ll find the original info that tipped me off, which was a screenshot of an email from MS. I posted on LinkedIn as well about it and I included the screenshot there. Will find it and link to it.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "As of when I tested it, there are no cookieless pings with MS CoMo.\n\nYou can get it down to a single cookie (MUID) if you implement IAB TCF, but for now we're waiting on MS to get things fixed.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Google CM pretty much is the standard already because Google Tag Manager is so popular.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "The implementation method makes sense, I'm just curious about that statement in the documentation saying the script defaults to \"granted\" if consent is not explicitly denied. With the setup you have you shouldn't have to bother setting consent at all.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thanks so much. I'll try reaching out to Microsoft support as well to find out until when this needs to be implemented.",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "Fair enough! Not worth the risk for now, we'll just keep it fully blocked until opted into. They took a few weeks to roll out the Enhanced Conversions code to the UET template so maybe it'll be properly supported soon",
                "author": "domss-lite",
                "score": 1
            },
            {
                "body": "You know what… I missed the most important step which was step zero: Add the default denied script to your website.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I've not been able to find *any* mention of a deadline.  The Swipe Insight link in my original post shows the only comms Microsoft has really put out about it.\n\nWe did reach out directly to Microsoft with a number of questions. One of which was...\n\n>What's the purpose for \"MSPTC\" and \"MUID\" cookies? Is it a GDPR concern *\\[my note: this should be ePrivacy\\]*, since they are being set before the user has granted consent?\n\nTheir frankly unbelievable response was...\n\n>Neither MSPTC nor MUID should be set before consent is granted. We should not set any cookies (3P and 1P) without consent and MSPTC & MUID are 3P [bing.com](http://bing.com) cookies. If they already exist, they may be sent and show up in a network trace, but we will throw them away (not store when we receive) if ad storage consent is denied. They may be used for anti-spam/fraud purposes only.\n\n\"Neither MSPTC nor MUID should be set...\" and yet they are and it's Microsoft's own UET tag (or dependant script, more likely) doing the setting.\n\nThey also acknowledge that the tag doesn't re-fire / issue another network hit once consent is updated. Their answer is \"this will be addressed in a future update\"\n\nSo, in summary Microsoft are telling us :-\n\n1. You must implement Microsoft Consent Mode otherwise (in affected jurisdictions) you will lose the ability to use marketing data to its full extent, just like Google did to comply with the DMA on March 6th 2024.\n2. We half-assed the logic underpinning our implementation of our own Consent Mode, despite that it's been available for many months. It doesn't work as it's supposed to and if you implement it in the manner we intend, you are going to cause cookies to be set prior to user consent.\n3. If you implement it in the way we intend, it's going to screw with your data because not only did we half-ass the logic, we half-assed the code.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thank you for getting back to me on this, u/DigitalStefan.\n\nAs I am not a developer: Is there a way to implement this (e.g. some implementation that differs from the faulty one Microsoft recommends) that works around the issues you just described?",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "My original post descibes (a little clumsily) how it's done in the least \"dev\" way possible.\n\nSkip step zero and it should still be fine, but once Microsoft actually fix things (assuming they do), the process will change in terms of the best way to do it.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This is the source script if you wish to inspect it:\n\n\n ```https://bat.bing.com/bat.js```\n\n\n\n\n Their own documentation states that no cookies should be set when consent is denied, which is why I'm sceptical towards anything that I read in the official documentation after hearing about your experience.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thanks so much, this thread is a truly useful resource.",
                "author": "ppcfaq",
                "score": 1
            },
            {
                "body": "If you get the opportunity to post the results that would be much appreciated. I know I'll get a bunch of queries regarding this when I get back from my vacation. 🙏",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "I've been testing. Everything still sucks and is horrible.\n\nI've deployed MS CoMo on [https://croud.com](https://croud.com) (my employer's site) and theoretically it's \"compliant\". It's my best effort.\n\nI'm really debating now whether to replace the native MS / Bing UET tag with a CHTML tag that runs the relevant script, but also includes the MS CoMo part. It would simplify the implementation because instead of sequencing two tags, it's just one tag.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1733741337.0,
        "title": "Google Consent Mode V2 - Which cookies should grant which consent",
        "author": "Mitsuoka123",
        "id": "1ha72y8",
        "selftext": "We have been struggling for quite some time with GCMv2 and Google Enhanced Conversions. \n\nWe have been using one plugin on site and I don't know if it is working right.   \nWhen you accept analytics cookies, it grants all permissions:\n\n|Type|On-page default|On-page update|\n|:-|:-|:-|\n|ad\\_storage|Denied|Granted|\n|analytics\\_storage|Denied|Granted|\n|ad\\_user\\_data|Denied|Granted|\n|ad\\_personalization|Denied|Granted|\n|functionality\\_storage|Denied|Granted|\n|security\\_storage|Denied|Granted|\n|personalization\\_storage|Denied|Granted|\n\n\n\nWhen you accept advertising and tracking cookies, but deny analytics cookies, all the consents are denied.\n\n|Type|On-page default|On-page update|\n|:-|:-|:-|\n|ad\\_storage|Denied|Denied|\n|analytics\\_storage|Denied|Denied|\n|ad\\_user\\_data|Denied|Denied|\n|ad\\_personalization|Denied|Denied|\n|functionality\\_storage|Denied|Denied|\n|security\\_storage|Denied|Denied|\n|personalization\\_storage|Denied|Denied|\n\nWhat should be the good setup, is there any difference in Google Tag Manager for these cookies, or it affects some other things?",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ha72y8/google_consent_mode_v2_which_cookies_should_grant/",
        "num_comments": 15,
        "comments": [
            {
                "body": "Thanks, in general that answers my question. The site is oldy and uses Joomla that is waiting to be replaced, and we are fighting with plugin for some time now and we cannot get it to do different consents for different cookies...\n\nThe site is [Rustical Travel](http://www.rusticaltravel.com)",
                "author": "Mitsuoka123",
                "score": 2
            },
            {
                "body": "Thanks! Yes, we know that the banner is awful, but the thing is that developer is outsourced and everything complicates even more. \n\nI'll look into these and see how that goes with Joomla... But yeah, just wanted to confirm that something is not right and how should it really be...",
                "author": "Mitsuoka123",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It is now working right.\n\nIf you accept analytics cookies, how can that grant advertising cookies?",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Generally speaking, the configuration that seems to be acceptable in most instances would look like this:-\n\nad\\_storage = Marketing consent  \nanalytics\\_storage = Analytics consent (measurement)  \nad\\_user\\_data = Marketing consent  \nad\\_personalization = Marketing consent  \nfunctionality\\_storage = Not mapped to any consent  \nsecurity\\_storage = Always granted  \npersonalization\\_storage = No mapped to any consent\n\nIf you have tags that provide site functionality or personalization, then I would consider mapping those consent categories as appropriate, but most of the time these types of things are not implemented in GTM.\n\nConsent plugins are, generally speaking, utterly dreadful. If you share the URL with me either here or in a message I can have a look in a bit more detail.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Definitely something is not right. Which CMS are you using?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "I recommend using a CMP through Google Tag Manager. Suggestions are Cookiebot, Consent Studio and CookieYes.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I don't understand, then it is not working right if it grants all consents when you accept analytics cookies?\n\nWhat should be granted with analytics and what with advertising cookies?",
                "author": "Mitsuoka123",
                "score": 1
            },
            {
                "body": "It's Joomla that's waiting to be replaced.",
                "author": "Mitsuoka123",
                "score": 1
            },
            {
                "body": "I cannot find where in CMP I could request consent for these?  \n     \nfunctionality_storage\t  \nsecurity_storage\t  \npersonalization_storage",
                "author": "bytepursuits",
                "score": 1
            },
            {
                "body": "That depends on what you and your data officer decide...\n\nYou can have separate consent for each category or you can bulk them (e.g. advertising consent is good for advertising, personalization and user data), analytics is good for analytics, functional is good for functional and is always granted etc.).",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Thanks for sharing. Yes... that's a pretty bad implementation!\n\nHonestly your major problem is the banner is so tiny and easy to ignore. Most users on desktop will probably just navigate the site without ever granting consent.\n\nAlthough of course there is another issue where consent is done \"old school\" by reloading the current page when the user changes their consent setting. That used to be the workaround for how to track users on the landing page when they granted consent.\n\nI haven't checked, but if your marketing and analytics data collection is all handled within GTM, you could solve your problems quickly by removing the plugin currently providing that cookie banner and instead implementing e.g. CookieBot, OneTrust, Enzuzo or CookieYes via their officially supported GTM tag template.\n\nAll 4 will set up the Consent Mode default and will handle the update. Generally they all have good documentation as well, but there are a number of regulars in this subreddit who can help with a best practise implementation.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Uhm, I'm not sure that I really understand your question? In Consent Studio, these are covered by the \"Functional\" category.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "> Consent Studio  \n\nwhat's a Consent Studio? oh the CMP. yes - that's what I would expect from CMP - but google built-in CMP doesn't have that option it seems.",
                "author": "bytepursuits",
                "score": 1
            },
            {
                "body": "Thanks for saying thanks! It's so nice to see Redditors being grateful :)",
                "author": "TheGratitudeBot",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741098706.0,
        "title": "Consent Mode V2 solution",
        "author": "Nice_Pen_8054",
        "id": "1j3c252",
        "selftext": "Hello,\n\nWhich Consent Mode V2 solution do you use and why?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j3c252/consent_mode_v2_solution/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "OneTrust and Osano. OneTrust because it is fairly ubiquitous among many larger corporations. Osano for its ease of automatically addressing the correct defaults for localities.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Enzuzo. It's free and it's effective. It's also not as feature starved as CookieBot's free subscription tier.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "NOT OneTrust - it's total shit. Anything else is better.",
                "author": "martinclinton",
                "score": 1
            },
            {
                "body": "Nowadays CookieYes and Cookiebot are popular because both are user-friendly. If you live in France or Switzerland, I suggest you to use Axeptio",
                "author": "motiur_ak07",
                "score": 1
            },
            {
                "body": "I've been looking at Ketch's free option. would recommend it! it has the right regional defaults and has pretty good features.",
                "author": "Apprehensive-Nerve43",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742035938.0,
        "title": "Consent Mode V2 for Shopify",
        "author": "Nice_Pen_8054",
        "id": "1jbsjde",
        "selftext": "Hello,\n\nDid anyone obtained the value **13r3r3r2r3l1** or **13r3r3r2r6l1** for the gcd parameter in Shopify using a Google partner, like CookieYes?\n\nI get constantly **13t3t3t2t5l1**.\n\nThanks.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jbsjde/consent_mode_v2_for_shopify/",
        "num_comments": 6,
        "comments": [
            {
                "body": "You need to push consent on checkout page in Shopify",
                "author": "JarvanXL",
                "score": 2
            },
            {
                "body": "It is on all pages, why I would do only on checkout?",
                "author": "Nice_Pen_8054",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[https://shopify.dev/docs/api/customer-privacy](https://shopify.dev/docs/api/customer-privacy)",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Hi there,  \nYou can verify whether the consent state is set correctly using **Tag Assistant** by following our guide \\[[here](https://www.cookieyes.com/documentation/check-proper-implementation-of-gcm/)\\]. If you need any further assistance, feel free to reach out to us at [**support@cookieyes.com**](mailto:support@cookieyes.com), and our team will be happy to debug the issue and help you resolve it.",
                "author": "cookieyesHQ",
                "score": 1
            },
            {
                "body": "u/Nice_Pen_8054  it all comes down to whether your cmp sends the correct consent signals and if the update command is configured properly... you may want to give this tutorial a read: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742034483.0,
        "title": "[Help Needed] Google AdSense CMP Not Passing Consent to Google Analytics 4 (GA4) via GTM",
        "author": "Feeling-Baker-2430",
        "id": "1jbs6vg",
        "selftext": "Hey everyone,\n\nI’m facing an issue with Google’s Consent Management Platform (CMP) provided via AdSense and the European regulations settings page. I want to ensure that consent choices from the CMP are properly passed to Google Analytics 4 (GA4) using Google Tag Manager (GTM), but right now, GA4 always shows consent as \"Refused\" by default, even when users accept cookies.\n\nBefore going any further, does the AdSense tool works for what I need (which is managing consent and track users on my website) ?\n\nHere is my setup:\nI’m using Google’s built-in CMP via AdSense (not a third-party CMP like OneTrust or Cookiebot).\n\nI haven’t manually added any scripts to my site—I want to handle everything through Google Tag Manager (GTM).\n\nI have enabled Consent Mode in GTM and activated Consent Overview in the container settings.\n\nI have no pre-existing GA4 tag in GTM.\n\nSo far:\nThe CMP is displaying correctly on my site and allows users to accept or reject cookies.\n\nHowever:\nEven after a user accepts cookies, Google Tag Assistant and GA4 DebugView still show:\n\nanalytics_storage: refused\nad_storage: refused\nOther consent categories also remain denied.\n\nThis suggests that GTM isn’t receiving updated consent signals from the CMP.\n\n\nQuestions:\nHow do I ensure that Google’s own CMP correctly updates GTM with the user’s consent choices?\n\nDoes Google AdSense’s CMP automatically send consent updates to GTM, or do I need to manually configure something?\n\nIs there a way to force GTM to listen for consent updates from Google’s CMP?\n\nAny insights or guidance would be greatly appreciated 🙏\n\nThanks !\n\n ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jbs6vg/help_needed_google_adsense_cmp_not_passing/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Please provide the regions that your struggling with and what settings you have set in your CMP. \n\nIf possible provide the URL of the websites that your trying to fix so we can see what is going on and advise you on possible fixes (understandably not always possible).\n\nGA4 being \"denied\" even after accepting cookies means there is some kind of disconnect between your CMP platform and your website, because what should happen is:\n\n1. Default settings should happen on each page (e.g. US all settings should be denied by default)\n\n2. A call to your CMP needs to be made at this point that needs to store your users settings (if they accepted cookies the settings should be over ridden to accepted).\n\n3. Now that the settings are accepted, your page load/whatever load event needs to happen that triggers your GA4 tags/marketing tags needs to happen. \n\nSounds like potentially its the order of tags thats the issue.\n\nUse your GTM preview mode to diagnose.\n\nMake sure you put your CMP tags to load first to make this happen.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hi, thanks for your answer, how can I be more precise in order to have a concrete answer ? What information should I add ?",
                "author": "Feeling-Baker-2430",
                "score": 1
            },
            {
                "body": "I have a multiple clients who have been threatened with lawsuits (6 figures) around this in the US. I think there are companies in the US that are just fishing for victims who violate.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "This is a very new industry and even established players like OneTrust haven't got it right. Your post is too general for you to get a concrete answer.",
                "author": "Mysterious_Swan_9941",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723633588.0,
        "title": "GA Cookie not deleted after consent is withdrawn in Cookiebot",
        "author": "Denalovicz",
        "id": "1erysgz",
        "selftext": "I've recently started using GTM and have integrated the Google Tag on my website. For consent management, I use Cookiebot. My Google Ads and Analytics accounts are linked with GTM/Google Tag. The default consent state I've set in the Cookiebot CMP Tag is set to \"denied\" for all options. When I visit my website for the first time, no cookies are set. If I select \"accept all\" in the cookie banner, some cookies are set, which are automatically deleted when I withdraw consent. However, one cookie is not deleted and remains stored. The cookie starts with *ga* and has the target ID of the Analytics account attached. Does anyone know why this cookie isn't being deleted and how to fix it? I'm happy to provide more information if needed. Thanks!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1erysgz/ga_cookie_not_deleted_after_consent_is_withdrawn/",
        "num_comments": 23,
        "comments": [
            {
                "body": "I live in France and am a legal expert (GDPR) for my company; there is no need for cookies to be deleted when consent is withdrawn, very few tools do this. The law requires that tools no longer use them, so that means that as long as your Google analytics returns to denied and is no longer triggered, it's OK. On the other hand, the advanced consent mode v2 (hit denied and triggered even when no consent is given) is legally \"restricted\" to date because the legislative organisms have said nothing about it. But consent mode v2 standard is rgpd friendly.\nLet's put that aside: Cookiebot does have the ability to delete cookies, it's pretty top-notch in this respect, and it's one of the only ones to do so (which proves that if the others don't do it, it's because it's not compulsory).\n As far as the ga cookie not being deleted is concerned, it's probably only because cookiebot can't delete it if you're connected to a Google account on your browser (especially if it's Google Chrome with the Google account linked to the browser). A ga cookie remains persistent on all the sites you visit. Try using private browsing, it should no longer be there ;)\nMore info :\nhttps://complianz.io/withdrawing-consent/",
                "author": "Fun_Ad_2011",
                "score": 5
            },
            {
                "body": "I would assume this is caused by the user_engagement event that triggers when you leave the page. Once you revoke consent the mentioned cookie is probably deleted with all the others but since your GA script has already loaded it sends an automatic user_engagement event when the page is unloading. Since there is no ga-cookie at that point a new one is set.\n\n\n\n\nThis is tricky to get around unless you are using a server-side implementation as you would have to manually delete the cookie as proposed by /u/DigitalStefan",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Can you show where GDPR or any law mandates removal of cookies in this scenario?\n\nTo my knowledge, GDPR does not mandate cookie deletion if a user grants consent and then revokes it. Any cookies that are left are essentially just artifacts and no longer are used as the associated tags in GTM are not firing them or in the case of GA4 only using cookieless pings.\n\nI think you're overthinking this and I would not bother. Other CMPs I've seen behave this exact way, like OneTrust. If this was a requirement, the CMPs would handle it or provide guidance for it.",
                "author": "nakfil",
                "score": 3
            },
            {
                "body": "I’m not familiar with German specific laws, but GDPR does not require cookies to be actively deleted when a user withdraws consent.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "The solution would likely be to fire a Custom HTML tag containing a script to manually delete the cookie.\n\nA little of of JavaScript to identify any cookie name beginning _ga and setting it to expire at the date and time of the UNIX epoch (1 second past midnight GMT, Thursday 1st January 1970)",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Please can you quote the specific regulation mandating the deletion of cookies?",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "I live in Germany and run the website under the GDPR/DSGVO compliance. When a user withdraws all consent every tracking cookie has to be deleted, I guess.",
                "author": "Denalovicz",
                "score": 2
            },
            {
                "body": "looks like some CMPs have introduced tools to help remove cookies actually after consent is withdrawn:\n\n  \n[https://complianz.io/introducing-the-cookieshredder/](https://complianz.io/introducing-the-cookieshredder/)\n\nProbably to address your exact concern",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Why would it need to be deleted?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Ok, will try! Thanks.",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Also on an unrelated not, try to steer away from CookieBot, they're one of the worst in the business.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Hello! For the best support, reach out directly to our team at [support@cookiebot.com](). We’d love to help and get everything running smoothly!",
                "author": "UsercentricsOfficial",
                "score": 1
            },
            {
                "body": "Have you received any guidance that cookies must be deleted once consent is withdrawn? In most implementation for a cookie consent solution or CMP solution once the consent is withdrawn, the third-party vendor script is no longer loaded and any previously set cookies cannot be used by such script (since it's no longer loaded).\n\nIf it's a third-party domain cookie, you may not be able delete third-party domain cookies. See https://developer.mozilla.org/en-US/docs/Web/Privacy/Third-party\\_cookies , https://stackoverflow.com/questions/52775617/how-to-delete-third-party-domain-cookies-from-gdpr-compliant-website",
                "author": "termsfeed",
                "score": 1
            },
            {
                "body": "I‘m definitely overthinking this, since I don’t wanna be fined for unallowed user tracking. It’s probably the pings because the tags sending g100 values when the consent has been withdrawn. Still, I read that the pings don’t need a cookie to send info about events. Other than that I find it weird that all cookies are being deleted automatically except for this one. The GDPR says, that the removal of cookies must be as easy as accepting them so I assumed they have to be deleted automatically as well. I implemented the GA script directly into my HTML and not via the GTM.",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Could you please elaborate on this? We are web developers from the Netherlands that have built their own CMP and we want to steer clear of any pitfall, so I figured it would be interesting to pick your brain on this.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "huh, interesting. Is there a reason you're not deploying GA through GTM? That might be part of your issue, but I'm not sure.\n\nAlso to clarify GDPR says the *withdrawal of consent* should be as easy as giving consent, not the removal of cookies, which is an important distinction here. If a script is blocked from firing by a CMP user data can not be processed / used regardless if there is a cookie set.  It's a useless artifact.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "They have horrible business practices. They count pages multiple times. Every tag or category a post is in counts as a new page for them. Like tag1/page1, tag2/page1, category1/page1 is the same page counted 3 times.\nThey count pages that are not public or published.\n\nWhen you cancel the subscription after they bill more on this overcounting, they completely cut access to the account even though they already took money for an entire month.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Thanks for the link. I forgot to mention that the GA tracking is implemented in the Google Tag which I put into my website. I found some articles about a special GA configuration tag but couldn’t find it in the tag list.",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Yes, they have to be automatically deleted. All cookies are being deleted automatically except for the _ga_ cookie. Do you have a solution for this?",
                "author": "Denalovicz",
                "score": 1
            },
            {
                "body": "Ah. I see. Are you looking for an alternative?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "It GTM if you just use the \"Google Tag\" and fire it on Initialization trigger that is the \"config.\" It automatically fires a `page_view` event as well. And, it automatically inherits the consent mode categories like `analytics_storage` etc so it should work well with CookieYes and your existing configuration right out-of-the-box.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "If you have Consent Mode V2 enabled GA will send an anonymous ping. It's GDPR compliant as far as I know.\n\nTry using Consent Mode V1 and see if the cookie still persists.\n\nAlthough cookies shouldn't be deleted, it's enough if the tags don't load when consent is denied.",
                "author": "zenith66",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707230693.0,
        "title": "Consent Mode V2 Query",
        "author": "jdanes52",
        "id": "1akbdnq",
        "selftext": "Operating in the UK so need to get this done  \n\n\n1. Am I right in thinking that the built in consent is enough for google tags including ads and analytics? \n2. If so, does that mean the consent mode v2 changes are required for other tools, such as ad\\_storage for LinkedIn and Meta for example. \n\nThanks in advance, I'm really not enjoying the consent mode stuff. Massively struggling with understanding what to actually do here. ",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1akbdnq/consent_mode_v2_query/",
        "num_comments": 37,
        "comments": [
            {
                "body": "There is measure school and simo ahava (he made the consent mode template for GTM). But I am still struggling, it will click (I hope)",
                "author": "jdanes52",
                "score": 4
            },
            {
                "body": "https://www.simoahava.com/analytics/consent-mode-v2-google-tags/ good info here",
                "author": "razoredg",
                "score": 3
            },
            {
                "body": "Please trust Simo on the topic of consent and CoMo. MeasureSchool and Loves Data have both put out content of questionable accuracy on this topic!\n\nThere are still high ranking articles about consent management that contain bad info.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "I've just replied to someone else's comment, but basically you can either work through these problems yourself and figure out how to do it or you pay OneTrust or CookieBot (or one of many others), integrate their service on your site and follow their documentation (or kick me repeatedly until I detail exactly how to do it).\n\nI have *thought* about maybe writing a simple cookie banner, but in reality I simply don't want to bother. It's a lot of work and it's not worth the time.\n\nEven *a very large investment banking client* who already had created their own finally decided that paying OneTrust was a much wiser option. Their home-grown solution was actually good and did cross-domain nicely.\n\n&#x200B;\n\nEDIT: Yes, you will probably not be on the right side of legal with just a Yes / No banner presentation. This is not legal advice.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Managing consent is about managing whether data collection scripts do or don't fire (let's ignore Google Consent Mode for now).\n\nI don't know how CookieBot, OneTrust etc achieve automatic blocking. I've never considered auto-blocking as a good solution because I don't know how it works. If I don't know how it works, I can't be sure it is 100% effective. Auto-blocking also usually blocks the entirety of GTM from loading, so if you have tags in GTM that you need to fire and those tags don't need consent... they now won't be firing. Someone here was describing their GTM pushes a lot of metadata via Custom HTML tags, so that could be really messy for them.\n\nWithout auto-blocking, you need to follow CookieBot's documentation on how to manage consent. As we're in the GTM subreddit, I won't talk about how to manage consent for scripts that are hardcoded on site.\n\nIn GTM, where you have tags firing on All Pages (or variations of), you will need to switch that to a Custom Event \"cookie\\_consent\\_update\", which is a data layer event emitted by CookieBot both when a user makes a change to their consent and on subsequent page loads when CookieBot's script has run and found the user has already made a consent choice.\n\nIn order for tags to not fire when there's no consent, you figure out how to put together an exception trigger that fires when the specific consent is missing / denied (CookieBot docs detail this).\n\nBut...\n\nThen Google Consent Mode comes along and changes the process. Instead you *can* have All Pages triggers, but only for Google native tags (GA4 Event, gAds etc) and instead of using exception triggers, you have \"Additional Consent\" within each tag's advanced settings. 3rd-party tags (Facebook, Hotjar etc). Still need to look for cookie\\_consent\\_update, but they can also do away with exception triggers and instead use the Additional Consent settings.\n\nIf you're implementing Google Consent Mode (it's CoMo for short), you can do this via tags in GTM, but it's arguably better to not do that. Hardcode a CoMo \"default\" script immediately prior to your GTM script and CookieBot will take care of sending the CoMo \"update\".",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Same here. Dont know what actually needs to be done. This community needs more youtubers who can discuss these in detail.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "1. Yes, barring any objections from any legal professional giving you advice.\n2. No.\n\nThe additional parameters for V2, ad\\_user\\_data and ad\\_personalization, are a contrivance to comply with the Digital Markets Act (DMA) coming into force March 6th.\n\nGoogle have recently stated that anyone who does not make the recommended changes to update their existing CoMo (V1) implementation will see the value of ad\\_user\\_data mirror the value of ad\\_storage.\n\nThat leaves ad\\_personalization to deal with.\n\nIf you don't deal with it and you don't update to V2, you will lose the ability to use collected data for audiences / remarketing.\n\nThe reality is that ad\\_storage, ad\\_user\\_data and ad\\_personalization can mirror the user's consent choice for \"Marketing\". No update to your cookie banner required (again, unless your legal pro says otherwise).\n\nFor all the \"big\" changes Google have rolled out over the past few years, this is the one you shouldn't ignore if you want to continue to use all features of GA4 and gAds. Google are finding it tricky to persuade people \"no, we're really serious this time, you need to pay attention\".",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Does this mean that for the linkedin insight tag to collect audience data, it would need ad\\_personalisation?",
                "author": "jdanes52",
                "score": 2
            },
            {
                "body": "My recommendation:\n\nPrompt users with \"Allow All\", \"Reject All\" and \"Manage Preferences\". Inside \"Manage Preferences\" give them the option to opt in separately for Analytics and Marketing consent.\n\nMap their analytics consent choice to analytics\\_storage\n\nMap their marketing consent choice to ad\\_storage, ad\\_user\\_data and ad\\_personalization\n\nThis is essentially what CookieBot are doing by default. I suspect OneTrust are doing this for new customers, but they want you to go and do it yourself if you already have a config.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Thank you. I've just closed down 4 measure school videos and I'll read Simo Ahava's article on it instead. Measure School seems to hack around it with javascript and github cookie banners. I already have cookie banners for multiple clients and need a simpler process.",
                "author": "jdanes52",
                "score": 2
            },
            {
                "body": "Fixing consent \"stuff\" is a large part of my day job. I've also had a few folks from Reddit contact me to do some consultancy / freelance work because this is a difficult thing to get perfectly right.\n\nIf you're happy to share a URL of a site you work with I can feed back on what might need to be done to get fully up to date with a nice CoMo V2 implementation.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "My preferred implementation is hardcoding a CoMo \"default\" script just above the GTM script and then also hardcoding something like CookieBot or OneTrust also just before the GTM script (or just after, it makes little difference).\n\nOneTrust, CookieBot or any other \"good\" consent management platform then takes care of the rest i.e. sending data layer events for you to trigger 3rd-party cookies instead of trying to use an All Pages trigger, managing consent across pages (or domains!), sending the CoMo \"update\" call and even giving you some analytics regarding your opt-in versus opt-out rate.\n\nYou can instead do an entire consent + CoMo implementation within GTM and Google themselves demoed a tag template they made to manage CoMo within GTM in a meeting last week. Usually I'd do this as a last resort.\n\nI've got a few websites up that I test things with but at the moment I don't have one that has a \"full\" CoMo V2 implementation, but only because I haven't updated one script yet. If you want to see a \"minimally perfect\" implementation, have a peek at the page source of [https://www.digitalstefan.com/](https://www.digitalstefan.com/)",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "This is essentially why you pay for OneTrust or CookieBot (or any of a dozen others). They've solved all of these problems for you.\n\nI am unlikely to ever create my own cookie banner. That wheel is already invented and doesn't cost a lot to use.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "I feel like I'm doing the same.   \n\n\nSo far I have the default tag as denied, then a new tag update as granted based on a button click for the cookie banner. But my problem is when I go to a new page afterwards I'm not sure it remembers the consent/it is granted",
                "author": "jdanes52",
                "score": 2
            },
            {
                "body": "Thanks for sharing the URL in private with me.\n\nWordPress sites ... are a challenge. I've done *one* setup of proper consent management for WordPress and that's for a small blog site I run. It was not fun.\n\nFirst thing: When I checked out the GTM4WP plugin that seemingly everyone loves, it wasn't even up-to-date and tested to work correctly with recent versions of WordPress. That was all I needed to know to decide to not use it, because you have to keep WordPress up to date if you don't want the risk of security problems.\n\nGTM Kit appears to be exactly the correct thing to use (I'm sure there are others, but this one works). I even sent a couple Github issue reports to the dev and they resolved those issues quickly, including updating for CoMo V2.\n\nGTM Kit will insert your GTM container and set up CoMo, but you still need to integrate a consent management platform. I did that by using the built-in \"theme file editor\" tool in WP admin. I added a function in \"functions.php\" that inserted the code for the consent platform. In my case that was OneTrust, but it would be the same process for any other.\n\nThat made sure the scripts were all in the correct order, nice and high up in the <head> section.\n\nEven so... looks like you have some work ahead to actually apply consent handling to the scripts or tags responsible for data collection, because they are greedliy collecting data even after opt-out.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Makes a lot of sense! I've done the cookiebot one and it was so easy, suspiciously easy.",
                "author": "jdanes52",
                "score": 2
            },
            {
                "body": "That statement doesn't make much sense. When you implement CookieBot or any other consent management platform, you don't just trust that it works (if you're using any \"automatic blocking\"), you verify it by looking at which cookies / localStorage / sessionStorage are created and what hits are being generated to 3rd-party platforms.\n\nIf you're not using automatic blocking, you're the one who has to go and ensure your data collection scripts are being correctly managed, but the process of verification is the same.\n\nTrust doesn't come into it and nor should it. You can't argue to a judge \"but I trusted that it was working\" when you have a responsibility to ensure it definitely is working. CookieBot won't shoulder any liability for non-compliance with user privacy laws.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Here is everything you need: [https://taggrs.io/en/consent-mode-server-side-tagging/](https://taggrs.io/en/consent-mode-server-side-tagging/)",
                "author": "TAGGRS_io",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "1 - yes\n\n2 - yes and no. ad\\_user\\_data is used to share user between google products, while ad\\_personalisation to enable personalised advertising\n\nA linkedin tag, if enable personalised advertising, might need ad\\_personalisation from v2 rather than ad\\_storage",
                "author": null,
                "score": 1
            },
            {
                "body": "Hey, sorry to jump on your post but I am also struggiling!!   \n\n\nI manage Google Ads for clients in an agency, and just want to get a better understanding really. \n\nWe have been using cookiebot for CMV2. My question is, if my client already has a banner onsite do i also need a cookiebot consent banner? i am guessing not but shall i just use the cookibot one or is it ok to switch off (if there is a setting)? Is this only for Gtag conversion goals or would we still need it for GA4 imported goals.   \n\n\nThank you",
                "author": "Complex-Marzipan9935",
                "score": 1
            },
            {
                "body": "Thanks, appreciate the reply. Based on what you're saying, I'd likely get it set up for everything. But to be honest, I'm not even at that point. I still don't even understand how I ensure the cookie banner acceptance translates to these consent types.",
                "author": "jdanes52",
                "score": 1
            },
            {
                "body": "I’ve recommend Cookie script, it’s super cheap and handles all consent states",
                "author": "jdanes52",
                "score": 1
            },
            {
                "body": "Thank you",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Here is an example of a OneTrust implementation that might help. \nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Here is an example of an Osano implemention that might help. \nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I really don't know, it was just an example. But for my understanding of linkedin it could need ad\\_personalisation.\n\nThat answer should be provided by your dpo (data protection officer), legal consultant, privacy consultant or see other cookie policies",
                "author": null,
                "score": 1
            },
            {
                "body": "I think I need more of how to. I'm confused update version of the consent mode tag, you can force an updated consent status and put it as granted based on for example, cookie accepted click class, but I don't understand how you can ensure that maintains on every page after this, when I load a new page it just goes back to denied.",
                "author": "jdanes52",
                "score": 1
            },
            {
                "body": "Again, thanks for the reply.   \n\n\nTo **map** the individual cookie consents, such as ad\\_storage would this be done using listeners and data layer pushes? this is kind of where I'm struggling  \n\n\nI also have some websites which are a standard yes or no, I assume this is going to be a problem long term?",
                "author": "jdanes52",
                "score": 1
            },
            {
                "body": "This would require them to give consent on each new visit though right? What about regional settings? Got consent mode default vs update on simos tag. I've been falling down this rabbit hole for weeks...  Don't even get me started with the chrome ad personalization settings . \n\nAm I spinning in circles for nothing?",
                "author": "Andrewz05",
                "score": 1
            },
            {
                "body": "Same which is why I don't trust it",
                "author": "Andrewz05",
                "score": 1
            },
            {
                "body": "Fair enough.\nAs for \"automatic blocking\", I was under the impression that most of the simple/free integrations would just stop most/all scripts from running which sounded opposite of what GA4 was designed to handle. I wouldnt want to simply not fire any tags right? Maybe i misunderstood what they would actually block?",
                "author": "Andrewz05",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743792546.0,
        "title": "consent: personalization_storage, functionality_storage && security_storage - can be granted in EU? require CMP question?",
        "author": "bytepursuits",
        "id": "1jrjgs7",
        "selftext": "Guys - does anyone know how these should be setup for CMP+GTM conesnt mode combo integration?    \n  \nCan I just set these as allowed in EU?  \n- personalization_storage        \n- functionality_storage        \n  \nI've setup Additional Consent Checks for one of the GTM tags like this:   \n- personalization_storage        \n- functionality_storage        \n  \n  \n\n  \n  \nHowever tag does not trigger -> becase CMP is typically only requesting these: \n- ad_storage   \n- ad_user_data  \t  \n- ad_personalization\t   \n- analytics_storage\t    \nhttps://support.google.com/tagmanager/answer/10718549?hl=en   \n\nAre - personalization_storage and functionality_storage supposed to be configurable in CMP?  \nare they legally required in EU?    \nis the problem in my raptive cmp?  anyone knows? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jrjgs7/consent_personalization_storage_functionality/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You've added consent categories to a tag. That implies you believe that tag writes or reads at least one cookie (or localStorage or sessionStorage value) that belongs in each of those consent categories.\n\nYour CMP will likely need to be configured to recognise that cookie / those cookies as belonging in those categories in order to allow users to opt-in to those categories.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1740442621.0,
        "title": "Webflow & Cookiehub new to tagmanger: JavaScript CSP Error Blocking Consent Tracking after user consents to cookies.",
        "author": "daveinarmstrong",
        "id": "1ixhi10",
        "selftext": "Has anyone else encountered problems with consent mode when using Cookiehub with Webflow? I've been battling this for a month, trying to get form tracking working for Google Search Ads, but I'm running into a frustrating error.\n\nI'm seeing this Content Security Policy (CSP) violation in my browser console:\n\n**Refused to run the JavaScript URL because it violates the following Content Security Policy directive:** \"script-src 'nonce-MYNONCE CODE' 'unsafe-eval'\". Either the 'unsafe-inline' keyword, a hash ('sha256-...'), or a nonce ('nonce-...') is required to enable inline execution. Note that hashes do not apply to event handlers, style attributes and javascript: navigations unless the 'unsafe-hashes' keyword is present.\n\nAdditionally, when I try to check the consent status by typing tag('consent', 'get'); into the console, I get this error:\n\nVM101:1 Uncaught ReferenceError: tag is not defined at <anonymous>:1:1\n\nIt seems like Cookiehub or webflow isn't properly registering consent, and the CSP is blocking necessary scripts. I'm looking for any solutions or workarounds. Has anyone else experienced these issues, and if so, how did you resolve them?\"\n\n**If i manually set all consent modes to granted in the cookiehub tag, then I get all granted in the console message in tag assistant for cookie hub:** data = {\"ad\\_user\\_data\\_default\":\"granted\",\"wait\\_for\\_update\":\"1000\",\"linker\":\"\",\"code\":\"631bfe6e\",\"iab\\_tcf\":false,\"consent\\_mode\":true,\"production\":true,\"ad\\_personalization\\_default\":\"granted\",\"security\\_storage\\_default\":\"granted\",\"show\\_ui\":true,\"url\\_passthrough\":false,\"iab\\_gpp\":false,\"ad\\_storage\\_default\":\"granted\",\"analytics\\_storage\\_default\":\"granted\",\"functional\\_storage\\_default\":\"granted\",\"expiry\\_days\":\"365\",\"render\\_position\":\"\",\"gtmOnSuccess\":\"Function\",\"gtmOnFailure\":\"Function\",\"gtmTagId\":14,\"gtmEventId\":1}\n\nIn tag assistant, the container summary console message shows denied multiple times after the user consenting to cookies and leaving the coockiehub tag consent mode to default (dinied for everything but Necessary (security\\_storage) and Preferences (functionality\\_storage and personalization\\_storage) ): here is the log message for this mode:\n\n    data = {\"ad_user_data_default\":\"denied\",\"wait_for_update\":\"1000\",\"linker\":\"\",\"code\":\"631bfe6e\",\"iab_tcf\":false,\"consent_mode\":true,\"production\":true,\"ad_personalization_default\":\"denied\",\"security_storage_default\":\"granted\",\"show_ui\":true,\"url_passthrough\":false,\"iab_gpp\":false,\"ad_storage_default\":\"denied\",\"analytics_storage_default\":\"denied\",\"functional_storage_default\":\"granted\",\"expiry_days\":\"365\",\"render_position\":\"\",\"gtmOnSuccess\":\"Function\",\"gtmOnFailure\":\"Function\",\"gtmTagId\":14,\"gtmEventId\":1}",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ixhi10/webflow_cookiehub_new_to_tagmanger_javascript_csp/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Thanks i'll give this a try.\n\nA Webflow upgrade to enterprise is required to access the Webflow CSP configuration, this is beyond my current budget.",
                "author": "daveinarmstrong",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Hi! At Consent Studio we’re having an MVP going where Webflow users can design/build their own banners while still leveraging our APIs and SDK. Would you like to try it out? Let me know!",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Yes. I'm sidetracked with other issues now. But will try this out in a few day.",
                "author": "daveinarmstrong",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723893830.0,
        "title": "Consent Mode on Shopify via GTM & CookieBot",
        "author": "puk789",
        "id": "1eufej6",
        "selftext": "I'm trying to set up conversion tracking (sending ecommerce data to the data layer via Customer Events custom pixel, and retrieving and sending it to the respective vendors like GA4 through GTM) and Consent Mode (via CookieBot) on Shopify.\n\n\n\nHowever, I'm struggling with passing the consent data from the top JavaScript context (since CookieBot is installed via theme.liquid file) to the Sandbox context (that's where all the conversion events are happening via Customer Events).\n\n\n\nI've tried using postMessageAPI for the theme.liquid to send consent data to sandbox context, and addEventListener() method in Customer Events to listen for those messages. However, I'm getting the following warning in console:\n\nIn a sandboxed environment, addEventListener may not behave as expected.\n\nDue to which this is not working.\n\nDoes anybody know of a workaround?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1eufej6/consent_mode_on_shopify_via_gtm_cookiebot/",
        "num_comments": 20,
        "comments": [
            {
                "body": "Easiest route will be to just deploy cookiebot via gtm and set up gtm via the customer event as pixel and handle everything in gtm.",
                "author": "dowmi12",
                "score": 5
            },
            {
                "body": "I've reached out, but not heard back :')",
                "author": "Interesting-Rub-1896",
                "score": 3
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Installing Cookiebot directly in the source code is considered best practice. The main reason is auto cookie blocking on your non GTM scripts that deploy cookies that need to blocked by consent (you cannot have this feature if you deploy it via GTM). Otherwise devs will manually have to mark these up and if there are a lot and new ones constantly being installed this makes their lives a lot easier. There are other positives of hardcoding cookiebot and inparticular if you do it correctly such as quicker deployment of consent\\_update dataLayer calls (also using consent initialization slows down tracking a bit as other tags have to wait for cookiebot to fully be deployed via your GTM) which will guarantee more robust & accurate tracking.",
                "author": "dowmi12",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hello! For the best support, reach out directly to our team at [support@cookiebot.com](). We’d love to help and get everything running smoothly!",
                "author": "UsercentricsOfficial",
                "score": 1
            },
            {
                "body": "I'm dumbfounded why people would want to do it outside GTM in this day and age. I'm guessing OP is, was or has spoken to a developer first, as their understanding is generally stuck in 2005.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "If I install CookieBot via GTM template, the banner doesn't show up",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Hi, I have done everything that was in the guide but the banner doesn't show up. I can't see it in preview mode either. Can u help?",
                "author": "Hiddeboy3000",
                "score": 1
            },
            {
                "body": "Did you add the URL of your website in Cookiebot? This even happens to me sometimes. Try checking if everything is correct.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Did you get it to work? I'm about to do this today aswell",
                "author": "classified18",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "u/Interesting-Rub-1896  finding a CMP with responsive and technical support feels like searching for a needle in a haystack... that's exactly why we built [Cookifi](https://www.cooki.fi/), the first no BS freelancer/agency-focused CMP, which works seamlessly with Shopify and custom pixels... it's currently free for early adopters... (and here's a comprehensive Shopify tutorial with ready-to-use code and GTM templates: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm) )",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Good point, we've switched the CookieBot from GTM to hard coding because Klaviyo placing its cookie from the Shopify-Klaviyo integration automatically.\n\nThe order is:\n\n1. gtag commands with defaults  \n2. GTM  \n3. CookieBot script with auto-blocking feature\n\nWe are struggling now to integrate CookieBot with the Shopify Customer Privacy API what's described [here](https://support.cookiebot.com/hc/en-us/articles/360006184253-Shopify-installation) in steps 3 and 6. But `window.Shopify.customerPrivacy` is not loading current visitor consent (i.e. gtag default consent we set up) on the landing page, only on subsequent pages after the user's choice it is capturing correct values.\n\nHowever, when installing CookieBot in GTM current visitor consent is loaded successfully even on the first page.\n\nHave you encountered such a behaviour if integrated Customer Privacy API?",
                "author": "WorldlyOpposite2842",
                "score": 1
            },
            {
                "body": "I have, but it's been a pain in the ass (took me few days)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "It'll be really useful if you could explain it in the comments# unless you're trying to sell something, we'd all appreciate it please",
                "author": "TheAlchemist2",
                "score": 1
            },
            {
                "body": "u/WorldlyOpposite2842  you may want to give this tutorial a read: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm) ... I've gone through the pain of figuring this out",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Allright, I've just setup everything aswell, cookiebot via gtm template. setup cookiebot account and everything, \"google & youtube\" app configured in shopify, but I cant get the banner showing up.. Do I have to enable/disable cookie banner in shopify \"customer privacy\" settings or is that just the standalone thing? Did you setup GTM through code, or through google & youtube app in shopify?",
                "author": "classified18",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739228377.0,
        "title": "Trigger Shopify consent from GTM",
        "author": "FullSpare1352",
        "id": "1imjt2t",
        "selftext": "Hey; \n\nAnyone know if it possible/how to trigger shopifys consent from gtm? \n\nFor example, I have iubenda set up in gtm and once accepted, I was to change the state of Shopify consent to match gtm?  ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1imjt2t/trigger_shopify_consent_from_gtm/",
        "num_comments": 5,
        "comments": [
            {
                "body": "It’s so true and it’s really a big semi undocumented gap. \n\nThanks for the link, I will definitely check it out",
                "author": "FullSpare1352",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[https://shopify.dev/docs/api/customer-privacy](https://shopify.dev/docs/api/customer-privacy)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "u/FullSpare1352 yes it's possible, but not all CMPs play along nicely with Shopify's Customer Privacy API. One that does work seamlessly is [Cookifi](https://www.cooki.fi/) \\- I've written a comprehensive step-by-step tutorial on how to set this up (including Consent Mode v2): [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Thanks, yup setconsent",
                "author": "FullSpare1352",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736296243.0,
        "title": "Is Consent Mode V2 included in the free package of cookiebot?",
        "author": "Ill-Growth230",
        "id": "1hw6prc",
        "selftext": "Since our website is a one-pager, we don't actually need the Premium Package of cookiebot, but I'm unsure if it's required for Consent Mode V2.\n\nThanks in advance!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hw6prc/is_consent_mode_v2_included_in_the_free_package/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Yes, consent mode V2 will run on a one pager on the free plan of cookiebot. You won't be able to change the colors to make it fit your brand colors tho.",
                "author": "marcodoesweirdstuff",
                "score": 2
            },
            {
                "body": "Thanks ChatGPT",
                "author": "marcodoesweirdstuff",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "no",
                "author": null,
                "score": 1
            },
            {
                "body": "Yes, **Consent Mode V2** is included in the **free version** of Cookiebot. You don’t need the Premium package to implement it.\n\nSince your website is a **one-pager**, the free plan should be more than enough. Cookiebot’s free tier covers websites with fewer than **100 subpages**, and it fully supports Consent Mode V2, which is essential for managing consent with Google services (like Google Analytics and Google Ads) in compliance with privacy regulations!",
                "author": "Significant_Split342",
                "score": 1
            },
            {
                "body": "Spot on, Consent Mode V2 is the real deal. I’ve found the freebie Cookiebot version didn’t skimp at all on our single-page wonderland either. No premium shakedown needed, trust me. It's like the holy grail for juggling Google Analytics and all that. If you want to dig deeper into all privacy hoopplay on Reddit, Pulse for Reddit is a lifesaver. Keeps GDPR-headaches at bay by tracking privacy-topic chats all at once. Makes sense, right?",
                "author": "Rabs101",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716822409.0,
        "title": "Consent mode v2 - shopify ",
        "author": "codingcommerce",
        "id": "1d1tnlh",
        "selftext": "Hello!\n\nI am so lost. \n\nI am ppc manager and i need to get the consent mode up and running on a shopify store. \n\nI installed it using google tag manager but the client is using direct integration of google ads and google analytics. \n\nDo i have to set up everything on google tag manager? \n\nThank you very much. \n\n",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d1tnlh/consent_mode_v2_shopify/",
        "num_comments": 24,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 3
            },
            {
                "body": "What should my GA4 trigger in gtm?",
                "author": "codingcommerce",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you also already have a plugin that manages consent? Suggestions are:\n- https://cookiebot.com\n- https://consent.studio\n- https://cookieyes.com",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "GTM is the easiest and reliable methode to track these events. You better go with GTM.",
                "author": "Evan-Ivan",
                "score": 1
            },
            {
                "body": "I was under impression that the privacy banner from Shopify is GDPR and cookie consent mode compliant and its integrated with GA and GAds tracking app",
                "author": "Grinchiul",
                "score": 1
            },
            {
                "body": "u/codingcommerce if you're still struggling, we've put together this comprehensive GTM tutorial on AnalyticsMania: [https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify)\n\nYou may also give this tutorial a read if you want to handle consent (including Google Consent Mode v2) on top of your GTM setup: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Thank you very much for your explanation. I installed consent mode via gtm. My question is if i also need to install GA4 and g ads via tag manager for the consent mode set up to work properly.",
                "author": "codingcommerce",
                "score": 1
            },
            {
                "body": "I am using cookiebot",
                "author": "codingcommerce",
                "score": 1
            },
            {
                "body": "it definitely is not compliant... it lacks basic things like Preference Centre (the floating button that lets your visitors review/change their consent), consent log, and others from what I've seen... u/Grinchiul",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "You do because native GA4-Shopify connection can frequently ignore cookie consent buttons and then you have issues.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "So,  i guess i will have to remove ga4 and g ads from shopify.",
                "author": "codingcommerce",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Purchase",
                "author": "codingcommerce",
                "score": 1
            },
            {
                "body": "Shopify",
                "author": "codingcommerce",
                "score": 1
            },
            {
                "body": "What should i choose to be GA4 trigger *",
                "author": "codingcommerce",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734425401.0,
        "title": " A tag read consent state before a default was set",
        "author": "d4truE",
        "id": "1hg6iuc",
        "selftext": "Hello. I am currently experiencing a problem with google tag manager. \n\nI got a message \"Some pages are missing consent for EEA users\" in my tag quality tab in google ads. \n\nWhen i hop onto the tag manager i get this : A tag read consent state before a default was set .\n\nI am using consent magic pro plugin. I had some problems with my tags and i reinstalled everything. Don't know how this affected the use of the plugin. \n\nHelp appreciated. Thanks.\n\n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hg6iuc/a_tag_read_consent_state_before_a_default_was_set/",
        "num_comments": 8,
        "comments": [
            {
                "body": "It isn't a good idea to go cheap on consent, the risk is too high. Cookiebot is the market leader, you can be confident that if it's not working it's not because of Cookiebot, it's because of the way it's been implemented on your site.\n\nHappy to help if you need it, just send me a DM.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "Have you implemented your consent management through Google Tag Manager with a CMP and Google Consent Mode?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "There's plenty of Google documentation, videos on YouTube and I'm sure your own CMP will have documentation as well to follow.\n\nWhat is the nature of your business?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "Honestly, I wouldn't use Consent Magic, their own website doesn't follow proper consent best practice. I'd use Cookiebot.",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have actually no idea how its implemented. I had a marketing company set it up for me, however we parted ways and i am trying ads my own now. Google ads->tools->data manager->admin-> consent mode is active.  \nIs there a way to check how its implemented? and go from there?  \nThanks.",
                "author": "d4truE",
                "score": 1
            },
            {
                "body": "I have a woocommerce e-shop. Baby and kids goods. Should i remove consent magic pro plugin and reinstall/setup it?",
                "author": "d4truE",
                "score": 1
            },
            {
                "body": "Do you know of any free option? because i already paid 150€ for a year for consent magic. My licence expires May 25. But if there is not a free alternative i guess $7/month for cookiebot is reasonable for a piece of mind.",
                "author": "d4truE",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734106628.0,
        "title": "How to change/edit a tag' s built- in consent checks ",
        "author": "sebastianprv",
        "id": "1hdfre0",
        "selftext": "We recently enable the new consent overview for an account, and all of our tags have the basic system defined co sent check. But out conversion tracking tags got rhecwong \"built in consent checks\" which is cancelling our tracking. \n\nThe only checks that should be showing are \"ad_ storage\" & \"analytic_storage\". But we have a couple more in there. \n\nI can add more consent conditions but I can't remove these. I need to have this set up correctly to have our ads track all data independently of the consent choices. ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hdfre0/how_to_changeedit_a_tag_s_built_in_consent_checks/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What do you mean by \"conversion tracking tags got the wrong built in consent checks\"? Why would it be wrong?\n\n\nSounds like you're trying to bypass user consent, which is bad practice and could be illegal. But if you don't want to use consent overview why not just disable it again?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Hmm, it sounds like those build in consents check are part of the tag's **template.** I'm going to play devil's advocate and assume that you don't try to bypass something obviously required. Is this possible that someone at one point developed (or imported) the tag template for you and over-do it by adding checks that are not necessary? Did I get it right?  \n  \nIt can be edited out by editing not the tag, but the template.  Navigate to the bottom of the left menu (templates). Do you see the template of the tag you're referring to? You can edit it, but it may require some basic codding skills depending on how complex it is. It may be a little confusing at first, but there is also a chance that it'll be as simple as cutting the right line of code. I'd start by making a copy to be safe :)\n\nIf the \"templates\" tab is empty... than you're trying to bypass something that you shoudn't. It's a consent that should be required for the tag you're trying to use. Alternatively, that's not the right tag at all and you're trying to implement something basic with a tag meant for a more complex thing.",
                "author": null,
                "score": 1
            },
            {
                "body": "The only built in consent that our tags should have are ad_storage & analytics_storage for the sake of tracking. I mean google conversion tracking tag. We have more built in consent check that we should. I need basic tracking to happend that's all",
                "author": "sebastianprv",
                "score": 1
            },
            {
                "body": "What other consent do you see applied to the tag?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Ad_personalization, ad_user_data, and we are missing analytics_storage",
                "author": "sebastianprv",
                "score": 1
            },
            {
                "body": "It's seldom that one has granted consent for ads but not analytics. Even so, the tag should still be able to fire even if you don't have analytics consent. Are you sure you didn't configure the tag incorrectly? If you want to exclusively rely on build in consent then you need to mark the tags consent settings as \"require no additional consent\". If you map additional consent to the tag then it will not fire unless all mapped consent categories have been granted.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Ad_personalization and ad_user_data are requirements by Google, if you want to actually use the data in your marketing efforts. \n\nanalytics_storage can be added to any tag under Advanced settings",
                "author": "mbkjeldsen",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1728400077.0,
        "title": "Additional consent does not appear to be additional at all",
        "author": "tallpaullewis",
        "id": "1fz229v",
        "selftext": "I have a confusing issue with GTM. I implemented consent mode a few weeks ago but the data team at my work has not seen the expected drop in GA events.\n\nWhen I look into it I see that \"additional\" consent doesn't seem to be in addition to built-in.\n\nI have a tag called Update Foo of type \\`Google Analytics: GA4 Event\\`, this comes with built-in consent checks of \\`ad\\_storage\\` \\`ad\\_personalization\\` \\`ad\\_user\\_data\\` \\`analytics\\_storage\\`.\n\n[https://i.sstatic.net/0bZ83GyC.png](https://i.sstatic.net/0bZ83GyC.png)\n\nIf I set additional to either \\`Not set\\` or \\`No additional consent required\\`, run the site in preview mode and set the default consent mode on the site to \\`DENIED\\` for the 4 modes above (verified by the Consent tab in Tag Assistant), Foo still fires.\n\n[https://i.sstatic.net/XIYe6rFc.png](https://i.sstatic.net/XIYe6rFc.png)\n\n[https://i.sstatic.net/pbRDwdfg.png](https://i.sstatic.net/pbRDwdfg.png)\n\nIf I set additional to \\`Require additional consent for tag to fire\\`, specify \\`ad\\_storage\\` (or any other built-in mode), and run exactly the same test as above, Foo does not fire.\n\n[https://i.sstatic.net/0F6bUGCY.png](https://i.sstatic.net/0F6bUGCY.png)\n\nThis is not what I would expect, I'd expect \\*additional\\* to mean \\*in addition to\\*.\n\nIs this a flaw in my understanding or a bug in GTM?\n\n  \n(This post with the images inline is here: [https://webmasters.stackexchange.com/questions/145797/additional-consent-in-gtm-does-not-appear-to-be-additional-at-all-what-is-wrong](https://webmasters.stackexchange.com/questions/145797/additional-consent-in-gtm-does-not-appear-to-be-additional-at-all-what-is-wrong) )",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fz229v/additional_consent_does_not_appear_to_be/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Yeah, the tag still technically fires, but its behaviour is different based on what consent it has.\n\nYou can see exactly what it will do based on consent settings [on this page](https://support.google.com/analytics/answer/9976101) in the \"consent mode behaviour\" section.\n\nIf you want to be super sure about what consent GA4 thinks it has, check the \"Cookie Consent State\" (gcs) parameter in the GA4 hit in Tag Assistant.\n\nIt looks like G1XY where X is 1 or 0 for ad\\_storage and Y is 1 or 0 for analytics\\_storage:\n\nG100 = no ads, no analytics  \nG101 = no ads, yes analytics  \nG110 = yes ads, no analytics  \nG111 = yes ads, yes analytics",
                "author": "winless",
                "score": 4
            },
            {
                "body": "With advanced mode, data will still be sent to GA4, it'll be cookieless pings which GA4 uses to create modelled data with idea being that this makes up for the data lost from unconsenting users.\n\nThis could well explain the lack of drop out.\n\nBeyond that, I'd really have to see the set up and behaviour first hand to work out what's happening.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "Thanks for the detailed replies! Yes I am dealing with GDPR/EEA+CH+GB and non-GDPR/RoW visitors.\n\nI'm working on this again today so I will take time to digest your reply. Thanks again!",
                "author": "tallpaullewis",
                "score": 2
            },
            {
                "body": "Thanks, this is really useful",
                "author": "tallpaullewis",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you know the difference between basic and advanced GCM?\n\nCan you show the trigger you are using? What is the event being measured?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "What you've described is exactly what I would expect to see.\n\nWith \"no additional consent required\", the GA4 Event tag will fire with or without consent. That's called \"advanced consent mode\".\n\nWith an additional consent requirement of e.g. ad\\_storage, the tag will not fire at all unless ad\\_storage is granted. That's called \"basic consent mode\".\n\nAdvanced consent mode is a huge break from how you would usually expect to see tags fire. Fundamentally, it all \"just works\", but the way to verify / debug advanced consent mode does require that you pay attention to the gcs parameter being sent to e.g. GA4. Google's own documentation on this is pretty decent now (it didn't used to be!).",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Of course I am not sure where you are and which country your target area is. Since Consent Mode and GDPR are tied together and it is quite a bit European topic, I assume you are targeting a European country, but this is just a guess. If not, below might make no sense at all. \n\nSorry for the long post, I wanted to be thorough. I know your question is more about the actual implementation then the GDPR side of things, but if you are still in the implementation phase, this could be something to take into account. Basic mode is easier to implement and to 'understand' than advanced and the latter also comes with quite some questions revolving GDPR.\n\n# About Advanced Consent mode and personal data\n\nI just wanted to add that advanced consent mode comes with a bit of moral issue where even the cookieless pings can hold personal data, which you will not see, but you 'expect' google to not do anything with it. \n\n**Preemtive Loading**\n\nThere is also the issue with Preemtive Loading: Google Tags load before the consent banner appears, improving data capture potential. This means you can potentially collect some data even before users make a decision about consent.\n\nBut the whole idea about granting consent is that you as a user should be able to make the decision yourself if your data can be collected and shared (with Google).   \nSo basically, collecting (personal) data **before** the user actually made a decision on consent is not what granting consent should be about.   \nNaturally, for marketeers and business owner this is quite valuable, but the question is if this is moral. Especially since those cookieless pings hold personal data that Google still collecs on their American servers, which by default is not legal as long as the (European) user did not agree with collecting data. \n\n**Collected personal data**\n\nSee this thread where commenters explained it as well: [https://www.reddit.com/r/GoogleAnalytics/comments/1deu4va/is\\_advanced\\_consent\\_mode\\_gdpr\\_compliant/](https://www.reddit.com/r/GoogleAnalytics/comments/1deu4va/is_advanced_consent_mode_gdpr_compliant/)\n\n*A quote from that thread:* \n\n>Data is still being sent with consent mode enabled, and this data includes personal data that can be used to fingerprint an individual such as **IP** and **user agent**.\n\n>Whenever a request is made on the Internet, these two are always included, so there is no way around it.\n\n>With consent mode enabled you are still sending requests containing the personal data of the user, the only difference is that you trust Google not to do anything sketchy with this data.\n\nSecond, this website gives a nice list of what is all collected with cookieless pings: [https://cookie-script.com/blog/basic-advanced-google-consent-mode-v2](https://cookie-script.com/blog/basic-advanced-google-consent-mode-v2)\n\n\"Pings only contain non-identifiable and/or aggregate information about user interactions, such as: \n\n* **Location** (country)\n* **Timestamp**\n* **Browser type**\n* **Device type**\n* Referrer website or page\n* Indications of ad-clicks\n* Conversion type.\"\n\nTogether with that previous mentioned comment about the IP address, I think it is very sketchy.   \n  \nSo yes, all seperate, they do not tell that much, but mixed together, the actual time + ip + country + browser+ device combination could be thrown together to still create some sort of audience.",
                "author": "MisterMarcoo",
                "score": 1
            },
            {
                "body": "Yes, I am using advanced GCM. I am \\_reasonably\\_ confident with GTM, I have been working on an existing setup for a few weeks, consent mode, server container etc.  \n  \nThe trigger is type \\`Click- All Elements\\`, firing with a \\`Some Clicks\\` filter of \\`Click Element matches CSS selector \\[data-clickid\\^=\"foo\"\\],  \\[data-clickid\\^=\"foo\"\\] \\*\\`. This trigger was set up some years ago by another dev.",
                "author": "tallpaullewis",
                "score": 1
            },
            {
                "body": "Thanks for replying!   \n  \nWhat I found difficult to understand is why, when I decline \"ad\\_storage\" (for example) and the tag has \"ad\\_storage\" set in the \"Built-in\" section, the tag fires, but if I put \"ad\\_storage\" in the \"Additional\" section, the tag does not fire. I read \"Additional\" as \"in addition to Built-in,\" but that is not the case.",
                "author": "tallpaullewis",
                "score": 1
            },
            {
                "body": "To add:\n\n# European Commission\n\nAs stated by the [European Commision](https://commission.europa.eu/law/law-topic/data-protection/reform/what-personal-data_en), personal data examples are **location data, IP-address, advertising identifier of your phone, cookie id** (could be indication of ad-clicks).   \nAlthough you might not be able to see this information in GA for example, Google still collects it before the user actually gave consent and stores it in US servers (AFAIK), which is against the European law. \n\n**Examples of personal data**\n\n* a name and surname;\n* a home address;\n* an email address such as [name.surname@company.com](mailto:name.surname@company.com);\n* an identification card number;\n* location data (for example the location data function on a mobile phone)\\*;\n* an Internet Protocol (IP) address;\n* a cookie ID\\*;\n* the advertising identifier of your phone;\n* data held by a hospital or doctor, which could be a symbol that uniquely identifies a person.\n\n# Global operating website\n\nTo add: even if you are Non-European based, but European users still visit your website, you might have to make seperate adjustments to actually be on 'the right side'. For example, make advanced consent mode only work in Non-European countries.   \nNow, no organisation or country has said that advanced consent mode is wrong and should be illegal in Europe, but there are talks about it. So be aware, that even advanced consent mode might not be sufficient for European users. \n\nOf course, this whole rant about GDPR things can be ignored and just collect whatever you can within the grey area of advanced consent mode, but be aware that if you want to 'be the best in class', advanced consent mode can have too many moral issues that you cannot ignore. I work at a data consultancy company and almost all of our (European) clients did not implement Advanced for these reasons. \n\nAgain, sorry for the long post but it was quite fun to find articles about it and I hope it helps. At least it helped me to stay a bit up to date. Naturally, if someone disagrees please let me know. I might have it wrong of course.",
                "author": "MisterMarcoo",
                "score": 1
            },
            {
                "body": "It used to be that if you defined an additional consent that overlapped with built-in consent, you would get some really strange / undefined behaviour from the tag.\n\nGoogle fixed it and called it Basic Consent Mode!\n\nIt's there for *really* risk averse compliance teams who want no data sent to Google without consent, no matter how anonymous it is.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709194275.0,
        "title": "My client (and boss) want page_view even when consent is denied, is it possible?",
        "author": "FeelingPicture7668",
        "id": "1b2v97h",
        "selftext": "Aloha people,  \n\n\nI've set Consent Mode v2 up with CookieBot and it works as intended. My client (and my boss) would like to have page\\_view even when consent is not given.  \nI've tried multiple things and the only thing that seems to work is our own website, where we run Zaraz which can send a page\\_view even when consent is not given, although it does place a cookie so not a viable solution...  \nDo any of you have a recipe to force a page\\_view even when consent is denied?",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b2v97h/my_client_and_boss_want_page_view_even_when/",
        "num_comments": 26,
        "comments": [
            {
                "body": "So your client and your boss want to install a CMP but not honor the consent given. Why did they have you install a CMP when it was only being done as a sham - a fraud? If there is no intent to actually comply with the consent given, running a CMP is pointless. ",
                "author": "Humble_Elderberry_25",
                "score": 7
            },
            {
                "body": "Use in GTM/G4 the native consent feature to enable page view triggers without requiring user consent. This configuration ensures that no cookies are stored. GA4 will then collect hits data, employing its own modeling techniques to estimate the number of actual sessions and users represented.",
                "author": "pixgarden",
                "score": 6
            },
            {
                "body": "*Why* do you / your boss or your client want to do this? What is the point of implementing user consent management if you are just going to ignore the user's consent decision and track them anyway?\n\nOf course you can override the user's decision, but this is ethically wrong as well as legally wrong in many significant jurisdictions. I'm not going to help anyone who asks how.\n\nPlease do not track users without consent and especially please do not track users without consent after the user has explicitly told you they do not want you to do that.\n\nGoogle Consent Mode is not a bypass to make specific data appear in GA4. It is a method where it will allow data modeling, but it will not directly give you page\\_view or any other events in the standard reports in a realtime way nor in any way where you can trace back to a specific user or session.",
                "author": "StefanAtWork",
                "score": 5
            },
            {
                "body": "Here is a link to potential legal action against companies who are doing what your boss is asking - fraudulent implementations of a CMP. Maybe you will be next on this list. https://noyb.eu/en/226-complaints-lodged-against-deceptive-cookie-banners",
                "author": "Humble_Elderberry_25",
                "score": 4
            },
            {
                "body": "Sorry. Looks like an extra space was added to the end of the URL by me somehow https://noyb.eu/en/226-complaints-lodged-against-deceptive-cookie-banners",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "You can trigger a pageview without enabling cookies. It respects consent",
                "author": "pixgarden",
                "score": 2
            },
            {
                "body": "^ and this is What we’re looking into, although I cannot get it to work properly..\n\nAny chance you Can share some screenshots of How your gtag is configured?",
                "author": "FeelingPicture7668",
                "score": 2
            },
            {
                "body": "No. You must honor the consent choice. \"Step 1 – end-user consent: You must ask for and obtain the explicit and valid consent from your users in order to use Google Analytics in GDPR compliance on your website.\" https://www.cookiebot.com/en/google-analytics-gdpr/",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "this is such an inane conversation . .. people will do whatever they want, so just save your breath...",
                "author": "bigtakeoff",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Trigger - Initialization \nSend event - page_view",
                "author": "d1vergent",
                "score": 1
            },
            {
                "body": "I'm a bit late to the game but I was searching for the same solution and was also wondering to what extend the consent mode was able to allow \"cookieless pings\" (which, at least officially, take into account the consent given, and in case it is denied, only shares data without PII).   \n  \nMy mistake was that I was triggering my GA4 tag only on the explicit approval of Analytics cookies, defeating the purpose of the cookieless pings.   \nThe trick is to trigger the GA4 on all pages, and depending on consent state, different data is being sent, always respecting the consent given. \n\nHappy to be corrected in case I have it wrong.",
                "author": "Public_Courage_6259",
                "score": 1
            },
            {
                "body": "There are real legal implications of what you are asking right now. I would push back on your boss / client.",
                "author": "dgpaul10",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Page views still send the IP address of the user if you don't redact it by proxying through a server. So even if you don't use cookies, this is still going to be a problem. \n\nThat said, it is only applicable in countries with strict privacy laws. As far as I know, if your traffic is US only, you are not legally required to add consent banners.",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "Sending page\\_view event to GA4 when user has declined consent is in violation of privacy law. You can capture pageviews of users who declined consent in self-hosted datawarehouse/datalake/cdp and not send it to any 3rd party. Usually it is useful in personalization for repeat anonymous visitors who've declined consent. Since you have not send their data to GA4/Meta/G Ads, only way to engage with them is with their first party id info.",
                "author": "1MagicPixel",
                "score": 1
            },
            {
                "body": "Can you elaborate on the native consent feature, maybe with a screenshot?",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "The IP address issue is much more a grey area now. Google has servers in the EU and if an EU user lands on a site where there is GA4, a European server will receive the hit, geolocate the user, remove the IP and forward the data to the server(s) in the US.\n\nDifficult to verify, because GA4 doesn't expose IP addresses in reports (or in a linked BigQuery) anyway.\n\nRedacting IP via sGTM is a valid option, but you then need to take some steps to preserve geolocation data, assuming you want to use geolocation data in reports.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[https://support.google.com/tagmanager/answer/10718549?hl=en](https://support.google.com/tagmanager/answer/10718549?hl=en)",
                "author": "pixgarden",
                "score": 1
            },
            {
                "body": "Landing on a 404 page",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "This I have set up, but I still don't get a page\\_view.  \nMaybe more specific is in order. I'm thinking realtime report, is it possible to get page\\_view there without consent given?",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "Yes from the page I’ve just sent. Look for « No additional consent required »",
                "author": "pixgarden",
                "score": 1
            },
            {
                "body": "The real time report exclude modelling",
                "author": "pixgarden",
                "score": 1
            },
            {
                "body": "I do have the \"no additional consent required\" on my page\\_view tag. And I still see no page\\_view in the real time report.. hmm..  \n  \nYou say \"The real time report exclude modelling\", does it mean the page\\_view is not collected in real time but stored later in GA4 ?",
                "author": "FeelingPicture7668",
                "score": 1
            },
            {
                "body": "Yes. It depends on your identity resolution settings too",
                "author": "pixgarden",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721137488.0,
        "title": "What if Google Consent Mode v2 is all granted by default?",
        "author": "yagami_kira",
        "id": "1e4p149",
        "selftext": "I'm using Google Ads and Google Analytics with very few customers in the EU. Mostly my market is USA.\n\nQuestions:\n\n1. If I apply my consent mode to all granted by default like below, will Google Ads ban my account?\n\ngtag('consent', 'default', {\n\n'ad\\_storage': 'granted',\n\n'ad\\_user\\_data': 'granted',\n\n'ad\\_personalization': 'granted',\n\n'analytics\\_storage': 'granted',\n\n'personalization\\_storage': 'granted',\n\n'functionality\\_storage': 'granted',\n\n'security\\_storage': 'granted',\n\n\n\n2. If most of my web traffic and the majority of my PPC bidding is in USA and very few in EU, will my conversion measurements, remarketing, etc. for USA still be significantly affected if I don't implement Consent Mode, or if I implement Consent Mode (but not GDPR compliant)?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1e4p149/what_if_google_consent_mode_v2_is_all_granted_by/",
        "num_comments": 17,
        "comments": [
            {
                "body": "I'm not 100% sure if Google would pick up on this or what the ramifications would be, but to adhere to the rules, the granted status must only be applied after a user accepts the cookies.\n\nAs for how much your data will be affected, that will depend on the accept/denied ratio for your cookie banner.",
                "author": "patrsam",
                "score": 3
            },
            {
                "body": ">If I apply my consent mode to all granted by default like below, will Google Ads ban my account?\n\n\nNo, granted by default is simply counted as granted. It is your responsibility to make sure this behavior adheres to the local regulations.\n\n\n\n\n>If most of my web traffic and the majority of my PPC bidding is in USA and very few in EU, will my conversion measurements, remarketing, etc. for USA still be significantly affected if I don't implement Consent Mode, or if I implement Consent Mode (but not GDPR compliant)?\n\n\n\n\nYes. Consent parameters are required if you want to use your data for advertising. If you don't care about compliance you can either set them all to granted or flip the consent settings in GA4 to default to granted. I don't recommend this though but you do you.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Please don't do this. The Consent API you're using provides the facility to have different defaults in different countries. Please have a look at the Lowrance website page source view-source:https://www.lowrance.com/en-gb/\n\nThere's an almost exactly tailored to your needs script that effectively achieves \"granted if you're in the US, denied if you're outside of the US\".",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Ok I’ll be honest here and share my experience - I did it on some clients that had a huge decline ratio just for the conversion testing purposes. It works fine. On the other hand I don’t recommend that, as it might lead to law issues (for now I haven’t heard once about it, but maybe it will be enforced very soon).",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "OK, so let's say I'll take the risk of applying 'granted' as default since my audience mostly are in USA, do I still actually need to use the 'update' command (like in below example) to make the Consent Mode functional and to be deemed by Google as active?\n\n<script>\n\nfunction allConsentGranted() {\n\n  gtag('consent', 'update', {\n\n'ad\\_user\\_data': 'granted',\n\n'ad\\_personalization': 'granted',\n\n'ad\\_storage': 'granted',\n\n'analytics\\_storage': 'granted'\n\n  });\n\n}\n\n</script>",
                "author": "yagami_kira",
                "score": 1
            },
            {
                "body": "If you don't show the Consent Banner to your US visitors you can set Consent Mode to be granted for them by default and denied for EEA visitors. You can do so in GTM depending on what cookie solution you use or by using custom tags.\n\nYou can also set granted by default for every region, however, there are some risks. Non-compliance to the EU's Digital Markets Act can result in fines of up to 10% of the company's total worldwide annual turnover. \n\nGoogle isn't the one enforcing or giving out these fines. In case you decide to go with everything granted, at least make sure everything changes to denied once the user rejects cookies. Don't ignore their choice completely.\n\nI wouldn't recommend this. Instead, a good practice is to install the cookie banner in a cookie wall fashion, where you can't interact with anything on the website unless you accept/deny first.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Funny question - i recently aquired client who had this type of setting - no ban at all. Of course i migrated him to cookiebot consent manager.   \nBy \"default\" you should not set everything as granted, but set denied as default, and change to granted later",
                "author": "patrykc",
                "score": 1
            },
            {
                "body": "To answer your original question:  If you set default to granted, nothing will happen: \n\nGoogle considers this to be a valid state, according to latest chat I've seen on Simo Ahava's blog.   There was a huge debate about this, and it went back and forth.   But that final piece of info I saw was that Google permits it.\n\n[https://www.simoahava.com/analytics/consent-mode-google-tags/](https://www.simoahava.com/analytics/consent-mode-google-tags/)\n\nHowever, if you falsely tell Google that you got consent with update, then you might have a Terms of Service issue.\n\nThe short term advice would be \"don't implement Consent Mode unless you have to\".....that way you don't have to lie to Google.   But it's my understanding you lose two pieces of Google Ads/GA4 functionality....remarketing and conversion integration.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "with your client who had this type of setting, was it recording Google analytics data without issues as well?",
                "author": "yagami_kira",
                "score": 1
            },
            {
                "body": "We are based in India and operate exclusively within the country. We’ve noticed a decline in our auto-generated remarketing audience, and after ruling out other possibilities, we’re currently investigating whether consent mode might be the issue.\n\n\n\nWe’ve tested consent mode in various configurations:\n\n(a) Granted by default, then updated\n\n(b) Rejected by default, then updated to granted\n\n(c) Not set at all\n\n\n\nWe’ve observed fluctuations in performance but haven’t been able to identify a clear pattern, possibly due to a lag in data processing. We have a few questions:\n\n\n\n\t1.\tIs leaving consent mode “not set at all” acceptable for India, or could it have a negative impact?\n\n\t2.\tIf “not set at all” is not recommended, what is the best practice for implementing consent mode directly through code? We are not using a consent banner, as it is not required in India.",
                "author": "Delicious_Help1827",
                "score": 1
            },
            {
                "body": "That is a bit of a nuanced situation. I guess it depends on how Google validates consent mode on a website — do they test it against all countries, etc (I'm doubtful if they specify this anywhere). 😅",
                "author": "patrsam",
                "score": 1
            },
            {
                "body": "Those lazy asses added ga4 tracking only in december, but it looked like it went through 6 march without any any bigger drop of recorded events.",
                "author": "patrykc",
                "score": 1
            },
            {
                "body": "I have so many questions that I don't know where to start.  It would take a consultant days or weeks to find the answer to your problem.\n\nIf you noticed a decline in your remarketing audience, there are 1,000 possible reasons why this could be.  I can't even begin to scratch the surface in a one paragraph Reddit post.\n\nI feel like you blamed consent mode too quickly.  Without a banner, you would see a huge data loss happening in your GA4 data if consent mode was activated without a banner.  I'm not sure consent mode is the culprit here.\n\ni assume that you have GA4 and Google Ads linked, and that's why you have the remarketing audience.  Do you know about the permissions in GA4 admin needed for this to happen? (There's a data sharing across services setting, then there's a Remarketing on/off switch.   I'm not an expert here...please google the subject.  \n\nPlease investigate Remarketing Audiences further, and learn exactly how Google puts them together.\n\nGood luck!\n\n\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\n\nPS:\n\nYou say you don't have a consent banner, but you tested consent mode in three configurations.  How did you do that?   (Did you use Simo's GTM Consent default & update tags to create artificial tests?)\n\nAre you aware that the timing of the tag firing is critical?  Did you use the correct initialization tags?  Are you familiar with consent initialization in GTM?  How did you activate the three configurations?",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "There is a setting inside GA4 that confirms whether Consent Mode signals are active or not. That is the best way to confirm is Google finds your website compliant or not.",
                "author": "patrsam",
                "score": 1
            },
            {
                "body": "My current setup does not actually display a cookie banner in the US, only in the EU. All the default settings are set to 'granted' even in EU.\n\nMost of the data I collect through Google is primarily from the US, with very little coming from the EU. However, what I am unsure of is if the data I collect (Google Ads measurements, Analytics, etc.) within the US will also be impacted if I decide not to implement Consent Mode at all?",
                "author": "yagami_kira",
                "score": 0
            },
            {
                "body": "I also wonder how Google validates consent mode on a website? I received an email alert from Google last week that I need to adopt consent mode to preserve conversion tracking in the EEA. I'm surprised they know that I haven't adopted consent mode so I'm trying to do it now.",
                "author": "yagami_kira",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1730485605.0,
        "title": "Shopify Custom Pixel || Consent Mode",
        "author": "Objective-Rub9543",
        "id": "1ghca3g",
        "selftext": "Hi everyone,\n\nAs you may know, Shopify recently introduced custom pixels ([https://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels/gtm-tutorial](https://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels/gtm-tutorial)). We encountered an issue we haven’t been able to resolve, even after consulting Shopify support:\n\nPreviously, we managed CMP consent mode through Google Tag Manager (GTM), leveraging an update event from the CMP as a trigger to update consent settings. However, with the new custom pixel implementation, GTM no longer interacts with the datalayer but instead relies on events from the Shopify sandbox, which require \"subscribing\" to the specific events.\n\nGiven this change, how are you handling consent mode updates?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ghca3g/shopify_custom_pixel_consent_mode/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Hi, The way I resolved this was to add a javascript click listener to the theme.liquid file that monitored clicks on the cookie consent banner. When a user clicked the banner I published a custom event (https://shopify.dev/docs/api/web-pixels-api/emitting-data#publishing-custom-events) called 'consent\\_update' which I then subscribed to via the Custom Pixel. The Custom Pixel then pushed a dataLayer event that GTM could pick up to run consent as normal.\n\n  \nI'd be happy to explain in more detail if you want to message me directly.",
                "author": "Additional-Low2301",
                "score": 3
            },
            {
                "body": "That sound unreliable. Why listen for clicks when you could listen for the consent change event instead?",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Where are you based?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "u/Objective-Rub9543  I think this is what you're looking for: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)\n\nYou're welcome :)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Italy",
                "author": "Objective-Rub9543",
                "score": 1
            },
            {
                "body": "Okay, so assuming your CMP is implemented through GTM and this is how consent mode I operating then you need to turn off anything to do with cookies and consent in Shopify, because otherwise the customer event will be looking for consent through Shopify and won't be able to get it.",
                "author": "Taca-F",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1730730887.0,
        "title": "Cookies being set to \"Denied\" for Default Global Consent in Google Tag Manager may be impacting my Google Ads conversion count?",
        "author": "trucker-123",
        "id": "1gjfobn",
        "selftext": "Hi.  I am using the Cookie Script consent banner (Cookie Script is a certified Google Ads CMP partner) only in the UK and EU for my website.  This means that for countries outside the UK and EU, the Cookie Script consent banner is not being shown on my website. I installed the Cookie Script consent banners with a tag in GTM (Google Tag Manager).\n\nNow the problem is, in Google Ads, the conversion count column on the Campaign Report is not counting some conversions for customers outside the UK and EU.  In fact, I did a test and I clicked on my own ad in Google outside the UK/EU (so I was not given the consent banner), registered on my own website, and I was not counted as a conversion in Google Ads.\n\nI asked Cookie Script support about this and they recommended in GTM, that I set \"Default Consent (Global)\" for my Cookie Script consent banners settings to \"Granted\", and then under \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"  \n\nI took a screenshot of Cookie Script support's answer, gave it to Google Ads customer support, and then asked Google Ads customer support if I could do this, and they said no, I can't do it, because setting \"Default Consent (Global)\" for my Cookie Script consent banners settings to \"Granted\" could violate customer privacy outside the UK and EU.  I then asked Google Ads support again if setting \"Default Consent (Global)\" being set to \"Denied\" in GTM is causing some of my customers to not being counted as conversions in Google Ads outside the UK and EU, but they repeated the same customer privacy issue and wouldn't answer my question.\n\nSo given that my consent banner only appears for customers inside the UK and EU, but the consent banner won't appear for customers outside the UK and EU, I have a few questions:\n\n1) Does anybody know if \"Default Consent (Global)\" being set to \"Denied\" would cause conversions to not be counted for customers outside the UK and EU, if my consent banner isn't shown to customers outside the UK and EU? (this is the question that Google Ads customer support refuses to answer directly)\n\n2) Is there a way in GTM where I can have the Cookie Script consent banner tag suppressed outside the UK and EU, so that the issue of consent isn't even on the table outside the UK and EU (would this make it legal outside the UK/EU if consent isn't even on the table like the old days?), and would this work with Google Ads conversion counting?  Before the Cookie Script consent banner and before I transitioned to GTM, I was just using the old Google Ads conversion tag script and conversion counting was working fine in Google Ads - I assume with the old Google Ads conversion tag script, the issue of consent isn't even on the table for outside the UK and EU, so I assume nothing is even violated?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gjfobn/cookies_being_set_to_denied_for_default_global/",
        "num_comments": 7,
        "comments": [
            {
                "body": "When you say you registered, do you mean you completed the cookie banner? Without a cookie banner or other consent mechanism, it's odd that the consent would change.\n\nIf you click on the 'container loaded' and 'DOM Ready' events in Tag Assistant, is your consent set to 'Denied' at those stages? If it's granted, this might not be affecting your tracking. Make sure you're clearing your cookies if you've already accepted tracking on the EU version of the site.\n\nNow, I obviously can't tell you this for certain, but it's very unlikely that Google would take action against your account for consent related stuff outside the European Economic Area, which is where they're mostly worried about. And they would most likely warn you before banning you. \n\nI've seen Google Ads threaten accounts in the past for accidentally collecting email addresses in URLs, and they gave the client a couple of months to fix it before they would disable the account. \n\nThat being said, if you were to implement the cookie banner for other regions, you could set it to opt-out rather than opt-in and you'd be fine under the majority of global privacy laws (disclaimer: this is not legal advice). Many users just ignore it completely, so it won't affect your tracking nearly as much as an opt-in banner.\n\nGoogle Support just can't risk recommending something that might violate some country's law, and it's pretty much impossible to know all of them.",
                "author": "winless",
                "score": 3
            },
            {
                "body": "Hey, thanks for your help. It's really appreciated. And thanks for your advice - maybe I'll see if it's possible to put up the consent banner for other regions outside the UK/EU and set it \"opt-out.\" You gave some good information and I'll have to digest the information you gave me over the next few days. Cheers!",
                "author": "trucker-123",
                "score": 3
            },
            {
                "body": "Yes, if your consent banner isn't being shown in some regions, then that could cause conversions not to be counted depending on how it's implemented. \n\nIf it's using Google Consent Mode and sending 'default' to set everything denied but 'update' never happens because the banner doesn't load then that would block cookies. \n\nYou could verify this in preview mode/tag assistant, assuming that you can view the non-EU version of the site. Just check to see if there are values in the Consent tab. \n\nTo your second question, it's theoretically possible but difficult (GTM doesn't inherently know where users are and consent values load before anything else) and I don't think there would be a legal difference between defaulting to granted vs not sending any consent values at all (though I'm not a lawyer).\n\nI'm guessing Google doesn't want to tell you to default to granted while not showing a banner because it would technically violate some privacy laws like CCPA (which requires a way for users to opt out). But whether cookies are granted in GTM just affects tag functionality; you're not using those values as a consent log or anything like that. \n\nI would go with Cookie Script's recommendation, and also consider showing the banner with opt-out defaults in other regions to make sure that you're generally compliant with other privacy laws.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "Hey, thanks for your answer!  I did a test on my own where the consent banner did not appear (because I was outside the UK and EU so I was viewing the non-EU version of the site) using the Google Tag Assistant debugger, and the cookies were all set to \"Denied\" at the beginning, but when I registered, all the cookies were set to \"Granted\" at the very end.  \n\n> I would go with Cookie Script's recommendation\n\nYeah, I wanted to go with Cookie Script's recommendation, but Google Ads support told me not do that (even when I showed them the snapshot of Cookie Script's response) so I probably won't, because it may get my account suspended.",
                "author": "trucker-123",
                "score": 2
            },
            {
                "body": ">When you say you registered, do you mean you completed the cookie banner? Without a cookie banner or other consent mechanism, it's odd that the consent would change.\n\nI meant I did a test registration on my website. I did a test registration just now without the consent banner. I am outside the UK/EU so the consent banner does not pop up for me.  When I did the test now with the Google Tag Assistant debugger, \"Container Loaded\" shows all the cookies start out as \"Denied\" (\"DOM Ready\" shows the same thing - that is all cookies are \"Denied\"):\n\nhttps://i.imgur.com/iLW1gWy.png\n\nAnd by the last \"Consent Update\" event, it shows \"Granted\" for the cookies in under the \"On-page Update\" column:\n\nhttps://i.imgur.com/yCDK6v3.png\n\n\n> Without a cookie banner or other consent mechanism, it's odd that the consent would change.\n\nYeah, it does change as you can see in the photos above, in the Google Tag Assistant debugger, even though the consent banner doesn't come up for me (because I am outside the UK/EU). I also cleared the cookies for my website before I did this test just now in the Google Tag Assistant debugger.",
                "author": "trucker-123",
                "score": 2
            },
            {
                "body": "Odd. I wonder what's causing the consent update. If they're still denied at container loaded then it's going to initially block a lot of tracking (anything that fires on page view), but if there is an update on the same page then any Google tags that were initially blocked should resend hits saying that they now have consent. \n\nMaybe it's some fallback in your CMP if the banner doesn't load.\n\nBasically, if that same thing happens for every non-EU user, then at least for Google tags it should be functionally the same as setting default to granted. \n\nBut for any tags that you manually set up consent checks for (e.g. if you have a Meta pixel), they won't typically know to send an update and the tag would have been blocked.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724397883.0,
        "title": "Consent mode v2",
        "author": "wardogfufu",
        "id": "1ez6mzk",
        "selftext": "I’m a bit unsure about which cookies should be set to “granted” by default when implementing Consent Mode v2.\n\n* 'ad\\_storage'\n* 'ad\\_user\\_data'\n* 'ad\\_personalization'\n* 'analytics\\_storage'\n* 'personalization\\_storage'\n* 'functionality\\_storage'\n* 'security\\_storage'\n\nAny help would be awesome! Thanks:)",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ez6mzk/consent_mode_v2/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Everything should be \"denied\" by default.",
                "author": "Low_Inspection6571",
                "score": 3
            },
            {
                "body": "Got it—makes sense why `ad_user_data` and `ad_personalization` usually cover most bases.  \nAbout `functionality_storage` and `security_storage`, it sounds like keeping them set to \"granted\" by default is usually fine, right?",
                "author": "wardogfufu",
                "score": 3
            },
            {
                "body": "If you want things to \"look\" correct, set those two \"essential\" categories to granted, but it is unlikely to make any difference because site security and functionality is not (in my experience) managed by tags in GTM.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Realistically, you only need to worry about analytics\\_storage and ad\\_storage. ad\\_user\\_data and ad\\_personalization tend to be set to the same state as ad\\_storage.\n\nI've gone through dozens of Consent Mode projects and I have yet to find a client who has a configuration that would involve any of the other Consent Mode categories.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This is a misconception. It highly depends on what you have on your privacy policy and how the consent is implemented on the website.\n\nThey are only set to 'granted' because no built-in tag uses it and people don't normally use those to configure something. Otherwise, what's the point on having those options if they were to be always set to 'granted'. \n\nJust because some guide follows it doesn't mean you should be following it blindly. Most of the guides out there just focus on analytics & advertising.\n\n[https://i.postimg.cc/RCY8X8H2/image.png](https://i.postimg.cc/RCY8X8H2/image.png) on amazon.\n\n[https://cookie-script.com/knowledge-base/kb-functionality-cookies](https://cookie-script.com/knowledge-base/kb-functionality-cookies)\n\n[https://i.postimg.cc/WbWMGLqJ/image.png](https://i.postimg.cc/WbWMGLqJ/image.png) on cookie-script.",
                "author": "Low_Inspection6571",
                "score": 1
            },
            {
                "body": "makes sense! thanks:)",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "In general you are right, but there is nothing wrong with GTM loading these two categories of tags in some cases (especially \"functional\" ones).",
                "author": "NetWitcher",
                "score": 1
            },
            {
                "body": "I've gone through dozens of implementeations and a dozen more fixes of failed implementations and have yet to come across any requirement for a tag to be controlled by security\\_storage. I've seen one tag for one 3rd-party platform that you might argue would be best suited to be controlled by functionality\\_storage, but the documentation for the platform was less than clear about what data they collected and how it was used, so in the end ad\\_storage was still the most appropriate option.\n\nSetting security\\_storage to granted is purely for show. Users should not be given the option to opt out of that category, which de facto makes it \"necessary\" or \"essential\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "You’re right and there definitely are 3rd-party services that I’ve seen deployed in GTM that are functional.\n\nOne example is accessibe, which definitely adds functionality, but arguably is also necessary or essential.\n\nThat’s is what tends to happen is something is either essential, or it’s used for analytics or it’s marketing. Anything functional or security is also deemed as essential, so there’s no option in the cookie banner to individually switch those off and thus no benefit to mapping them to the relevant CoMo parameters.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "You're correct, but they provide an improved user experience without sharing information with third parties and ensure good functionality and UX. \n\nYou can have them disabled, but I'd rather not have visitors leave the site because the login doesn't work, they can't leave comments, or anything else that might not work.\n\nThat's why I said they should be enabled, not that they must be enabled.",
                "author": "zenith66",
                "score": 0
            },
            {
                "body": "wrong, functionality and storage should be granted.",
                "author": "zenith66",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1729281358.0,
        "title": "Privacy and Consent Experts: Does Anyone Know The Recommended Consent Classification for Common Pixels in Google Tag Manager?",
        "author": "RoastPotatoSandwich",
        "id": "1g6r5j0",
        "selftext": "I'm currently updating consent settings for all the ad tracking pixels in Google Tag Manager and need advice on the best classifications. I’m using common pixel types like Meta, Bing, TikTok, and Google, and I'd like to ensure they comply with GDPR, CCPA and other privacy standards. The consent categories I’m considering are:\n\n* Ads\n* Analytics\n* Functionality\n* Personalization\n* Security\n\nHere are the specific tags I'm working with:\n\n* Meta Base Pixel\n* Taboola Base Pixel\n* TikTok Base Pixel\n* Bing Base Pixel\n* Google Conversion Linker\n* Meta Lead Conversion\n* Bing Lead Conversion\n* Google Ads Purchase\n\nDoes anyone know of a comprehensive guide or have suggestions on the best classification for each?\n\nBy default these are classed as Ad tags, but I could argue they are also all Personalisation and Analytics tags. It would be useful if there was a guide online that gave recommendations on classifications.\n\nGA4 is a tricky one, because It's an analytics tag, but if you're importing data into Google Ads or extracting data to Big Query for other purposes it could be an ad tag.\n\nAny tips or best practices you’ve found while handling similar setups?",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g6r5j0/privacy_and_consent_experts_does_anyone_know_the/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Not to be *that* person, but this is definitely a conversation you’d want to have with your legal team / counsel. If you’re in the US each state has different policies and some have zero policies, plus all the US policies differ from GDPR legislation. \n\nYour legal counsel can give you feedback on how your brand needs / wants to handle consent - typically it would coincide with user choices on your sites cookie banner. Your CMP partner can typically provide guidance on the category of certain tags as well.",
                "author": "Gullible_Attitude_20",
                "score": 7
            },
            {
                "body": "All of the solutions in your list fall under the \"Ads\" classification by default. You can of course argue that some of them fall under \"Analytics\" and \"Personalisation\" as well but in that case you would need consent for all attached categories in order to use them.\n\n\n>GA4 is a tricky one, because It's an analytics tag, but if you're importing data into Google Ads or extracting data to Big Query for other purposes it could be an ad tag.\n\nIt's not tricky if you've properly implemented consent mode. If the user consents to \"Analytics\" but nothing else, you should have configured GA4 to redact all ads data and personalisation signals. If you've done that then it doesn't matter that you've connected GA with Google Ads since consent signals will block data sharing between the two platforms (if you trust Google of course).\n\n\nAdditionally I'd like to direct to the comment by /u/Gullible_Attitude_20. Consent classifications are definitely something that should be handled by the client's legal department and not by guesswork and other people's recommendations.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Thank you, excellent feedback.",
                "author": "RoastPotatoSandwich",
                "score": 2
            },
            {
                "body": "Thanks, this was very useful.",
                "author": "RoastPotatoSandwich",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "For anything Google, go with Google's own built-in, and if you are going with basic GCM then you simply need to re-add them as additional checks.\n\nAs for others, like the other posters have said I'd work in this with your legal team, but where I am we match it with the CMS category, so it's pretty much ad_storage for everything else except behaviour stuff like Hotjar which is analytics_storage.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Do you have a legal team that can work on this and sign off?",
                "author": "mar1_jj",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1725937662.0,
        "title": "Google Tag Manager: consent mode.",
        "author": "Brilliant-Expert-328",
        "id": "1fd85w7",
        "selftext": "Hi everyone. Hope you are having a nice day.\n\nI can't get tag manager to work with consent mode. It's frustrating.\n\nI have a Google tag set up already but I cannot get it to work with one of the crm tools that Google says you can use. I've tried about 5 or 6 of them. I must be doing something wrong. Could anyone give me some tips or help? I'd appreciate it as I am just wasting time. Have a good one and thanks to anyone who can help. \n\n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fd85w7/google_tag_manager_consent_mode/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Which Consent Management platform do you want to use? If it’s Cookie yes or cookie bot or any other cmp you can easily find the template on Google tag manager. After adding the template to your gtm container you have to create a tag using that template and put the cmp's unique code here. You will find that on the script provided by the consent management platform. Note: As you're setting this up from google tag manager so don’t put that script to the header. Then trigger the tag to consent initialization. Then configure consent settings,  for google you can choose no additional consent is required cause google tags automatically collects the data for other platforms you have to choose specific consents. Let me know if that helps",
                "author": "analyst_bappy",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yeah second that cookie yes is easy to implement",
                "author": "FirstPlaceSEO",
                "score": 1
            },
            {
                "body": "There is a couple of ways to do this. \n\nI think something to look at might be trigger groups (if consent a GTMweb template and it can fire an event), once consent is provided via the GTMweb template (or howevers), then use the trigger group to fire the actual event.\n\n  \nlike others have said, hard to say without knowing the CMP tbh.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "What isn’t working? There are some things that consent mode does that can easily be mistaken for things not working properly.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Listen to this person (full disclosure, that's my main Reddit account).\n\nI've gone through dozens of CMP implementation projects and uncountable Consent Mode projects on top of that.\n\nIf you're wondering why some tags are still firing without consent when you're looking at Tag Assistant, that's normal, so long as the tags are related to a Google platform. GA4 Event, Conversion Linker, Floodlights, Google Ads... they will all still fire without consent.\n\nYou can check this in Tag Assistant, but in reality it is best to jump into Chrome dev tools to have a look in the Network tab.\n\nFor GA4, filter the Network tab data with \"collect?v=2\" (or your GA4 measurement ID. Click on one of the hits. Click on \"Payload\". Look for the **gcs** parameter.\n\nPrior to granting consent, users in the UK and EU should not be tracked and the value of the **gcs** parameter should be **G100**\n\nAs soon as the user grants full consent, the value of the gcs parameter should be **G111**.\n\nI can get into so much more detail about this that you might want me to just not... but shout if you need more help.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thank you so much. It's working like you described. However the following situation is not really clear to me. Could you explain that for me please?\n\nSituation example (user has given full consent already)\n\n* The page is loaded and I can see that the gcs value = G111 in the network payload\n* When the user changes the consent to 'deny all', I don't see a new network payload with the value G100 (there's no page refresh happening)\n* However when the user switches back to 'accept all' there is a new network payload with the value G111\n\nIs this the correct behaviour? Is it true that the G100 won't get a new payload after denying the cookies?\n\nAnd as my final question. I have 1 Google Tag that is firing on initialisation, then the same Google Tag that is actually sending the send\\_page\\_view = true set for all pages.\n\n* Do I need to specify send\\_page\\_view = false for the first Google Tag?\n* Do I need to specify send\\_page\\_view = true for the all pages one?\n* Does the Google Tag set for all pages need any additional consent settings? Or can I just set it to 'No additional consent needed'?\n\nThanks in advance!",
                "author": "Maikelano",
                "score": 1
            },
            {
                "body": "Not having another network hit when a user changes consent from denied to allowed (or vice-versa) is fairly normal. I grant you, it does seem odd. What I surmise is that Google have decided it's not needed, because the next time the user does something that causes data to be sent to GA4 will mean the gcs parameter is updated to the correct value.\n\nIf it's a navigation action, you'll see a \\`user\\_engagement\\` event with the updated value for gcs.\n\n*This changes if you implement server-side GTM!* i.e. if you wonder why your GA4 network hits look different to those of some other site, it might be because they are using sGTM.\n\nYou don't need a second Google tag. You only need one, fired on initialization and with send\\_page\\_view set to false.\n\nFor measuring page views, create a GA4 Event tag, the event name will be page\\_view and you fire that on all pages with an All Pages Page View trigger.\n\nAssuming you're OK with the Consent Mode modelling - i.e. gcs=G100 / \"cookieless pings\", then you don't need to add additional consent requirements to Google tags (or GA4 Event tags, Conversion Linker etc). If you wanted to absolutely block the tags so that no data at all was being sent to Google without consent, you could add more consent requirements and that would cause the tags to stop firing.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thank you for taking your time to respond, this is really useful!",
                "author": "Maikelano",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734516442.0,
        "title": "A tag read consent state before a default was set intermittent error. - GA4 form submission tag, using CookieYes CMP",
        "author": "ben_bgtDigital",
        "id": "1hgyiqe",
        "selftext": "Hi, I have a container that is using CookieYes CMP, and I get an intermittent error when the GA4 event tag for form submission fires. 'A tag read consent state before a default was set'As mentioned, this doesn't happen every time.  \n  \nCan anyone shed some light on this? Not sure if this is a CookieYes / CMP issue or something different. I took this container over with most of this in place, but can verify that the basics are set up just fine and mirroring other setups I've done.  \n  \nScreenshot link here: [https://loom.com/i/72e6c5df78d4414382535e2688e7a6cb](https://loom.com/i/72e6c5df78d4414382535e2688e7a6cb)  \nThanks",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hgyiqe/a_tag_read_consent_state_before_a_default_was_set/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Hello from CookieYes!\n\nWe’re happy to look into this for you. Could you please share the details with us?\n\nIt seems you’re already in touch with our support team. You can simply reply to the existing thread with the details, and we’ll work on resolving this for you right away.",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "Great, doing that now thanks",
                "author": "ben_bgtDigital",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1701013026.0,
        "title": "Struggling to get OneTrust Consent Mode To Work With Google Tags",
        "author": "Key-Mountain-3616",
        "id": "184dbcq",
        "selftext": "Hi folks, I've been trying to implement consent mode with OneTrust & GTM, but running into a few issues.\n\n**My setup is as follows**:\n\n1. Tags set up in GTM (UA, GA4, Google Ads, Bing, Meta)\n2. Triggers set up via page view URL on all relevant tags. conversion actions etc\n3. Consent mode enabled in GTM and tags configured with 'no additional consent required'\n4. Consent mode enabled in OneTrust & Auto blocking turned off.\n5. OneTrust script is hardcoded to the site rather than being set up in GTM, and the OneTrust script is the first one that loads up on my site. We are not using a CMP Template.\n\nFurther info:\n\n**I've added this script before GTM code on my site head:**\n\n    <script>\n  // Define dataLayer and the gtag function.\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n\n  // Default ad_storage to 'denied'.\n  gtag('consent', 'default', {\n    'ad_storage': 'denied'\n  });\n</script>\n\n**And added this to the body:** \n\n    <script>\n  function consentGranted() {\n    gtag('consent', 'update', {\n      'ad_storage': 'granted'\n    });\n  }\n</script>\n\n**Further Info**\n\nIn preview mode, I can see my GTM tags fire, but in the consent section in GTM preview. Ad\\_storage is set to denied as expected for default.\n\nOnce I click on 'accept all' on my site's cookie banner, the 'ad\\_storage' is still denied, meaning the user consent is not updating on GTM.\n\nOn the network tab in chrome, I can see GSC: 100, no matter if consent is given or not, this does not change to GCS: 111 which would show 'consent granted'\n\nWhat am I doing wrong? How do I get this to work properly?\n\nThe odd thing is, even though GTM says consent denied, after accepting cookies, I can see a pageview on UA, meaning that the cookie banner is working as it should, but why is it the case that GTM say's its not granted?\n\nBased on what I'm seeing in GTM, would this mean that no conversions would this mean that no conversions would be reported in Google Ads? And is it true that If you don't see any GCS parameter in the network console, this means that consent mode is not configured? The fact that I can see parameters means consent mode is working somewhat?\n\nThe reason I ask this is we had OneTrust set up before using GTM tags, as we had old gtags on our site and although conversions were still being reported in GA4 & UA, we had 0 conversions coming through in Google ads as consent was not configured at the time. Based on this current set up, if all traffic is being set to denied, would Google ads just only show modelled conversions?\n\nWhat would be the cause of the issues we're seeing? What is the perfect way to set up consent mode?\n\nI would greatly appreciate any feedback on this matter. \n\nThanks!",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/184dbcq/struggling_to_get_onetrust_consent_mode_to_work/",
        "num_comments": 28,
        "comments": [
            {
                "body": "This is my area of expertise. It’s early and I haven’t had any coffee, but at first glance this sounds like Consent Mode has not been switched on inside OneTrust. Or, if it has been switched on then the OneTrust config needs to be published to make the change live.\n\nI’ll read your post a bit more carefully after I’m properly awake.\n\nProperly awake edit:\n\nYou say you have CoMo switched on in OneTrust, but can you confirm you've re-published the OneTrust script afterward? This is exactly what a client of mine recently forgot to do and ended up with exactly what you're seeing.\n\nIt might not be 100% criticial, but I would ensure your scripts are in this order:-\n\n1. The Consent Mode \"default\" script. *Please also add* `wait_for_update: 500` *as the final line in that script.*\n2. Any existing data layer pushes for e.g. global variables (you might not have this at all, it's not required)\n3. GTM\n4. OneTrust\n\nI'm more inclined to rely on GTM being able to pick up all of the events OneTrust pushes to the data layer if GTM loads before OneTrust does.\n\nGoogle native tags firing prior to consent / with consent denied is entirely normal with Google Consent Mode. Once it's working and you see the 'update' that sets gcs=G111, look in the network tab and you'll see UA and GA4 both re-sending the previous hit (where gcs was G100) with some subtle indicators to the platform about why the hit was sent i.e. it's not a duplicatation.\n\nYour non-Google tags should not be firing from a standard Initialization, All Pages, DOM Ready or Window Loaded. Facebook, Hotjar, TikTok etc should all move to firing on the OneTrustGroupsUpdated trigger.\n\n&#x200B;\n\nEven **more** awake edit:\n\nI'd missed the part where you added a CoMo update script to the <body>. You should remove that. OneTrust will take care of issuing the correct CoMo update command.\n\nEven with everything else  working as expected, by pushing ad\\_storage: \"granted\" in the update, you would defaulting all users to gcs=G110 without their consent, which is also not enough consent for UA or GA4 to fire (both ad\\_storage and analytics\\_storage must be granted).\n\nYou'll also be interfering with OneTrust's own issuance of the update command, which it does immediately prior to pushing OneTrustGroupsUpdated to the data layer.\n\n&#x200B;\n\nA mostly good example of a working implementation: https://www.magnet.co.uk/",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "I do have Consent Mode 'turned on' inside OneTrust. However OneTrust does not appear reliable with this, and using the tag templates from 8-bit Sheep seems the best route.",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "You're going to need to hire someone to check it out. \n\nUpwork probably has someone that's good at OT",
                "author": null,
                "score": 2
            },
            {
                "body": "Here is my OneTrust implementation \n\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "Interesting. Getting OneTrust implemented purely from GTM can be a challenge. Thanks for sharing.\n\nWorth pointing out that OneTrust can take responsibility for the Google Consent Mode \"update\" command, which I prefer wherever possible. I've used Simo's tag template for Google Consent Mode implementations, but only as a workaround for when there's no other way.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Just do a job search for onetrust\nLook for the guy with all the certifications. \nThere is only one.",
                "author": null,
                "score": 2
            },
            {
                "body": "I mean... I work in that field but Im not on Upwork or Fiverr.  I can give you my company's website if you want but our packages is better fitted for businesses that has many more things to get done. Such as websites, online marketing (Google/Microsoft Ads), social media management, etc",
                "author": "Apart-One4133",
                "score": 2
            },
            {
                "body": "Your website doesn't have any consent management and neither do the first two of your clients I looked at. The third client had a cookie banner, but was tracking me before I could opt-in.\n\nSorry, but that's not a good portforlio example when we're talking about consent management.\n\nIf you or any of your clients want help with implementing a cookie banner and eiher basic or advanced Google Consent Mode, I'm more than happy to help on a priced outcome basis.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "u/DigitalStefan your good example website collects data and sends it to Google without my consent, including \\_cid which with consent mode v2 correctly implemented should be empty.",
                "author": "Fresh-Excuse8408",
                "score": 1
            },
            {
                "body": "Thanks, we’ve definitely published the OT script, i’ll try with removing the update command",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "Hi, just wondering if you have any experience of implementing consent mode via Adobe Launch instead of GTM?",
                "author": "Danger_Mouse8",
                "score": 1
            },
            {
                "body": "If anyone does find someone on UpWork (or elsewhere) who has a good understanding of consent management, please let me know as well!\n\nSeems to be a rare skill.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thanks all for your comments. Upon further testing, I’ve noticed that my tags don’t fire at all unless consent is given. On the gtm preview it can’t pick up the tag unless i click on accept all cookies. \n\nThis is testing after removing cookies and then testing again… \n\nScenario: land on site, click accept all cookies, tags fire, but consent state denied\n\nScenario 2: land on site, don’t accept cookies, nothing being shown in gtm preview. \n\nI’m getting really confused about what’s going on",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "Note the value of `cid` and then either refresh the page or navigate to a new page if it lets you.\n\nCoMo V1 and V2 *should* randomise the client ID on each load until consent is granted. To my knowledge it is not supposed to be empty, but I’m happy to be corrected on this.\n\nYou should also see gcs=“G100” until consent is granted.\n\nEDIT: I should mention I pushed an update to their GTM this morning (prior to your post) and they've also recently updated their OneTrust script because it was sequencing data layer events incorrectly, but it should all be perfect now.\n\nI've just checked and `cid` is indeed being randomised and gcs=\"G100\", which is CoMo working as intended.\n\nThe context for why I remember this randomisation thing for `cid` is that for SPA's you're expected to take care of this randomisation yourself for virtual pageviews.\n\nFinal edit: Thankyou for taking the time to create an account to comment on my post, B.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I don't. You might have some luck in /r/adobeanalytics maybe. I don't see a specific Adobe Launch subreddit.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "sounds like onetrust is configured to use the restrictive / opt-out until opted in GDPR template. if your audience is the EU then that is the way it should behave. if not then you may want to look at configuring in the onetrust admin console a different onetrust content template that is appropriate for the location of your audience.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Here's a sneak peek of /r/AdobeAnalytics using the [top posts](https://np.reddit.com/r/AdobeAnalytics/top/?sort=top&t=year) of the year!\n\n\\#1: [Does Page load time affect Conversion? — Analysis](https://np.reddit.com/r/AdobeAnalytics/comments/13fcdla/does_page_load_time_affect_conversion_analysis/)  \n\\#2: [How to find conversion rate from a particular page?](https://np.reddit.com/r/AdobeAnalytics/comments/16lsd39/how_to_find_conversion_rate_from_a_particular_page/)  \n\\#3: [Is there a course or courses that covers start to finish implementation?](https://np.reddit.com/r/AdobeAnalytics/comments/17ymb52/is_there_a_course_or_courses_that_covers_start_to/)\n\n----\n^^I'm ^^a ^^bot, ^^beep ^^boop ^^| ^^Downvote ^^to ^^remove ^^| ^^[Contact](https://www.reddit.com/message/compose/?to=sneakpeekbot) ^^| ^^[Info](https://np.reddit.com/r/sneakpeekbot/) ^^| ^^[Opt-out](https://np.reddit.com/r/sneakpeekbot/comments/o8wk1r/blacklist_ix/) ^^| ^^[GitHub](https://github.com/ghnr/sneakpeekbot)",
                "author": "sneakpeekbot",
                "score": 1
            },
            {
                "body": "I'd forgotten OneTrust certs existed.\n\nNot sure if those certs actually cover \"get OneTrust working perfectly with GTM\", but that is still interesting. Thanks.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I work in that field :)\n\nI'm the only full-time employee in our company that knows how to \"do\" consent management. We work with some regular freelancers who also have the knowledge, but it's a challenge to find people with this niche.\n\nAlways looking for more freelancers.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I'd maybe reach out to OneTrust support, because I've worked with a number of clients and it has been exceptionally reliable. We had one instance where the client published the script after switching Consent Mode on and it caused odd behaviour, but OneTrust support stepped in and resolved it.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I understand, but isn’t the google tag supposed to fire anyway but under the GCS:100 parameter, and change to GCS:111 once consent is given. It’s not doing that at all",
                "author": "Key-Mountain-3616",
                "score": 1
            },
            {
                "body": "I would take a look. \nPretty sure the freelancer i am thinking of is also a GTM specialist. But it's been awhile since I've checked.",
                "author": null,
                "score": 1
            },
            {
                "body": "Alright our Website is Racedesign . ca (Although we are currently rebranding everything with a new website but that doesnt matter much )  Add us to your list of freelancers and we'll see whats happening going from there.",
                "author": "Apart-One4133",
                "score": 1
            },
            {
                "body": "what consent category have you assigned to your Google Tag? it should be an analytics tag so not firing in accordance with GDPR until opted in",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "We didnt do consent on our current website cause we're building a new one currently. And also keep in mind that we do more than web design so if the client hired us for managing his social media, managing their online marketing or designing an app, then it wouldnt be us that would be in charge of that .\n\nAs far as Im concerned, I do Google Ads campaign but I can certainly relay your point to our web designer and see what he says. Thanks for the heads up !",
                "author": "Apart-One4133",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1729541252.0,
        "title": "Google Consent Mode with BigCommerce Issue",
        "author": "ratatat213",
        "id": "1g8zdsx",
        "selftext": "Hi all,\n\nI am running into an issue where my GAds conversion tag is not firing for purchases in GTM due to the Google Consent Mode error \"A tag read consent state before a default was set\".\n\n  \nTools I am using:\n\n* BigCommerce\n* Google Tag Manager\n\n  \nI am not sure how this could possibly be happening because I only have 2 tags in my container and both are set to \"Window Loaded\" as the trigger. Note: I set it up this way because the Update Consent tag doesn't happen in GTM until after the DOM event has loaded. \n\nThe two tags that I have are the following:\n\n* Conversion Linker\n* Google Ads Conversion Event\n\nThey are both configured with built-in consent checks and \"no additional consent required\". I have no tags that fire before this. So I don't know how a tag could read consent state before a default was set when there are no tags firing before a default or an update was set. \n\nWhen I test a purchase conversion, my GAds tag says \"Still Running\" and I am 99% sure it is because it is a consent mode error \"A tag read consent state before a default was set\". Any clues on to how to fix this?\n\n\n\n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g8zdsx/google_consent_mode_with_bigcommerce_issue/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can set triggers that could fire before the update event, so your base / page_view tags need to have trigger that fire on the update event. For conversion events, this will depend on how and when the conversion takes place.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Dumb question:  but are you sure consent is actually being set? https://chromewebstore.google.com/detail/consent-mode-inspector-by/phpllnjdcoiijcpgcbhlocjgcegjfnhb?hl=en&pli=1",
                "author": "aaronebennett",
                "score": 1
            },
            {
                "body": "Your're having problems because you failed to follow Google's instructions to use the Consent Initialization for setting default and update Consent states:\n\nhttps://support.google.com/tagmanager/answer/10718549\n\nAs long as you do that. AND have values for Default, your error will go away.\n\nAbout the \"update event happening after DOM loaded\" statement:: that's not how it works.  If you use the correct trigger, the update happens before the DOM loads based on user input or cookie value.\n\n The \"no additional checks needed\" selection is not really relevant here...read up on their purpose.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "The conversion happens on a thank-you page. But I can’t fire it until the “Window Loaded” event because the Update configuration is so slow.",
                "author": "ratatat213",
                "score": 1
            },
            {
                "body": "I wasn’t able to select when the consent settings would trigger because that was a native configuration in BigCommerce. However, I was able to get this resolved! \n\nThanks. ",
                "author": "ratatat213",
                "score": 1
            },
            {
                "body": "You are confusing Consent Mode basic with advanced\n\nhttps://support.google.com/google-ads/answer/10000067?hl=en\n\n\nGoogle doesn't hold up events in v2.  It allows the page the load unobstructed while holding onto the conversion then allows that data to flow when it can",
                "author": "Far_Highlight_4334",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1727089236.0,
        "title": "Consent Mode V2- Unassigned Sessions",
        "author": "Gold_Sir_9391",
        "id": "1fnhoet",
        "selftext": "What can be reason (potentially wrong) that Unassigned Sessions increased after implementing Consent Mode V2?\n\n  \n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fnhoet/consent_mode_v2_unassigned_sessions/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Can you provide a screenshot from GA4 showing the source / mediums coming through to Unassigned?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "I think you are making a lot of assumptions here, better first to make sure the data-in is as required by Google's recommendation/schema for default channel groupings before diagnosing it as a system issue.",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Google have finally admitted that this happens and they are suggesting they will release an update that will instead show such traffic as “(unconsented data)”\n\nNo timeline on this.\n\nThere are other reasons this can happen. Deviating even slightly from Google recommendations on when to trigger the Google Tag (should be on Initialization) could cause this.\n\nBest practise is to have a separate page_view event tag and to set send_page_view to false in the Google Tag.\n\nAlso, avoid sending any event before page_view / firing the Google Tag.\n\nGoogle have been working on various attribution issues and there have been multiple updates. One as recently as last month.\n\nStill lots for them to fix.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I had the impression the update for \"unconsented data\" was mainly in relation to gclid, not UTMs. Unless you've opted in to \"redact advertising data\" there is no reason GA shouldn't be able to attribute a landing page correctly based on UTMs.\n\n\n\n\nOn the other hand, in order for GA to get information about a gclid it is required to communicate with Google Ads. If the user does not consent, that connection is broken and attribution is lost. For this reason, the recommended practice by Google is to use manual tagging instead of auto-tagging.\n\n\n\n\n\nBear in mind that I'm specifically talking about landing pages and campaign tracking related to GMP. Attributing a landing page is one thing, stitching together a whole session is another.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Do you have a source for Google admitting this?",
                "author": "workeffortwaste",
                "score": 1
            },
            {
                "body": "Good point. I solve these issues regularly and yes, part of the diagnosis is “have you messed up your attribution in some obvious way?”\n\nLiterally just got done dealing with a utm_medium=Affiliate problem",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I think it’s not one I can share (Google partner programme stuff), but I might be wrong about that. I’ll see if I can dig out the email / link I saw.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1731918116.0,
        "title": "GTM Consent Mode OneTrust",
        "author": "RvdmSmaran",
        "id": "1gu05py",
        "selftext": "Could someone please review the below settings for the for the GTM consent setup and let me know which one is correct? Both setups are using the GTM Consent Configuration (Consent Mode) with the Taneli Salonen template.\n\n# Setup 1:\n\n**Standard consent parameters**\n\n* `analytics_storage`: `{{CM - OneTrust - performance C0002}}`\n* `functionality_storage`: `{{CM - OneTrust - functional C0003}}`\n* `personalization_storage`: `{{CM - OneTrust - targeting C0004}}`\n* `ad_storage`: `{{CM - OneTrust - targeting C0004}}`\n* `security_storage`: `{{CM - OneTrust - necessary C0001}}`\n\n**Consent Mode V2 parameters**\n\n* `ad_user_data`: `{{CM - OneTrust - targeting C0004}}`\n* `ad_personalization`: `{{CM - OneTrust - targeting C0004}}`\n\n# Setup 2:\n\n**Standard consent parameters**\n\n* `analytics_storage`: `{{CT - OneTrust - Analytics Consent C0002}}`\n* `functionality_storage`: `{{CT - OneTrust - Functional Consent C0003}}`\n* `personalization_storage`: `{{CT - OneTrust - Functional Consent C0003}}`\n* `ad_storage`: `{{CT - OneTrust - Advertising Consent C0004}}`\n* `security_storage`: `{{CT - OneTrust - Functional Consent C0003}}`\n\n**Consent Mode V2 parameters**\n\n* `ad_user_data`: `denied`\n* `ad_personalization`: `denied`",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gu05py/gtm_consent_mode_onetrust/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Any reason in particular for choosing OneTrust?",
                "author": "RandomUsername749",
                "score": 2
            },
            {
                "body": "I wondered the same thing.",
                "author": "thatguyinline",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If I'm following what you are trying to accomplish, then set up 1 is correct.\n\nAre you in the EU? Are you using OneTrust's own CMP template in GTM? Have to enable Google Consent Mode in your banner and published this in OneTrust?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "I’m not based in the EU, but I do have traffic coming from there. I’m using a Custom HTML tag in GTM for the OneTrust cookie banner. I’ve enabled Google Consent Mode within the banner and published it in OneTrust.",
                "author": "RvdmSmaran",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719907583.0,
        "title": "Need help setting up Cookies consent for GA4 with GTM",
        "author": "Riccardomanci",
        "id": "1dtginm",
        "selftext": "Hi everyone,\n\nI'm working on website trackings, I need to set up consent mode for cookies, I need to track if users are accepting or declining cookies on my website and tell this information to google analytics with GTM.  \nI'm using a third party service that generates cookies (iubenda).\n\nCan someone help me figure it out what are the steps I should follow? I've been looking for videos explanation but it seems like they all using different methods, and i'm also confused about the new consent mode V2.  \nAny other info is welcome.\n\nThanks in advance!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dtginm/need_help_setting_up_cookies_consent_for_ga4_with/",
        "num_comments": 14,
        "comments": [
            {
                "body": "Generally if there's an existing implementation, it's best to stick with it. Iubenda isn't a bad platform by any means and can neatly integrate with GTM.\n\nMore neatly than Osano! Osano does work fine though. I've got one client that uses it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "The agency who build the website actually implemented Iubenda with all the GDPR requirements, I'm trying to setup everything strictly necessary regarding user activities tracking, the tool I will be using are clarity for heatmaps, Google ads / meta for adv and GA4 for the website activities.\n\nI think I can do all this via Tag Manager, with tags/variables but not sure it this will be enough and if I will find the right way to do it, since every tutorial im watching, have different cookie values and this gives a bit of confusion on the process. (for me cookie values look like this: {\"timestamp\":\"2024-07-02T09:24:22.065Z\",\"version\":\"1.62.0\",\"purposes\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true},\"id\":42743646,\"cons\":{\"rand\":\"bc0a6b\"}}",
                "author": "Riccardomanci",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Here is a GTM Osano implemention \nHave you considered Osano?\nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": ">...I need to track if users are accepting or declining cookies on my website and tell this information to google analytics with GTM.\n\nYou shouldn't try to do this. If you need to understand opt-in versus opt-out rate, Iubenda should be providing that as a report. You should not sent \"user has opted-out\" event data to GA4.\n\nI've worked with Iubenda previously. It was probably a year ago now. I remember it being a fairly good / capable platform. If you are able to share the sie URL here (or DM me if you need to keep that private) I can take a very quick look to see how it is set up and at least then be able to recommend a course of action or get into some details, if needed.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "As a web developer working for a Web Agency I can help with such problems, please DM me",
                "author": "Semboxsrl",
                "score": 1
            },
            {
                "body": "Are you still in need of help?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Yes sure would love to share so you can check it via DM, but my need is to tell Google Analytics 4 when he has the consent to track a user = he accepted the cookie policy / he didn't accept it so I shoudn't track him, does this makes sense?",
                "author": "Riccardomanci",
                "score": 1
            },
            {
                "body": "If you mean \"how do I configure a trigger in GTM to control when my GA4 tags can fire based on Iubenda consent\", then yes I do understand.\n\nIt's something I have done for / with a client previously. It's been a while, so I don't remember which client it was otherwise I'd probably see if I still had access to their GTM to refresh my memory!\n\nUltimately, it can be done by examining the content of the Iubenda consent cookie, but by checking your site I can see if there's a neater solution. Working with cookie values is fine, but sometimes cookies take a fraction of a second too long to have their value set and you end up trying to fire a tag and it fails because the check of the cookie's value is wrong because the cookie wasn't set in time.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724082343.0,
        "title": "Implementing Consent Mode on GTM?",
        "author": "RavenGirl12",
        "id": "1ew556z",
        "selftext": "Hi!\n\nWith Google's decision to stop third party cookies, I was looking into implementing Consent Mode on the website. The way I understand this works is that if a person accepts cookies, data will be tracked. If they reject cookies, some non identifiable data will still be tracked. If they don't interact with the cookie banner, no data will be tracked. How do I implement this consent mode via GTM?\n\nWould really appreciate your help! Thank you!",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ew556z/implementing_consent_mode_on_gtm/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Not directly answering your question, but in case you haven’t seen, Google reversed their decision to deprecate third-party cookies (https://privacysandbox.com/news/privacy-sandbox-update/).",
                "author": "dkzfifty",
                "score": 3
            },
            {
                "body": "[https://www.youtube.com/watch?v=yZjGzfWDc0Y](https://www.youtube.com/watch?v=yZjGzfWDc0Y)   \n[https://youtu.be/WhHn9emIKHI?si=UOnCpSR\\_ZWBJpAF-](https://youtu.be/WhHn9emIKHI?si=UOnCpSR_ZWBJpAF-)\n\n  \nThey both do exactly the same, except that loves data has some general explanations in the first bit.",
                "author": "Few_Gate8607",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How I do it for OneTrust.   \n[https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm](https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "How I do it for Osano.  \n[https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "I saw that many people have shared videos and blogs that should be useful for you. However, if you still need expert assistance, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Are you using wordpress? We finally got complianz working pretty easily. Worth a shot they have decent support also.",
                "author": "lefglag",
                "score": 1
            },
            {
                "body": "Hi, we created a full step by step guide for implementing Consent Mode V2 in Google Tag Manager. [https://taggrs.io/en/consent-mode-server-side-tagging/](https://taggrs.io/en/consent-mode-server-side-tagging/)",
                "author": "TAGGRS_io",
                "score": 1
            },
            {
                "body": "I implemented this on my site using Google Site Kit, WP Consent API (a plugin recommended in Site Kit), and the free version of complianz cookie banner.\n\nBasicaly complianz generates the cmplz\\_functional, cmplz\\_marketing and cmplz\\_preferences cookie choices, and the WP Consent API plugin sets them in the Tag Manager you set in Google Site Kit.   \nThe actions are set automatically (aparently), I tested my setup on some laptops and everything as intended.\n\nI didn't even followed the instructions at 19:54 mark on Leon's video [https://youtu.be/yZjGzfWDc0Y?si=WXBodr2-CwIpWfrW&t=1194](https://youtu.be/yZjGzfWDc0Y?si=WXBodr2-CwIpWfrW&t=1194) and In my case, it worked out of the box like I said earier.\n\nBut if I sugest you watch the whole video to figure out the whats, hows and why it works.\n\nPS: Don't waste your money with the premium services that work on subscriptions for something like this. They simply profit on the lack of information there is out there in this matter. In the \"worst case scenario\", if you want a more premium looking cookie banner, just buy the complianz personal license. (I'm not affiliated with anyone).\n\nif you are good at coding, you could even make your own cookie banner. Or ask GPT to help you out.\n\nGood Luck!",
                "author": "ZmeuraPi",
                "score": 1
            },
            {
                "body": "You can find the software use for Consent Mode in GTM Gallery, you’ll need schema/code from the service provider, if setting it up in GTM there are work arounds for those not opting in.",
                "author": "JoanLockwood",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1735557074.0,
        "title": "page view event in hybrid SPA setup with advanced consent mode",
        "author": "Pretty-Appearance226",
        "id": "1hpl1du",
        "selftext": "Our e-commerce store has a hybrid SPA setup.  True page reloads happen at least when a user visits the website and on the thank you page when a purchase is made. We have advanced consent mode implemented and I’m trying to fix the page_view event for non-Google platforms when a user has not interacted with the cookie banner yet.\n\nIf a user has never been on our webshop then a cookie banner is shown and, since ads cookies aren’t accepted yet, the facebook pageview for example is blocked. If a user then accepts all cookies we would miss out on the first page view. So, I added the cookieScriptUpdate as a trigger too. Now, the users page view event would initially be blocked as it should. Then, after accepting cookies, it would fire the page view event. But this leads to a new problem, if a user had already consented, a page load would result in our custom page view and the cookieScriptUpdate event to fire a page view event, resulting in 2 page views being sent.\n\nI can fix a workaround with custom HTML and CJS triggers and variables but was wondering if someone has a ‘cleaner’ solution.\n\nExample 1:\nUser visits first time > \npage_visit is blocked because no consent is given > \nuser accepts cookie > \npage view is fired with cookieScriptUpdate event\n\nExample 2:\nUser visits and consent is accepted in a previous session > \npage view fires on page_vist > \npage view fires again on cookieScriptUpdate\n\nAlways triggering it on the update statement isn’t possible since it would only show once at multiple pages due to the SPA setup.\n\nThanks in advance!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hpl1du/page_view_event_in_hybrid_spa_setup_with_advanced/",
        "num_comments": 1,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1727975492.0,
        "title": "Google Ads Tags Still Running - Is this due to no consent banner?",
        "author": "PieChartEater",
        "id": "1fvcsv8",
        "selftext": "Google Ads tags are still running.\n\n  \nThe client is US-based and does not have a consent banner. I am not seeing the GCS code in the headers or payload. Instead I just have the GCD parameter of \"13l3l3l3l1l1\", which I believe is signifying unknown/not set-up.\n\n  \nIs this why the tags are still running and enhanced conversions is not being sent?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fvcsv8/google_ads_tags_still_running_is_this_due_to_no/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Does this still apply if the company is only advertising in the US? I thought a banner was not needed? Is adding in consent mode to GTM enough?",
                "author": "PieChartEater",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Got it. So a banner is not needed to run Google Ads campaigns, but Google Consent Mode is needed to track conversions and Enhanced conversions correctly via Google Tag Manager?",
                "author": "PieChartEater",
                "score": 1
            },
            {
                "body": "Go to tag manager, templates, find Simo Ahava's consent mode template, read the guide on his website, put everything to granted all the time and add no additional consent required on Google Ads and GA4 tags.",
                "author": "mar1_jj",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734369025.0,
        "title": "Consent mode v2 and Google purposes (TCF)",
        "author": "DraftGrouchy2732",
        "id": "1hfnxkd",
        "selftext": "Hello,\n\n  \nI realize the mapping taking place between CoMo and TCF purposes exists and is pretty easy to do.\n\nHowever, in the TCF global vendor list, Google doesn't display the fact that they personalize content but asks for that type of consent.\n\n  \nIs it an issue?\n\n  \nThanks ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hfnxkd/consent_mode_v2_and_google_purposes_tcf/",
        "num_comments": 1,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709908169.0,
        "title": "A tag read consent state before a default was set - don't understand why or how to get around it",
        "author": "pongohopper",
        "id": "1b9p9xt",
        "selftext": "I am using CookieYes... the preferred method of firing the tags is to read the values directly from the cookie it sets.  Ie if 'cookieyes-consent' cookie contains 'analytics:yes' then analytics is granted.  I have access to that basically immediately so can fire tags quickly on page load (when the consent initialization event occurs).  I am finding a problem though in a few places and will use the below example to describe it.\n\nI have a third-party tag called 'Example' with additional consent checks for 'analytics\\_storage' setup.  That tag is of type custom html and loads a js script.  At the end of that script I have 'dataLayer.push({'event':'ExampleLoaded'});' to push a DL event so I know it is loaded.\n\nA second tag, 'Example2' of type custom html, loads another script and fires on event 'ExampleLoaded'.  When this tag fires I get 'A tag read consent state before a default was set' showing in Tag Assistant under 'Consent Configuration Status'.  Now, I do not have additional consent settings set for this tag so it fires fine, BUT when I set it for 'analytics\\_storage' required the tag does not fire and is blocked due to consent status.\n\nHow can that be?  It only fires AFTER the first tag loads, which also requires 'analytics\\_storage' and that first tag does not give me this error about reading consent state before a default was set.\n\nBefore someone tells me to remove additional consent for the second tag because it is not needed (it only fires after the first tag was loaded and that tag requires consent) keep in mind this was the most basic example I could give.  I am noticing the same issue elsewhere in a similar manner.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b9p9xt/a_tag_read_consent_state_before_a_default_was_set/",
        "num_comments": 19,
        "comments": [
            {
                "body": "This is very similar to what I changed to the other day.  The difference is I created a trigger for all the different consent categories for true/false.  So say if something needs to fire on analytics I only fire when analytics is true when the cookie\\_consent\\_update event occurs.  If it needs analytics and ads then I fire on analytics true and an exception trigger for ads false... and so on.  The reason I went this direction was if I had a tag set to once per page... if the fire failed due to consent, then the user changed consent, it wouldn't fire again (once per page).  Setting it up this way I ensure the tags will fire successfully when the requirements are met even if the tag is set to once per page.\n\nI also left the Google tags, such as the conversion linker, the way they were as there is no need to change them.\n\nAppreciate the help and clarification... that helped a lot once I figured out the inner workings and the flow of how the consent happens, updates, etc.",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you're firing a tag on Consent Initialization (or Initialization, or Page View), you'll be able to see in preview mode that the order of operations doesn't line up with what you're describing.\n\nYou say you're reading consent state from the CookieYes cookie and using that to fire a tag, but then you say you're using \"additional consent\", which is what you use when Google Consent Mode is implemented.\n\nIf you're using Google Consent Mode, you don't want to fire non-Google tags before there's been a consent mode \"update\" pushed (shows up as one of the \"Consent\" events in tag assistant). If you fire tags prior to the custom event cookie\\_consent\\_update, you risk those tags firing before the consent mode \"update\".\n\nAre you actually using Google Consent Mode? i.e. are you either issuing a consent mode \"default\" via a hardcoded script on site, or are you using the CookieYes GTM tag template to implement CookieYes, which also has the option to initialise Google Consent Mode?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "So why are you adding consent checks to that tag if you don't have to?  And especially if those additional consents cause tag blocking?\n\n\n\nI see a number of irregularities::\n\n>I have access to that basically immediately so can fire tags quickly on page load (when the consent initialization event occurs)\n\n1. No, the consent initialization TRIGGER doesn't happen on page load. It happens way before the page drawing even begins.  That's the whole point of consent initialization.\n2. The Consent Initialization trigger should do one thing, and one thing only: fire an event that establishes the default consent settings for the page.  Reading the Cookies or displaying the banner should be part of the Consent Update process...totally separate from Consent Default.  You seem to be mixing the two.\n3. Custom HTML are some of the last things addressed on a page. [ I'm troubled by the use of Custom HTML here because it doesn't work the way people think it does](https://www.simoahava.com/analytics/custom-html-tag-guide-google-tag-manager/), and it comes with complications.  Get your developers off their asses and have them take care of the Javascript includes...it's not your job.  I'm 99% certain that the Custom HTML is connected to your problem.\n\nPlease don't include additional consent checks if you don't have to.    Please don't remove required consents to get the system to work without the error.\n\nIf you set up your system like the above, you shouldn't have your problem.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "Defaults come from the CookieYes tag in GTM - not hardcoded.  The issue was the actual values never get passed until the cookie\\_consent\\_update event hits (the default is used until that event happens) which is considerably later in the chain on page load.  I do understand what you are saying now, BUT if that is the case why do certain 3rd party tags (aka not Google), where I have set additional consent settings, not throw the same issue in Tag Assistant?\n\nEDIT - and yes, I have set CookieYes to use consent mode in the settings... I don't get why the actual values, if there are any, are not set during the consent initialization - that is the whole point of that event.\n\nEDIT 2 - This is also how they say to do so on their [site](https://www.cookieyes.com/documentation/block-third-party-cookies-with-google-tag-manager-and-cookieyes/).",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Consent Mode status can be updated one of two ways\n\n1. Via a gtag.js call\n2. Via the consent API\n\nThe CookieYes (and other, similar CMP) tag uses the consent API to set the default state.\n\nEither way, consent state is one of those nice and quick, but asynchronous operations, which sets up a situation where if you're not fully disciplined on when you fire your tags you will see inconsistent results from one tag to the next.\n\nThe instructions on their site are not the correct instructions for a Consent Mode environment. They describe what to do when you're not using Consent Mode.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Wrong.  Default values do NOT come from cookies.  You don't understand the meaning of Default consent.  Update values come from either cookies or the consent banner if a cookie was not present.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "You're getting confused because you're seeing inconsistent results from incorrect process.   Everything you need to fix the issues is here in this thread.\n\nGet rid of the Custom HTML first.   It's sloppy technique, and it will bite you.\n\nFrom [Google's documentation](https://developers.google.com/tag-platform/security/guides/consent-debugging#tag-manager_4):\n\n**Caution:** Don't use a custom HTML tag in Tag Manager to call the `gtag consent` command. Instead, set consent states using a template tag that uses the [custom template API](https://developers.google.com/tag-platform/tag-manager/templates/consent-apis).\n\n(note, this might not be the exact command you were using, but the principle applies)",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "From what I am seeing the inconsistencies are from gtm.  Simple logic says that if both tags have the same additional consent and one fires when an event in the first's code happens that I shouldn't get the 'A tag read consent state before a default was set' message on the second and not the first (these are not Google tags either).\n\nI have to laugh sometimes about how Google does things.  They come up with this Consent Initialization event and how you use it to set consent before anything else and yada yada.  In reality, the way consent mode works, it isn't even needed as you need to restructure all your tag firing regardless.  Now, if whatever fired in Consent Initialization was guaranteed to complete before the Initialization event that would make much more sense - as in a default consent state was guaranteed before the next event, but as mentioned everything is asynchronous.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "I was going to say that I'm used to seeing \"a tag read consent state\" from when I was using CookieBot via the tag template, because the CookieBot tag was reding the consent state before setting the defult (I'm assuming, I never checked because it wasn't important).\n\nBut with both CookieYes and OneTrust via their official tag templates, I'm not seeing the same issue.\n\nShort of getting on a screenshare call with you, here's the tagging setup for my test site with CookieYes where I'm not seeing any issues and everything (as far as I know) is set up per best practise.\n\n[https://ctrl.vi/i/qbdctm1Yp](https://ctrl.vi/i/qbdctm1Yp)",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Lmao. 6 month old post. Those mystery pulsing lasers must’ve really messed with your head.  Have a good holiday season this year buddy.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Glad I was of some help!\n\nIn general, I don't like conditional firing of triggers based on consent. It can make life just a little harder when you add more tags or need to do any maintenance.\n\nIf you focus on consent conditions being used to block tags, you have a much happier life. This was true before CoMo became widespread, was adopted by CoMo as the paradigm surrounging built-in versus additional consent and it makes any transition from non-CoMo to CoMo so much easier.\n\nUsing consent conditions in firing triggers is a bad practise arising from more than one of the popular CMP's official \"how to\" guides.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Hi, I'm just using GTM and I'm trying to pass the email into the data layer and am not seeing the 'email' when I troubleshoot (I'm doing this through the CSS selector and a DOM element) any thoughts/help I'm desperately trying to figure this out, and am getting nowhere.",
                "author": "Serious_Category1908",
                "score": 1
            },
            {
                "body": "Thanks u/StefanAtWork this is really useful - my set-up was the same as yours except I was firing the GA4 Config tag upon the cookie state analytics:yes as well - but what you're saying here makes sense.\n\nI was also using additional consent settings to prevent it firing too early, but I will adopt it to fire on Initialisation now instead as per your recommendation.\n\nI also updated my GAW tag and FB Pixel to fire on ads:yes storage granted - so do you recommend that all of these tracking code tags should just be done on Initialisation instead?\n\nAnd I haven't changed any event tags other than to add the additional consent setting.\n\nThanks so much :)\n\nEDIT - Sorry I'm not sure if you and u/DigitalStefan are one and the same?  But I looked at the screenshot again and saw that the FB pixel is actually fired on the ads:yes cookie change\n\nSo my question is, why the GA4 tag is on Initialisation and the pixel on the cookie event, why not both on one or the other?\n\nTo me they follow the same rules - they should fire as early as humanly possible with consent...\n\nI just want to understand before I make any more changes, as every change I make has to be done across about 5 accounts, it's very time consuming 😅\n\nThanks :)",
                "author": "Casey-Marketing",
                "score": 1
            },
            {
                "body": "Oooookay. Well that went very weird very quick. They have hotlines you can call if you need one.\n\nFor the record, the entire ‘issue’ was the way CookieYes behaves. Once I stopped using their events and default consent methods - and did it myself - everything behaved as expected.  I’d suggest being familiar with the entire story (CookieYes in this case) before acting you did. I’m going to go out on a limb and bet that isn’t the first time someone has said that to you.\n\nAgain, have fun with those lasers later this year.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "CSS selectors are my least enjoyable thing to deal with.\n\nAny possibility of finding a friendly web dev who can explicitly grab the email address and create a genuine data layer push event / push to the data layer as a universal variable?\n\ne.g. have a look at the code here: https://www.digitalstefan.com/ec/",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I tend to make an assumption that Google Consent Mode is being used, in which case you can almost pretend that you're not having to worry about consent state when you're defining triggers for Google platform tags (Google Tag, GA4 Event, Floodlight, Conversion Linker etc).\n\nConsent Mode pretty much handles things for you in the background.\n\nNon-Google tags however do not (yet) have any integration with Consent Mode, so e.g. Facebook main pixel tag still needs to be manually managed for consent, e.g. waiting on consent signals from your CMP.\n\nI try to at least use the Additional Consent as the fire / don't fire logic for such 3rd-party tags, because then you have a tidy, presentable Consent Overview report (which is *just about*  copy&pasteable into a spreadsheet) to cover your backside if you get quizzed on \"are we compliant?\").\n\nCMP's have mostly got themselves into a good state of maturity, so you don't have problems like the CMP's \"cookie\\_consent\\_update\" (or equivalent) data layer event being sent prior to Google Consent Mode state being updated - which causes Google tags to behave properly, but 3rd-party tags to not fire on the landing page.\n\nEven as recently as December 2023, this was not reliable. OneTrust managed to mess this up and we had to work around it until they fixed the issue.\n\nI'm rambling a bit. It's a complex topic with plenty of pitfalls and involves a whole lot of me trying to avoid saying \"you do it this way because I've already experienced what happens when you don't\"!\n\n(and yes, DigitalStefan is my non-work account ... usual caveat of \"opinions and statements made on any social media platform are my own and not endorsed by my employer\").",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1731421361.0,
        "title": "Has consent banner implemented in GTM significantly increased the bounce rate of your landing page?",
        "author": "trucker-123",
        "id": "1gpltj5",
        "selftext": "Hi. To make a long story short, I tried to implement a Cookie Script consent banner in GTM (Google Tag Manager) that only appears for customers in the UK and EU. I am finding out that this doesn't work well, because many conversions outside the UK and EU are not being counted in Google Ads (the technical reason is because \"Default Consent (Global)\" being set to \"Denied\" for my Cookie Script GTM tag settings and Google Ads support says it must be set to \"Denied\" after I talked with them).\n\nMy original plan was to only show the consent banner in the UK and EU (and/or other regions where it's mandatory).  But because some conversions outside the UK and EU are not being counted in Google Ads, the only way to address this situation is to show the Cookie Script consent banner to all my customers around the world, and the consent banner also probably needs to cover most of the landing page, to force an \"Accept\" all cookies or \"Reject\" from the customer (hopefully I can get most customers to \"Accept\" the cookies).\n\nNow my questions is, after you put up a consent banner that took up most of the landing page to force an \"Accept\" all cookies or \"Reject\" it from the customers, how was your bounce rate on your landing page? Did the bounce rate on your landing page increase significantly after you put up a consent banner ? Or did the bounce rate only increase slightly and the consent banner didn't stop many customers from browsing your website?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gpltj5/has_consent_banner_implemented_in_gtm/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You do not have to show a banner in many jurisdictions and you can safely set the default to \"granted\" also in many jurisdictions. Google are not exactly consistent in their knowledge or advice on this and also asking them this type of question is borderline asking them for legal advice, which they are not able to provide.\n\nHowever, to answer your question, a consent banner *will* cause some users to bounce. You may never know exactly how many because bounced users will not have given consent for their data to be used in your reports, so GA4 will either receive no data about them or minimal, redacted data. At best, Google Consent Mode might be able to model that data into your reports or you could make some educated guesses based on your BigQuery data (if Google Consent Mode is active).",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "> Google are not exactly consistent in their knowledge or advice on this and also asking them this type of question is borderline asking them for legal advice, which they are not able to provide.\n\nI am worried that Google has some mechanism to detect that the cookies are being set to \"Granted\" for a country/region outside of the UK/EU, especially with changing laws in every country around the world on cookies, and if they detect one infraction on my account down the road, my account could be suspended. \n\n> However, to answer your question, a consent banner will cause some users to bounce. You may never know exactly how many because bounced users will not have given consent for their data to be used in your reports, so GA4 will either receive no data about them or minimal, redacted data. At best, Google Consent Mode might be able to model that data into your reports or you could make some educated guesses based on your BigQuery data (if Google Consent Mode is active).\n\nThanks!   I would imagine that UK & EU users are used to seeing consent banners now so their bounce rate would be low.   But I am not sure if other users around the world, outside of the UK & EU, are used to consent banners now, so their bounce rates could be much higher when they see a consent banner.",
                "author": "trucker-123",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718701060.0,
        "title": "Ecommerce tracking with consent mode v2",
        "author": "Cognitive_catfish",
        "id": "1dim1zu",
        "selftext": "Hello Tag Manager genuises\n\nI recently purchased Complianz and followed their guide to setup Consent mode V2. My earlier tag configuration with consent mode V1 allowed me to create classic ecommerce tracking on my site using a costum event with regex matching like so:\n\nview\\_item|view\\_item\\_list|select\\_item|add\\_to\\_cart|remove\\_from\\_cart|view\\_cart|begin\\_checkout|add\\_payment\\_info|add\\_shipping\\_info|purchase\n\n  \nComplianz's own support team claim, that they currently don't support ecommerce tracking with consent mode V2. But I mean ... Ecommerce tracking is pretty essential. \n\n  \nTwo questions here:\n\n1. Do I even need a custom ecommerce tag to track purchases with consent mode V2?\n\n2. If yes, how can I configure it?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dim1zu/ecommerce_tracking_with_consent_mode_v2/",
        "num_comments": 12,
        "comments": [
            {
                "body": "If complianz is set up right, it will just work. All google tags will obey the consent and update according if it's later grant.",
                "author": "benl5442",
                "score": 2
            },
            {
                "body": "There shouldn't be, but things happen and half the game with implementing good data collection in GTM is guarding against the unknown.\n\n`^(view_item|view_item_list|select_item|add_to_cart|remove_from_cart|view_cart|begin_checkout|add_payment_info|add_shipping_info|purchase)$`\n\n... is the solution because it restricts matches strictly to e.g. \"view\\_item\" and will not match \"view\\_items\"",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Related: that’s not entirely correct regex. It’s not super likely it will cause you a problem, but bear in mind that the regex you’ve shown will match event names like “deselect_item” and “not_a_purchase”",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "You need to use gtm4wp with e-commerce option together with complianz. Use gtm4wp only for datalayer and not to inject GTM id and complianz to inject GTM id with consent mode signals.\n1/ in gtm4wp Settings -> Google Tag Manager -> General, change the Container code ON/OFF setting to Off; as Complianz will now place the gtm script.\n2/ Complianz -> Integrations -> Plugins disable gtm4wp\n3/ Complianz Consent -> Statistics Configuration. You can now enable Consent Mode if you have Premium plan",
                "author": "Fun_Ad_2011",
                "score": 1
            },
            {
                "body": "Hm why would there be a not_a_purchase event?\n\nAnd also, how would you rewrite that regex to make sure it captures those exact events OP is looking for?",
                "author": "Buqly",
                "score": 1
            },
            {
                "body": "Working for me ! \n\nComplianz says that connecting the GTM through complianz is enough but if you want the datalayer then You have to install the GTm4WP an turn on the datalayer and turn off the container ( so complianz can connect to the gtm without duplicated code )",
                "author": "walidono",
                "score": 1
            },
            {
                "body": "Gotcha, thanks!",
                "author": "Buqly",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1731662774.0,
        "title": "Implemented Consent Mode v2 but can't see Page Views on \"Pages and Screens\" report or \"Realtime Pages\" from non consented users.",
        "author": "LillianaVessFanboy",
        "id": "1grsme4",
        "selftext": "Can someone please tell me where this data is supposed to show that is passing \"anonymized\" ?\n\nI will very grateful if someone can explain it. I'm not a data analyst and it's really my first time trying to go so in-depth with this.\n\nAgain i will be very grateful for an explanation from someone.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1grsme4/implemented_consent_mode_v2_but_cant_see_page/",
        "num_comments": 2,
        "comments": [
            {
                "body": "Modelled data is only for key events like purchases: https://support.google.com/analytics/answer/10710245?hl=en",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719590034.0,
        "title": "Firing GA4 tag after modifying consent?",
        "author": "Existing-Delivery417",
        "id": "1dqmyvn",
        "selftext": "My GA4 tag is firing via the \"DOM Ready\" trigger (the user has not yet accepted or denied consent). Shall I fire it again, when the user makes a choice and the consent value is updated? Accepting consent by clicking a button emits an \"shop\\_consent\\_updated\" event. Shall I add this additional trigger to my GA4 tag, or is not necessary?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dqmyvn/firing_ga4_tag_after_modifying_consent/",
        "num_comments": 11,
        "comments": [
            {
                "body": "I thought you answered this for me in another post. Didn't you say that for Google tags, theres a ping update sent that you can only see in the network tab, so no need to do anything. Open up the network tab and search for g111?",
                "author": "benl5442",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you're talking about basic consent management where you either do or do not fire a GA4 tag based on consent, then you should definitely be firing it on \"update\\_consent\"\n\nYou don't say whether \"update\\_consent\" also fires on subsequent pages. This is usually how it works i.e. you rely on \"update\\_consent\" as a replacement for All Pages or DOM Ready.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "And this is why consent stuff is a challenge. OP didn’t mention google consent mode until their most recent reply.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Ouch. That's a not great consent platform then!\n\nOK, you might be able to do this...\n\nTrigger the GA4 Event tag with a custom event`^(gtm.js|update_consent)$` (tick the RegEx box!)\n\nIn theory, measurement will begin at the moment users grant consent and then on every subsequent page load. \\`gtm.js\\` event is (if I remember correctly) the same event that the usual Page View trigger responds to.\n\nEDIT:\n\nIf you really do need it to be `update_consent`and DOM Ready, the event would be `^(gtm.dom|update_consent)$` instead",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Sorry for the confusion. I checked everything again in the GTM debugger and it looks like this:\n\n* on each subpage, the first event is the default setting of almost all consents to DENIED (gtag('consent', 'default'...))\n* if the user makes a selection (or made it before), the next event emitted on each subpage is \"Consent Update\", which modifies the default values ​​to those selected by the user (gtag('consent', 'update'...))\n* additionally, immediately after the user clicks the consent button (accept/deny/custom), the \"shop\\_consent\\_updated\" event is emitted. Unlike the other two, it is emitted once (not on every subpage), only when the button is pressed",
                "author": "Existing-Delivery417",
                "score": 1
            },
            {
                "body": "No worries. You’ve got Google Consent Mode active on site.\n\nI’ve unfortunately run out of metaphorical spoons this evening and I’ve got a weekend full of both work and play, but I will endeavour to come back to you!",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "OK as promised I'm comign back (on my alt account).\n\n`(gtag('consent', 'default'...))` sets up Google Consent Mode. This has some special integration with GTM. This is a good thing, because it neatly abstracts away just about 99% of what your CMP (Consent Management Platform) is doing... i.e. the service that provides the cookie banner.\n\nFor any and all of your Google platform tags, you don't have to worry about what fires when. Fire your page\\_view GA4 events on a Page View trigger and the Google Tag for your GA4 on Initialization (yes, separate the page\\_view event to its own tag and block the Google Tag from sending a page view!).\n\nIt's the non-Google tags that need a bit of special handling, because unless there is a data layer event like `shop_consent_updated` on every page, your life is difficult. If you don't have any non-Google tags (Facebook, Instagram, X, TikTok etc), you don't need to worry about this.\n\nHave a look at the list of events that happen on the *second* page after you grant consent. Are there any data layer events *after* the *second* `Consent` event? Also, check that there is in fact a second `Consent` event. The first should be the 'default' and the second should be 'update'. If you don't see that, you now have enough problems that you should completely ditch the current CMP and replace it with something like CookieBot, CookieYes or OneTrust / CookiePro. All three of those will give you a solid platform to build upon.\n\nIf you do find an event that reliably fires on every page and the event is always after the second `Consent`, *hopefully* it's an event emitted by the CMP and you can use that in your triggers for non-Google tags, although it would still need some regex trickery\n\nFor example, if the event that happens on every page after the Consent event is `cookies`, your trigger would be a Custom Event regex match `^(shop_consent_update|cookies)$`\n\nIf you are able to show screenshots (or by all means DM me some), I'd be happy to get into some more detail.\n\nUltimately, the last step(s) are go into your GTM container settings and activate \"Show Consent Overview Report\" (may not be the exact wording!) and then go into the container, then tags, then click the shield icon top-right. From there you can define which consent(s) each tag requires.\n\nad\\_storage = Marketing consent\n\nanalytics\\_storage = Analytics consent.\n\nGenerally you only need to worry about those two.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "\"update\\_consent\" fires only on a button click (accept/decline/custom settings) by the user.\n\nMy idea was to always fire the GA4 tag (afaik is allowed because without consent the data is anonymized) and fire it one more time when a user updates his consent settings. But I don't know if this second step is necessary.",
                "author": "Existing-Delivery417",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723827337.0,
        "title": "Struggling to get post-consent tags to fire",
        "author": "tallpaullewis",
        "id": "1etty3l",
        "selftext": "I have a \\`Consent Management\\` template and tag run either by a \\`Consent Initialization\\` trigger (for returning users) or a \\`Consent Banner Interaction\\` trigger (for new users). The template uses an \\`updateConsentState\\` function from GTM which does as it says and triggers an \\`Update Consent\\` event. It all works well, I can see the different consent modes updating in the table with no problem. \n\nThis is where I run into a problem. \n\nI have a few custom HTML tags for injecting MS Clarity and other marketing tools. \n\nThey need to fire AFTER the \\`Update Consent\\` event. To me this seems like the most basic of basic things but I have tried:\n\n1. Using the \\`Consent Banner Interaction\\` trigger, but this is too early since the consent is not set\n2. Created a \\`Consent Update\\` trigger in the hope of catching this event, but this never fires (presumably because of the inner workings of the \\`updateConsentState\\` function\n3. Added a timer event which waits 500ms after the variable which changes with the event which triggers the \\`Consent Management\\` template (why you can't put the timer on a trigger!), but this never fires\n4. Using the \\`Fire a tag after X tag\\` which works, but it only fires a single tag, and I have multiple\n   1. so I made a custom tag which fires another trigger which in turn fires my Clarity and other tags (which is really messy and feels out of control)\n5. Used a custom function in my app which exposes a function to push to the dataLayer and so fire a trigger as 2.1 (but this is even worse)\n\n  \nHow tf do you do this? It should be GTM's bread and butter!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1etty3l/struggling_to_get_postconsent_tags_to_fire/",
        "num_comments": 7,
        "comments": [
            {
                "body": "How I do it for OneTrust.   \n[https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm](https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm)",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "How I do it for Osano.  \n[https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "consent.studio has a custom event built-in that fires when a visitor updates their consent or when a new page is visited with prior consent. Maybe that helps?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "**I suspect that you're trying to fire the custom HTML scripts after much of the page has loaded, and that's why it's failing.**\n\n  \n1) Please verify that HTML is not on a site blocklist: [https://stackoverflow.com/questions/76703170/custom-html-tag-not-fired](https://stackoverflow.com/questions/76703170/custom-html-tag-not-fired)\n\n2) Follow the diagnosis here:  \n[https://www.analyticsmania.com/post/tag-in-google-tag-manager-is-not-firing/](https://www.analyticsmania.com/post/tag-in-google-tag-manager-is-not-firing/) \n\n3) You said that you're using a consent template, but the foolish assumption is that you have a banner to go with it, and you're not artificially creating the signals....or are you?  I've done tests without a banner, and it's really difficult to approximate one.  Just thought i would eliminate this possibility.\n\n4) Why do the custom HTML tags containing the marketing tools need to fire after Consent Update?   This is very unusual practice.   Why are you trying to delay the firing of the HTML tags?\n\nIf you tried to trigger the HTML tags with the various actions described, it's no wonder they failed:  it's likely all of these attempted to inject a script long after the page was finished.\n\nRead up on that HTML tag because you're in for a few surprises: it doesn't work like you think.\n\nYou did an incredible job of trying to diagnose yourself before posting on Reddit.  Love how you tried all those things.",
                "author": "Firm_Sense9730",
                "score": 1
            },
            {
                "body": "Works for me. And I run Downnotifier so I know it is up. And works based on recorded traffic in Google Analytics. I cannot debug your Internet connectivity issues with so little information.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "I do not need to \"do better research\" to debug your Internet connectivity considerations. That should be your responsibility.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1726291475.0,
        "title": "GTM + Cookiebot - events like page_view are not tracked even anonymously when consent is denied",
        "author": "2208Abhinav",
        "id": "1fgez66",
        "selftext": "I have added Cookiebot consent banner to my website that is using GTM. Based on what I have read, even when consent is denied, GTM tracks events like page\\_view anonymously. But that doesn't seem to work with my website.\n\nAny help on this will be really appreciated. I am relatively new to GTM and all this stuff. Thanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fgez66/gtm_cookiebot_events_like_page_view_are_not/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you share the article that says pageview are tracked when consent is denied?",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thanks for the reply. I am talking about the anonymous tracking like mentioned in this article: [https://infotrust.com/articles/intro-to-cookieless-anonymous-tracking-in-google-analytics/](https://infotrust.com/articles/intro-to-cookieless-anonymous-tracking-in-google-analytics/)",
                "author": "2208Abhinav",
                "score": 1
            },
            {
                "body": "It is very interesting that the article does not address how a CMP works. A CMP is dropping its own UUID first party cookies. OneTrust uses an OptanonConsent consentId. Osano uses an osano_consentmanager_uuid. So even though this article basically tells you how to 'scramble' your web analytics data, the CMP still knows it is you, and still tells GTM to honor the GCM state of 'denied'. I am not impressed with the article. ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Think about it like this. The article is kind of like saying 'rain will make your clothes wet so here is how to take off your clothes'. But you are already carrying around a CMP 'umbrella' called Cookiebot so taking off your clothes is pointless.",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709717306.0,
        "title": "Does consent mode V2 work?",
        "author": "zombiekop",
        "id": "1b7vl0w",
        "selftext": "Consent mode V2 came into effect today, but I see that data is still being pushed to almost all of my customers. Even though they have not yet switched to consent mode V2. What is your experience?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b7vl0w/does_consent_mode_v2_work/",
        "num_comments": 15,
        "comments": [
            {
                "body": "I'm as lost as you are with all the changes Google has been making lately.\n\nWe implemented it last month and our data fluctuates a lot, including fewer sessions than the previous period (I'm checking the last three months, since January). On the other hand, our conversions have improved, so I guess It's not that bad... \n\nWhat bothers me is, if we can trust the sessions/users' data because If so, we're dropping big time with no reasonable reason (I've checked our Search Console data as well).",
                "author": "Green_Matcha89",
                "score": 3
            },
            {
                "body": "V2 is specifically about collecting data for audience building or remarketing with Google’s advertising services, so data will still be sent to GA4 even without it.",
                "author": "moonsal71",
                "score": 2
            },
            {
                "body": "The new parameters that form the V2 aspect of CoMo V2 are not \"do or don't collect data\" signals, they are signals to e.g. GA4, gAds of \"you've got the data, but you are / are not permitted to use the data for specific purposes\".\n\nIf you've done no work toward upgrading to V2, data will be received by e.g. GA4 as if ad\\_storage and ad\\_user\\_data were the same value, but ad\\_personalization will default to denied.\n\nWhat does that mean? No more remarketing data for EU users.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Is it not the case that in consent mode V2 ad storage, user data, ad personalization and analytics storage are all denied?",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "CoMo V1 consists of `ad_storage` and `analytics_storage` (plus others, but these are the two key categories).\n\nCoMo V2 adds `ad_user_data` and `ad_personalization`.\n\nWhether they are denied or granted is entirely up to how you have mapped the categories in your cookie banner (or more accurate to say: to the categories in your consent management platform).\n\nGoogle have stated that if you remain with a V1 setup, they will consider that `ad_storage` and `ad_user_data` are the same thing, but unless you map `ad_personalization` and include that in your configuration, it will be considered as denied.\n\nWhat seems to be standard practice (so far!) is to map \"marketing\" consent to `ad_storage`, `ad_user_data` and `ad_personalization`, so when it's denied all are denied and when it's granted all are granted.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I’m sure there’s going to be a grace period even with this deadline. We’ve spent the last few weeks moving people onto cookie script as it just makes things so much easier. Then we’ll be monitoring everything from now on. \n\nFrom my understanding, it’s all about aggregated modelling using ‘cookieless pings’. Whatever the fuck that means. \n\nIt’s only going to get tougher, but this is googles way of trying to track things without consent. \n\nI still hate it..",
                "author": "jdanes52",
                "score": 1
            },
            {
                "body": "Consent management is difficult to get perfectly right and exceptionally easy to implement imperfectly.\n\nSource: It's keeping me in a job and has seen me through successive promotions.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "So if you don’t give a shit about that you’re fine?",
                "author": "CO_PC_Parts",
                "score": 1
            },
            {
                "body": "You can still remarket based on event, lpv, add to cart etc.",
                "author": "milosivosevic",
                "score": 1
            },
            {
                "body": "I'm not expecting a grace period. The law that backs the DMA applied yeseterday. Google will have complied. They've been warning everyone for months when it will happen. This is not like Google's previous \"UA is going away, move to GA4\" where if you ignored them they moved you to GA4 without your involvement.\n\nThis is \"if you don't adopt Como V2 and you collect data used for remarketing in Europe, you will lose the ability to build those remarketing audiences\".\n\nGoogle were clear on this. \"Don't ignore this. If you ignore this, we won't help you get your data back. You need to include the new consent signals in every method of data collection, whether that's web pixel tracking in GA4, measurement protocol, server-side, offline conversions... everything\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "For now. Expect Google to get stern about user privacy at some point this year.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Next week will be the real \"find out\" phase of this process, once everyone gets a look at their regular reports.\n\nI predict a great wailing and gnashing of teeth.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "ah okay I understand. Thank you very much",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716050709.0,
        "title": "CMP for a SPA - Google Consent Mode v2",
        "author": "puk789",
        "id": "1cv1gt1",
        "selftext": "After multiple implementations of Consent Mode v2 via GTM (and having tried multiple different CMPs), I'm finding that it's quite a pain in the ass to work with SPAs (Single Page Apps).\n\nThe CMPs often don't send any data layer push when user chooses to change their consent after initially having accepted (e.g. for only a specific cookie category, not all), making it really difficult to update the consent in real time using GTM, and what's worse, potentially leading to non-compliance. \n\nOr, other CMPs don't work with SPAs in a sense that the Privacy trigger (the button with which user can change preferences that's meant to be visible at all times) disappears when navigating to a different page (again, hello non-compliance). And I'm not talking any CMPs here... but the big names like CookieBot or CookieScript.\n\nI have a skilled developer friend who has built his own cookie tool that can communicate the consent signals to Google on a regular website as well as SPAs and we're playing with an idea to build a simple CMP that would be easy to work with using GTM (would provide all the necessary data layer pushes, etc.) and would support not only regular pages, but also SPAs.\n\nWould there be anyone interested in helping us beta test when ready and potentially having a say in the tool's features? Or are y'all satisfied with the CMP(s) that you're using?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cv1gt1/cmp_for_a_spa_google_consent_mode_v2/",
        "num_comments": 11,
        "comments": [
            {
                "body": "I’d be interested. Though I have to ask, isn’t it possible to use JS to listen to the changes in consent and send them to the datalayer?",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "I'm interested too",
                "author": "analyst_bappy",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Funny, me and my team have built exactly this recently and we have just made it publicly available.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "In my experience, the popular CMP's always send a data layer event when consent is either established during page load (user previously granted / denied) or when a user makes any change to their consent.\n\nCookieBot, CookieYes, OneTrust CookiePro.\n\nDo you have an example where e.g. CookieBot is not sending the correct signal?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yeah, you can listen to clicks based on e.g. classes, or do other similar workarounds, however, I wouldn't vouch for the reliability of this approach. I'll DM you more info about the testing tomorrow!",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "great, sending you a DM! u/analyst_bappy",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "For anyone interested: the link is [https://consent.studio](https://consent.studio)",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "u/DigitalStefan for example, I'm working on a SPA that's using InstantClick, which is interfering with the CookieBot's privacy trigger, which disappears on the next page load. Also, for some reason it doesn't emit the cookie\\_consent\\_update data layer pushes and I often need to do workarounds and my own listeners, which isn't a very reliable long-term setup.   \nAlso, CookieScript and some other CMPs that I've worked with don't work well with SPAs, only pushing the data into the data layer for all categories, but not when users accept/deny just some of them.",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "I’ve not come across this behaviour at all. If you have any URLs you can share where there are problems I would like to dig a bit deeper into that.\n\nCookieBot certainly has not always been perfect but I’ve never had to fight with it in the way you describe.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719247523.0,
        "title": "Cookiebot and consent in a customer events file",
        "author": "Ok_Internet1513",
        "id": "1dni4ka",
        "selftext": "Hi,\n\nI have added a datalayer on my website through customer events and also added a Cookiebot exactly as in Cookiebot tutorial. However the Customer events are firing GA4 tag before consent. Do you know how to add a Cookiebot script into the Customer events file?",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dni4ka/cookiebot_and_consent_in_a_customer_events_file/",
        "num_comments": 9,
        "comments": [
            {
                "body": "What’s a customer events file?",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Perhaps [consent.studio](http://consent.studio) can be a good alternative. They only charge a fixed amount per month or year, regardless of page count or traffic. It's even cheaper than Cookiebot's €7 plan.",
                "author": "Yallone",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Load cookiebot through GTM if that's what you're using.\nAlso be mindful that they will count more pages than you actually have, I don't recommend Cookiebot.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Did you used advance cookie consent or basic one?",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "This [https://help.shopify.com/en/manual/promoting-marketing/pixels](https://help.shopify.com/en/manual/promoting-marketing/pixels) - I added a datalayer through this, it is a new feature",
                "author": "Ok_Internet1513",
                "score": 1
            },
            {
                "body": "Cant get this to work no matter what I do, the cookie banner wont appear on my site.. I set cookiebot through GTM on shopify",
                "author": "classified18",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717190300.0,
        "title": "What happens if the default consent is granted?",
        "author": "zestandpunch",
        "id": "1d56hk5",
        "selftext": "I'm in the pricess of adding consent mode V2 to our website using Complianz CMP.\n\nOne of the options in the template is to set the default consent states to granted?  \nOut of professional curiosity, what would happen if I did this and why is it even an option? If I just selected granted for all would that mean no matter what the user would be tracked? ",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d56hk5/what_happens_if_the_default_consent_is_granted/",
        "num_comments": 10,
        "comments": [
            {
                "body": "yeah, it would work just like user clicks accept all on a consent banner. I guess the reason this is technically possible is that there could be privacy regulations that accept opt out policy - track by default, allow user to opt out",
                "author": "small_foot_2490",
                "score": 3
            },
            {
                "body": "That’s why consent settings can be set per region. Australia for example is opt-out.",
                "author": "tresslessone",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you set the default consent to granted then you're violating consent laws this may cause huge fines.",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Yeah good point! Just thinking about this whole thing. We've been setting up server-side tracking for GA4 and Facebook using tag manager and a Stape server. \n\nIn my mind, server-side tracking is to combat the limitation of cookie tracking e.g. if someone denies cookies I can't track them. \n\nBut if my server side is set up using GA4 and Google requires consent before it will fire tag manager, how is this any different?\n\nOr does server-side stuff fire regardless of cookie policy?",
                "author": "zestandpunch",
                "score": 1
            },
            {
                "body": "For GDPR yes thats the case but for example CCPA not the case as the user has to give explicit consent for this type of law. Depends on the country and region the user is coming from and which data law you need to respect.",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "You have any examples of those fines? I've asked myself the same question.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Regarding consent mode or cookies policies server-side does not bring any benefit. Google tags will behave in the same exact way not web- and server-side. Which means either not fire at all or fire in the anonymous/cookie-less mode\n\nYou can do some risky stuff like override consent state server-side, but not sure if it is the right path.\n\nServer-side brings improvements in overall cookies durability or allows to possibly bypass some adblockers, but can't do anything about explicit objection to data processing.\n\n\nIf you want tracking without consent you would need to look into alternatives that don't use ids.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "From what I heard from one agency it can be up to 4% of previous year revenue.",
                "author": "small_foot_2490",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719933491.0,
        "title": "Need help setting up GTM4WP and consent mode",
        "author": "Dry-Connection9911",
        "id": "1dtod59",
        "selftext": "I have a WooCommerce site where I use GTM4WP for tag implementation. For the past month, data has stopped flowing into Google Analytics and other tools. I believe this might be due to incorrect consent mode settings. Could anyone help me set up consent mode properly to ensure the necessary attributes are tracked for analytics?\n\nIs there a CMP that is compatible with GTM4WP and easy to set up?\n\nI've found this guide from the official GTM4WP page: [WebToffee GDPR Cookie Consent Plugin Setup](https://gtm4wp.com/setup-gtm4wp-features/webtoffee-gdpr-cookie-consent-plugin-gtm4wp-how-to-setup), but I find the mentioned consent plugin expensive. Are there any other alternatives that are easy to implement?\n\nThanks in advance!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dtod59/need_help_setting_up_gtm4wp_and_consent_mode/",
        "num_comments": 8,
        "comments": [
            {
                "body": "You could use CMP's like Cookiebot, CookieYes and CookieInformation. If you implement them through their GTM tag templates, they should work out of the box. Just remember to:\n\n* activate consent mode in the CMP tag (if not on by default)\n* (activate 'consent overview' in GTM settings)\n* configure consent settings on the tags (all Google tags are automatically configured)\n* check the consent tab in preview mode\n* check the &gcs parameter on Google requests (value should be 'G100' for unconsented hits' and 'G111' for full consent)\n\nBut obviously also check other possible issues. Maybe the CMP is not the problem? Post the URL here and we can probably help debug the issue a bit more.",
                "author": "Drendo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you tell me where you're located, I may be able to help?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Send me a pm. I have a company in implementing consent mode.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Sure u/Taca-F ! Europe, Hungary is the location. Also the website visitors are from here.",
                "author": "Dry-Connection9911",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715857585.0,
        "title": "Looking for recommendations for alternatives to Cookieyes (Consent mode)",
        "author": "Robsonowskyy",
        "id": "1ctabg2",
        "selftext": "Hi, lately I started having issues with Cookieyes and looking for alternatives. My problem with it is optimization which isn't perfect. Load time takes up to 9sec on mobile devices. Also it started loosing data.\n\nDo you have recommendations? Factors I care about are:\n\n* Easy to integrate (best would be to tag manager)\n* Relatively cheap (most of my clients are small so it cannot be too expensive)\n* No data loss (I do not operate on a lot of data so any loss could change the outcome of my stats)\n* Polish language supported (I'm from Poland so I need it to support our language)\n* Better optimalized than Cookieyes",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ctabg2/looking_for_recommendations_for_alternatives_to/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Cookiebot all the way!",
                "author": "dowmi12",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Onetrust is pretty good. There’s a list of consent banners on googles support pages",
                "author": "xxlizardking-kongxx",
                "score": 1
            },
            {
                "body": "I built a lightweight 3kB banner for Google Consent Mode but I'm not sure if it would be okay to promote it directly here so I DMed OP.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "You can use [https://www.cookieconsent.com/](https://www.cookieconsent.com/) but you need to set up the tags yourself in GTM or code them directly.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "CookieBot has suffered the same problems OP describes.\n\nOP’s problem may be limited to Poland, because it loads essentially instantly on my site (UK based)",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks for response I'll look into it",
                "author": "Robsonowskyy",
                "score": 1
            },
            {
                "body": "DM it to me as well please, if you can/want to.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Thanks I'll try it. Didn't know there are tools that setup tags for you",
                "author": "Robsonowskyy",
                "score": 1
            },
            {
                "body": "That's just a free cookie banner. You need to use Simo Ahava's Cookie Consent templates to set it up properly.",
                "author": "Fine-Marketing-8134",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1706189829.0,
        "title": "Any CMPs that fire consent updates before Initialization?",
        "author": "TheTechLad",
        "id": "19f9i98",
        "selftext": "Hello,\n\nGiven how Consent Mode is a big subject nowadays, I was wondering if there are any CMPs that fire the consent update event before Initialization and/or Container Loaded.\n\nIt feels weird using Trigger Groups or consent\\_update events as triggers, though I might have to get used to it. \n\nSo far, I tested CookieYes, CookieBot and OneTrust.\n\nThanks. \n\n&#x200B;\n\n&#x200B;",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/19f9i98/any_cmps_that_fire_consent_updates_before/",
        "num_comments": 17,
        "comments": [
            {
                "body": "Trigger groups have no place in consent management. They were \"the\" solution before everyone got their act together and settled on a model where the CMP would send a DL event that could be used in place of a Page View trigger.\n\nThere are some aspects of consent management where order of scripts and timing of things is important, but GTM and your CMP can happily run asynchronously and we don't have to worry about it.\n\nThere are a few strategies for implementing consent management, but the ideal is you hardcode Google Consent Mode \"default\" script, followed by GTM and your CMP. Your CMP takes care of issuing both a DL event e.g. cookie\\_consent\\_update (CookieBot) and a Google Consent Mode \"update\" call immediately prior to that DL event.\n\nYou fire Google tags from Initialization, All Pages, DOM Ready etc and you fire non-Google tags on the DL event. Use the additional consent settings for non-Google tags to block them or add exception triggers.",
                "author": "StefanAtWork",
                "score": 4
            },
            {
                "body": "Google Consent Mode takes care of it, or rather your CMP should by sending a CoMo \"update\" command. You won't see the tag fire again in Tag Assistant, but if you keep an eye on the Network tab in dev tools, you'll see a hit get sent to GA4 with gcs=\"G111\" (assuming full consent was granted).",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "If you fire google tags from initialization, they will fire before the consent\\_update, so they will be blocked. Are you not using the \"required consent\" setting? I believe that's necessary, at least for GDPR. Am i missing something? Thanks!",
                "author": "serious_orangutan",
                "score": 2
            },
            {
                "body": "That's absolutely fantastic. I've been scratching my head about how to do it.",
                "author": "benl5442",
                "score": 2
            },
            {
                "body": "It's a tricky topic. Not helped by misinformation from otherwise reliable or seemingly trustworthy sources.\n\nConsent management has been a major focus for my day-to-day at work for more than 2 years and it's still sometimes challenging. Huge brand name companies are still struggling with this because their internal teams don't have the time avaialble to study consent management as a separate discipline.\n\nIt's really no surprise that most websites suck at user privacy. Even the ones that try will likely not succeed.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You might find useful my take on Taneli Salonen's technique for implementing OneTrust. https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "\"and you fire non-Google tags on the DL event. Use the additional consent settings for non-Google tags to block them or add exception triggers.\"\n\nThis is where I am having trouble.  I am using CookieYes which sends a cookie\\_consent\\_update DL event right after a Consent event.  You are saying to fire these tags on the cookie\\_consent\\_update DL event, but I don't see how to avoid using a trigger group here.  For example, say I have a custom\\_purchase DL event... now I would need to fire the tag on custom\\_purchase AND cookie\\_consent\\_update right?  So only when both events have happened does it fire.\n\nAnother example would be Bing UET Tag... rather than firing on Initialization All Pages I would fire on cookie\\_consent\\_update DL event?  Can't cookie\\_consent\\_update firing multiple times (say if a user kept changing their consent on the same page) really screw up these tags... firing multiples and what not which could skew analytics for example?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Thanks for this. Just wondering what you do on first view assuming the ga4 tag is on a page view, someone lands on the page, no consent, so it sends a cookieless ping. \n\nThen when someone accepts, how do you get google to send the page view again with all the information in it?",
                "author": "benl5442",
                "score": 1
            },
            {
                "body": "Here is how to set up consent mode with the Osano CMP\nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "When you're in an advanced Google Consent Mode context (which in my experience is 99% of all clients!), Google platform tags (Google Tag, GA4 Event, Floodlight, Google Ads etc) will take care of themselves in terms of consent, in which case you follow established best practise which is to fire Google Tag on Initialization, have a separate GA4 Event tag for page views, include a Conversion Linker (if needed) and generally do nothing specifically to those tags in terms of consent management other than mark them as \"no additional consent required\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Another question I can't find an answer to.  Say I have a tag set to fire 'once per page'... that tag also has additional consent settings set.  The same tag is used as a setup tag for multiple others.  If the firing is denied due to additional consent settings not granted... does that count as the 'once per page' fire?  In other words... will it continue to 'try' and fire until the additional consent requirements are met?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "The rule for 3rd-party tags is ...\n\nIf the trigger is based on All Pages, DOM Ready, Window Loaded etd (i.e. page view, but at different times), you should replace that with a cookie\\_consent\\_update CE trigger with the same conditions.\n\nIf your trigger is already a custom event (custom\\_purchase), you'll want to test whether the custom\\_purchase event is pushed to the data layer reliably later than the cookie\\_consent\\_update event.\n\nI don't like \"once per page\" and any platform that needs it is just badly coded. Microsoft UET included. I haven't had to play with that in a while and I might be wrong about this, but I think the first failed firing counts as that \"once\" and won't fire again when conditions are met.\n\nPossible solution off the top of my head:-\n\n* Remove all triggers from the main \"run once\" config tag. Use sequencing to make it run prior to all of the supporting event tags. Event tags checked to make sure they fire on or after cookie\\_consent\\_update.\n\nIf the config / setup tag is responsible for sending a page view event to the platform, fix it so that it doesn't and instead figure out an event tag separately to send a page view. I do this with every platform anyway because it's just a good idea all around.\n\nAlso... I am not a fan of trigger groups. They don't work intuitively and they harken back to the bad old days when cookie banners and GTM integration was first invented. A trigger group can save the day in the situation you describe, but far too many people think of them as \"triggers, but with an 'and' rule\" and they really are not that at all!",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "hey! could please help me, i set up cookieyes banner via gtm. noticed one situation: user accepted cookies, then goes to another page in gm I see container loaded with consent denied then I see update event with consent granted. Is that okay? i thought if user accepts cookies every time he goes to another page consent mode will be granted even on the container loaded level",
                "author": "Unique-Exchange-4075",
                "score": 1
            },
            {
                "body": "There are two way of doing it and both are valid.\n\n1. There is a simple Consent Mode \"default\" of denied consent on every page followed by an \"update\" with the correct consent.\n2. The Consent Mode \"default\" looks for the user's previously given consent and sends that consent status, followed by a Consent Mode \"update\" with the same status.\n\nWhat you're seeing isn't necessarily wrong, as long as there's an \"update\" with consent granted at some time during page load.\n\nOption 1 is the easiest to implement and is robust, because you can hardcode it as a simple script.\n\nOption 2 is a bit more sophisticated and I only use it if there's a clear benefit in doing so.\n\n  \nWorth a mention: Using the CookieYes template in GTM should take care of the CoMo \"default\" for you. I need to run a couple of tests on my own implementation because I've seen some strange behavior recently - but if it's working for you I wouldn't worry!",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1693415863.0,
        "title": "Google Consent Mode",
        "author": "DigitalStefan",
        "id": "165kq9u",
        "selftext": "There haven't been many posts about Google Consent Mode in this subreddit, but there are a couple of common misconceptions which I've seen caused people to lose a lot of time trying to chase down a faulty implementation.\n\n1. Google native tags fire unexpectedly when there is no user consent.\n2. \"additional consent\" works exactly like an exception / blocking trigger.\n\nTrying to write up a complete how-to for implementing Google Consent Mode is a big project far outside the scope of a Reddit post or even a reasonbly sized blog entry.\n\nThe basics though:-\n\n1. \"CoMo\" is a good shorthand for Google Consent Mode and it's what Google use when discussing it.\n2. CoMo usually works alongside or is implemented by an existing consent management platform, such as CookieBot or OneTrust.\n3. CoMo affects all Google tags such as GA4 Config and Event, Conversion Linker, Floodlights and Google Ads.\n4. Google tags *should* fire without consent (in Tag Assistant in preview mode).\n5. Presence of the \"gcs\" parameter in network hits indicates CoMo is active.\n6. gtag.js retriggers Google tags when the user grants consent / when consent is established on each page load.\n7. You *will not* see tags retrigger in Tag Assistant in preview mode. Chrome dev console, network tab only.\n\nThere are many ways to implement CoMo incorrectly and validating an implementation is a 15-20 minute process.\n\nI can go into more detail if you are struggling with any part of CoMo or consent management in general.",
        "score": 13,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/165kq9u/google_consent_mode/",
        "num_comments": 23,
        "comments": [
            {
                "body": "I recently implemented cookiebot with CoMo enabled and it's dropped our traffic down 50% - we had a different cookie banner before and never had this issue. We only operate within the US. Do we need to have CoMo enabled?",
                "author": "Ok-Tiger-5200",
                "score": 5
            },
            {
                "body": "I have worked up an example implementation using a specific product for illustration. [https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "Spoiler alert for point 6: At some point CoMo stopped sending the page\\_view event to GA4 after consent was granted. Edit: Turns out this isn't true. DebugView doesn't show the page_view, but after 24 hours or so they surface in GA.",
                "author": "jamieburchell",
                "score": 2
            },
            {
                "body": "Thanks! The Onetrust tag template in gtm has major issues I spoke with their product manager on it. Not sure if there were any changes",
                "author": "Effective-Meat2546",
                "score": 2
            },
            {
                "body": "It’s not exactly required by GA4, but if you’re collecting or want to collect data in GA4 from EEA users with which you would like to generate remarketing audiences,   you’ll need CoMo V2 with the appropriate consent signals as of March 6th.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I've already set up Google Consent Mode with CookieYes.I needed a CMP to enable Google Consent Mode v2 on my company's website, and CookieYes stood out to me due to its many positive reviews on Reddit. Clear, straightforward documentation was provided, so the setup and integration via Google Tag Manager was a breeze. The dashboard is very simple and intuitive, and I had no trouble finding my way around and understanding the platform's features to get my job done.\n\n[https://www.cookieyes.com/documentation/features/integrations/implementing-google-consent-mode-using-cookieyes/#Method\\_2\\_I\\_6?ref=sooraj](https://www.cookieyes.com/documentation/features/integrations/implementing-google-consent-mode-using-cookieyes/#Method_2_I_6?ref=sooraj)",
                "author": "sooraj-s",
                "score": 1
            },
            {
                "body": "When is Google Consent Mode necessary?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Once you have the main tags (base pixel, page\\_view tags) loading based no consent, is there further trigger setup required for for the various events tags you want to fire?",
                "author": "chrismccreery",
                "score": 1
            },
            {
                "body": "Have a question, if I enable GCM in Google Tag manager but haven’t done it inside the cookie banner tool (Osano/Trustarc/Onetrust), what will happen. GTM controls the firing of the tags. If you enable GCM inside the cookie tool, it looks more like an UI to me. Or am my understanding incorrect.",
                "author": "Effective-Meat2546",
                "score": 1
            },
            {
                "body": "“Need” is a strong word!\n\nI’d compare the design of the previous banner to the current one. If you make it easy for users to opt out of tracking, they will. If your traffic is skewed toward mobile and “Deny All” is where your thumb naturally rests when holding a phone, that’s a sure way to increase opt-out rates.\n\nCookieBot is also a strange one, because if you implement via hardcoded script on site, the default behaviour is that it will enable consent mode but will only issue the CoMo “update” and you will need to hardcode the CoMo “default” gtag call yourself.\n\nIf you implement CookieBot entirely within GTM using the official tag template, it handles CoMo entirely for you. You still need to configure it, but you don’t need to worry about gtag scripts on site. \n\nIf you message me the URL of the site I can look and confirm if there are any technical issues artificially inflating your apparent opt-out rates.\n\nIs it possible the previous cookie banner was purely for show and was not effectively controlling consent? I see this happen a lot.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Great write up. Thanks for sharing.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "CoMo is evolving on almost a weekly basis.\n\nFun fact: It still behaves the “old” way when server-side is involved!",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I recently implemented CookieYes on my test site: [digitalstefan.com](https://digitalstefan.com)\n\nIt was a quick and easy process, including CoMo V2. It does handle CoMo update events in a slightly strange way, but it does work and shouldn't caused a problem.\n\nNo hardcoding. Purely using the CookieYes tag template.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Pretty much everywhere, now. Definitely if your website is visited by users within the EU and UK. Probably advisable even if every user is from a jurisdiction that doesn't expressly require user privacy controls.\n\nGoogle has started sending warnings out about improper consent management configurations for OneTrust customers. It's \"you should probably do something about this because your data could be affected\" for now, but could easily become \"if you don't resolve this, your account may be suspended\".",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Super late reply...\n\nYes. Every tag the reads or writes data to the user's browser needs to be considered for which consent category or categories it should be assigned.\n\n\"data\" means cookies, local storage, session storage... any possible way of recording and reading data that the browser provides.\n\nIf firing a GA4 Event tag writes or reads a cookie, it needs to be consent managed. GTM gives you a massive hint via \"built in consent\" for all Google platform tags. e.g. GA4 tags require ad\\_storage and analytics\\_storage (marketing consent and analytics consent).\n\nYou'll also now see ad\\_user\\_storage and ad\\_personaliztion attached to a lot of Google platform tags. Those aren't indicating \"tag requires this category to work\", but do have an effect on how the collected data can be used.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "If you have a CoMo \"default\" implemented and you don't enable CoMo inside your consent platform, you won't see CoMo \"update\" events. CoMo will not work. Tags will fire, but depending on your default consent state you may not see any data in GA4 etc.\n\nTrustarc recently integrated CoMo V2 in their script (within the past few months). Previously you had to do the entire integration. They also released an official tag template, which is fantastic. OneTrust also released their GTM tag template and now that's my preferred and recommended implementation method.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I see.  I don’t believe any of the websites we manage have users outside the U.S. and are not targeting anyone outside the U.S.  Is this requirement for the EU and EEA only for Google Ads or is it also for GA4?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "It’s mainly for EEA, but I would count on EEA similar law spreading slowly to other jurisdictions over time. There are already quite a few (I couldn’t name more than a couple… I don’t get professionally involved in the legal side of things)",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I saw people discussing language detection being problematic when using the tag template. Are there other concerns?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Gotcha’.  Do you know if it’s required in EU and EEA for GA4 or is it strictly related to Google Ads tags only?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Not that I’m aware of besides the template being useless in their last version that I imported.",
                "author": "Effective-Meat2546",
                "score": 1
            },
            {
                "body": "I’m on version 612c3 direct from the community gallery. I’m about to recommend this approach to a client (instead of hardcoding).",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710947346.0,
        "title": "'once per page' firing 'counts' even if never fired due to exceptions/consent",
        "author": "pongohopper",
        "id": "1bjfq6i",
        "selftext": "Anyone else notice this and expect different behavior?  I have certain tags which I want to fire only once per page.  Problem is, that 'once' counts even if the the tag didn't fire due to exceptions, consent checks, etc.\n\nI've recently implemented consent mode with a cmp and realizing how beneficial, easier, etc things would be if there was a 'once successfully per page' option for tags.  In other words, that one time would only count if the tag successfully fired including exceptions/consent/etc.\n\nExample, tag is setup to fire once per page and has triggers of all pages and consent\\_update with ad\\_storage required as additional consent.  Page loads, ad\\_storage is not granted, and the tag tries to fire, but fails due to consent not given.  A few seconds later, consent\\_update happens and consent IS now given... the tag does not fire because of the previous failed attempt.\n\nNow, if there was another option like 'once successfully per page', it would try firing again and this time do so successfully... all future attempts on the page would not fire because it already successfully has.\n\nI'm sure someone will say 'use once per event' and do this or that, but it is just not the same behavior that is wanted / expected in this case.  It literally says 'tag firing option' and lets you choose 'once per page'... I think most people would expect that to mean it actually fires once per page... not attempts to do so.\n\nPart of this post is a rant because it would make gtm, consent, and possibly other situations work sooooo much nicer and the other is some weird hope that someone at Google/GTM actually sees this and considers this in a future update.\n\nI've come across many others posting the same 'issue' across the web so if you feel the same please upvote and maybe someone will take notice and do something about this in a future gtm update.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bjfq6i/once_per_page_firing_counts_even_if_never_fired/",
        "num_comments": 14,
        "comments": [
            {
                "body": "I agree, but:\n\nIf you're using [Consent Mode](https://developers.google.com/tag-platform/security/guides/consent?sjid=14548113254153007427-NC&consentmode=advanced), there's a wait_for_update setting that is supposed to give the CMP/banner a chance to load before tags fire. It's 500ms by default. If your CMP is setting that itself, there might be a setting somewhere in the CMP config to increase that duration.\n\nOtherwise, you could potentially try using a trigger group as the tag trigger, where one of the triggers in the group is what you actually want the tag to fire on, and the other is that consent_update event.",
                "author": "winless",
                "score": 2
            },
            {
                "body": "You're annoyed at folk focusing on the \"but consent stuff\" element of your post, but they aren't exactly wrong to do so.\n\nIf you set the correct triggers, you don't need to worry about the issue you're focusing on, which *is* an important issue to understand and it catches a lot of people out.\n\nI agree. It would be useful to have a \"once per successful firing\" option. We don't have it. We have to work around it.\n\nThe only tag I've heard of that can be problematic is the Microsoft UET tag. I haven't had a lot of hands-on with Microsoft's platform, but I'm told that if you fire the base tag more that once it causes issues.\n\nTrigger Groups would probably solve it, because despite them also being an often misunderstood feature, they do have a property of only firing once per successful matching of grouped trigger conditions.\n\nHowever.... I've not come across any other situation where I'm dealing with consent management and the lack of \"once per successful event\" has caused a problem.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "No, your given example is literally that a tag fires before consent is given and doesn’t fire again once consent is given. The rest of the post is complaining about how there isn’t a built in option to fix this.\n\nWhat I wrote, is a solution to the issue you’re facing in the absence of such a feature. The tag will only fire once consent is updated rather than  on page load, and therefore the once per page functionality will work as you want it to.",
                "author": "ArcaneJP",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Change your trigger so that instead of firing on all pages, tags fire at the point where consent is updated. Depends on which CMP you use, but an example could be a custom event for ‘OneTrustGroupsUpdated’ on all pages",
                "author": "ArcaneJP",
                "score": 1
            },
            {
                "body": "u/pongohopper Ended up here because have just been fighting with the same thing - a tag was set to fire \"once per page\", it was being successfully blocked because of consent permissions, but once consent was granted it wouldn't fire again because it thought that it had already fired on that page. The trigger was a \"consent updated\" event that was being added to the dataLayer from the CMP (OneTrust). Was blaming OneTrust originally, because an implementation I did with cookiebot was working, but then I noticed the \"once per page\" setting was on for the tag.\n\nDid you manage to find an acceptable solution? Because at the moment my solution is to turn off the once per page event and be damned for any extra hits that occur. Don't know why the tag was set to fire only once, might need to put a workaround in place within the script itself - it's a custom html tag that is setting up sharing on element or something like that.\n\nSubjectively, I think it's a bug, because otherwise the consent mode stuff makes implementing a CMP much easier than previous iterations.",
                "author": "mcgern_",
                "score": 1
            },
            {
                "body": "Bumped into the same issue. Did anyone find a solutions for this?",
                "author": "-cm_27",
                "score": 1
            },
            {
                "body": "Yep - aware of all that stuff - not the same thing I’m talking about though.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Issue with this is the OneTrustGroupsUpdated event fires when the page loads and for each time the permissions change. Before consent mode was a thing, you would hook into this event with specific conditions for which group was made active based on values stored in the cookie which is a bit clunky.\n\nWith the availability of consent mode, it is a lot neater to just check for consent change and let the consent mode setting on the tag do the rest. Problem is that the tag will fire when the CMP kicks in and sends it's first OneTrustGroupsUpdated event, then get blocked by consent checks, but this is counted towards it firing \"once per page\", so when consent changes and the event fires again, the tag does not.",
                "author": "mcgern_",
                "score": 1
            },
            {
                "body": "Doesn’t have to be cookie related. You’re not understanding the post.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Nobody is reading the post - they see the mention of cookie consent and go from there. Do a legit test for ‘once per page’ based on what I said and get back to me - doesn’t have to be cookie related.",
                "author": "pongohopper",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715935828.0,
        "title": "GOOGLE TAG MANAGER - TAG CONFIGURATION: Tag consent settings & Page view triggers",
        "author": "Skincare_boy",
        "id": "1cu0hvu",
        "selftext": "Dear our team,  \nTo set up a **Google Ads conversion tracking tag for a page view event**   \nthat **should be counted even when users reject all cookie**s on the consent banner,  \nthe **options in Tag consent settings & Page view triggers should look like below**, right?\n\nTag consent settings: additional content -> **Choose: No additional consent required**   \n Page view triggers - > C**hoose \"All Pages - Page View\"**  \n   \nIf so, can you help me with any personal experience  from the links I found from Google Support.  \n   \nGoogle Support links:  \n[Page view triggers](https://support.google.com/tagmanager/answer/7679319)  \n[Tag consent settings](https://support.google.com/tagmanager/answer/10718549?hl=en)  \n   \nThank you a lot and may you have a nice day!",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cu0hvu/google_tag_manager_tag_configuration_tag_consent/",
        "num_comments": 10,
        "comments": [
            {
                "body": "No. Do not track users without consent.",
                "author": "DigitalStefan",
                "score": 5
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Here is an OneTrust example.\nhttps://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "\bIt doesn't actually track users though. GA4 will create a ghost ID (no device/location/other demo recorded; only events are recorded with a ghost user id) without identifying who the users are once they view our webpage. When they end a session and start another one, another ghost ID will be created.",
                "author": "Skincare_boy",
                "score": 1
            },
            {
                "body": "Here is a GTM Osano implemention \nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thanks mate. It's been nice knowing this. You have a great day",
                "author": "Skincare_boy",
                "score": 1
            },
            {
                "body": "If cookies are written or read, there is a moral and possibly legal requirement to request user consent.\n\nThere is a reason Google assign built-in consent requirements for Google Ads tags.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710762561.0,
        "title": "Consent Mode V2, screwed me",
        "author": "Straight_Solution115",
        "id": "1bhosjc",
        "selftext": "Hey there,\n\nso my daily active user metric is in a free-fall, ads are not being viewed or tracked, all because I haven't implemented Consent Mode v2. I've set it up now to the best of my ability, but I'm not sure if it's set up correctly and I find the whole subject pretty scary, because I have no clue what I'm doing and all the metrics are getting lower and lower.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bhosjc/consent_mode_v2_screwed_me/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Complianz makes it possible to piggyback on consent variables in the datalayer. If you google Simo ahava consent mode, then you can easily implement it through GTM",
                "author": "Kobo6",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How did you set it up? Are you using a cookie consent platform? If so, which one? What Geographic market are you in?",
                "author": "datanerdz",
                "score": 1
            },
            {
                "body": "Our Google Ads are actively declining as well. I'm guessing because the Consent Mode as well. I've implemented the things I was able to do. How do I know if I did it correctly?",
                "author": "Straight_Solution115",
                "score": 1
            },
            {
                "body": "As far as I know, not having consent mode set up will only affect any remarketing audience population, for the moment. So from 1st March or whenever the date was, your audiences started to dwindle out. I can't see not having consent mode set up causing issues outside of this. So maybe ads performance is just down and it's something unrelated.  \nAnyone confirm this or am I talking nonsense?",
                "author": "Ok-Gift-5572",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I used Complianz. Geographic Market is Germany",
                "author": "Straight_Solution115",
                "score": 1
            },
            {
                "body": "At this point, if you are losing money, just have an agency whip it into place for 500€. \n\nIf you still want to try, then check this video https://youtu.be/KVXnCdImOSk?si=F1o0JG0llccRC0F5. Switch to CookieBot if necessary, it's really easy to implement.",
                "author": "Softninjazz",
                "score": 1
            },
            {
                "body": "What did you use for Wordpress?",
                "author": "anini11",
                "score": 1
            },
            {
                "body": "The GDPR rules for Germany are opted out until explicitly opted in. So I would expect what you see to happen because it is the law.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thank you :)",
                "author": "Straight_Solution115",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709744697.0,
        "title": "How can I load cookie consent banner for specific region with Server Tag Manager",
        "author": "Dry-Apartment-4923",
        "id": "1b84yvp",
        "selftext": "Hi, I've recently implemented Consent Mode V2. So the cookie banner is enabled for all user. But the marketing team don't want show the banner for all region except EEA & US-CA (California).  \n\n\nServer tag manager does set the region header, but I can't use it from client. Did you guys implement any partial CMP solution. If so how did you do it?\n\n  \nI'd appreciate the help  \n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b84yvp/how_can_i_load_cookie_consent_banner_for_specific/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Which consent management platform are you using?",
                "author": "analyst_bappy",
                "score": 3
            },
            {
                "body": "This is the right question. It shouldn't be up to GTM to control banner visibility.\n\nOneTrust will give you the tools to do per-region configuration. Trying to shoe-horn this functionality into GTM is a recipe for disaster, not to mention annoying future maintainability.\n\nLet the consent management platform manage consent! GTM is there to listen to and respond to consent signals.",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "You need to pass users region in a JavaScript enabled cookie from your app's servers when the page loads. Then, define a variable in client side GTM based on this cookie. Now, you can use this variable to conditionally fire the consent banner. \n\nThis is a bit convoluted but it would solve your problem.",
                "author": "GullibleEngineer4",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Bappy vai, We are using cookieinformation. This CMP provider is quite basic compared to other. But our clients preference",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "Thanks for the suggestion , went with something similar",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "I agree, i was evaluating options. Went with fronted implementation. We already use Geo-location API in our project & region are well defined. So went with implementing our own solution based on that. We also have good system in place not to leak any analytical events or any other tag before consent resoulution",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "There is a way to set default value to eu regions as denied and set default value to other regions as accepted. But the banner of Cookie Information will be shown to all.",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "What did you go with?",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "Interesting, I couldn't find any option to configure it from cookie information. But they suggest customizing the SDK code to do so, which is bit challenging as cookieinformation doesn't provide geo data",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "Used geo-location API to determine whether to show the consent popup or not. Until the Geo-location resolved, blocked all tags & anaytics. The region request header set by server side GTM i used to adjust the consent mode in the server side",
                "author": "Dry-Apartment-4923",
                "score": 1
            },
            {
                "body": "Just make sure your page load does not suffer which  can affect your web vitals.",
                "author": "GullibleEngineer4",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1724114804.0,
        "title": "Shopify Extensibility vs Consent Mode",
        "author": "Longjumping-Smile796",
        "id": "1ewi97u",
        "selftext": "Hi everyone, i'm joining the list of people having nightmarish issues with consent mode and shopify. We are currently using Iubenda, with some extra custom code ( i know it does not sound like much, but unfortunately the developer agency is not collaborative).\n\nThe idea is using simo ahava's tags to read the cookie that is correctly passed on the checkout domain, to set the consent statuses. But unfortunately, it does not seem to work, no matter what we try. The tags are firing (we are logging that on the console) but after they fire the url requests that are sent to both *doubleclick* and *analytics* present a wonderfully nightmarish *gcd=13l3l3l2l1l1.* i can also see that the variables that are used by simo's tag are correctly set\n\nCould it be that the new checkout stops simo's tags from properly working? i don't have that much JS experience to tell.\n\nAny help would be wonderful, thank you!\n\nexample 1 of request with gcd=13l3l3ll2 etc:\n\n    //googleads.g.doubleclick.net/pagead/viewthroughconversion/1001470150/?random=2146052697&cv=11&fst=1724113002197&bg=ffffff&guid=ON&async=1&gtm=45be48e0v9170531726za200&gcd=13l3lPl2l1l1&dma_cps=syphamo&dma=1&tag_exp=0&u_w=3440&u_h=1440&url=https%3A%2F%2Fcommerce.pittarosso.com%2Fcheckouts%2Fco%2F3932f84c736c6f35f977e64d0457d586%2Finformation&ref=https%3A%2F%2Fwww.pittarosso.com%2F&label=vkl1CLOu-vUBEMbxxN0D&tiba=Informazioni%3A%20PittaRosso%3A%20Check-out&hn=www.googleadservices.com&frm=0&gtm_ee=1&npa=1&ecsid=1319655296.1724111252&pscdl=noapi&auid=1028822444.1723105006&uaa=x86&uab=64&uafvl=Not)A%253BBrand%3B99.0.0.0%7CGoogle%2520Chrome%3B127.0.6533.120%7CChromium%3B127.0.6533.120&uamb=0&uam=&uap=Windows&uapv=10.0.0&uaw=0&ec_mode=a&fdr=CA&capi=1&data=event%3Dpage_view%3Bpage_path%3D%2Fcheckouts%2Fco%2F3932f84c736c6f35f977e64d0457d586%2Finformation%3Bignore_referrer%3Dtrue&em=tv.1~em.n6BT6T52TGYPzfcGTHzz0UagGd_UeoELRM_ycyNdi1Y&fmt=3&ct_cookie_present=false&eoid=CkUKEQjw2ou2BhCpoOfBsYGkuoIBEjAARiyE4-r8zE3lCSXTtZmxy9FDW6ds8WbZ4MG9GlRgwToEg6Q2JhoJsz9z4hrX_Hjw_wcB&crd=CLHBsQIIsMGxAgi5wbECIgEBKAFAAUondHJpZ2dlcj1uYXZpZ2F0aW9uLXNvdXJjZSwgZXZlbnQtc291cmNlWgMKAQFiBAoCAgM&pscrd=COTKgs--vKzF3AEiEwiX_Mi4pYKIAxVzi4MHHf0xH1oyAggDMgIIBDICCAcyAggIMgIICTICCAoyAggCMgIICzICCBUyAggfMgIIEzICCBI6IGh0dHBzOi8vY29tbWVyY2UucGl0dGFyb3Nzby5jb20v\n\nexample 2 of a request with the correct parameters that is sent before example 1 (is the only one correctly sent in the whole checkout process):\n\n    //googleads.g.doubleclick.net/pagead/landing?gcs=G111&gcd=13v3v3v2v5l1&tag_exp=0&rnd=352796852.1724113003&url=https%3A%2F%2Fcommerce.pittarosso.com%2Fwpm%4082c6a06ewf1f3532dpf3117147mbf87ca39%2Fcustom%2Fweb-pixel-106692932%402%2Fsandbox%2Fmodern%2Fcheckouts%2Fco%2F3932f84c736c6f35f977e64d0457d586%2Finformation&dma_cps=syphamo&dma=1&npa=0&gtm=45He48e0n81WST26P8v811526269za200&auid=1028822444.1723105006",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ewi97u/shopify_extensibility_vs_consent_mode/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "There are tags available for Iubenda. Have you checked those? Try using them, and if you need help setting it up properly, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "u/Longjumping-Smile796  have you figured this out? If not, you might want to check out [Cookifi](https://www.cooki.fi/) \\- it's a new CMP that works seamlessly with Shopify - here's a guide on how to integrate it with Shopify's custom pixels: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715859918.0,
        "title": "Consent Mode Set Up Tutorial With GTM",
        "author": "Minute-Property-7745",
        "id": "1ctayhv",
        "selftext": "Hey! Thought I'd post the recent [tutorial](https://youtu.be/8UWD5pxcAxk?si=ZFVu3B8FAnth6jQG) we made on how to set up consent mode for almost any cookie banner using GTM. ",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ctayhv/consent_mode_set_up_tutorial_with_gtm/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thanks Lucy",
                "author": "santino-corleone-1",
                "score": 1
            },
            {
                "body": "Potato quality and not very informative. Only covers one use case and will only work as intended if your site makes a page refresh on user selection.\n\n\nAlso you completely butchered Simos name! 😂\n\n\nAlthough you get a +1 for the effort and sharing.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Really well done and will help alot of those with a CMP that is not integrated with consent mode and does not handle these update cm states! \n\nOne bit of extra feedback (note for your website this does not need it as the page reloads when user interacts with cookie banner but for 95% of websites it does not reload the page after banner interaction therefore i would of showed this and talked about it) is that you need to add a second trigger on the update consent mode command when a user interacts with a cookie banner and chooses their preferences. The reason is for those first pageview hits to google platforms wont be picked up on those landing pages. I also suggest firing a second ga4 page view event after a user clicks accept analytics cookies on the cookie banner as otherwise you can see not set landing pages in your ga4 reporting :(\n\nAlso great debugging technique, but i also recommend checking in addition to this the network hits of your google tags events and check the gcs ans gcd query parameters in the payload that will finalise it is working 100 percent to that specific website.\n\nAlso I love your pronunciation of Re(eeee)gEx Tables 🤣\n\nGreat work 🙌",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "Noted RE quality, this is a new venture for us so equipment is being upgraded with progression. We’ve tested this on a few different cookie consent banners and it’s worked successfully each time. If and when we encounter a situation where this method doesn’t work we will update with an additional method!",
                "author": "Minute-Property-7745",
                "score": 1
            },
            {
                "body": "I thought it was very useful for small businesses that don't have complex cookie consent requirements (which are loads of small businesses). This person could of spent a 12 hour video talking about every little bit of detail of cookie consent and consent mode (who would want to watch that 🤣) but for a small business with no dev budget it covers the essentials. \n\nI think this is not just specific to cookieyes but applicable to any cookie banner that is not integrated with consent mode. Of course, edge cases are edge cases, but for a lot of people, I think this will help.\n\nYou have to remember that the target audience is people with no/minimal technical knowledge that operate in the UK or EU, so you have to keep it simple.",
                "author": "dowmi12",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723651931.0,
        "title": "Enabling Analytics Storage In Consent Mode",
        "author": "NegativeStreet",
        "id": "1es5ouj",
        "selftext": "Would setting the analytics\\_storage functionality to granted be against policy/law? Any tips on how I might figure that out for myself?\n\n  \nMy thought was that since it's not directly related to advertising, just actions taken on the website, it might be ok to use and the default being denied is for more strict regions?\n\n  \nThis is for a Canadian audience, the law is a little more lenient than EU and CA.\n\n  \nThanks",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1es5ouj/enabling_analytics_storage_in_consent_mode/",
        "num_comments": 3,
        "comments": [
            {
                "body": "https://secureprivacy.ai/blog/canada-pipeda-cookie-banner#:\\~:text=Non%2Dcompliant%20cookie%20banners%20can,before%20placing%20non%2Dessential%20cookies.\n\nYou need explicit user consent before placing non-essential cookies. Likely aligns with GDPR and ePrivacy insomuch as you can't read or write non-essential data using a browser storage API (cookies, localStorage, sessionStorage etc) without consent.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This is great, thank you for the resource and the response! Denied as default it will remain lol. I'll give the rest of that page a review too",
                "author": "NegativeStreet",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718713052.0,
        "title": "Consent Mode Parameters for a Substack",
        "author": "emilepetrone",
        "id": "1dip8wt",
        "selftext": "I have a substack blog, and need to set up consent mode. I am following this template:\n\n[https://developers.google.com/tag-platform/tag-manager/templates/consent-apis](https://developers.google.com/tag-platform/tag-manager/templates/consent-apis)\n\n  \nHowever I am not sure what values to insert for:\n\n\"Your\\_cookie\\_name\"\n\n\"your\\_developer\\_id\"\n\nAny help would be greatly appreciated!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dip8wt/consent_mode_parameters_for_a_substack/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Ok great thank you for your help. That is super helpful",
                "author": "emilepetrone",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "While you can still use these instructions to create your own custom template they were really meant for CMP providers.\n\n\nThe cookie name is supposed to be the name of the CMP providers cookie that stores the user-selected consent.\n\n\nThe developer id is the id of the template creator so that they can be recognized in the publishing process and so that users that utilize the template know who developed it.\n\n\n\n\nIf you just want to get up and running quick, I suggest you just pick a ready-made template from the community gallery. Either pick a template developed by your CMP provider or a standalone template by Simo Ahava or other trusted sources.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Did you ever get consent mode set up for your substack site? I am dealing with the same thing currently.",
                "author": "finnwriteswords",
                "score": 1
            },
            {
                "body": "I dont think so",
                "author": "emilepetrone",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710156500.0,
        "title": "On-page consent update trigger",
        "author": "e0nblue",
        "id": "1bc0yr4",
        "selftext": "I've implemented Iubenda as a CMP on my website and I use Google Tag Manager to deploy most of my tracking scripts.  \nI've configured all my tags to require the right consent before firing.  \nBut when a visitor hits my site, obviously the consent state is set to Denied by default to be GDPR compliant. When my tags such as GA4 fire on an All Page Views trigger, they therefore see a Denied consent state and do not fire. If the visitor accepts the right cookies, I see in GTM's debug/preview mode that there is an on-page consent update but no tags figure. The tags only fire on the 2nd page view.  \nIs there a way to fire my basic tags on All Page Views OR an additional trigger that would fire when the right consent is granted so that I can track the landing page hit?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bc0yr4/onpage_consent_update_trigger/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Maybe you can try trigger group?\nI am Still on the way to set consent grant for Facebook pixel in tagmanger.",
                "author": "Charliesue_china",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you followed Iubenda's own guide? https://www.iubenda.com/en/help/74198-google-consent-mode-set-up-google-tag-manager-with-iubenda",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I have, that was the first resource I checked out.  Unfortunately, like I mentioned, most \"Pageview\" tags will only fire on the 2nd page view.",
                "author": "e0nblue",
                "score": 1
            },
            {
                "body": "Hi, so I added a trigger group that then triggers the Facebook page view. However can I add that trigger group to the GA4 page view as well? So that server side can also send the page view (conversion API)",
                "author": "LocksmithAware4210",
                "score": 1
            },
            {
                "body": "If you've followed that exact guide closely, then you should be seeing GA4 page\\_view events being sent even with consent denied. Google Consent Mode will take care of signaling when consent has been granted and you won't see the tag fire again.\n\nEveryone has jumped into learning how to implement consent since the DMA went into effect, so everyone is now speed-running learning just enough of how consent management works to make their site(s) \"compliant\".",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Use your CMP dedicated datalayer push events as trigger instead of pageview. This way the tags fire as soon as the event is pushed and will fire in the same page and all following ones.\n\n  \n\n\nIm on mobile but an example would be Cookiebot event called \"cookie\\_conscent\\_update\" event for example.\n\n  \n\n\nUse GTM debug on your website and accept or deny cookies and monitor which event related to the conscent changes and use that one.",
                "author": "TheMagam",
                "score": 1
            },
            {
                "body": "I had this with Cookiebot before realizing I hadn’t set the correct trigger for all base tags, regardless of whether they are Google ones and should have appropriate cosent checks built in or not.\nLooks like iubenda’s custom trigger event is called “iubenda_gtm_consent_event”. I’d start from there.",
                "author": "Kacay",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708614117.0,
        "title": "Consent Mode: Targeting Consent granted, however, Facebook tags not firing",
        "author": "Affectionate_Golf581",
        "id": "1ax8h7g",
        "selftext": "I am currently using the CookieYes CMP, with a SimoAhava consent update tag as part of the cookie banner implementation. \n\nI have set Facebook tags to require additional consent: ad_storage and have also created a JavaScript variable to listen for this consent have used that within the consent mode update tag. \n\nHowever, when consent is granted, the Facebook tag appears to fire within GTM preview mode, however I cannot see a server call for the tag.  \n\nWould appreciate advice on what needs to be changed ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ax8h7g/consent_mode_targeting_consent_granted_however/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Yes! So in the end what happened for my case was that the CMP automatically classified certain cookies under other consent classifications, so some FB cookies were classified under analytics consent within the CMP. As a result, granting analytics consent worked but only targeting did not. So would recommend checking out the classification of cookies within the CMP and rearranging if need be.",
                "author": "Affectionate_Golf581",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Why are you using consent update tag. A Cookieyes CMP should be enough.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you using this process for your Facebook tag? [https://www.cookieyes.com/documentation/features/integrations/block-third-party-cookies-with-google-tag-manager-and-cookieyes/](https://www.cookieyes.com/documentation/features/integrations/block-third-party-cookies-with-google-tag-manager-and-cookieyes/)\n\nEDIT: Took me 15 mins to register for CookieYes and implement in GTM. Facebook tag works as expected. If you can, please post screenshots of your Facebook tag and trigger configuration.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Just from a quick look at CookieYes, it does seem to send more than the required number of CoMo update events. I can understand a desire to have more manual control, which a CoMo tag would be useful for.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "No, I am not using that configuration. \n\nThe tag in question is a Facebook base pixel, and the trigger is the all pages trigger. The only thing that has been changed is the required consent, for which I have stated ad_storage. \n\nAdditionally, I have already created a variable that is looking for ad storage and it seems to be working as other marketing tags fire correctly. Only Facebook is not firing, however when I grant consent to analytics and targeting I can see the tags fire correctly",
                "author": "Affectionate_Golf581",
                "score": 1
            },
            {
                "body": "Did you ever find a solution for this? I'm having a similar issue with a LinkedIn tag.",
                "author": "Prestigious_Ad_5155",
                "score": 1
            },
            {
                "body": "Thanks!",
                "author": "Prestigious_Ad_5155",
                "score": 1
            },
            {
                "body": "I think I'm having this problem too,  did you have to start a \"Cookie Scan\" to identify these cookies in the CookieYes CMP?  \n\nMy current issue is since I have now set the Consent Mode settings in GTM (e.g. LinkedIn is set as \"analytics\\_storage\" these are now NOT being picked up by the CMP scan, and thus not firing at all. \n\nI think the CookieYes Scanner and the GTM \"Consent Mode\" settings are conflicting with each other right now.",
                "author": "buzbe",
                "score": 1
            },
            {
                "body": "Let me know if this worked! Happy to look into it and help out if it did not.",
                "author": "Affectionate_Golf581",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1700268822.0,
        "title": "Cookie consent banner and GTM tags",
        "author": "Monado_DaysoftheNew",
        "id": "17xu7tj",
        "selftext": "When setting up any GA4 and advertising tags in GTM, do they need to have any sort of consent attached to them if the website has a cookie consent banner? Or does the cookie consent banner cancel out the GTM tags if a user declines?\n\nAlso, what if the website doesn’t have a cookie consent banner?  \n\nLastly, if consent is needed for the Tags, any good resources/videos you recommend that show how to set this up properly in GTM?\n\nThank you!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/17xu7tj/cookie_consent_banner_and_gtm_tags/",
        "num_comments": 17,
        "comments": [
            {
                "body": "Here is a CMP implementation example.  https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "First thing I would do is check / ask what consent management platform the site Is using, then google like, \"OneTrust Google Tag Manager setup\" or \"CookiePro Google Tag manager setup\"  for example. There is usually clear instructions for that vendor. Also, many of them even have GTM templates already in the GTM template gallery, which you can just import into your GTM container. So, it wouldn't be just one document or video, it would vary by the vendor.",
                "author": "nakfil",
                "score": 3
            },
            {
                "body": "Thank you!",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "sorry I didn't answer all your questions clearly. If there IS a consent banner, you should respect a user's choice if they decline, and NOT fire GTM marketing / analytics tags. In that case you should check if the consent management platform has an integration with GTM.\n\nhowever if you do NOT have a consent banner then no, as long as the tags fired are inline with the website privacy policy, in my opinion.\n\nThat said, the privacy landscape is changing constantly and there state level laws in the US that are being passed regularly. Personally, if it's a small business,  it's probably fine. If it's a larger organization, I always defer to their legal team as there are varying levels of risk tolerance.\n\nMy Initial point was that the worst thing you can do is set ad/marketing/analytics cookies on a user's device from GTM if they have clicked \"decline\" on a cookie consent banner.\n\nhope that helps; interested in seeing if other people have different opinions.",
                "author": "nakfil",
                "score": 2
            },
            {
                "body": "Thanks that does help and makes sense.  Do you have any good videos or documents on how to set up consent for Tags for websites that do have a cookie consent banner?",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "If there's a chance the website is visited by EU nationals then you have to provide them with a cookie consent banner and the ability to opt out. Regardless of where your business is based.\n\nAs the previous poster mentioned, the likelihood of a large fine for a small business is going to be relatively small risk but is it worth it when consent products are pretty cheap and respecting user privacy should be the done thing.",
                "author": "mcockram85",
                "score": 2
            },
            {
                "body": "Small correction: For EU users you should be providing them the ability to opt-in, because you should be defaulting to them being opt-out.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Thanks!",
                "author": "Monado_DaysoftheNew",
                "score": 2
            },
            {
                "body": "Yes sorry I typed that in haste you're absolutely right that it's an explicit opt in.",
                "author": "mcockram85",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You should not fire gtm marketing tags without consent. However, it would be best if you follow the instructions provided by your consent management platform. Most of them have integrations and support for GTM.",
                "author": "nakfil",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Even the in the United States?  What if the website doesn’t have a cookie consent banner?  I’m most cases I don’t have access to the CMS either.  I’m just confused if this is absolutely necessary or recommended at this point?",
                "author": "Monado_DaysoftheNew",
                "score": 1
            },
            {
                "body": "Works for me. And I run Downnotifier so I know it is up. And works based on recorded traffic in Google Analytics. I cannot debug your Internet connectivity issues with so little information.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "All websites that have third party cookies in the US should have some sort of notice if only to avoid the privacy troll law suits re wiretapping, pen register, etc. The banner is the equivalent of the notice you hear when you call a call center--this call is being recorded, etc.",
                "author": "Individual_Race_8744",
                "score": 1
            },
            {
                "body": "Every other website works for me.  I'm on a corporate network with a proxy connection from home.  One of those things is the culprit. Many network admins block Weebly, and I think that's my case.",
                "author": "Firm_Sense9730",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723730556.0,
        "title": "Has anyone managed to get Consent Mode working with CookieBot and Shopify?",
        "author": "puk789",
        "id": "1esvzgd",
        "selftext": "I've followed the official CookieBot guide on adding the CookieBot script as well as the Default consent command directly into the theme's code. I've turned the consent mode option off (data-consentmode=\"disabled\") because I want to set everything up via GTM. \n\nI've enabled Consent Overview feature in GTM and set the GA4 tags to require additional consent (analytics\\_storage).\n\nI created the Consent Mode tag (template by Simo Ahava) for the Update command that fires on cookie\\_consent\\_statistics, cookie\\_consent\\_marketing or cookie\\_consent\\_preferences custom events, but for some reason it's not being triggered. (it's hard to tell as tag assistant is impossible to use with Shopify), but I'm not seeing the update event coming through in the data layer.\n\nAlso, the default consent state doesn't seem to get set properly (at least that's what the Consent Mode Inspector chrome extension says). \n\n\n\nAs a result of these not working, my GA4 tags get fired regardless of user consent and don't even contain the GCS parameter to indicate the consent.\n\n\n\nHas anyone figured this out? Thanks a lot!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1esvzgd/has_anyone_managed_to_get_consent_mode_working/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, I’ve done Cookiebot with Shopify. It’s challenging to answer all questions without checking the setup, but still, didn’t you use the official Cookiebot tag? For checking GA4 when you don’t have Tag Assistant, use the Analytics Debugger extension. Feel free to reach out if you need help with the setup.",
                "author": "MarketerErfan_",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721887158.0,
        "title": "Google Consent Mode tags and Analytics tag in an external.js file instead of inline?",
        "author": "yagami_kira",
        "id": "1ebniay",
        "selftext": "I'm trying to optimize my website's code and I'm considering putting my Google Consent Mode tags and Google Analytics tag in an external JavaScript file, instead of the usual inline method. However, I have no idea if this will affect how Google crawlers track my website and determine if Analytics or Consent mode is properly installed.\n\nCan this be done without any issues? Specifically, I'm planning to put the following code in an external JavaScript file:\n\n1. Consent Mode tags (e.g. gtag('consent', 'default', {...}))\n2. Google Analytics tag (e.g. gtag('config', 'TAG\\_ID'))\n\nSo it will look like this:\n\n\n\n/// external.js\n\nwindow.dataLayer = window.dataLayer || \\[\\];\n\nfunction gtag(){dataLayer.push(arguments);}\n\ngtag('consent', 'default', {\n\n'ad\\_storage': 'denied',\n\n'ad\\_user\\_data': 'denied',\n\n'ad\\_personalization': 'denied',\n\n'analytics\\_storage': 'denied'\n\n});\n\n<!---The rest of consent codes here--->\n\n\nvar script = document.createElement('script');\n\nscript.async = true;\n\nscript.src = 'https://www.googletagmanager.com/gtag/js?id=TAG\\_ID';\n\ndocument.head.appendChild(script);\n\ngtag('js', new Date());\n\ngtag('config', 'TAG\\_ID');\n\n\n\n/// index.html\n\n<html>\n\n\n<head>\n\n\n  <script src=\"external.js\"></script>\n\n\n</head>\n\n\n<body>\n\n\n</body>\n\n\n</html>\n\n\n\n\nAre there any specific considerations I should keep in mind when doing this?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ebniay/google_consent_mode_tags_and_analytics_tag_in_an/",
        "num_comments": 3,
        "comments": [
            {
                "body": "What matters here is to measure,  because theoretically, putting it in another file should not improve performance and can potentially make it worse because of the extra HTTP request.",
                "author": "RCoffee_mug",
                "score": 3
            },
            {
                "body": "You have to manually set the execution of your scripts to make sure everything is firing in the correct order.",
                "author": "Frosti11icus",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710954340.0,
        "title": "Conversions Not Recording - Consent Mode V2 ",
        "author": "always_sleepyyy",
        "id": "1bjiji3",
        "selftext": "I don’t live or advertise in the EU, but just before March (2/26) our conversion tag for a purchase stopped passing back information to Google products (Google Ads, Floodlight tag). I have checked the tag set up and nothing has changed, our web team didn’t make any changes to the site, and the only thing I can find that happened on/around 2/26 was the push for CMV2.\n\nSome questions and background info: \n\n- Is it possible this could be the reason my tags stopped passing back info? The conversion tags say “still running” after purchase, but only for our google product’s tags. It appears the tags fire but they never complete sending the info back to GA4/Google Ads\n\n- I know it’s for the EU only but could there be a reason it’s blocking the sharing of info or some setting where it’s impacting advertisers outside of EU? \n\n- I tried changing the trigger, creating a new tag, and I’ve met with Google (sigh lol) but they also couldn’t figure it out. \n\nPlease help!! Thank you!! \n\n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bjiji3/conversions_not_recording_consent_mode_v2/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Without access to your GTM, most likely you will receive only general information.  \nIf your problem will take long time(and by your description it will take a long time) - hire consultant.",
                "author": "_practical_data_",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "GTMs Preview mode is what you should be looking at. Have you confirmed with it that the tags do indeed fire, just don’t send the data back?",
                "author": "Kacay",
                "score": 1
            },
            {
                "body": "Blahhh thanks. I was just hoping someone had some ideas/suggestions/thoughts",
                "author": "always_sleepyyy",
                "score": 1
            },
            {
                "body": "Yes, exactly. They say “still running” instead of “fired 1 time”",
                "author": "always_sleepyyy",
                "score": 1
            },
            {
                "body": "I mean, I get it...  \nWhat can I say.  \n1. Check how consent mode implemented.  \n2. Check everything in preview mode of gtm...\n\nWithout actual access to the source of problem (or at least screenshots) it impossible to say more specific.",
                "author": "_practical_data_",
                "score": 1
            },
            {
                "body": "If you share your site URL here or in a PM I'm happy to have a look. Will at least be able to tell quickly if CoMo V2 is sending correct signals.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thanks for sharing the URL in chat.\n\nThere's no user privacy management at all, so I don't know if Google have decided to break some functionality specific to your conversion(s) due to the \"missing\" Consent Mode V2 signals (hopefully not!) or if it's some other issue.\n\nIs there a conversion that could be tested that doesn't involve paying for something?\n\nOtherwise, this is still one of the best resources to help diagnose \"still running\" tags: [https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/](https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/)\n\nEDIT: *Maybe* it's missing consent signals, but to test this I would throw up a new GTM container, a quick test site on something like Github Pages or Netlify and set up a fake conversion.\n\nOr quickly add a CoMo V2 default script to set everything to \"granted\" to see if that has a positive effect.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1708628847.0,
        "title": "What are the telltale signs that a GA4 tag is fired correctly without consent?",
        "author": "ChocolateYoghurt",
        "id": "1axep44",
        "selftext": "I've worked with a bunch of Consent setups these last few months, but one thing I've been struggling to find out is the actual difference in the firing of GA4 tags that without consent. \n\nOutside of relying on GTM consent and preview, are there any telltale signs f.ex. in certain cookies not being set? Or how the request is modified?\n\nBeing able to investigate this without having access to the GTM container would be beneficial as well.\n\nThanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1axep44/what_are_the_telltale_signs_that_a_ga4_tag_is/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Go to the website in your browser (Chrome) and Right-Click: Inspect > Application tab > Storage > Cookies. There you can see if certain cookies are being loaded or not.\n\nEdit: look up how to set up advanced implementation of Google Consent for the Consent Mode Platform you are using. Then you will see the tags firing in preview mode, if preview mode can’t read find your GTM, then tags don’t fire aswell.\n\nI hope I understood, and answered your question well.",
                "author": "takkietnawie",
                "score": 3
            },
            {
                "body": "Google don't like us doing it, but I'm using the gcd parameter in GA4 hits to debug / validate consent management.\n\nYou can use this to decode the contents: [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#consent-mode-v2-signals](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#consent-mode-v2-signals)\n\nGoogle have warned that it's a parameter purely for Google internal use, can change at any moment without notice and is not to be relied upon.\n\nTo which I took that to mean \"don't build important tools that rely on this paramter\", so I'm going to continue to use it for the exact purpose you're asking about until Google change it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Always network view. If you want an easier life, install Adswerve DataLayer Inspector+ to unearth GA4 hits to the dev console. \n\nYou'll see the gcd parameter in every GA4 network hit, whether Google Consent Mode is present or not.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "> Adswerve DataLayer Inspector+\n\nThanks, will test it!",
                "author": "ChocolateYoghurt",
                "score": 2
            },
            {
                "body": "Hey.\n\njust want to say that the 13r3r3r and 13p3p3p worked great. thanks!",
                "author": "ChocolateYoghurt",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can also use the content check site by Analytics Debugger to quickly decode the gcd parameter:\n\n[consentcheck.analytics-debugger.com](https://consentcheck.analytics-debugger.com)",
                "author": "datamelon",
                "score": 1
            },
            {
                "body": "Hey buddy :) \n\nConsent view in GTM answers some questions, of course, but not specifically how the tags behaviour is modified. \n\nThanks for your reply though!",
                "author": "ChocolateYoghurt",
                "score": 1
            },
            {
                "body": "Aha, this seems to be more in line with what I'm looking for.\n\nUsing the word parameter, I assume you don't mean adding this in any way to the GA4 tag itself, but rather looking at the cookies? or network? Or debug view?",
                "author": "ChocolateYoghurt",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709988203.0,
        "title": "Fact checking Consent mode settings",
        "author": "Ok-Gift-5572",
        "id": "1bagwpe",
        "selftext": "Analytics and Google Ads tags have ad\\_storage, ad\\_personalization and ad\\_user\\_data built in, so am I right in thinking these tags need no setup to comply with Consent Mode V2?  \n\n\nThen when looking at tags such as Microsoft Clarity, or other html / non Google tags, I'm confused with ideal setup.  \nShould I select any additional consent for these? Just ad\\_storage or does another make sense for Clarity, for example?  \n\n\nAnd am I right in using the custom trigger that only fires once consent is given, (removing the all pages trigger)  \n\n\nAs most people, I'm getting this deep into this side of stuff for the first time so a little lost  \nThank you",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bagwpe/fact_checking_consent_mode_settings/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Let's assume you have a CMP or any other cookie solution with integrated GCMv2 support.\n\nFor Google tags, you can leave them on whatever triggers you had before, they will respect the users consent choices.\n\nFor other tags like FB or Clarity, you need to make a few changes. First, make them require additional consent to fire. FB needs both ad_storage and analytics_storage, but Clarity only needs the latter.\n\nSecond, add an additional trigger to them besides All pages. This changes from CMP to CMP but you are basically looking for an event that happens when the user changes their consent and the update command fires. For Cookiebot for example, this would be \"cookie_consent_update\". This ensures that tags will be able to fire directly on the landing page instead of the second page, where the source/medium is already lost for example.",
                "author": "amlozek",
                "score": 3
            },
            {
                "body": "Hi, we made a complete tutorial on how to set up Consent Mode V2: [https://taggrs.io/en/consent-mode-server-side-tagging/](https://taggrs.io/en/consent-mode-server-side-tagging/) \n\n  \nHope we can help you!",
                "author": "TAGGRS_io",
                "score": 2
            },
            {
                "body": "Common sense. If a tag is used for marketing/remarketing, it needs ad_storage. If a tag compiles statistics of the visitors, it needs analytics_storage.",
                "author": "amlozek",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Awesome thanks. Yes, using Termly - and have the consent updated trigger as instructed replacing the all pages trigger.  \nWhere / how do I find out which of the additional consents fit each tag? You said Clarity needs analytics\\_storage, but FB would need that plus ad\\_storage. How do I know which tag needs which?  \nThanks",
                "author": "Ok-Gift-5572",
                "score": 1
            },
            {
                "body": "should you add that as an additional trigger or completely replace it?",
                "author": "Fine-Marketing-8134",
                "score": 1
            },
            {
                "body": "Read my comment again. \"...additional trigger besides All Pages\".",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "If you leave them on whatever triggers you had before you may be blocking the gtag until the user has provided consent, so this really depends if you want to use basic or advanced consent mode.",
                "author": "beenzie",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707764358.0,
        "title": "Consent Banner without a subscription",
        "author": "FastWave",
        "id": "1ap7rwa",
        "selftext": "Hi.\n\nI am looking for a consent banner solution that would integrate with Google Tag Manager and support GDPR. \n\nHowever, all the common solutions that I've come across (like CookieBot and CookieYes) are great but considering they are $100+ per year for a single site (e.g a site with a blog and 2 languages often already exceeds the free tier), it seems a bit excessive to pay this money, especially considering that web hosting itself is almost as expensive. \n\nAny recommendations? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ap7rwa/consent_banner_without_a_subscription/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You can try Klaro (open-source). I've checked their documentation and this guide so far\nhttps://measureschool.com/cookie-consent-banner/\n\nI haven't tried it yet. I prefer to pay 10€/month for cookiebot and spend my time elsewhere.\n\nGood luck !",
                "author": "yerdna",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "The cost of non-compliance could be a lot more.\n\nAlso, CookieBot has a free tier. You could use that.\n\nThe cost to *them* is it takes bandwidth and compute resource to run scans of your site and also to maintain the database of known cookies. That's why they have paid tiers.\n\nCookieBot is also one of the easiest (if not the absolute easiest) to integrate with GTM.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "If you use wordpress complianz pro is 59 euro for one license and as far as I know, keeps working even after the subscription runs out. You won't get updates though.",
                "author": "benl5442",
                "score": 1
            },
            {
                "body": "I sell ready to use code for 50 euro. Dm me if you’re interested.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "would your traffic fall within the limits of osano? https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thanks for the response. If on a free tier, do I understand correctly that Cookiebot will stop showing the banner if their scan detects that subpage count exceeds 50? Or is it rather that they only scan up to 50 and just ignore the rest for their 'analysis'?",
                "author": "FastWave",
                "score": 1
            },
            {
                "body": "I’ve never tested the theory to find out. At the stage where I’d have 50 pages, I’d just pay for the service.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707951315.0,
        "title": "Client has cookie policy code within website, Google tags are within GTM - Can I still comply with Google Consent mode V2?",
        "author": "QuietMrFx977",
        "id": "1ar0cnb",
        "selftext": "The client is using the one trust cookie code, they have GA4 and google ads pixels and then also meta pixels. \n\nIs there a way to comply with the v2 consent mode using this setup?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ar0cnb/client_has_cookie_policy_code_within_website/",
        "num_comments": 9,
        "comments": [
            {
                "body": "have you considered modernizing the CMP installation? like so... https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "and here is an Osano example. https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I don’t know this for certain but I think OneTrust has added a toggle / switch within its interface that will apply the two required google consent mode parameters.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "It is possible. You have to read the cookie with a user defined variable and put it into the google tag template (idk the exact name)",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "If you need more help let me know",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "No I didn't consider that, but I will now. Very interesting read, thank you",
                "author": "QuietMrFx977",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707184652.0,
        "title": "Consent Mode V2 Question",
        "author": "Gullible_Attitude_20",
        "id": "1ajybwh",
        "selftext": "Quick question around consent mode. Our agency (US based) is utilizing Google advertising products (Google Ads, GA4) for our clients, but we do not target EEA users within these platforms. We also do not use the built in audience capabilities within these platforms. Our clients' websites however, do receive some traffic from EEA areas. Is Consent Mode V2 implementation required if we're not targeting these EEA / EU users? \n\nThanks! ",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ajybwh/consent_mode_v2_question/",
        "num_comments": 9,
        "comments": [
            {
                "body": "https://www.reddit.com/r/PPC/comments/1acapxu/google_consent_mode_v2_needs_to_be_set_up_before/",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You do not have to make any changes if you are not targeting EEA users.",
                "author": null,
                "score": 1
            },
            {
                "body": "No. Not *yet*. I'd recommend planning for it though. I'm expecting the story of CoMo V2 to have a few twists and turns over the next 12 months.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Cool - I agree with you. We’re keeping an eye on it, since the current documentation is a little unclear in regards to targeting those users with advertising campaigns or just having traffic from those areas and their visit being recorded in an analytics platform. \n\nAlso, it would require our clients to get CMP’s, etc and they turn their heads a little when you say ‘you have to get a CMP, even though you don’t target EEA / EU users and really only service users in the southeast US.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Even \"pure US\" clients are going to have to deal with a CMP at some point as more and more states will likely bring in their own laws like California have.\n\nGoogle are really in the middle of a big ass-covering exercise and they are not cutting much slack. They are not the ones that are going to be caught with their pants down if regulators come knocking!",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yes I can totally see google expanding on consent mode to help them absolve any violations to CCPA and other US state legislature in the future.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "In fact, CoMoV2 is Google trying to get more data even when the consent is denied. And the \"basic\" vs \"advanced\" naming is in itself a testament to deception.",
                "author": "iroko537",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1704987722.0,
        "title": "Consent Mode V2",
        "author": "Shazacar",
        "id": "1944mm7",
        "selftext": "Hi all,\n\nWith the new consent mode V2 we need to implement that before end of March (in UE). We gonna have 2 possibilities : Advanced mode and Basic mode. To be fine with RGPD and don't go to the war against the DPO the Basic Mode is the best solution. I don't find a real tuto that explain how to setup these mode. What I see is: for the Basic Mode I need in GTM to add additionnal consent in the tag setup (even if the tag is already in the default setting of the tag) OR add a blocking trigger if the consent is not give. \n\nFor the Advanced we must let the setting as now and don't add a blocking trigger or a additionnal consent (like now in the consent mode V1).\n\n2 questions: is that correct? And how can you check if the basic mode is correctly setup and that no pings are send to Google (Advanced)? \n\nThank's ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1944mm7/consent_mode_v2/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Generally you never need to block any tag, the built in consent settings for each tag will be enough. At least for native google tags.  \nThird party tags might need a trigger like cookie\\_consent\\_update, and within the tags you will specify if it requires ad\\_storage or whatever, but generally that's it.  \n\n\nYou might see a tag firing even with consent denied, but there will be no cookie set",
                "author": null,
                "score": 1
            },
            {
                "body": "We implemented Consent Mode via GTM. \n\nYou can check if it's correctly implemented in Conversions > going to the conversion itself, for example, Form > clic in Diagnostics > and then you will see if everything is working correctly.\n\nBtw, I have a legal question. Do we have to specify in our Privacy Policy that we're using this set up or there's no need. Our lawyer made us put we were using Google Signals, so I was wondering if that's the same case with Consent Mode.",
                "author": "Green_Matcha89",
                "score": 1
            },
            {
                "body": "That's what Google refer to as \"CoMo advanced\".\n\n\"CoMo basic\" retains the tags fire / don't fire logic, so no cookieless pings are sent to Google.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I haven't really looked at the v2 documentation yet.  I'll check it later.  \n\n\nThe entire point of the consent mode is to collect anonymous pings so that google can model data. If we block tags, we block consent mode. At least this is how it is working now.",
                "author": null,
                "score": 1
            },
            {
                "body": "Yeah that’s the point, v1 CoMo is the news advanced mode on CoMo V2. But I saw some info that the advanced CoMo is not legal for EU and the RGPD. At this point I want to block the tag if the consent is not given but I litterally don’t know how to check if pings are send even with the blocking trigger. Google launch this new CoMo but what about a real technical doc…",
                "author": "Shazacar",
                "score": 1
            },
            {
                "body": "That was the original intended use case for CoMo, but that's no longer true.\n\nWith the DMA looming (March 6th), CoMo is now recommended if you want to continue to use GA4 audiences. There are other caveats because it's a bigger topic, but the \"point\" of CoMo now is to ensure Google platforms receive the signals they need in order to retain full functionality.\n\nThere are good arguments against advanced CoMo. There are potentially some jurisdictions (Finland) where cookieless pings are disallowed. You would still want CoMo, but you would be limited to a basic implementation.\n\nCoMo is not the modelling that happens. CoMo enables it, but each platform (GA4, gAds, SA360 etc) does their own modelling based on the redacted, cookieless pings.\n\ntl;;dr: You won't see the benefit of advanced CoMo if you don't allow the tags to fire, but you will still be able to use GA4 audiences after March 6th in certain (large!) jurisdictions.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "There are technical docs. Simo Ahava posts about this a lot. You should follow his posts on LinkedIn and sign up for his newsletter.\n\nHow to look for pings: Look in dev tools -> Network tab. For GA4, search/filter on \"collect?v=2\" and you will see (or not!) your `page_view` event.\n\nIf you have advanced CoMo (tags are not blocked), you will see the `page_view` event carries a `gcs` parameter with a value `G100` before you grant consent and for all subsequent events if you deny consent.\n\nIf you have basic CoMo (tage *are* blocked), you will see no hits prior to consent and no hits if you deny consent, but if you grant full consent you will see `gcs=\"G111\"`.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710350374.0,
        "title": "Open source Consent Management Platform (CMP) compatible with Google Consent Mode v2 (GCMv2)?",
        "author": "vppromoter",
        "id": "1bdx21q",
        "selftext": "Hi, in recent past I have setup quote some CMPs with GTM and right now I'm facing a tricky case. Maybe you will help with your ideas or experience.   \nThere is a website with data flowing into GTM (Enhanced ecommerce, conversion events etc.) but there is no Cookie Consent Banner. If I would need to use compatible extension, I would need to remove current working extension and go through a lot of customization work which is not a solution at this point. Let's not consider it for this thread.  \n3rd party CMPs with free plans are also not in the radius. Let's not consider it.  \nBecause of that I'm thinking to implement 3rd party solution and then use Consent mode template inside GTM which can catch consent mode v2 states.  \nSo the missing part is a cookie consent banner which can generate calls to data layer with consent states.  \nDo we have something in open source space for this? From what I've checked, most of the solutions are really poor in functionality and/or outdated.  \nIt would be great to get your valuable input.  \n",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bdx21q/open_source_consent_management_platform_cmp/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I'm not aware of any that are completely open source, but I'm interested to follow this post if anyone does know of one.\n\nThe difficulty with open sourcing would be how does the cookie scanning work? It's one of the significant costs of running a CMP due to the traffic and computation involved. Looking up a cookie name for one page on a website isn't taxing. Looking up 100 cookie names across 10k pages on a site starts to become a significant resource usage.\n\nYou can't just have a cookie banner and not an accompanying page that lists all of the cookies, their category and their reason for existing.\n\nNot open source, but I have recently signed up for the absolute lowest tier service from OneTrust. It works just fine for what I need.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "I have built a CMP that is based on open-source and has all the back-end features required for geo-targeting, etc. Checkout the docs here: https://cookiechimp.com/docs/overview",
                "author": "danielpaulme",
                "score": 1
            },
            {
                "body": "You can try out [c15t.com](http://c15t.com) — it’s an open source CMP built with TypeScript, Node, and React. It supports Google Consent Mode v2 and lets you push consent states to the data layer via GTM. It’s still early days, but we’re working hard to bring it up to the level of the bigger players. Would love any feedback if you give it a spin!",
                "author": "aburnedchris",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1714826288.0,
        "title": "Not seeing consent in server x-sst_system_properties",
        "author": "Mrjeepleet",
        "id": "1cjzdea",
        "selftext": "I dont why its gone for me all of the sudden? But i dont see the consent in x-sst\\_system\\_propterties all of a sudden. anyone knows why=?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cjzdea/not_seeing_consent_in_server_xsst_system/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Which parameter are you not seeing?\n\nx-ga-gcs is the only parameter I'd use for finding ad\\_storage and analytics\\_storage state.\n\nx-ga-npa for whether non-personalized ads is active or not.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711051189.0,
        "title": "GTM Consent Firing",
        "author": "danglefest19",
        "id": "1bkfuc9",
        "selftext": "I've set up our cookie banner using Cookie-Script and had a couple of questions to make sure this is set up properly. I'm receiving the gsc=G100 and G111 codes for approvals and denies, I also have this tag firing before the consent state (this tag fires before my Google Conversion Link and G Tag). Based on my research with the order of these tags firing, I have a feeling something is off. I have a couple of screenshots [linked here](https://drive.google.com/drive/folders/13tHIed1uCDKELBlbPI795llIzwOPRjYl?usp=drive_link) from Google Drive. One screenshot is from the Preview tool within GTM, another is of the consent template, and then one is for the entire container. I feel I need an Initialization trigger somewhere, but can't seem to find any detailed, step-by-step processes; there's seemingly a step missing for every resource I find.   \n\n\nAny help or initial thoughts would be greatly appreciated, and thank you.   \n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bkfuc9/gtm_consent_firing/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Google Tag should fire on Initialization. send\\_page\\_view should be false in that Google Tag and you should have a separate GA4 Event tag with an All Pages trigger to send your page\\_view\n\nYour \"Pixel FB\" tag should not be using an All Pages trigger, because All Pages can/will happen prior to the consent state being known. Not familiar with CookieScript, but hopefully there should be a \"cookie\\_consent\\_update\" event that is sent when users choose their consent and then on every page after CoMo state has been updated.\n\nYou should use that as a custom event trigger for all non-Google tags (where those tags read or write data to cookies).\n\nYou don't need to set Conversion Linker as a cleanup tag for the CookieScript tag. Fire Conversion Linker on All Pages and it will take care of itself.\n\n**If your cookie banner allows users to ignore it and they can navigate the site, there is a setting within Conversion Linker and in the Consent Mode default script that can preserve conversion link / attribution parameters. If you don't enable either mitigation, you will lose attribution for users who navigate prior to allowing cookies.**\n\n&#x200B;\n\nCMPs the definitely provide a reliable data layer event for replacing an All Pages for 3rd-party tags:-\n\n* OneTrust / CookiePro\n* CookieBot (unless you switch off CoMo)\n* CookieYes\n\nI'm sure there are others. These are the ones I've worked with recently.\n\nTrustArc can be coerced into working nicely as well, Google \"TrustArc GTM integration\".",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "If you are curious about in-details how cookie consent works and how you need to setup it for different method then you can follow this play list. Where you will every single details related to cookie consent setup with google tag manger: [https://www.youtube.com/playlist?list=PLI9byqXbTk7kqR5ZJoPsNnuZv4W8D8f1Z](https://www.youtube.com/playlist?list=PLI9byqXbTk7kqR5ZJoPsNnuZv4W8D8f1Z)",
                "author": "webhasan89",
                "score": 1
            },
            {
                "body": "This was extremely helpful, Stefan, thank you so much for the detailed reply. Apologies this kudos comes 8mo. late",
                "author": "danglefest19",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1712307699.0,
        "title": "No consistency in Google picking up Consent Mode V2 in Google Ads?",
        "author": "Podbyrin92mm",
        "id": "1bwdct2",
        "selftext": "So Consent Mode V2 should be implemented since the last few days.\n\nI manage about 30 Google Ads campaigns and I face quite some inconsistencies.\n\nThere are Google Ads accounts where Google indicates Consent Mode V2 is in place while I made zero changes in the corresponding Google Tag Manager (e.g.: no Consent Mode on my tags).\n\nAnd vice versa: I have clients for which I did the entire setup in GTM and tested it (plenty of documentation out there). But no mention whatsoever in Google Ads (conversions > diagnostics).\n\nI can't wrap my head around this why?\n\nDo I need a certain amount of conversions or clicks (I read 700 ad clicks the last 7 days?). But this seems to be inconsistent too. There are low traffic sites that are approved and high traffic sites that aren't. More worryingly, they have first-class cookie banners in place, not something obscure self-made.\n\nConversions still coming in for all accounts it seems, that's something at least.\n\nSeems like Google is shooting around blindfolded once more. Pushing to implement it but Consent Mode in GTM still in 'beta'?\n\nAny experiences or explanations?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bwdct2/no_consistency_in_google_picking_up_consent_mode/",
        "num_comments": 4,
        "comments": [
            {
                "body": "I think all Google cares about is if it gets those two new signals. At least with GA4.\n\nIt's not about Tag Manager settings. I've tested it. All you have to do is make sure that ad_user_data and ad_personalization signals are pushed to the data layer.\n\nYou SHOULD also change the tag consent settings in GTM to follow GDPR and so on, but that's another thing.",
                "author": "No_Celebration1487",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I just used https://termly.io/ In the end as its cheap and handled it all in GTM fine",
                "author": "mustardpete",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1704793740.0,
        "title": "**Not sure if this belongs here** Google Consent Mode, GTM, Usercentrics",
        "author": "Fit_Candy2153",
        "id": "192b4it",
        "selftext": "Hi! Two weeks (give or take) ago our events weren't measured accordingly. The ad\\_storage, ad\\_personalization, ad\\_user\\_data are all automatically declined, and are not updated after changing consent. We use Usercentrics as a CMP. \n\nThis causes Google Ads & Google Analtyics to not fire the events anymore and i'm unsure why it's happening. Everything has been set up like our other sites, and there it is working as it should. ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/192b4it/not_sure_if_this_belongs_here_google_consent_mode/",
        "num_comments": 8,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This might be a question for Usercentrics, but if you're OK to share the URL either here or in a DM I can investigate.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Some ideas:  \n\\- does Usercentric has a flag to enable consent mode (Cookiepro has one, Cooliebot not).  \n\\- is the default consent management snippet set before the GTM in your code?  \n\\- triggers for native google tags must NOT check for consent, this is done by the tag itself  \n\\- check that each snippet is in the right sequence  \n\\- in usercentrics loaded via GTM or in code? do you use the Consent Initialisation Trigger?",
                "author": null,
                "score": 1
            },
            {
                "body": "Did you find a fix for this? Experiencing similar issues.",
                "author": "Parade_of_Cubicles",
                "score": 1
            },
            {
                "body": "I have already asked them... But they say it's working (even though when i test it's not...)   . Sure which URL would you need? ;)",
                "author": "Fit_Candy2153",
                "score": 1
            },
            {
                "body": "The URL for the site where you're seeing the issue.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Check, i thought the GTM preview or something. I'll share the link in DM!",
                "author": "Fit_Candy2153",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1714076193.0,
        "title": "Leadfeeder & consent",
        "author": "trendy_pineapple",
        "id": "1cd1gv4",
        "selftext": "I'm evaluating Leadfeeder and a few comparable tools, and they all say that they're fully compliant with GDPR requirements and that you should just state your use of the tool wherever you disclose other analytics tools. I'm not seeing how they could possibly compliant though. For the free trial I've configured the tag to only fire after consent has been granted, but is that not something I need to do?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cd1gv4/leadfeeder_consent/",
        "num_comments": 3,
        "comments": [
            {
                "body": "\"We are fully GDPR compliant\" is *always* a lie.\n\nIf a platform collects data based on a user's actions and if that platform is providing a service to a marketer, that service likely has some value. If it has value, the data originally collected will almost certainly be subject to privacy laws / guidance applicable in the various jurisdictions.\n\nSimply assigning a persistent user ID puts the data in scope. Reading or writing persistent / semi-persistent data from / to the user's browser needs scrutiny. You would have a hard time arguing Leadfeeder is \"essential\" or a \"legitimate interest\"\n\nWorth mentioning, I'm no expert on the laws involved, but if you ever hear anyone use \"essential\" or \"legitimate interest\" to describe their desire to collect user data, they are using a faulty interpretation. \"essential\" is what the *user* would consider essential. \"legitimate interest\" is what the *user* would consider legitimate.  (even if my interpretation is incorrect, I still think it's a good way to go about it)\n\nGating the platform behind consent is the correct thing to do.\n\nSome (very few) platforms have their own ability to be provided with or read the consent preference the user has indicated and adjust the data collection to anonymise the collected data (or not).\n\nGoogle has Google Consent Mode for this.\n\nFacebook, if it still does support it, can \"stack\" events until the user provides consent, at which point it will send all the data back to their servers. I set this up once, but it's a shaky argument to say \"the user consented during purchase, so that means we will back-date that consent to all the pages they previously visited\".",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709802091.0,
        "title": "Consent Mode question - additional consent required / not required",
        "author": "mar1_jj",
        "id": "1b8q3in",
        "selftext": "Hi,\n\nwhen setting up Advanced Consent Mode I usually use All Pages or All Pages Dom Ready triggers and mark \"No Additional Consent Required\" for Google Tags.\n\nIs that okay? Or is it better to leave it as \"Not set\"? \n\nFrom what I learned, it doesn't make a difference, but for me it's easier to keep track of tags since I plan to use consent signals on other advertising platforms as well.",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b8q3in/consent_mode_question_additional_consent_required/",
        "num_comments": 5,
        "comments": [
            {
                "body": "\"Not set\" means \"I haven't considered the consent requirement(s) for this tag\".\n\n\"No additional consent required\" means \"I've considered the consent requirement for this tag and it's fine as it is\".\n\nYour Consent Overview report should have no tags in the \"Not set\" category.",
                "author": "StefanAtWork",
                "score": 4
            },
            {
                "body": "Got it, thank you.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "When you say Consent Overview report, are you referring to where you validate consent mode in GTM? And is there functionally any difference when you have the tags set to Not Set?",
                "author": "stevie-janowski",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1710344037.0,
        "title": "Why Consent Overview asks to setup consent when there's already built-in consent?",
        "author": "Responsible_Routine6",
        "id": "1bduf5e",
        "selftext": "As I've understand, when there's the build in consent, it manages by itself using the advanced consent mode. What am I missing? \n\n&#x200B;\n\n&#x200B;\n\n&#x200B;\n\n&#x200B;",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bduf5e/why_consent_overview_asks_to_setup_consent_when/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You need to make a conscious decision:\n\n\n\"Do I want my tags to always trigger and trust that the built-in consent is compliant with the privacy laws in my area (advanced) or do I want to the tags to trigger only when the proper consent has been granted (basic)?\"\n\n\n\n\nKeep in mind that other tags might also utilize built-in consent and maybe you don't trust those as much as you trust Google (LOL). In that case, the option for an additional check is a great to have available.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Imagine a regulator gets in touch with you and wants to audit your consent management.\n\nHow many tags do you think they want to see in the \"Consent Not Configured\" section of the Consent Overview report?",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1693313473.0,
        "title": "Unable to use consent Built-In without setting Additional Consent",
        "author": "duveral",
        "id": "164hnfs",
        "selftext": "**Require additional consent**: This works as expected (only fired when ad\\_storage is granted) -:\n\n[https://i.ibb.co/d6HRj6X/Screenshot-2023-08-29-at-14-36-18.png](https://i.ibb.co/d6HRj6X/Screenshot-2023-08-29-at-14-36-18.png)\n\n**No additional consent required**: This is is always fired  \n[https://i.ibb.co/d4vb5Hc/Screenshot-2023-08-29-at-14-41-15.png](https://i.ibb.co/d4vb5Hc/Screenshot-2023-08-29-at-14-41-15.png)  \n\n\nIt doesn't make sense, what is the correct approach? I've tried everything.\n\n&#x200B;",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/164hnfs/unable_to_use_consent_builtin_without_setting/",
        "num_comments": 12,
        "comments": [
            {
                "body": "I did a quick test and finally I get it now. Thank you, really. It’s true that I was having wrong behaviour since my GA4-Analytics configuration wasn’t even being fired prior consent, and after accepting consent was too late for it to act because it wasn’t even being loaded. \n\nNow it’s correct, it’s loaded on denied. No cookies created, change to accept cookies and working again with user data.",
                "author": "duveral",
                "score": 2
            },
            {
                "body": "There's a checklist Google provided us (\"us\" is the agency I work for) to ensure Google Consent Mode is implemented correctly.\n\nIn reality, checking for the \"gcs\" parameter in network hits being sent to GA4 is a good test. gcs=\"G100\" prior to consent, gcs=\"G111\" when full consent is granted.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I am uncertain why it is a problem that you are required to explicitly indicate which consent you wish to act upon. Here is an example of installing and configuring Osano CMP with Google Consent Mode for example. \r  \n\r  \nhttps://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "This is by design. Google native tags such as Conversion Linker *should* fire prior to consent and with consent denied. When Google tags fire in an environment where consent is not given / is denied, they modify their behaviour to not create cookies and to redact personal information.\n\nWhen / if consent is granted, the consent update sent through gtag.js (or the consent API) will retrigger the data being sent to whichever platform(s) are in play. You will not see this in Tag Assistant, but you can see it in the network tab in Chrome dev tools.\n\nYou definitely *should not* add additional consent to a Google tag that matches the built-in consent. The tag will likely not behave correctly. I've seen various wrong behaviour from this in the past. This is eactly where the \"additional consent settings work like an exception trigger\" analogy breaks down.\n\n**This is all based on the assumption of a correct implementation of Google Consent Mode!**",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "The statement Require ADDITIONAL consent sounds like it’s an option to add those non built-in, what’s the point then of those built-in?",
                "author": "duveral",
                "score": 1
            },
            {
                "body": "That’s interesting info but I need to understand it better, because firing a tag with consent denied doesn’t seem right to me due the fact a tag do more things than just setting a cookie. I’m addition to that, why is there a section where it states Blocked by consent if according to that info, the tags are not blocked but only their behave is changed. I’ll check that tomorrow because I was only checking the tags fired. But, it’s also confusing than most tutorials demonstrate this utility by checking the tags not being fired.",
                "author": "duveral",
                "score": 1
            },
            {
                "body": "In the video on the Google Support page, at about the 7 minute mark, you might find this information helpful. [https://support.google.com/analytics/answer/9976101?hl=en](https://support.google.com/analytics/answer/9976101?hl=en)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "What you describe when you say you expect tags to not fire when there is no consent is exactly correct when Google Consent Mode is not implemented.\n\nAs soon as Google Consent Mode is implemented, the rules change.\n\nGTM fires Google tags with or without consent. You should be using standard triggers e.g. All Pages, DOM Ready,\n\nYes, data is sent. However, the personal data is redacted or randomised. If / when the user grants consent, the same hit is sent to the platform except now cookies are created and all data is sent, as well as an indicator to the platform that it's receiving this new hit as a direct result of the consent status being updated (and what the prior status was).\n\nEDIT: Lots of tutorials either assume a \"standard\" consent implementation (no Google Consent Mode) or get it completely wrong.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "[https://www.youtube.com/watch?v=MqAEbshMv84&t=390s](https://www.youtube.com/watch?v=MqAEbshMv84&t=390s)",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Thank you! I’ll definitely check that tomorrow. So cookies should be a good way to check if Google consent mode is properly implemented right?",
                "author": "duveral",
                "score": 1
            },
            {
                "body": "\"It's a little shield and we'll see, it's not set right now in our settings, but we can say 'no additional consent required' because they already require ad or analytics and we can change that as well to require additional consent. So we can say, this also requires functionality storage, if we want and you can do this for different tags, not just your Google tags. We're going to say 'no additional consent required' and we'll save that.\" - recorded with Google Live Transcribe",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1709123487.0,
        "title": "Consent mode (CMP) requirment in United Arab Emirates",
        "author": "ibraheemn73",
        "id": "1b24yr5",
        "selftext": "Hi All,\n\nI'm a newbie in the CMP user privacy topic, and I have a few questions that I couldn't find answers to on the internet:\n\n&#x200B;\n\n* Is activating Consent Mode recommended in UAE, or is this requirement specific to the EU GDPR regulations?\n* Are we anticipating a decline in revenue or reach following CMP implementation?\n* What is the deadline for enabling CMP on our client's website?\n* Is CMP applicable only to the specific Google products mentioned (Google AdSense, Ad Manager, or AdMob) in the following [article](https://support.google.com/adsense/answer/13554116?hl=en) ?\n\nThanks!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1b24yr5/consent_mode_cmp_requirment_in_united_arab/",
        "num_comments": 4,
        "comments": [
            {
                "body": "It is required in the EU, but it will be better to implement it.",
                "author": "Brave_Mission_4682",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What do you mean 'decline in revenue'? If you are selling stuff you will continue to sell stuff with a CMP installed. If you are generating/ collecting leads you will continue to do so with a CMP. A CMP impacts measurement by honoring people's consent choices. But your site will continue to work.",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1705646220.0,
        "title": "Implementing Google Consent Mode with WooCommerce and Google Tag Manager",
        "author": "pjerz",
        "id": "19acrzb",
        "selftext": "Hi all!  \nI've observed that many websites successfully integrate Google Consent Mode through Google Tag Manager and some kind of CMP, like Cookiebot, for example. But when it comes to e-commerce functionality, they also rely on Google Tag defined through the WooCommerce plugin. This ensures proper functioning of the data layer and provides e-commerce events. On the other hand, it seems that the Google Tag from WooCommerce is loaded before the CMP, and this has led to some complications in configuring this combination effectively.  \nI'm reaching out to the community to seek advice on the best practices for configuring WooCommerce, Google Tag Manager, and a consent management tool like Cookiebot. I want to ensure that our e-commerce events work seamlessly while also maintaining compliance with GDPR. One way would be to define the ecommerce events manually, and keep the Google Tag only in the GTM, but I hope there would be a more simple way to do it.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/19acrzb/implementing_google_consent_mode_with_woocommerce/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I haven't touched WooCommerce, but how are you implementing your CMP? If you have it launching from a tag in GTM, that's going to be too late.\n\nWhat plugin are you using to inject GTM? I only know GTM Kit to include the features required to properly implement CoMo with GTM without hand editing theme files. Recent version also implements CoMo V2.\n\nI also only know that hand editing functions.php is a relaible way to implement a CMP.\n\nHaven't got much time at the moment to get into the details. Send me a DM on my personal account /u/digitalstefan and I can follow up if you would like to.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Implementing the OneTrust CMP https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Implementing the Osano CMP https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1704875120.0,
        "title": "How to setup Banner and Consent mode",
        "author": "Aby666",
        "id": "1933i0m",
        "selftext": "Hi everyone \n\nI am interested in setting up the above in GTM. I am thinking of OneTrust.\n\nAlso I am confused on what is the right approach on how to use Google consent inside GTM.\n\nDoes anyone have any good resources",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1933i0m/how_to_setup_banner_and_consent_mode/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If you use OneTrust CookiePro (which is an excellent product) don't be tempted to use autoblock. It's crap",
                "author": "chrisdufff",
                "score": 3
            },
            {
                "body": "You can find some resouces through a quick Google search:\n\nhttps://www.onetrust.com/blog/how-onetrust-integrates-with-google-consent-mode/\nAnd some user generate debugging here:\nhttps://www.reddit.com/r/GoogleTagManager/comments/tn2g5g/onetrust_and_consent_mode_via_google_tag_manager/\n\nWe use either https://www.cookiehub.com/ or https://www.cookiebot.com/ for our clients and try to handle all 3rd party scripts within GTM if possible. These are paid solutions but work well in our experience.",
                "author": "Abattage",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Taneli Salonen of 8-bit Sheep published his solution for installing and configuring OneTrust consent management from inside Google Tag Manager. \n\n\nhttps://tanelytics.com/integrate-onetrust-with-google-tag-manager/\n\n\nTaneli's solution covers everything except the implentation of the actual OneTrust Javascript call. Julius has an improved version of the OneTrust Javascript implementation. But the rest of Julius' solution does not leverage Google Consent Mode - so just that piece interests me as a 'Set Up' tag for Taneli's consent initialization triggered tag.\n\n\nhttps://www.analyticsmania.com/post/gdpr-cookie-consent-notification-with-google-tag-manager/",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1707938187.0,
        "title": "Google consent mode is enabled with all the Google Analytics tags within the GTM container, but not within OneTrust. Will GCM signals still be respected?",
        "author": "Effective-Meat2546",
        "id": "1aqv6h6",
        "selftext": "I believe GTM does the firing and blocking for the event changes pull in through the dlv. Is it absolutely necessary to enable the Onetrust module toggle for GCM as well? Thanks",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1aqv6h6/google_consent_mode_is_enabled_with_all_the/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "here is an example of a onetrust installation that is 1) done from inside GTM and 2) uses consent mode. https://drewspen.weebly.com/blog/onetrust-with-google-consent-mode-entirely-from-gtm",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1692441977.0,
        "title": "Is consent mode enough for GPDR?",
        "author": "duveral",
        "id": "15vcyec",
        "selftext": "I’ve setup my GTM workspace so the tag that fire events are sensitive to the use consent. I’ve implemented the cookies banner consent in my site and all that. \n\nMy question is: Even though the user denies, the cookies are still there (ga), they are not triggering anything on GTM but, is this GPDR compliant or should I remove the cookies manually?There are so many potential cookies from GTM so I don’t know if I’m missing something. \n\nI’m using the template of Simo Ahava.\nI’m using the oficial gatsby plug-in [Google Tag manager](https://www.gatsbyjs.com/plugins/gatsby-plugin-google-tagmanager/)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/15vcyec/is_consent_mode_enough_for_gpdr/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Thanks you are right and now the scripts are not writing any cookies because the tag is not being fired. Tricky structure but now I get it and it works as expected.",
                "author": "duveral",
                "score": 2
            },
            {
                "body": "Correct, I wasn’t doing it right. I wasn’t using any service but I can’t recall now what I was doing wrong. I believe it had to do with the initial state where you set the consent mode values.",
                "author": "duveral",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If the user declines statistical cookies, then you are not allowed to set statistical cookies. However you need a non-statistical cookie declaring that the user has declined statistical cookies.",
                "author": null,
                "score": 1
            },
            {
                "body": "No for the most part, but Google will never say otherwise.",
                "author": "goodgoaj",
                "score": 1
            },
            {
                "body": "Regarding the question if you need to manually delete any tracking cookies from the users browser if they don't consent to tracking is a grey area. Lawyers read GDPR differently when it comes to this question and you should always check with your legal department to get this question answered. With that said, from what I've heard from most legal departments of my clients, it is usually enough to somewhere in your cookie policy state that the users needs to delete the cookies themselves if they don't consent to being tracked, i.e. you need to inform the user.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "If I understand your question; No. Your triggers triggering base code for trackers need to check for consent before running the script. If a user accepts cookies, you need to store data concerning that consent, and provide a way for the user to edit or withdraw that consent. Blocking/allowing cookies is in itself not enough.",
                "author": "studiostefan",
                "score": 1
            },
            {
                "body": "Yes , but I haven’t found a site that states that, I’ve followed tutorials and blog posts like simo ahava with nothing related to clearing cookies. I’m trying to find an official GDPR statement about that.",
                "author": "duveral",
                "score": 1
            },
            {
                "body": "If your site is storing cookies (or local storage, or session storage) in the user's browser without consent, you are likely not in compliance with either GDPR or ePrivacy regulations.\n\nIf GA cookies are being created, some data is definitely being sent to GA.\n\nCreating a robust consent management setup in GTM is a challenge and unless you know exactly how to do it, it's extremely easy to make a mistake that will either cause users to be tracked without consent or will make a nonsense of your reporting.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I have an update for you. Google Consent Mode is enough, if the consent popup is compatible with it. Are you using a service like Cookiebot, for instance?",
                "author": "studiostefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1704845909.0,
        "title": "Consent Mode - Google Analytics",
        "author": "Dafd1990",
        "id": "192ucjs",
        "selftext": "Hello! I set up my Cookiebot through GTM, where by default, everything is set to \"denied,\" and it updates when people give permission for cookies. My concern is losing information like the number of sessions if there's no update to \"allow.\" I believe consent mode can address this issue if I understand the concept correctly. Could you guide me on how to configure it in GTM?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/192ucjs/consent_mode_google_analytics/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have had the same problem. I fixed it by pushing two events to the datalayer. The first one to trigger the consent update tag and the second one to trigger any other tag. My second trigger triggers with a second delay.\n\nHope this helped you. If not let me know.",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1663371011.0,
        "title": "GA4 with Google Consent",
        "author": "bookgirl4life",
        "id": "xg6euy",
        "selftext": "Can someone please help me understand the purpose behind the Consent Initialization - all pages and Initialization - all pages trigger in Google Tag Manager? Is that only meant to be used as a trigger when implementing Cookie Consent Manager (e.g. onetrust).  I currently use one trust, but it's hard coded into our site -- not set up in Google Tag Manager\n\nI added both of those triggers to my GA4 configuration tag (along with my \"All pageviews\" trigger), but by doing that I get a pageview fired at each load - consent, Initialization, and container loaded -- inflating my pageview numbers. Should I remove those triggers and instead just use the \"consent settings\" under each tag instead? Thanks!\n\n1 Comment**LikeCommentSend**",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/xg6euy/ga4_with_google_consent/",
        "num_comments": 19,
        "comments": [
            {
                "body": "You've misunderstood how consent mode works. It has nothing to do with  the terns and conditions of Google products. It adjusts how Google services *on your site* (GA4, UA, G.Ads conv. tracking, etc.) behave based on the cookie consent type the user chooses *on your site*.\n\nhttps://support.google.com/google-ads/answer/10000067?hl=en",
                "author": "Drendo",
                "score": 3
            },
            {
                "body": "Consent Initialization trigger is only for Consent Management Platform tags that must run as early as possible.\n\nIt’s usually best to hard code consent scripts on the site, but sometimes it’s easier to implement within GTM.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Thank you! The consent manager script (one trust) was hard coded into the site. So it sounds like I don’t need these triggers then? But to ensure my tags don’t fire without cookie consent, should I use “consent settings” within teach tag instead?",
                "author": "bookgirl4life",
                "score": 1
            },
            {
                "body": "If Google Consent Mode is actually active (I believe it is by default with OneTrust now), then yes you should use the individual consent settings for each tag under the Advanced menu.\n\nN.B. one odd “gotcha” with Google tags is if you add additional consent that matches the built-in consent, you will get unexpected results. Effectively the tag will just not fire even when consent is granted.\n\nEdit: If you’re implementing Facebook tracking, watch out for its auto event listener. You have to deal with that if a user withdraws consent otherwise Facebook will continue to collect data until the next page load (reload of GTM).",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "If that's the case how does Google take consent on your site?",
                "author": "rustyWhippet",
                "score": 1
            },
            {
                "body": "Okay, thanks. As far as I can tell some tags (e.g. GA4 Configuration tag, Google Ads) already have a built in consent check, so there's nothing else to do there right? But some of them don't have built-ins -- so for those -- i'd have to add the appropriate consent check (e.g. ad\\_storage), right? \n\nThanks for the tip on Facebook as well.",
                "author": "bookgirl4life",
                "score": 1
            },
            {
                "body": "Your CMP (e.g. Cookiebot) needs to support consent mode. In this way when a user clicks makes their consent choice, Google's tags adjust on the fly. So you still need the popup, but no matter which types of cookies are consented to, Google's tag fire.",
                "author": "Drendo",
                "score": 1
            },
            {
                "body": "Yes that’s right. Google tags have built-in consent checks (mainly because they will still fire without consent, but will alter their behaviour accordingly).You have to figure out what each 3rd-party tag should require for consent.\n\nA lot of them should need analytics_storage and ad_storage, even if you’re not using them for both analytics and remarketing. Facebook is definitely in this category. \n\nAlso for 3rd-party tags, you likely need to trigger them from a custom event of OneTrustGroupsUpdated instead of using an All Pages or DOM Ready, otherwise they may try to fire before the OneTrust script has done its part during a page load. This should be detailed in OneTrust’s own documentation. It’s been a while since I’ve looked!",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": ">OneTrustGroupsUpdated\n\nThank you!",
                "author": "bookgirl4life",
                "score": 1
            },
            {
                "body": "No problem. This is a large part of my day job!\n\nI’m still learning, but I’ve worked with OneTrust and Google Consent Mode for a little while now.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": ">OneTrustGroupsUpdated \n\nThanks. Just wanted to say that I removed the consent and initialization triggers on GA4 and it still seems to be working appropriately. Yay!\n\nI have Linkedin set up  as well, and I used a custom event to have it fire with OneTrustGroupsUpdated. do i also need it to fire on OptanonConsent as well? and I added a blocking trigger so that it does not match regex targeting cookie (C0004). Does that seem right to you?",
                "author": "bookgirl4life",
                "score": 1
            },
            {
                "body": "I’ll have a look tomorrow at what my config is exactly. I was working from memory in my previous replies.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thank you!",
                "author": "bookgirl4life",
                "score": 1
            },
            {
                "body": "As I understand it, Google consent is based on the consent every user has to give when using a Google product. Buried in those terms and conditions is the consent to allow any site using ga to track you. \nLegally it's questionable for a business to use only that consent (Google can afford to be sued, can you?)\n\nOne Trust is an example of an entirely stand alone consent controller.  It can block the setting of cookies if used in blocking mode, or you can manually block cookies by configuring your GTM to obey the datalayer pushes OneTrust broadcasts that notify you about the user's consent status. \n\nThe two things are separate.\n\nI've not used the consent trigger. But the idea you suggested of using the normal pageview triggers combined with consent mode sounds familiar.",
                "author": "rustyWhippet",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1691070384.0,
        "title": "GA4 tag not loading when consent mode is denied?",
        "author": "behtjes",
        "id": "15h4pzq",
        "selftext": "I've set up cookieconsent for CookiePro, reading the consent state with OneTrustGroupsUpdated. When I use the preview mode in google tag manager, it shows that the GA4 tag is loaded, even when the consent state is 'denied'. However, I don't see the tag loaded when I use the Google Tag Assistant extension in chrome. I also don't see any data in developer mode or real time mode in GA4. When the cookie consent is 'granted' the tag shows up and I see data in GA4.Is this normal behavior? I thought that when the consent was denied, it should still fire the GA4 tag but with modified settings according to GDPR\r  \n\r  \n\r  \n\r  \nSee my settings here:\r  \n\r  \nGA4:\r  \n\r  \nhttps://imgur.com/6Kz4AWK\r  \n\r  \nconsent mode default:\r  \n\r  \nhttps://imgur.com/GMGt4Ig\r  \n\r  \nConsent mode update:\r  \n\r  \nhttps://imgur.com/0S1V0eY\r  \n\r  \nOneTrustActiveGroups Datalayer:\r  \n\r  \nhttps://imgur.com/szTvXD7\r  \n\r  \nLookup table:\r  \n\r  \nhttps://imgur.com/xghAtN9\r  \n\r  \nTag assistant extension permissions granted:\r  \n\r  \nhttps://imgur.com/63kZa3R\r  \n\r  \nTag assistant extension permissions denied:\r  \n\r  \nhttps://imgur.com/ylxcRlf\r  \n\r  \ntag manager preview persmissions denied, but GA4 tag loaded:\r  \n\r  \nhttps://imgur.com/TePStDQ and https://imgur.com/MtLWsJ8\r  \n\r  \n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/15h4pzq/ga4_tag_not_loading_when_consent_mode_is_denied/",
        "num_comments": 8,
        "comments": [
            {
                "body": ">When I use the preview mode in google tag manager, it shows that the GA4 tag is loaded, even when the consent state is 'denied'.\n\nExpected behaviour. When consent is denied and Consent Mode is implemented, it will send a ping without identifiers. You can check the network tab in your Chrome developer tools to make sure no identifiers are included in the request.\n\n>However, I don't see the tag loaded when I use the Google Tag Assistant extension in chrome.\n\nThat thing is legacy. Idk if you can trust it.\n\n>I also don't see any data in developer mode or real time mode in GA4. When the cookie consent is 'granted' the tag shows up and I see data in GA4.\n\nPage visits without consent do not show up in the realtime report or in DebugView. Instead, the data is used for [behavioral modelling](https://support.google.com/analytics/answer/11161109).",
                "author": null,
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": ">You can check the network tab in your Chrome developer tools to make sure no identifiers are included in the request.\n\nI don't see any request to analytics until I grant the consent. There should be a hit to analytics right?",
                "author": "behtjes",
                "score": 1
            },
            {
                "body": "In the network tab, filter \"collect?v=2\"\n\nPrior to consent and on subsequent page views if you have denied consent you should see page\\_view hits with a parameter **gcs: \"G100\"** and the **cid** parameter will randomise on each page load.\n\nIf you grant consent, the consent mode \"update\" command will generate a hit to GA4 of a page\\_view event with **gcs: \"G111\"** and **gcu: 1**\n\nThat's what should happen in a perfect implementation. Your implementation isn't quite perfect.\n\n1. Your GA4 Configuration tag is firing on All Pages. You should change that to Initialization.\n2. Deactivate \"Send a page view...\" in the GA4 Configuration tag.\n3. Create a GA4 Event tag with an event name \"page\\_view\" and fire using an All Pages trigger.\n4. Remove Simo's Consent Mode tags and template.\n5. Unless you have non-Google tags (Facebook?) also remove the Lookup Table.\n6. If you have non-Google tags, still remove the lookup table and replace with two RegEx Tables where the input for both is the content of OneTrustActiveGroups and you return \"granted\" when the string contains \",C0002,\" for one tag (usually this is analytics consent) and \",C0003,\" for the other tag (usually marketing / targeting / ad\\_storage) *You should give users the option to manage both consent categories!*\n7. Implement the consent mode \"default\" script directly on site, immediately above the GTM script.\n8. In case you haven't already, make sure the GTM script is one of the first things within the <head> (and remove the GTM <noscript> from within the <body> ... won't affect anything for consent, but you shouldn't use it anyway).\n9. Make sure you have Google Consent Mode switched on within OneTrust. OneTrust / CookiePro will then take care of the Consent Mode \"update\" command at the exact correct moment.\n\nAdditionally I would recommend switching off as much of GA4's Enhanced Measurement as possible. If you really need scroll tracking or file download tracking, implement a tag for it. Don't let GA4 auto-collect user data. Privacy laws talk about only collecting data you know you need and you can always do a better job with a tag than GA4 can do with Enhanced Measurement.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks. I've done everything, except point 7. I don't have these rights for this website. Could you take a look at the website? -website url deleted-\n\ncollect still doesn't show up in the network tab...",
                "author": "behtjes",
                "score": 1
            },
            {
                "body": "I have had a quick look, thanks for providing the URL!\n\nYou will definitely need to implement the Consent Mode \"default\" command. I understand you don't have access / permission for that at the moment, The script I would implement to set up Consent Mode would be:\n\n&#x200B;\n\n    <!-- Google Consent Mode -->\n    <script>\n      window.dataLayer = window.dataLayer || [];\n      function gtag() { dataLayer.push(arguments); }\n      gtag('consent', 'default', {\n        ad_storage: 'denied',\n        analytics_storage: 'denied',\n        wait_for_update: 500, });\n      gtag('set', 'ads_data_redaction', true);\n    </script>\n\nPersuade a friendly developer this is needed!\n\nThere's a very good document here, direct from the CookiePro knowledgebase: [https://community.cookiepro.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7](https://community.cookiepro.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7) <--- Make sure you find the tick-box to switch on CookiePro's Google Consent Mode option, otherwise you will not see the Consent Mode update command being sent and none of your Google tags will send \"real\" data.\n\nIf you really find it impossible to get this script added, then that's the excuse to use Simo's Consent Mode template tag, but you're then going to have a more complicated job of firing tags at the right time. You will have to fire the \"default\" version of Simo's Consent Mode tag using the \"Consent Initialization\" trigger.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": ">If you really find it impossible to get this script added, then that's the excuse to use Simo's Consent Mode template tag, but you're then going to have a more complicated job of firing tags at the right time. You will have to fire the \"default\" version of Simo's Consent Mode tag using the \"Consent Initialization\" trigger.\n\nFor now I've tried to use the template, but no luck. Preview mode of tag manager shows it's working. But still no collect...\n\nSettings:\n\nhttps://imgur.com/iXBfwYm\n\nPreview consent initialization\n\n[https://imgur.com/pva7KBz](https://imgur.com/pva7KBz)\n\nga4 on initialization\n\nhttps://imgur.com/scsu0Dq\n\n&#x200B;\n\nI'll ask the developer. I hate this...",
                "author": "behtjes",
                "score": 1
            },
            {
                "body": "> I hate this...\n\nThis is my world! 😂\n\nI can see Consent Mode default in your second screenshot, which is good.\n\nI can see you've got a separate page\\_view event tag and everything looks like it's triggering correctly.\n\nI can see a GA4 hit with gcs=\"G100\", but still not seeing the Consent Mode \"update\", which should have been configured within CookiePro (it's in the link I sent in last comment).\n\nAlso, I'm suspicious maybe you have \"auto blocking\" enabled in CookiePro. That's usually a feature you don't want to use if you're managing all of your tags in GTM.. Always a headache using auto blocking.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1698301632.0,
        "title": "Third party cookies warnings after gtag consent update",
        "author": "roskam93",
        "id": "17gq4xb",
        "selftext": "When user set:`gtag(\"consent\", \"update\", {ad_storage: \"granted\",analytics_storage: \"granted\"});`\n\nas consent settings on our website, following warnings are thrown in google chrome console:\n\n[https://user-images.githubusercontent.com/28001613/277618924-92e90436-b950-4352-a157-7b2fb6673b74.png](https://user-images.githubusercontent.com/28001613/277618924-92e90436-b950-4352-a157-7b2fb6673b74.png)\n\nand\n\n[https://user-images.githubusercontent.com/28001613/277619004-1c1b4874-0529-4ae4-8043-7aef45b844a3.png](https://user-images.githubusercontent.com/28001613/277619004-1c1b4874-0529-4ae4-8043-7aef45b844a3.png)\n\nI've noticed that this happens only when ad\\_storage is \"granted\", analytics\\_storage can be set in any option and warnings are not shown.What do we have to do to fix these warnings, if we have? \n\nChange some settings in google ads or google tag manager, something else? Or this issue will be fixed by google itself, since these are google cookies?\n\nI've asked about this in google tag manager and google analytics help forums and stackoverflow but did not get any reply yet.\n\nHope someone can give me any information or help here.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/17gq4xb/third_party_cookies_warnings_after_gtag_consent/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Finally I got answer at github: https://github.com/GoogleChromeLabs/privacy-sandbox-dev-support/discussions/173#discussioncomment-7393749\n\nIn short: \"... I think you can ignore the warnings for this specific set of cookies. On our end, we're thinking about how we can reduce the noisiness of these warnings and make them more actionable. ...\"",
                "author": "roskam93",
                "score": 3
            },
            {
                "body": "Thanks for linking this answer!",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1681410757.0,
        "title": "Does Consent Mode work with AdSense?",
        "author": "No-Chip6160",
        "id": "12kyox5",
        "selftext": "Hey, noob question here. Is it possible to display AdSense ads without cookies, prior to cookie consent? I've set up a default consent tag setting everything to \"denied\", but AdSense still places cookies no matter what. The consent tag works according to Tag Assistant, it's set to denied upon consent initialization but AdSense seems to ignore it completely.\n\nIs it even possible to display any ads without cookies? Maybe I'm missing something here, it's quite complicated 🤷",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/12kyox5/does_consent_mode_work_with_adsense/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Only Google native tags within GTM respond to Consent Mode. AdSense will need to be switched off until the user grants ad\\_storage consent.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thank you,  \nif it needs to be switched off until consent, then what's the benefit of Consent mode? Right now I block the scripts completely until cookie consent is given, so the net result is identical.  \n\n\nMy point was to display some sort off cookie-less ads in case the user denies consent. Is that possible in any way, assuming I'd stick with Adsense ads?",
                "author": "No-Chip6160",
                "score": 1
            },
            {
                "body": "Incorrect. AdSense respects TCFv2, meaning any CMP that complies with TCFv2.2 will work with adsense.",
                "author": "NotMrMusic",
                "score": 1
            },
            {
                "body": "The point of Consent Mode is that you don't need to block Google tags from firing, e.g. Analytics, Floodlight, Google Ads. They will fire, but they will redact / anonymise data for users who haven't yet consented. That data isn't lost, like it would be if you blocked the tag(s), but it instead feeds a machine learning model to improve attribution and conversion reports. They will still be \"lost\" to sessions / users reports, but for things that affect your own ad spend / bidding strategy, it helps.\n\nAs to cookieless AdSense ads, I don't know. I would say it's unlikely and the alternate is to not display ads to those users or replace them with your own content.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Thanks for the info. I've ignored TCF for a long time, but I can see 2.2 made some good decisions especially regarding \"legitimate interest\", which was a ridiculous thing.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Thank you,  \n\n\nis there any other way of displaying Google's ads than Adsense? Preferably one that works with Consent Mode, so ads could be served for those few unconsenting users.  \n\n\nOr, possibly could the solution be to use an entirely different ad network?",
                "author": "No-Chip6160",
                "score": 1
            },
            {
                "body": "Fyi, adsense will now **require** you to use a Google certified cmp. You can just use Google's solution if you're feeling lazy, of course.",
                "author": "NotMrMusic",
                "score": 1
            },
            {
                "body": "If you are managing Adsense through GTM you could fire / not fire the tag. Otherwise you need to get into the code for the Adsense implementation in order to listen for consent updates.\n\nI don’t have experience with Adsense or implementing advertising, so I’m at the limits of my knowledge here. Sorry I can’t help further.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Oh that is pretty interesting. I can understand why. Google seem to be making clear decisions about consent and privacy that leave as little room as possible to launch lawsuits against them.\n\nWin-win, because most of the time this means actual user privacy is starting to happen.\n\nStill a long way to go.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1686098304.0,
        "title": "Consent automatically set to granted?",
        "author": "MuffinHatLP",
        "id": "142yfc4",
        "selftext": "I just set up consent management in my Google Tag Manager and I'm seeing strange behaviour, can somebody please help.\n\n&#x200B;\n\nWhen the page first loads, before the Google Tag Manager is loaded on my website, I call:\n\n`gtag('consent', 'default', {`  \n`ad_storage: 'denied',`  \n`analytics_storage: 'denied',`  \n`wait_for_update: 500,`  \n`});`\n\nFollowing that the user is asked for consent and if given I call\n\n`gtag('consent', 'update', {`  \n`ad_storage: 'granted',`  \n`analytics_storage: 'granted'`  \n`});`\n\nif denied\n\n`gtag('consent', 'update', {`  \n`ad_storage: 'denied',`  \n`analytics_storage: 'denied'`  \n`});`\n\n&#x200B;\n\nWhen I'm inspecting whats actually going on when I open my website and before accepting or denying consent this is what I see\n\nConsent event: [https://imgur.com/XD8LeS0](https://imgur.com/XD8LeS0)\n\nI can see that it detected the default values of denied. Event consent state is also denied.\n\nConsent Initialization: [https://imgur.com/9UjAczw](https://imgur.com/9UjAczw)\n\nIt says it still know about the default values and that no update consest has happened but why has the  Event consent state changed to granted now?\n\nContainer Loaded: [https://imgur.com/W50mBwe](https://imgur.com/W50mBwe)\n\nSame as above? At this point tags trigger when I think they shouldn't? At least until i grant consent?\n\nTags triggering: [https://imgur.com/kCC5pFv](https://imgur.com/kCC5pFv)\n\nAny help would be appreciated.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/142yfc4/consent_automatically_set_to_granted/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Same issue on my GTM\n\nI tried using Iubenda coookie solution Template TAG and Consent Mode (by Simo Ahava) to set the consent mode\n\nOn **Consent** event the permission is set as **\"denied\"**, after dataLayer.push({event: \"**gtm.init**\", ...}) they change to **\"granted\"**\n\nI'm pretty sure that the same setup was working fine before \n\nAnyone with the same situation?",
                "author": "grishnackh-86",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Based on exactly this behaviour, I wrote a WordPress plugin for Google Tag Manager that correctly sets the consent statuses. I made it work by a lot of trial and error and using \\~200 websites as test subjects. It finally worked, and I am distributing the plugin free.\n\nYou can get it and use it for your WordPress website, on, if you don't have a WordPress website, you can dissect it and extract the code and see how I did it.\n\n[https://getbutterfly.com/wp-gcp-a-wordpress-plugin-for-google-consent-mode-v2/](https://getbutterfly.com/wp-gcp-a-wordpress-plugin-for-google-consent-mode-v2/)\n\nNote that this plugin only works with GTM, not GA4, directly, as it's easier to send the consent status via GTM.",
                "author": "getButterfly",
                "score": 1
            },
            {
                "body": "It's impossible to give you any advice on this without knowing more.\n\n1. How is Google Consent Mode being implemented?\n2. Which Consent Management Platform are you using?\n3. How is that platform implemented e.g. is it via a script directly on the site, a script via a custom HTML tag in GTM or a tag template in GTM?\n\nI've seen similar behaviour recently from a \"proper\" implementation of Osano.\n\n&#x200B;\n\nEDIT: Did you spot your Google Ads tag is \"still running\"? This might be a Content Security Policy issue.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I'm not the only one, I didn't manage to find a solution...\n\nPeople are saying I might have two default events firing but I checked and I don't.\n\nOne thing that did work is sending an update defined request right after with the default denied request even when the user hasn't expressed their preference.\n\nIm worried that is messing with the tag that have custom behaviours based on consent.",
                "author": "MuffinHatLP",
                "score": 1
            },
            {
                "body": "Hi, thanks for your response.\n\n&#x200B;\n\nI'm not using any Consent Management Platform. My implementation is basically what you see here: [https://developers.google.com/tag-platform/devguides/consent#implementation\\_example](https://developers.google.com/tag-platform/devguides/consent#implementation_example)\n\nAs I described in the post I first call this before the Google tag script runs:\n\n`gtag('consent', 'default', {`  \n`ad_storage: 'denied',`  \n`analytics_storage: 'denied',`  \n`});`\n\nThen down the line once the user selects either accept or deny I call \"update\" with the corresponding params. Example: \n\n`gtag('consent', 'update', {`  \n`ad_storage: 'denied',`  \n`analytics_storage: 'denied'`  \n`});`\n\nI hope this makes it more clear.",
                "author": "MuffinHatLP",
                "score": 1
            },
            {
                "body": "Same problem here. I set the default to denied but somehow, it gets overwritten to granted. Did you ever find the solution?",
                "author": "Deda111",
                "score": 1
            },
            {
                "body": "I never did 🤷🏽‍♂️",
                "author": "MuffinHatLP",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1687761207.0,
        "title": "Help! Almost working OneTrust and Google Consent Mode in GTM",
        "author": "google_12345",
        "id": "14j9e8a",
        "selftext": "I am using OneTrust to manage the cookies via Cookies Banner fired from GTM all the while. As Google has introduced the Google Consent Mode, I thought to give it a go since it will simplify the triggers configuration since Consent Mode is an option in the tag itself. My plan is to enable the Google Consent mode with existing OneTrust script (with Google Consent Mode turned on in the admin), then slowly update each tag to fire depending on this consent mode, instead of the OneTrust default triggers.\n\nWhat I have done so far\n\n* Enabled Google Consent mode in OneTrust admin\n* Added gtag('consent', 'default', { ad\\_storage: 'denied' }); in the application\n* Enabled Google Consent Mode in GTM\n* Updated the tag to use Google Consent Mode\n* Replace the trigger of the tag to All Pages, instead of the blocking trigger by OneTrust\n* All OneTrust cookies banner script remains the same in cHTML\n\nWhat is working\n\n* The respective tag is denied when application loaded\n* When user accepts the banner, the tag will fire\n\nWhat is not working\n\n* If user refreshes the page or after the page load, Google Consent Mode back to 'denied' but OneTrust banner state is 'Accepted'.\n* It seems like Google Consent mode will work once\n\nQuestion\n\n1. How do I tell OneTrust to update Google Consent upon a page refresh or reload?\n2. Is there anything I need to update on the custom HTML that fires the OneTrust?\n3. What are those 3rd Party Community Template for OneTrust?\n\n  \n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/14j9e8a/help_almost_working_onetrust_and_google_consent/",
        "num_comments": 7,
        "comments": [
            {
                "body": "October 25 2023, Taneli Salonen of 8-bit Sheep published his solution for installing and configuring OneTrust consent management from inside Google Tag Manager. \n\nhttps://tanelytics.com/integrate-onetrust-with-google-tag-manager/\n\nTaneli's solution covers everything except the implentation of the actual OneTrust Javascript call. Julius has an improved version of the OneTrust Javascript implementation. But the rest of Julius' solution does not leverage Google Consent Mode - so just that piece interests me as a 'Set Up' tag for Taneli's consent initialization triggered tag.\n\nhttps://www.analyticsmania.com/post/gdpr-cookie-consent-notification-with-google-tag-manager/",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "One Trust setup can be really annoying. \n\nUnder consent mode events do still get sent,  but the permission code is 100 rather than 111. As such Google ignores the event under UA, and tracks anonymously under GA4. Id it possible that's what you're seeing?\n\nSimo had a good article on consent mode for GA4.",
                "author": "rustyWhippet",
                "score": 1
            },
            {
                "body": "If I only have GCM enabled in the tags within the google tag manager, and don’t have Onetrust GCM toggle on, will GCM signals still be respected?",
                "author": "Effective-Meat2546",
                "score": 1
            },
            {
                "body": "Hi, I'm not referring to GA4 but just a general tag with Floodlight. My problem when user reloads the page, Google reinitialized the consent which means previously granted tags are denied again. How do we get Google Consent to retrieve from cookies what already been granted?",
                "author": "google_12345",
                "score": 1
            },
            {
                "body": "You should be seeing the \"default\" push for consent mode followed by an \"update\" push after consent status is known, i.e. just around the time \"OneTrustGroupsUpdated\" event fires.\n\nIf you message me the URL (or share here if you're allowed / OK to) I'm happy to have a look.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Yes, I can see the \"OneTrustGroupsUpdated\" event whenever an action done on the OneTrust Banner. When I set the trigger to this event, the tag will fire correctly. Is this how it suppose to work where we need to bind the tags to fire base on this event?\n\nI was expecting the Google Consent mode to have minimal changes to the tags, where my trigger will remain the same (eg All Pages).",
                "author": "google_12345",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1694745524.0,
        "title": "Google Consent Mode - Regions setting default state",
        "author": "keoto7",
        "id": "16j1gar",
        "selftext": "I have a custom written template which works with OneTrust. But we tried launching last week and all through testing our default consent drew from the proper default consent. But now, the consent mode is always set to the region. \n\nWould love some help with this if anyone has ideas",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/16j1gar/google_consent_mode_regions_setting_default_state/",
        "num_comments": 3,
        "comments": [
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I've seen one instance where OneTrust made a change to their script that broke things with Google Consent Mode. Took them \\~40h to revert or fix it. I don't beleive they ever mentioned that it even happened.\n\nWhat is your custom template doing? Have you got a Github link?",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "are you 'committed' to OneTrust? would you be open to switching to Osano? no, I do not work for Osano. [https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode](https://drewspen.weebly.com/blog/implement-osano-cmp-in-gtm-with-consent-mode)",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1690217906.0,
        "title": "Consent initialization may not be working ?",
        "author": "Connect-Bedroom-4565",
        "id": "158g9ys",
        "selftext": "Is anyone having issues with consent initialization - all pages being unavailable ?\n\nThe consent initialization firing trigger appears blocked/ not triggering either. \n  \nI've also noticed cookies started to drop before consent was given. This wasn't the behavior a few day back, therefore I believe they are related.\n\nIve found this online https://support.cookiehub.com/article/167-issues-with-default-consent-state-in-google-tag-manager-may-2022 and no other sources saying the same. But it seems to be a known issues. Im trying to apply the recommended javascript on that article, but was wondering if any one has other alteratives or suggestions ?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/158g9ys/consent_initialization_may_not_be_working/",
        "num_comments": 4,
        "comments": [
            {
                "body": "I'm not seeing any issues. I've just created a new container, added the CookieBot tag template and was able to create a tag with Consent Initialization trigger.\n\nIf you're trying to use a Consent Initialization trigger for a Custom HTML tag to insert the Consent Mode default command, that's not going to work. Just due to the nature of how browsers work, GTM can't push Custom HTML into the DOM as early as a Consent Initialization trigger might lead you to believe.\n\nWhat are you actually trying to implement? If you just need to set up Consent Mode, there is a tag template in the community gallery by Simo Ahava that does a great job of it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Now that I implemented GA4, this started to happen, it wasnt like that with UA.",
                "author": "Connect-Bedroom-4565",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1686158869.0,
        "title": "Tag Assistant says Event Consent State is \"granted\" even thought default is set to \"denied\"",
        "author": "MuffinHatLP",
        "id": "143jdeo",
        "selftext": "I have consent setup on my website.\n\nWhen the website first loads I send a consent default event with all consent states set to denied.\n\nAfter, I ask the user for consent and communicate that to the tag manager with the consent update event.\n\nLooking at the Tag Assistant before the user responds I can see that the first consent default event was picked up and set: [https://imgur.com/XD8LeS0](https://imgur.com/XD8LeS0)\n\nThe problem is all the following events have that same Event Consent State then set to granted even thought I never sent an consent update event: [https://imgur.com/9UjAczw](https://imgur.com/9UjAczw), [https://imgur.com/W50mBwe](https://imgur.com/W50mBwe), [https://imgur.com/kCC5pFv](https://imgur.com/kCC5pFv)\n\nWhat is going on here? Shouldn't all the following Event Consent States be set to denied?\n\nI tried sending an update event right after the default request and in that case the denied consent seems to persist through the next triggers.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/143jdeo/tag_assistant_says_event_consent_state_is_granted/",
        "num_comments": 4,
        "comments": [
            {
                "body": "As it's obvious which website this is, I went and had a look.\n\nLooks like you've fixed this issue now - or at least I don't observe any problems. Prior to selecting consent, the data layer clearly has only a single consent default command, correctly set to \"denied\" for all.\n\nWhen I revisit, there's a correct sequence of consent default = denied, followed by consent update = granted (I'd accepted cookies on first visit).",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Yes, but do you see the screenshots I posted? Do you think what Tag Assistant is reporting is normal? Why is the event state \"granted\" if the default is \"denied\" and no update event was sent?",
                "author": "MuffinHatLP",
                "score": 2
            },
            {
                "body": "I did and I agree that looks absolutely wrong. Tag Assistant is a wonderful debug tool, but it's at the bottom of a \"chain of trust\" for me.\n\nFrom worst to best it goes Tag Assistant ---> AdSwerve Datalayer Inspector+ (Chrome extension) ---> Network tab in Chrome dev tools.\n\nFor data layer debugging, there's also the Dataslayer extension, which my colleagues love but I've never liked. Just invoking \"datalayer\" in the dev console is my go-to.\n\nIn your situation, my thought process is \"have we got a second GTM container on the page, causing issues?\" ... \"have we got anything else hardcoded, or is there some (un)helpful plugin from our CMS interfering with events?\" and then when I know exactly what scripts and tags are / aren't running, only then do I start down a path of debugging what I've implemented.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1690925493.0,
        "title": "TrustArc consent management GTM integration",
        "author": "DigitalStefan",
        "id": "15fphwg",
        "selftext": "I haven't worked much with TrustArc's consent management, but I do work with one client who use it. It's bothered me that the GTM integration is a bit lacklustre. It essentially hasn't changed in at least 5 years.\n\nIntegration comprises a Custom HTML tag that runs a script that creates an event listener that then sends one or more data layer events with names like...\n\nGDPR Pref Allows 1\n\nGDPR Pref Allows 2\n\nGDPR Pref Allows 3\n\nThis makes it awkward to control a tag that requires both level 2 and 3 consent (2 = analytics, 3 = marketing). You can do it, but it's just not \"nice\".\n\nThere's a GitHub Gist: [https://gist.github.com/shadybones/71617252fd8814d1b9f9a6114030f63a](https://gist.github.com/shadybones/71617252fd8814d1b9f9a6114030f63a) that's been around since 2018 and this is the code you put in a Custom HTML tag and fire on every page. Funnily enough, this is pretty much exactly how [trustarc.com](https://trustarc.com) implements it. You can see it (if you look carefully) in their own GTM container [https://www.googletagmanager.com/gtm.js?id=GTM-T3CS5GN](https://www.googletagmanager.com/gtm.js?id=GTM-T3CS5GN)\n\n&#x200B;\n\nI've forked the Gist ([https://gist.github.com/stefanatcroud/cd103ecfabf7dbe37d6a13d01557775f](https://gist.github.com/stefanatcroud/cd103ecfabf7dbe37d6a13d01557775f)) to work a little more like OneTrust's data layer output, so we can have a single data layer push that looks like:-\n\n    {\n    event: \"TrustArc Consent\",\n    trustarc: {\n        consent: \"1,2,3\"\n    }\n\n}\n\nSuper easy to work with inside GTM.\n\nEDIT:\n\nI've updated the script so that where previously you would see \"GDPR Pref Allows 0\" (i.e. for new users landing on your site, prior to making a consent choice), there's a new event \"TrustArc Pre-Consent\" with no event data.\n\nThis separates the \"there's been a genuine consent choice by the user\" event name from \"there's no previous record of this user's consent choice\", which further simplifies triggering rules in GTM.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/15fphwg/trustarc_consent_management_gtm_integration/",
        "num_comments": 2,
        "comments": [
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1682419583.0,
        "title": "Cookie consent implementation in GTM",
        "author": "Des1re_DK",
        "id": "12yfnza",
        "selftext": "I've setup the Cookie Information variables and triggers in GTM and applied the \"cookie\\_cat\\_statistic\" to the GA4 config tag and the UA tag and the \"cookie\\_cat\\_marketing\" to the facebook pixel.\n\nWhen I'm testing in GTM Preview Mode, my GA4 events are still being triggered (not the ga4 config tag, UA tag or Facebook pixel tag) when I'm choosing \"neccessary cookies\".\n\nBut my GA4 events (add\\_to\\_cart, view\\_item etc) are still being triggered. The **GA4 events are setup with the GA4 config tag in the tag settings.**\n\nAre these events still being sent to GA4, or will the **cookie\\_cat\\_statistic variable in the GA4 config tag** block this?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/12yfnza/cookie_consent_implementation_in_gtm/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If the tags are triggering they are being sent. Check your network tab in developer tools and you will see the outgoing requests. It doesn't matter that the config tag is blocked if your other events are not. The config tag just contains the initial information that is to be sent with an event that uses it. It doesn't block events (unless set up in a specific way).",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thanks!  \n\n\nI've implemented the cookie\\_cat\\_statistics for the GA4 event tags now and cookie\\_cat\\_marketing for my facebook pixel now, but my \"users in last 30 minutes\" are not dropping. Why is that?",
                "author": "Des1re_DK",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1679586685.0,
        "title": "Consent Mode",
        "author": "avrvieira",
        "id": "11zogmu",
        "selftext": " \n\nHello guys,\n\nI was wondering about consent mode and see if there was any more info over here, I want to know if when consent mode is active, does it still track form based events? like form submissions?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/11zogmu/consent_mode/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Consent Mode is really a nice way of managing consent in GTM. It can abstract away all the differences between the various consent management platforms such as OneTrust, CookieBot etc., although non-Google tags will still need to trigger from a consent update event instead of page views, DOM ready etc.\n\nI've seen the Consent Mode per-tag consent settings described as working the same as / replacing consent exception triggers, but it's best not to assume that because while it does seem to have the same effect, it does not work in the same way.\n\nGoogle Tags get the benefit of still being fired without consent, but because Consent Mode is active, they will report differently to e.g. GA, GA4 etc. They carry a \"gcs\" parameter, which indicates the consent present (or not) and the platform deals with the data differently based upon that.\n\ne.g. Google Ads can use the anonymised data that comes from a non-consenting user to feed a machine learning model that will affect conversion and attribution.\n\nAFAIK, no non-Google tags / platforms can react in the same way and will simply fire / not fire depending on consent, just as they would without Consent Mode being active.",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "[If this post doesn't follow the rules report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/).\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Tracking depends on what the user consented",
                "author": "-smashbros-",
                "score": 1
            },
            {
                "body": "Assuming that we've also done a good job of integrating with a consent management platform or we know what we're doing well enough if we've rolled our own.\n\nConsent Mode does nothing by itself and still relies on correct implementation followed by a thorough round of testing.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1666513591.0,
        "title": "Cookie Consent Management - need help with some basic concepts",
        "author": "griz_fan",
        "id": "ybc641",
        "selftext": "I'm struggling with what might be a very basic concept on how cookie consent management platforms (CMPs) work in conjunction with GTM, so I'm hoping someone here can help clear things up for me.\n\nI've used CMPs like OneTrust or CookieYes for GDPR-compliant cookie consent management, but I've always done this in conjunction with GTM, by setting trigger conditions that look to the first-party cookie set by the CMP to see if consent has been provided and only then firing the tag. \n\nWhere I get confused is that most of these CMPs also claim to work simply by deploying their JavaScript code to the website. This is where I get confused and could use some help. Here's what I think is happening; the CMP JavaScript code has a way to disable functionality in 3rd party tracking tag code, preventing that code from setting any cookies. This would require the CMP code to fire first, and would also require the CMP code to correctly identify and disable any subsequent code that could set a cookie. Am I correct in my understanding?\n\nIf so, this sounds like an easy to deploy process, but not very robust or performant, or am I missing something? \n\nthanks!",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/ybc641/cookie_consent_management_need_help_with_some/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Like you, I have dealt with consent management only within GTM. That being said, I have seen how some of them operate when there are hardcoded tags / scripts on the page that also need to be controlled.\n\nThere's usually an \"automatic\" mode, were the CMP script identifies scripts on the page and effectively blocks them from firing without consent.\n\nThe alternate is a \"manual\" mode, where you need to add attributes to the <script> HTML element to identify what (if any) specific consent is required and you also generally will change the script type to \"text/text\" (as opposed to <script type=\"application/javascript\">. The CMP will then handle dynamically changing this if it decides consent is present.\n\nIn general, I tell clients \"no hardcoded scripts. We need everything to be in GTM\" and also push to implement Google Consent Mode, because this is useful in terms of maintaining consent management without worrying about random scripts appearing as well as theoretically providing the balance of respecting user privacy whilst still collecting some data that can be useful.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "Hey, we are happy that you are using CookieYes! Your understanding of how CMPs work with GTM is quite spot on.                                                                                                           For any help with GTM implementation for CookieYes, you can check out these guides:\n\n[Google Consent Mode with CookieYes](https://www.cookieyes.com/documentation/implementing-google-consent-mode-using-cookieyes/?ref=reddit)\n\n[Block third-party cookies with GTM](https://www.cookieyes.com/documentation/block-third-party-cookies-with-google-tag-manager-and-cookieyes/?ref=reddit)\n\nWe’d like to also point out that CookieYes allows you to block loading from a particular URL by adding a URL pattern for a cookie.                                                                                  If you have any further questions or concerns, please feel free to write to [support@cookieyes.com](mailto:support@cookieyes.com)",
                "author": "cookieyesHQ",
                "score": 2
            },
            {
                "body": "Thanks for the info. I also take the approach of making sure 100% of all tags/scripts go through GTM. I found an implementation article from CookieYes describing how their process works outside of GTM, where the instruct to add \"attribute “data-cookieyes” to cookie-setting script tag\" so their JavaScript can directly control scripts outside of GTM. \n\nI have a client who has an older site running on an in-house system, where all the original developers were replaced by off-shore devs, so no one really knows how some tags get set. Most are in GTM, and I think I've found the remaining. The devs are hesitant to touch any of the legacy code and move those script to GTM, so if I'm unable to talk them into doing things the right way, at least there's a fallback option.",
                "author": "griz_fan",
                "score": 2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1672316645.0,
        "title": "I implemented a trigger for the conversion connecter tag (google ads) to only fire this tag if the user gives his consent. Does this tag fire now on all pages (if the user gives consent)? Or do I have to create a trigger group with this consent-trigger and the pageview trigger (all pages)?",
        "author": "Ill-Growth230",
        "id": "zy4624",
        "selftext": "",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/zy4624/i_implemented_a_trigger_for_the_conversion/",
        "num_comments": 1,
        "comments": [
            {
                "body": "This is very much an \"it depends\". Most people don't implement consent management in GTM correctly. I'm not saying you haven't, but your uncertainty and the mention of trigger groups indicates you might not have.\n\nAre you using any of the popular consent management platforms such as CookieBot, CookiePro (OneTrust), TrustArc etc? They all have specific methods of correctly implementing triggers based on a custom event. e.g. \"cookie\\_consent\\_update\" is CookieBot's effective replacement for \"all pages\". That event fires on every page at the point where CookieBot's script has run *or* when the user makes their consent choice.\n\nTrigger groups are best avoided unless fully understood and probably never should be used for consent management. Cleaner, less difficult to debug and maintain options exist.\n\nedit: You should test this. You can add e.g. \"?gclid=Test123\" onto your URL and check whether \"Test123\" is correctly copied into a cookie when consent is granted. If it is, the tag is working. If it only works on the landing page, you need to use preview mode and tag assistant to figure out how to trigger the tag.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1656638175.0,
        "title": "Showing cookie consent window based on geolocation",
        "author": "ChopperDave85",
        "id": "voo8d3",
        "selftext": "I have Google's GTM cookie consent manager implemented on our website, a company with locations in the US and Europe. As you would expect, since adding consent controls I've seen a large dip in traffic and other metrics in both Universal Analytics and GA4.\n\nDoesn't make for great conversations with my bosses when they ask about website metrics and effectiveness of campaigns with UTM tags.\n\nSo what I'm wondering is can I set up something to read a user's geolocation, then have the consent window not appear if they are in a country that doesn't require it, and appear if they're in a country under GDPR. Of course if the user is under GDPR, I'd still like to have their info blocked or removed if they don't accept.\n\nIs this something that can be done?\n\nJust some background info: I'm not a developer, coding isn't my strong suit. Most of our GTM setup was done by our web developers, but I'm trying to save some cash since we're a bit over budget for the year. Should I even try to do it myself if possible?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/voo8d3/showing_cookie_consent_window_based_on_geolocation/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Short answer is yes.\n\nThe longer answer is completely dependent on your technical architecture and infrastructure (as it exists today, and your willingness to change it)",
                "author": "bradatlarge",
                "score": 1
            },
            {
                "body": "At a city level IP geolocation isn't 100% accurate (my analysis suggests about 85% for our particular situation). \n\nI don't know if that translates to country level, but I'm willing to bet that while it's probably not as bad, it's not 100% either.\n\nBecause we're crossing into legal territory I would be asking whether even 99% accuracy is sufficient for this.\n\nI come from a country where GDPR isn't a requirement, but I see these pop-ups all the time. I assume these companies have simply gone down the path of \"ask everyone\", and I wonder if that's because they can't risk missing a few people from GDPR countries.",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "Thanks, what kind of arch and info changes might it take? I do have hreflangs in the mix to point to their local page already if that gives some insight.\n\nI'm open to changing things up.",
                "author": "ChopperDave85",
                "score": 1
            },
            {
                "body": "I see. I'm sure VPNs add a bit of a headache to the mix as well. About 80% of the traffic is from the US where I'm located, so we're missing out on a large number of the vanity metrics that give the CEO a warm & fuzzy feeling. CCPA will become a factor, but if I can do country-based, state level shouldn't be that difficult for me to figure out.",
                "author": "ChopperDave85",
                "score": 1
            },
            {
                "body": "You could go at this a variety of ways. Using a cookie consent solution that supports geo location via a CDN might be your least cost of implementation.",
                "author": "bradatlarge",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1648629537.0,
        "title": "Does every event need a cookie consent trigger or do I just need it once with the analytics tool integration?",
        "author": "LeBokLe",
        "id": "ts1w19",
        "selftext": "Basically the question in the title. \n\nWhen I have an event, which is dependent on the users cookie settings, does that need a cookie consent trigger (like \"Analytics cookie activated\").\n\nOr is it enough when I add this trigger only once to the analytics tool integration (like Google Analytics)? As far as I know, this should work, since even though an event might be triggered, nothing gets sent to Google Analytics, right?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/ts1w19/does_every_event_need_a_cookie_consent_trigger_or/",
        "num_comments": 6,
        "comments": [
            {
                "body": "I think it mostly depends on the CMP you are using and on the tag.\n\nFor instance, if I have the facebook base pixel set in one tag, and all the other facebook standard events in separate tags, I would take care only of the base pixel. (same for LinkedIn).\n\nAbout Google Tags, I usually let the consent mode take care of everything (at least if I am with Cookiebot or Cookiepro, I am having issues with other platforms)",
                "author": null,
                "score": 1
            },
            {
                "body": "For Google Analytics, it's enough to use Consent Mode in the GA4 tag only. But for all non-Google sources (Facebook, linkedIn,...) I would use it on each and every event, not only on the base pixel.\n\nCan indeed vary from CMP to CMP but usually it's pretty well documented.",
                "author": "Podbyrin92mm",
                "score": 1
            },
            {
                "body": "It will work either way but consent mode on each event is a bit more strict.\n\nYou'll see notifications too before you submit a new version of your container that some tags require additional consent so it depends how far you want to take things.",
                "author": "Podbyrin92mm",
                "score": 1
            },
            {
                "body": "Wait, now I'm confused. u/Podbyrin92mm says \n\n>I would use it on each and every event, not only on the base pixel.\n\nbut you\n\n>I would take care only of the base pixel.\n\nWhat is it now?",
                "author": "LeBokLe",
                "score": 1
            },
            {
                "body": "Thanks, exactly what I was looking for. \n\nHow can this be done properly? Does that mean I have to create a trigger group for every single event which need cookie consent? Because when using multiple triggers within an event they all have an OR operator, which would not work.",
                "author": "LeBokLe",
                "score": 1
            },
            {
                "body": "I think it depends on the implementation but either way is ok.\n\nI usually check for consent in the base facebook pixel, because this is the one setting the facebook cookie. For instance this will set the cookie and will send a pageview event.\n\n<!-- Facebook Pixel Code -->  \n<script>  \n  !function(f,b,e,v,n,t,s)  \n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?  \n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};  \n  if(!f.\\_fbq)f.\\_fbq=n;n.push=n;n.loaded=!0;n.version='2.0';  \n  n.queue=\\[\\];t=b.createElement(e);t.async=!0;  \n  t.src=v;s=b.getElementsByTagName(e)\\[0\\];  \n  s.parentNode.insertBefore(t,s)}(window, document,'script',  \n  'https://connect.facebook.net/en\\_US/fbevents.js');  \n  fbq('init', '{your-pixel-id-goes-here}');  \n  fbq('track', 'PageView');  \n</script>  \n<noscript>  \n  <img height=\"1\" width=\"1\" style=\"display:none\"   \nsrc=\"https://www.facebook.com/tr?id={your-pixel-id-goes-here}&ev=PageView&noscript=1\"/>  \n</noscript>  \n<!-- End Facebook Pixel Code -->\n\nLet's say that I blocked the above code due to missing consent, even if I fire this event no cookie will be set because the event needs the above code to be executed.\n\nfbq('track', 'Purchase', {value: 0.00, currency: 'USD'});\n\nu/Podbyrin92mm solution is indeed cleaner than mine, because console errors will be avoided.\n\n(not native english, I hope it's clear)\n\nPersonally, I love cookiebot how it manage consent with google tag manager. I can just set ad\\_storage as additional required consent without messing too much with the triggers.",
                "author": null,
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1648280878.0,
        "title": "Consent Mode: checking consent status",
        "author": "Fabr15io",
        "id": "tojmc1",
        "selftext": "Hi all,\nAs in title, I'm trying to understand where I can find the consent status while user is browsing.\n\nIs It in a global JS variable? Is It in the dataLayer? Are data stored somewhere else?\n\nThank you in advance!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/tojmc1/consent_mode_checking_consent_status/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Someone may have a better handle on this than me, but my method would be to create a JS variable to grab the status then use that as your trigger. Or you can do a datalayer push/event with the status as a custom dimension and use that as a trigger.",
                "author": "enpensant",
                "score": 2
            },
            {
                "body": "Usually the CMP saves the consent preferences in a first party cookie. You could read it with a Cookie Variable in GTM.\n\nEDIT\n\nspecifically for the consent mode, you can read its status via window.dataLayer in the Chrome console",
                "author": null,
                "score": 2
            },
            {
                "body": "Not automatically AFAIK. You'll have to scrape the page with JS manually as a variable or fire an event that sets that value.",
                "author": "enpensant",
                "score": 2
            },
            {
                "body": "Is the status available in a global js variable?",
                "author": "Fabr15io",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1662470472.0,
        "title": "An example of what not to do when you're handling user consent in GTM",
        "author": "StefanAtWork",
        "id": "x7ai3q",
        "selftext": "I've just seen a prime example of how not to handle user consent. Client has implemented OneTrust, but so far has not applied consent handling to control the fire / don't fire for their existing Universal Analytics tags.\n\nThese things do take time. I understand.\n\nHowever, they did take the time to create a new UA event tag that responds to the once-every-page OneTrustGroupsUpdated datalayer event.\n\nConfigured as:-\n\n>Category: OneTrust  \nAction: Updated  \nLabel: Groups  \nValue: {{OneTrustActiveGroups}}\n\nNow... this means that without any user consent being granted, user data *about* their consent choice is being sent to GA.\n\nIt also doesn't do what the tag is configured to do, because \"Value\" is required to be numeric and {{OneTrustActiveGroups}} is a string.\n\nConsent handling can be difficult!",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/x7ai3q/an_example_of_what_not_to_do_when_youre_handling/",
        "num_comments": 0,
        "comments": []
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1641860997.0,
        "title": "Cookies consent - current state in custom HTML as variable?",
        "author": "frosty22cz",
        "id": "s0zavz",
        "selftext": "Hi,\n\nI have cookie consent in GTM and every built-in tag work well (Analytics, etc). I know that I can make condition for \"**Custom HTML**\" via \"**Require additional consent for tag to fire**\" but I need add custom HTML as:\n\n`<script type=\"text/javascript\">` \n\n`var xyzSymbol = {{Symbol of order}};` \n\n`var xyzPrice = {{Total price of order}};` \n\n`var hasAdStorageConsent = ????? // true or false if has user allowed \"ad_storage\"` \n\n`</script>`\n\n`<script type=\"text/javascript\" src=\"//www.xyz.cz/rs/static/rc.js\"></script>`\n\nDoes exists a variable with current ad\\_storage state? Or has a callback for it? or something etc.\n\nThank you for any help.",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/s0zavz/cookies_consent_current_state_in_custom_html_as/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Simo (as always) has the answer: [https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#check-consent-state](https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#check-consent-state) and [https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#listen-for-changes-in-consent-state](https://www.simoahava.com/analytics/consent-settings-google-tag-manager/#listen-for-changes-in-consent-state)",
                "author": "MediaWellDone",
                "score": 1
            },
            {
                "body": "Not sure if I understand your question correctly, but you can capture the consent using the gtag API.\n\nIt would look something like this:\n\n`window.dataLayer = window.dataLayer || [];`  \n`function gtag() { window.dataLayer.push(arguments); }`  \n`gtag('consent', 'default', {`  \n  `ad_storage: 'denied',`  \n  `analytics_storage: 'denied',`  \n  `wait_for_update: 500,`  \n  `region: ['US-CA', 'FI']`  \n`});`\n\nAfter the intial consent, you can use the \"update\" command to change the consent. This would look like the following:\n\n`gtag('consent', 'update', {`  \n  `ad_storage: 'denied',`  \n  `analytics_storage: 'granted'`  \n`});`\n\nYou can check the option \"require additional consent for tag to fire\" for non-google tags. Then you can fill in the consent options that are required.\n\nMaybe it helps you.",
                "author": "bubbleblub17",
                "score": 1
            },
            {
                "body": "Thank you, but I've already solved that part. The consent is updating correctly in Google Tag Manager. I am looking for a solution for the \"Custom HTML\" tag to which I need to pass the code that contains the consent status.",
                "author": "frosty22cz",
                "score": 1
            },
            {
                "body": "i only know of the option, to check the custom html tag wit additional consent, but im not sure if an in-html solution exists.",
                "author": "bubbleblub17",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1639484368.0,
        "title": "GDPR cookie consent implementation.",
        "author": "KakosNikos",
        "id": "rg6are",
        "selftext": "The cookie plugin in a friend's woocommerce, load the GTM snippet AFTER the user consent to cookies (the page reloads). As a result (I think) the traffic is counted as direct traffic instead of organic or cpc. \n\nWhich is the right way to implement this, so he can have the correct acquisition metrics?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/rg6are/gdpr_cookie_consent_implementation/",
        "num_comments": 3,
        "comments": [
            {
                "body": "Reloading the page should not change the `document.referrer`, so the source shouldn't be lost.",
                "author": "MariusGMG",
                "score": 1
            },
            {
                "body": "What cookie plugin are they using?",
                "author": "HawkeyMan",
                "score": 1
            },
            {
                "body": "Agreed. try creating a pseudo-user hit through the measurement protocol hit builder tool and recreate the steps while reviewing in the debug view; check the source generated within the hit parameters.",
                "author": "JoeFuryAnalyics",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1601571515.0,
        "title": "Triggering a pageview when a user consents to cookies with GTM",
        "author": "xgodgorilla",
        "id": "j3chrd",
        "selftext": "I have set up Cookiebot for an ecommerce site and also have setup Pageviews when consent is given (which works only when the user refreshes the page or goes on to the next one). However, the page on which the user accepts his cookies isn't being tracked. Is there a way to trigger a pageview on the same page where the user accepts the cookies? \n\n&#x200B;\n\nI believe that this is a common problem, but I can't find information about this online or I am searching the wrong way. Any ideas will be helpful, thanks.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/j3chrd/triggering_a_pageview_when_a_user_consents_to/",
        "num_comments": 8,
        "comments": [
            {
                "body": "That's kind of the point right? Don't track them until you get consent?\n\nThe best you can do is to have another trigger that sends a pageview when they accept it.",
                "author": "xtothel",
                "score": 2
            },
            {
                "body": "Cookiebot should already send an event to the datalayer once consent is given. They also provide a consent listener which is described on their support page.\n\nYou need a trigger based on either the automated event or set up the event listener.\n\nThat trigger can then fire your page views.",
                "author": "chieldeleeuw",
                "score": 2
            },
            {
                "body": "Try using a trigger group that fires when the following conditions have occurred:\n1 - a pageview has been pusehed to the datalayer before the consent has been granted\n2 - The user has granted consent (base on dataLayer push from consent manager or event listener)",
                "author": "rxavas",
                "score": 2
            },
            {
                "body": "Yep, thats what im looking for. I can track all the other pages and a refresh būt i cant seem to track the page on which the user consents. So i am looking for a way. How can i trigger another pageview when the page is already viewed?",
                "author": "xgodgorilla",
                "score": 1
            },
            {
                "body": "This.",
                "author": "TowersOfToast",
                "score": 1
            },
            {
                "body": "You āre actually right. I missed this before. The tag is firing, thanks.",
                "author": "xgodgorilla",
                "score": 1
            },
            {
                "body": "Thanks for the suggestion. There are Events that are being pushed to gtm after the click on accept, so i used those to track the pageview.",
                "author": "xgodgorilla",
                "score": 1
            },
            {
                "body": "Well, you'll have to somehow push an event to the datalayer when a user accepts. Then, create a custom event trigger in GTM matching that datalayer event name and create a pageview tag based off of that.",
                "author": null,
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1640263329.0,
        "title": "Cookie Consent Triggers Not Stopping Page View Tags Firing",
        "author": "Naoise90",
        "id": "rmuw2g",
        "selftext": "Hi, I'm running into an issue on GTM where I've set up cookie consent triggers for GDPR Cookie Consent plug in on WordPress site. Most tags are firing as expected, however, a few tags relating to  Page View triggers are showing up in the Container Loaded section of the debugger. Why is this and how can I ensure they only fire when the relevant cookie consent is selected?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/rmuw2g/cookie_consent_triggers_not_stopping_page_view/",
        "num_comments": 0,
        "comments": []
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1627637554.0,
        "title": "Problem with Tag Manager consent mode and Analytics traffic not showing up in dashboard",
        "author": "gregcy",
        "id": "ouhe92",
        "selftext": "Hi All.\n\nI have setup a site with Universal Analytics to use the Tag Manager consent features in conjunction with a Consent Platform and all is working fine on that front. The problem I have is that when a visitor does not give consent to analytics cookies, even though the analytics hits are still sent to Google Analytics, this data does not show up in any reports.\n\nApparently this a known issue (Thanks to [/u/sahava](https://www.reddit.com/u/sahava/) for his [blog post](https://www.simoahava.com/analytics/consent-mode-google-tags/#restrict-analytics-storage) that helped me finally figure out what was going on) and is due to a new parameter gcs, which includes the consent status of the hit. All traffic with the gcs parameter set doesn't show up at all in the Analytics dashboard.\n\nAs this is a news publisher site, Analytics numbers are very important so I am trying to figure out a workaround. So far I have come up with two possible ideas but have no clue if they are possible or how to implement.\n\n1. One workaround would be to remove the gcs parameter from the hits sent to Analytics. Is this possible? Any pointers to documentation or code that shows how this could be done would be really appreciated. I did try google with no luck.\n2. The second workaround would be to use the \"storage: none\" method as described [here](https://stackoverflow.com/questions/4502128/convert-google-analytics-cookies-to-local-session-storage/19207035#19207035). While this works fine and hits are sent and counted without cookies being set, I can't figure out a way to update this if a user consents to setting cookies. What value should storage be set to for normal operation with cookies? Is is possible to push a new config value with gtag commands that takes effect without refreshing the page?\n\nI would really appreciate any pointers or feedback on the ideas above or to hear any other suggestions or solutions that might help solve this problem.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/ouhe92/problem_with_tag_manager_consent_mode_and/",
        "num_comments": 2,
        "comments": [
            {
                "body": "GA4 or UA?",
                "author": "morningcoma",
                "score": 2
            },
            {
                "body": "Its with UA. I'll edit the post to clarify that",
                "author": "gregcy",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1622157762.0,
        "title": "Two New Trigger Types: Consent Initialization & Initialization",
        "author": "mkt_jaguar",
        "id": "nmkfan",
        "selftext": "As some of you may be aware, two new trigger types were added today to GTM: Consent Initialization & Initialization. I've read what few documentation there is on the Initialization trigger and it sounds somewhat similar to having Page View tag with a high priority. Any other differences or possible use cases with these two new trigger types?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/nmkfan/two_new_trigger_types_consent_initialization/",
        "num_comments": 1,
        "comments": [
            {
                "body": "They can be used with Google Consent mode which lets you change the behavior or block tags from firing. The two new triggers are useful for implementing consent mode by firing a default consent setting with the consent initialization, an update if a user already consented with the initialization and all other tags with the normal pageview triggers which are then changed or blocked by the consent mode setting.",
                "author": "michelvk_nl",
                "score": 2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1758253873.0,
        "title": "I spent the entire day configuring server-side tracking with GTM",
        "author": "yborunov",
        "id": "1nktb92",
        "selftext": "Is it just me or anyone has gone through the same pain???\n\nI still don't fully understand how Tags should be configure to route all the requests to my server instead of Google's servers.\n\nSome docs say use \"server\\_container\\_url\" to define your server, others \"transport\\_url\".\n\nHalf of my events are sent to my server, half are still going to Google, despite both tags are the same configuration, seemingly. \n\nThis combination of Google Tag for server container, Google Tag for Google Ads, GA4 tag and two containers Server + Client is a giant hot mess. \n\nOh, and the preview server! Preview in the server container doesn't let you enter URL unlike client container. So I didn't manage to see any events displayed in it when I click preview. No idea how to trigger debug mode with server container preview...\n\nNo simple documentation how to set up server GTM to just track Google Ads conversions. All information is scattered around different pages on [developers.google.com](http://developers.google.com) and outdated Youtube videos because apparently GTM also manages to change UI over the years.\n\nWhy can't we just set up a proxy, to proxy requests from browser to regular GTM. This 2 different containers just make want to scream out loud.....",
        "score": 14,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nktb92/i_spent_the_entire_day_configuring_serverside/",
        "num_comments": 28,
        "comments": [
            {
                "body": "It's server_container_url 🤣 tried it some time ago. Go check tutorials on stape.io. it was quite easy",
                "author": "TickedOffTunes",
                "score": 3
            },
            {
                "body": "Try using stape, addingwell or taggrs.. All work quite well.",
                "author": "mar1_jj",
                "score": 3
            },
            {
                "body": "The two container mess is exactly one of the reasons we switched away from gtm to another server-side tag management in my company",
                "author": "Optimal-Praline292",
                "score": 2
            },
            {
                "body": "lol you’re not alone every person who’s done sGTM the first time has had a full-day headache from exactly this.\n\nthe short version:\n\n* transport\\_url is what you want server\\_container\\_url was older terminology. make sure your GA4 config tag in the web container has transport\\_url set to your stape (or whatever) endpoint.\n* check if you have duplicate GA4 tags still firing directly to google (or the default GA4 snippet hard-coded somewhere). even one rogue tag will send events straight to google instead of routing through your server.\n* in the server container, make sure you have the GA4 client published, and your server GA4 tag listening to that client. if you don’t have the GA4 client enabled, the server just ignores those events.\n* preview pain: yeah, you can’t enter a URL. the trick is to click “preview,” then refresh the site in another tab with debug mode still active. then you’ll start seeing hits populate in the server debugger.\n\nhonestly, think of it less like a “proxy” and more like a relay: web container collects hits → sends them to your server (transport\\_url) → server container receives them via client → tags fire → send to google ads / ga4 / fb. once you get that mental model, it stops feeling so random.\n\ni had the exact same half-to-google half-to-server issue and it was just a duplicate GA4 tag in theme.liquid bypassing GTM entirely. once i killed that, everything flowed server-side and my match rate jumped like 20%.",
                "author": "AdhesivenessLow7173",
                "score": 2
            },
            {
                "body": ">transport_url is what you want server_container_url was older terminology. \n\nit's the other way around",
                "author": "Viper2014",
                "score": 2
            },
            {
                "body": "Precisely why I wanted ssgtm, but it doesn't help. uBlock origin for example blocks it right away and if you're under EU/GDPR, you still need consent. If consent isn't granted - no events will be passed.\n\nSome other adblockers (ABP & Adguard for example) didn't block it right from the bat, but some fiddling in the extension config and it's succesfully blocked. \n\nAnd yes, container url was on my domain.\n\nIf you wan't to send your conversions to Facebook with max accuracy, you're probably better off with their CAPI sync instead of pushing them through ssgtm.",
                "author": "TickedOffTunes",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What was the motivation behind switching from client to client to server?",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "If you are still struggling, ping me. You precisely need only 1 tag on the server side container for ga4 and just need to change the Google tag in the web container - add a transport url parameter.\n\nThat's all there is to move GA4 from web to server side for tags \n\nNow, you still need to setup first party mode using a sub domain and using a GTM client on the server side to serve the required javascripts from your own subdomain.\n\nWith that you are all set",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": ">All information is scattered around different pages on developers.google.com and outdated Youtube videos because apparently GTM also manages to change UI over the years.\n\nStape.io sgtm playlist is the thing you need : )",
                "author": "Viper2014",
                "score": 1
            },
            {
                "body": "Since you have a large number of users with ad blockers, I am willing to help you for free.\nJust ping me and we can set it all up together.",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "Makes me wonder why FB uses transport_url in their integration with GTM for FB Pixel…\n\nI’ll check stape docs - thanks!",
                "author": "yborunov",
                "score": 1
            },
            {
                "body": "What did you switch to? Does it work with Google Ads?",
                "author": "yborunov",
                "score": 1
            },
            {
                "body": "this relay analogy gives some clarity. I'll try to go through the steps and verify if I'm missing something\n\nI'm still confused with Google tag for Google ads though. Does it need a Google tag manager (web container) client in the server container and be listed in the allowed container IDs? I just don't see any specific client for Google Ads like the one for Google analytics in the client types list.",
                "author": "yborunov",
                "score": 1
            },
            {
                "body": "I have many techy visitors - they usually have an ad blocker on, so I’m missing their conversions",
                "author": "yborunov",
                "score": 1
            },
            {
                "body": "Transport_url i think its an old thing from GTM, im more used to use server_container_url",
                "author": "PaintingNo8479",
                "score": 1
            },
            {
                "body": "It's been some time since I toyed around with it, but as far as I remember, transport URLs are used to send data outside Google server's. You should have an SS tag template for Facebook available in the library.\n\n\nStape tutorials are for Stape (you can use their integration for creating a server) but conceptually it's all the same, wherever you host a server. \n\n\nJulius Fedorovicius also has great tutorials for all sorts of GTM stuff.",
                "author": "TickedOffTunes",
                "score": 1
            },
            {
                "body": ">Makes me wonder why FB uses transport_url in their integration with GTM for FB Pixel…\n\nFor anyone interested, you dont use this. Instead you create the tags as you would usually do and then add the event ID in order for deduplication to happen.\n\nOtherwise, you will have duplicate events in META's event manager.\n\nHave fun",
                "author": "Viper2014",
                "score": 1
            },
            {
                "body": "Jentis, works great with google ads and we also have the meta capi for instagram and connected a bunch of others, our emarsys, hotjar, etc. It gets some getting used to but when you are familiar with it, it’s just very reliable and easy to work with.",
                "author": "Optimal-Praline292",
                "score": 1
            },
            {
                "body": "Ok, in that case server to server is something you should think about.",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "> they usually have an ad blocker on, so I’m missing their conversions\n\nyou will need to have a custom loader in order t save \"some\" of the blocked traffic.",
                "author": "Viper2014",
                "score": 1
            },
            {
                "body": "How do some blockers detect tracking with ssgtm? is it based on the request params / data type?\n\nIs there anything for accurate Google Ads conversion tracking in this case?",
                "author": "yborunov",
                "score": 1
            },
            {
                "body": ">you still need consent. If consent isn't granted - no events will be passed.\n\nThis is wrong!",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "Any good guide on how to set it up with Google Ads?",
                "author": "yborunov",
                "score": 1
            },
            {
                "body": "Probably looking for some specific js files. I tried Google tag gateway for Google ads, but same thing happened.. Even though the scripts were loaded through cloudflare on the same domain, requests were blocked.\n\n\nIt only work for 1st party mode. If you're browser is set to block 3rd party cookies, it'll work, requests will pass because it's still 1st party coming from the same domain. But for ad block, unfortunately nope!",
                "author": "TickedOffTunes",
                "score": 1
            },
            {
                "body": "You can always use built in consent and advanced mode, and send events for data modeling , but as far as I'm (and many others) concerned - that's illegal. ",
                "author": "TickedOffTunes",
                "score": 1
            },
            {
                "body": "I beleive this is what you need https://developers.google.com/tag-platform/tag-manager/server-side/ads-setup\n\nOnce you receive data on sgtm container you are fine.\nI am following the rules from GA mesurement protocol and trying to imitate all but from my server to sgtm ( also my server ).",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "For the GA events is not.",
                "author": "Programer_Marktech",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1755708505.0,
        "title": "GTM trigger for a success message after form submission",
        "author": "Straight-Nerve-6464",
        "id": "1mvk7x7",
        "selftext": "I'm trying to create a trigger in GTM to initiate when a user successfully submit a form to join our waitlist. \n\nI'd like to trigger a tag based on a \"success message\" that will show up only after successful form submission. I defined the id for the message which can be selected from the trigger's CSS selector. Yet, when I start a preview in Tag Assistant to check, I only see events like click, form\\_start, form\\_submit then consent initialization, initialization, container loaded, DOM Ready, Window Loaded, and lots of set and scrolls. I can't seem to understand which event is supposed to work for the \"element visibility\" trigger. Could anyone help me how to set this up? thanks!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mvk7x7/gtm_trigger_for_a_success_message_after_form/",
        "num_comments": 17,
        "comments": [
            {
                "body": "Actually I just had to turn on \"Observe DOM Changes\" option to fix it. But thanks for your thoughts!",
                "author": "Straight-Nerve-6464",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You need to tie a new event TO the custom trigger you created. I.e., create a GA4 event called something like waitlist_signup and use your element vis trigger as the trigger.",
                "author": "a_drink_offer",
                "score": 1
            },
            {
                "body": "Few ways:\nFire an event in your success message.\nHave a listener on the page for the class of the success message and or text",
                "author": "ant_topps",
                "score": 1
            },
            {
                "body": "I know you have already solved you problem but I would ask instead why you are taking this approach and is it because of other constraints.\n\nIf you are using a particular form technology it might be a better approach to utilise a listener for form events.",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Element visibility triggers suck. Check the data layer and find something better that is tied to your event. Create a dlv and a ce trigger and fire the tag based on those criteria.",
                "author": "bodhisattvass",
                "score": 1
            },
            {
                "body": "Hey there,\n\nIf you're using gforms, there is a listener that you can add the gtm via html. \n\nThis creates a new event called \"form_submission\" or something similar - which is a validated form submission - that fires when the success message appears.\n\nhttps://docs.gravityforms.com/gform_confirmation_loaded/",
                "author": "CheeryRipe",
                "score": 1
            },
            {
                "body": "Is your site an SPA? I've had some trouble with the element visibility trigger getting 'lost' for an SPA that does asynchronous updates. There is a post about it somewhere on Reddit.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "You need to listen for the form response, not the html element. The HTML is static the form is asynchronous and dynamic. You adding the even trigger in something that never changes….",
                "author": "Cabeto_IR_83",
                "score": 1
            },
            {
                "body": "Make sure to check off  \"observe DOM changes\"\n\n  \nAlso you can edit the visibility and bring it down to like 10-20% and see if that helps",
                "author": "NegativeStreet",
                "score": 1
            },
            {
                "body": "Here is that post about SPA's and element visibility triggers https://www.reddit.com/r/GoogleTagManager/comments/1la0tpr/help_with_an_element_visibility_trigger_trigger/",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Lets connect at inbox",
                "author": "Ok-Owl8582",
                "score": 0
            },
            {
                "body": "Please share url in dm",
                "author": "History86",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1756085771.0,
        "title": "Shopify Integration - GTM or Google App?",
        "author": "_salinorum_",
        "id": "1mzdoel",
        "selftext": "In the past, I had a GTM integration with my Shopify store that worked as follows: \n\n1. Set up data layer on my website (rendered a snippet in theme.liquid) \n2. Set up a customer event pixel for checkout pages.\n3. Set up GTM tags so customer events were sent to GA4 and G-ADs. GA4 was entirely reliant on GTM to receive data. \n\n  \nAs of June 10th, Shopify made some privacy changes, which I understand has compromised GTM's ability to integrate into Shopify thoroughly and also obliterated my set-up, which no longer works. My GA4 account flatlined. I found some [solutions](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify/), but they are lacking in thoroughness. For instance, in the linked solution, engagement data isn't passed from GTM to GA4. \n\nThus my question is have you been able to create a seamless GTM > Shopify set up in light of the new policy changes? A set-up that integrates with Shopify customer event pixels and consent mode? The new sandboxed environment at checkout has really fucked up my tracking. \n\nAt this point, it seems easier just to install the Google App. I haven't been able to find any definitive solutions online, only partial band-aids for the time being. ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mzdoel/shopify_integration_gtm_or_google_app/",
        "num_comments": 14,
        "comments": [
            {
                "body": "The sandboxed mode works fine. You just need to either rename the events to match ga4 in the customer pixel, or rename the triggers in gtm to match the default Shopify pixel event names.",
                "author": "FigSpecific6210",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Use the Google App. You don't really need anything else for ecom tracking.",
                "author": "Low_Inspection6571",
                "score": 1
            },
            {
                "body": "Shopify’s changes limit GTM at checkout, so the Google App is the safer choice for GA4 + Ads. **Ketch** can also streamline consent and tracking compliance.",
                "author": "shoppingtimeca",
                "score": 1
            },
            {
                "body": "Last time I check the google / youtube extension was not GDPR compliant (tracking without consent) and the webpixel was more reliable while still providing a good level of data granularity... thus I recommend the web pixel",
                "author": "gustubru",
                "score": 1
            },
            {
                "body": "Great thank you. I may just use the Google App. When you say enhanced match, are you talking about enhanced conversions? One of the main priorities of my setup is tracking enhanced conversions.",
                "author": "_salinorum_",
                "score": 1
            },
            {
                "body": "Yes, you're right. It is not GDPR compliant. Nonetheless, I have gone the Google App route for now - my customer base hardly exists within GDPR zones. I think enough people have complained about consent mode to the Shopify team that I wouldn't be surprised if they had a solution in the next couple years.",
                "author": "_salinorum_",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I’m in E-commerce but finance niche. I think I was lucky with the campaign a friend helped set up back on 2020 and it performed well until last month. I believe it was because GTM stopped sending the conversion value that was sent via Universal Analytics. We already had GA4 installed and tracking but for some reason it’s not sending the conversion value just the count. So the conversion on the Google Ads has tanked.\n\nI figured it’s best I learn how everything works so if this happens again in the future, I how to resolve the issue. What would it take for you to teach me what you know? I don’t want to do courses, I would rather do 1:1 coaching where you walk me through how to fix the issue so I can have the experience. Thanks!",
                "author": "anon2635",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Send you a DM?",
                "author": "anon2635",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Done! Thanks for willing to help",
                "author": "anon2635",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1757919741.0,
        "title": "Here's what we are doing following Safari GCLID - Google was ahead the whole time",
        "author": "History86",
        "id": "1nheyxz",
        "selftext": "Over the last two weeks my feed on both Linkedin and Reddit has been full of discussions ([example](https://www.reddit.com/r/ServerSideTagging/comments/1n84wab/safari_is_removing_click_tracking_parameters/)) about Safari's privacy updates breaking GCLID. What I haven't seen many people talk about is Google's response. They tried to fix it, broke it further, and are now quietly fixing it again.\n\n**Background:**\n\n1. Safari privacy changes killed GCLID reliability. Panic followed.\n2. Google introduced GBRAID/WBRAID as the \"privacy-safe\" alternative.\n3. Their own API didn't support what we needed:\n   * Enhanced Conversions for Leads couldn't work with GBRAID\n   * One-per-click counting couldn't be used with braid parameters\n   * Custom variables got blocked if braid was present\n\nResult: Our engineering teams built workarounds with dual upload systems and split pipelines while attribution gaps emerged.\n\nFor the sake of clarity, these are all the API conflicts we encountered and that now live in our documentation for future reference:\n\n|**Conflict Type**|**Conflicting Fields/Values**|**Error Message**|**Resolution**|\n|:-|:-|:-|:-|\n|**Click ID Conflicts**|`gclidgbraid` \\+|`VALUE_MUST_BE_UNSET`|Use only one click ID per conversion|\n||`gclidwbraid` \\+|`VALUE_MUST_BE_UNSET`|Use only one click ID per conversion|\n||`gbraidwbraid` \\+|`GBRAID_WBRAID_BOTH_SET`|Use only one click ID per conversion|\n|**Enhanced Conversions for Leads**|`gbraidwbraiduser_identifiers`/  +|`The field cannot be set., at conversions[0].user_identifiers`|`user_identifiers`Remove   field when using gbraid/wbraid|\n||`gbraidwbraid`/  + Enhanced Conversions for Leads|`VALUE_MUST_BE_UNSET`|Enhanced Conversions for Leads cannot use gbraid/wbraid|\n|**Conversion Action Type**|`gbraidwbraid`/  + One-per-click counting|`Conversion actions that use one-per-click counting can't be used with gbraid or wbraid parameters`|`MANY_PER_CLICK`Change to   counting|\n||Wrong conversion action type for Enhanced Conversions|`INVALID_CONVERSION_ACTION_TYPE`|`UPLOAD_CLICKS`Ensure conversion action type is|\n|**Custom Variables**|`gbraidwbraidcustom_variables`/  +|`VALUE_MUST_BE_UNSET`|`custom_variables`Remove   when using gbraid/wbraid|\n|**Enhanced Conversions for Web**|`gbraidwbraid`/  + Enhanced Conversions for Web|`CONVERSION_NOT_FOUND`|Enhanced Conversions for Web not supported with gbraid/wbraid|\n|**Temporal Conflicts**|`conversion_date_time` before click time|`CONVERSION_PRECEDES_EVENT`|Set conversion time after click time|\n||Click older than lookback window|`EXPIRED_EVENT`|Use conversion action with longer lookback window|\n|**Duplicate Conflicts**|`order_id`Same   for multiple conversions|`DUPLICATE_ORDER_ID`|Use unique order IDs|\n||Same click ID + conversion time + action|`CLICK_CONVERSION_ALREADY_EXISTS`|Adjust conversion\\_date\\_time or verify if retry|\n||Multiple conversions in same request|`DUPLICATE_CLICK_CONVERSION_IN_REQUEST`|Remove duplicates from request|\n|**Account/Access Conflicts**|Wrong customer ID for click|`INVALID_CUSTOMER_FOR_CLICK`|Use correct customer ID that owns the click|\n||Conversion action not found/enabled|`NO_CONVERSION_ACTION_FOUND`|Enable conversion action in correct account|\n||Customer data terms not accepted|`CUSTOMER_NOT_ACCEPTED_CUSTOMER_DATA_TERMS`|Accept customer data terms|\n|**Consent Conflicts**|`UNKNOWN`Setting consent to|`RequestError.INVALID_ENUM_VALUE`|`DENIED`Set to   if consent status unknown|\n|**Call Conversion Conflicts**|`always_use_default_value` = false for call conversions|`INVALID_VALUE`|Set to true for WEBSITE\\_CALL/AD\\_CALL types|\n|**Attribution Model Conflicts**|Invalid attribution model|`CANNOT_SET_RULE_BASED_ATTRIBUTION_MODELS`|`GOOGLE_ADS_LAST_CLICKGOOGLE_SEARCH_ATTRIBUTION_DATA_DRIVEN`Use only   or|\n\nKey Takeaways:\n\n* **gbraid/wbraid** cannot be used with Enhanced Conversions for Leads, Enhanced Conversions for Web, custom variables, or one-per-click counting\n* Only one click identifier can be used per conversion (gclid OR gbraid OR wbraid)\n* Enhanced Conversions for Leads requires `user_identifiers` field, which conflicts with gbraid/wbraid usage\n* Each conversion must have unique identifiers (order\\_id, click\\_id + time + action combinations)\n\nInterestingly enough, some of these error returns weren't intentional as outlined in Google developer documentation.\n\n**Now what's next?**\n\nGoogle recently [announced ](https://developers.google.com/google-ads/api/docs/conversions/upload-clicks)that GCLID + GBRAID can now be used together effective October 3rd.  This isn't just a Safari fix, it allows us to send much more contextual data than previously, giving us the infrastructure to rebuild conversion completeness instead of patching leaks.\n\nThen we found another new attribute, [session\\_attributes](https://developers.google.com/google-ads/api/docs/conversions/enhanced-conversions/leads#session_attributes) ([more documentation](https://support.google.com/google-ads/answer/16194756?sjid=7593866035188306243-EU)) - a privacy-safe way to give more context about each visit:\n\n* Campaign source (gad\\_source, gad\\_campaignid)\n* Landing page URL & referrer\n* Session start timestamp\n* User agent\n\nThese signals don't rely on cookies and can be captured via JavaScript helper or passed as key/value pairs into Offline Conversion Import.\n\nWhen click IDs are missing, Google's AI still has rich context to model from. More attributed conversions, better bid optimization, more durable setup for future privacy changes.\n\nThis was never just \"Safari broke GCLID.\" It's about how fragile most conversion architectures were. I believe Google is helping us out here, big time.\n\nBelow you can find a breakdown of the 7 code snippets that can guide you to capture these, either directly in your app or through google tag manager.\n\n    // 1. Capture Click Identifiers from URL\n    function captureClickIdentifiers() {\n      const urlParams = new URLSearchParams(window.location.search);\n      \n      return {\n        gclid: urlParams.get('gclid'),\n        gbraid: urlParams.get('gbraid'), \n        wbraid: urlParams.get('wbraid'),\n        gad_source: urlParams.get('gad_source'),\n        gad_campaignid: urlParams.get('gad_campaignid')\n      };\n    }\n    \n    // 2. Generate Session Attributes (Privacy-Safe Context)\n    function generateSessionAttributes() {\n      const clickIds = captureClickIdentifiers();\n      \n      return {\n        session_start_timestamp: Date.now(),\n        landing_page_url: window.location.href,\n        referrer: document.referrer,\n        user_agent: navigator.userAgent,\n        gad_source: clickIds.gad_source,\n        gad_campaignid: clickIds.gad_campaignid,\n        viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n        timestamp: new Date().toISOString()\n      };\n    }\n    \n    // 3. Enhanced Conversion Data Collection\n    function collectEnhancedConversionData() {\n      // Get user data from form or checkout\n      const email = document.querySelector('[name=\"email\"]')?.value;\n      const phone = document.querySelector('[name=\"phone\"]')?.value;\n      const firstName = document.querySelector('[name=\"first_name\"]')?.value;\n      const lastName = document.querySelector('[name=\"last_name\"]')?.value;\n      const postalCode = document.querySelector('[name=\"postal_code\"]')?.value;\n      const country = document.querySelector('[name=\"country\"]')?.value;\n      \n      return {\n        email: email ? hashUserData(email.toLowerCase().trim()) : null,\n        phone_number: phone ? hashUserData(phone.replace(/\\D/g, '')) : null,\n        first_name: firstName ? hashUserData(firstName.toLowerCase().trim()) : null,\n        last_name: lastName ? hashUserData(lastName.toLowerCase().trim()) : null,\n        postal_code: postalCode,\n        country_code: country\n      };\n    }\n    \n    // 4. SHA-256 Hashing for User Data (PII)\n    async function hashUserData(data) {\n      if (!data) return null;\n      \n      const encoder = new TextEncoder();\n      const dataBuffer = encoder.encode(data);\n      const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\n      \n      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n    }\n    \n    // 5. Store Conversion Data for Later Upload\n    function storeConversionData(conversionData) {\n      const clickIds = captureClickIdentifiers();\n      const sessionAttrs = generateSessionAttributes();\n      \n      const conversionPayload = {\n        // Click identifiers (can now use multiple together)\n        gclid: clickIds.gclid,\n        gbraid: clickIds.gbraid,\n        wbraid: clickIds.wbraid,\n        \n        // Conversion details\n        conversion_action: conversionData.conversion_action,\n        conversion_date_time: new Date().toISOString(),\n        conversion_value: conversionData.value,\n        currency_code: conversionData.currency || 'USD',\n        order_id: conversionData.order_id,\n        \n        // Enhanced conversion data\n        user_identifiers: conversionData.user_identifiers,\n        \n        // Session attributes for better AI modeling\n        session_attributes_key_value_pairs: sessionAttrs,\n        \n        // Conversion environment\n        conversion_environment: 'WEB',\n        \n        // Consent (required)\n        consent: {\n          ad_user_data: conversionData.consent?.ad_user_data || 'GRANTED',\n          ad_personalization: conversionData.consent?.ad_personalization || 'GRANTED'\n        }\n      };\n      \n      // Store in localStorage for server-side pickup\n      localStorage.setItem('pending_conversion', JSON.stringify(conversionPayload));\n      \n      // Or send directly to your conversion endpoint\n      sendConversionToServer(conversionPayload);\n    }\n    \n    // 6. Lead Form Conversion Tracking\n    function trackLeadConversion(formData) {\n      const userIdentifiers = collectEnhancedConversionData();\n      \n      const conversionData = {\n        conversion_action: 'customers/YOUR_CUSTOMER_ID/conversionActions/YOUR_LEAD_ACTION_ID',\n        value: formData.lead_value || 0,\n        currency: 'USD',\n        order_id: generateUniqueOrderId(),\n        user_identifiers: [userIdentifiers].filter(id => Object.values(id).some(v => v)),\n        consent: {\n          ad_user_data: getConsentStatus('ad_user_data'),\n          ad_personalization: getConsentStatus('ad_personalization')\n        }\n      };\n      \n      storeConversionData(conversionData);\n    }\n    \n    // 7. E-commerce Conversion Tracking\n    function trackPurchaseConversion(orderData) {\n      const userIdentifiers = collectEnhancedConversionData();\n      \n      const conversionData = {\n        conversion_action: 'customers/YOUR_CUSTOMER_ID/conversionActions/YOUR_PURCHASE_ACTION_ID',\n        value: orderData.total,\n        currency: orderData.currency || 'USD',\n        order_id: orderData.order_id,\n        user_identifiers: [userIdentifiers].filter(id => Object.values(id).some(v => v)),\n        consent: {\n          ad_user_data: getConsentStatus('ad_user_data'),\n          ad_personalization: getConsentStatus('ad_personalization')\n        }\n      };\n      \n      storeConversionData(conversionData);\n    }\n    \n    // 8. Utility Functions\n    function generateUniqueOrderId() {\n      return `order_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    \n    function getConsentStatus(consentType) {\n      // Check your consent management platform\n      // Return 'GRANTED' or 'DENIED'\n      return window.gtag && window.gtag.get ? \n        window.gtag.get(consentType) : 'GRANTED';\n    }\n    \n    function sendConversionToServer(conversionPayload) {\n      fetch('/api/google-ads/conversions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(conversionPayload)\n      }).catch(error => {\n        console.error('Conversion tracking error:', error);\n        // Retry logic or fallback storage\n      });\n    }\n    \n    // 9. Initialize on Page Load\n    document.addEventListener('DOMContentLoaded', function() {\n      // Capture and store click identifiers immediately\n      const clickIds = captureClickIdentifiers();\n      \n      if (clickIds.gclid || clickIds.gbraid || clickIds.wbraid) {\n        sessionStorage.setItem('google_click_ids', JSON.stringify(clickIds));\n        console.log('Google click identifiers captured:', clickIds);\n      }\n      \n      // Set up form submission tracking\n      const forms = document.querySelectorAll('form[data-track-conversion]');\n      forms.forEach(form => {\n        form.addEventListener('submit', function(e) {\n          const formData = new FormData(form);\n          const leadValue = form.dataset.leadValue || 0;\n          \n          trackLeadConversion({\n            lead_value: parseFloat(leadValue),\n            form_data: Object.fromEntries(formData)\n          });\n        });\n      });\n    });\n    \n    // 10. Example Usage\n    /*\n    // For lead forms:\n    <form data-track-conversion data-lead-value=\"50\">\n      <input name=\"email\" type=\"email\" required>\n      <input name=\"phone\" type=\"tel\">\n      <button type=\"submit\">Submit Lead</button>\n    </form>\n    \n    // For e-commerce:\n    // Call after successful checkout\n    trackPurchaseConversion({\n      order_id: 'ORDER_12345',\n      total: 299.99,\n      currency: 'USD'\n    });\n    */",
        "score": 15,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nheyxz/heres_what_we_are_doing_following_safari_gclid/",
        "num_comments": 9,
        "comments": [
            {
                "body": "We also tried patching it with GBRAID/WBRAID, but ran straight into the exact same conflicts you listed Enhanced Conversions not firing, custom variables breaking, and “VALUE\\_MUST\\_BE\\_UNSET” errors clogging logs. We had to spin up parallel pipelines just to keep uploads flowing, which was a maintenance nightmare.\n\nOnce Google started allowing GCLID + GBRAID together, it was like someone finally pulled the plug out of the drain. The gaps started shrinking, and adding session-level context was honestly the first time I felt like we weren’t just patching leaks but actually building something more durable.\n\nFor us, the biggest win so far has been ecommerce revenue data actually matching across GA4, Ads, and our backend without daily reconciliation. It’s not 100% perfect yet, but it’s night-and-day better than six months ago.",
                "author": "DigMundane5870",
                "score": 3
            },
            {
                "body": "Very interesting, thank you. I couldn’t find any official confirmation that the new Safari setting stripping gclids from URLs is enabled by default (it wasn’t on my iPhone running iOS 26), but I reckon setting up tracking to be “future-proof” is never a bad idea.\n\nI'll keep your snippets, they will come in handy at some point.",
                "author": "cavaillon_666",
                "score": 2
            },
            {
                "body": "I should have named this post “steal my snippets”!",
                "author": "History86",
                "score": 2
            },
            {
                "body": "To be honest, this is all browser side, we capture some events and store them as cookies locally.",
                "author": "History86",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you manage to fix this for ecommerce I salute you sir, what a nightmare it has been!",
                "author": "History86",
                "score": 1
            },
            {
                "body": "half the time it still feels like i’m babysitting a very drunk gclid who keeps wandering off and forgetting where the checkout is.",
                "author": "DigMundane5870",
                "score": 1
            },
            {
                "body": "Do you use ga4 or custom tracking?",
                "author": "History86",
                "score": 1
            },
            {
                "body": "Meanwhile, My client still believes browser side tracking should be sufficient",
                "author": "Due_Singer1570",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752621349.0,
        "title": "Missing a lot of purchases",
        "author": "trp_wip",
        "id": "1m0wxoa",
        "selftext": "My client has client-side GTM, no consent mode, so nothing should be blocking the data. I have custom pixel installed and it used to work really well. All of a sudden, I am capturing only 65% of transactions (Shopify data vs GA4 data). Any clues why and what I can fix?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1m0wxoa/missing_a_lot_of_purchases/",
        "num_comments": 20,
        "comments": [
            {
                "body": "Agreed. Weird to see so many people saying switch to server-side tracking with such little context given by OP. What are they basing their suggestions on?",
                "author": "Kynaras",
                "score": 2
            },
            {
                "body": "‘Cause they are idiots…. Idiots will say stupid things.\nServer side tracking can work in cases where you force people to log in, else these MORONS dont understand that the cookies get deleted nomatter how you set them, and large corporations at least can “revive” them with personal information from browsers, apps, gmail, chrome, youtube android devices etc. But you can always make a BS tool that show whatever the client asks through “faith” and sell it to said idiots for a lot of money.\nOne of my client did the same, wasted $20000 only to see 1/4 of what we could see in analytics already.",
                "author": "LadderMajor3754",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Why not just switch to server-side tracking?",
                "author": "Straight_Special_444",
                "score": 1
            },
            {
                "body": "Can you share a bit more on your setup?\n\nAre you nesting GTM inside a custom pixel and you're creating dataLayer events from native Analytics events?\n\nOr are you doing something else?\n\nWhen did you drop to 65%? Has it been gradual or was it all of a sudden?\n\nI'd expect 10-15% drop but 65% indicates something else. \n\nCan your users buy products on a recurring subscription? (These might not make it to GA4)",
                "author": "nsharoff",
                "score": 1
            },
            {
                "body": "Server side tracking may be solve your problem",
                "author": "StarProfessional473",
                "score": 1
            },
            {
                "body": "Hey OP, couple of questions as we'd all love more info :) \n\n- you say no consent mode but does your CMP do any active blocking of scripts?\n- pre consent mode people also had a convoluted trigger configuration to handle declined consent, maybe a point for checking?\n- Are you in the EEA?\n- Is there an obvious date this started happening, anomaly seen in GA reporting perhaps?\n- Have you run a process of elimination, completing a purchase via tag assistant and inspecting the various scenarios, I.e consent denied, consent granted and inspected the tags and consent tabs to establish if it is actually firing?",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "Are you using Checkout Extensibility in your Shopify store?\n\n\nDid you run a test purchase yourself with the Analytics debugger enabled and saw the purchase showing up in the GA4 debug view?\n\n\nAre you losing 35% of the purchases or the purchases are getting attributed to not set?\n\n\nWhen it started to happen?",
                "author": "No-Acanthisitta9685",
                "score": 1
            },
            {
                "body": "There's so little information provided with this post that it's difficult to do anything more than speculate and guess.   There are many possible causes.\n\nAre conversions the only thing missing?  I'm disappointed OP didn't check if pageviews dropped, as well.  It's also too bad there was no check to see if this all happened on a particular date, or gradually over time..",
                "author": "Remarkable-Public624",
                "score": 1
            },
            {
                "body": "This is my last comment, then I promise I'll shut up!\n\nIn the GA4 Admin panel, there are at least three controls that override all other consent mode settings.\n\nYou might think you have default permissions set to granted, but....\n\nYour client is in the UK, which was EU/EEA until Jan 2020, but probably does alot of business with EU/EEA. This is an angle I'd check out...\n\nGood Luck!\n\n  \n**Override consent mode defaults**\n\nIf your website has a consent banner that sends a consent update command when an end user interacts with the banner, this setting will load your Google tag with the consent state set to \"denied\" for the regions you specify until a consent signal is received. [Learn more about the EU user consent policy](https://www.google.com/about/company/user-consent-policy/)\n\n**Manage default consent settings for data collection**\n\nPersonal data sent to Google for advertising purposes from end users in the European Economic Area (EEA) requires consent per [EU user consent policy](https://www.google.com/about/company/user-consent-policy). If data sent through Google tag or other sources is not labeled with consent, Google will not be able to use it for such purposes as ads personalization.\n\n**Manage data use across Google services**\n\nChoose which Google Services can receive consented data from end users in the EEA",
                "author": "Remarkable-Public624",
                "score": 1
            },
            {
                "body": "I don't believe this is a viable solution just yet - it's probably best to figure out the root cause first as it may also affect server-side.\n\nGA4 requires a session_id to stitch attribution to orders and most recently they changed the cookie value so you'd have another piece of logic needed to sustain server-side that could be brittle.",
                "author": "nsharoff",
                "score": 1
            },
            {
                "body": "Yeah, sure. \n\nGTM is inside the custom pixel followed by a dataLayer subscribing to events. \n\nI am not sure when the drop happened, I will have to investigate that in more detail. \n\nNo, it is a jewelry store, subscriptions do not happen.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "\\- I don't know about blocking scripts, as I am given only a partial access to the store. But since there is no banner on the store, I would say that there likely aren't any. There are no dataLayer updates on consent either.\n\n\\- All permissions are granted by default\n\n\\- The client is not concerned with the GDPR policies, but it is an UK client\n\n\\- I will have to check that. I am OOO atm so I will see that next week.\n\n\\- Last time I made a test purchase everything worked well and I couldn't find any issues. I cannot experiment with the consent as there is no banner",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "Yes, checkout extensibility is being used. When I did test purchase, it worked well. \n\nWhen I look at number of purchases in GA4 and compare it with Shopify, I see about 65% of them. So I am talking about missing purchase events, not the missing data within events.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "Generally I've seen custom pixels break when there is an issue in the code somewhere, like a param not being available for certain orders etc\n\nI'd wrap this in a try catch block or review the code to see if something was added/removed.\n\nIf it's a simple checkout it should generally work with that set up.\n\nI'd also ensure to initialise the dataLayer prior manually on the off chance GTM takes a while to load.",
                "author": "nsharoff",
                "score": 1
            },
            {
                "body": "**If you have default permissions granted, then you're already using consent mode.  It likely is an incorrect implementation, but it's there.**\n\nHow are you granting the default permissions?  GTM Template or GTAG command?\n\nDid you know you can investigate Consent Mode in GTM's Preview Mode?   There's a tab called Consent.  Go to your clients website, and see what's going on.\n\n**2) Is your client using Google Ads linked to GA?  If yes, blocking could be taking place because of the no consent banner and your client is UK**\n\n3) The fact that your UK client isn't concerned with GDPR is insane. If they sell into the EU or N. Ireland, it seems like they would fall under it",
                "author": "Remarkable-Public624",
                "score": 1
            },
            {
                "body": "One of the Shopify clients I work with has about 30-35% of their Shopify transactions appearing in GA4 and they have a cookie banner in place. But the opt-out rate, where people decline consent, is around 30%. Theoretically, without the banner, we could potentially see 60-65% of transactions in GA4 compared to Shopify. So based on my experience, this percentage is acceptable given the current tracking restrictions imposed by browsers and ad blockers.\n\nIf you want to understand more about the issue, I recommend approaching this investigation as we do.  \n\\- Export a report from Shopify that includes the order ID (the one sent to GA4), source, medium, device (Android, iOS, web), browser, and country, and do the same from GA4 for a one-month period. First, check if you see 60% of transactions in GA4 during this time.  \n\\- To simplify the process, combine the two reports into one Google Sheet and link it to Looker Studio. In Looker Studio, create tables and charts to analyze the issue further. For example, create a table for each device type to compare the purchase percentage in each to GA4 and identify any discrepancies. If the percentages are similar, repeat this analysis with other dimensions like country and browser.  \n  \n\\- In the Google Sheet, you can also use a simple equation to find order IDs that are missing in GA4 but present in Shopify and look for commonalities among them, such as transactions made via PayPal, maybe that could indicate tagging is missing there.\n\nIf you don’t find a clear answer after this analysis, it’s likely good news, indicating that there’s no tracking issue and it’s just the usual tracking restrictions affecting everyone.",
                "author": "No-Acanthisitta9685",
                "score": 1
            },
            {
                "body": "65% of transactions seems right on web pixel, a lot of\nBrowser blocking",
                "author": "FullSpare1352",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1759855455.0,
        "title": "Wordpress - GTM Kit - Ecommerce data layer events are not sended",
        "author": "Nice_Pen_8054",
        "id": "1o0k0j9",
        "selftext": "Hello,\n\nDoes anyone has an idea why GTM Kit or GTM4WP don't send the ecommerce events in data layer?\n\nThe settings for consent mode V2 and GTM are fine.\n\nThanks.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1o0k0j9/wordpress_gtm_kit_ecommerce_data_layer_events_are/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I generally enable datalayer and track everything with these two plugins mainly. What is the Problem, nothing can be solved without seeing",
                "author": "ShakeComfortable1975",
                "score": 1
            },
            {
                "body": "You haven’t shared nearly enough info to get helpful responses…",
                "author": "HawkeyMan",
                "score": 1
            },
            {
                "body": "Have you enabled the \"datalayer\" option?",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "Check your GTM debug console first. If your ecommerce events aren’t firing, it’s usually one of three things:\n\n* Consent mode blocking `dataLayer.push` before tags load (run test with consent defaulted to granted)\n* GTM4WP not in “enhanced ecommerce” mode for your plugin type\n* Events sent before GTM script loads - use a 300ms delay or push after DOM ready\n\nIf you see events in the data layer but not in preview, your trigger conditions mismatch (e.g. `event` name typo). Recheck that the event key exactly matches what your tag listens for.\n\nNo need to rebuild the site - fix your order of operations first.",
                "author": "Thin_Rip8995",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1751359547.0,
        "title": "Facebook - purchase events without value/currency since sGTM",
        "author": "3c7o",
        "id": "1lowl3z",
        "selftext": "Hello everyone, \n\nI have a *Shopify* shop with **Checkout Extensibility** set up -data layer pushes defined in **custom pixel**.\n\n### Tracking setup \n*sGTM* via Cloud Run with custom Domain (e.g. check.domain.tld) via Load Balancer. And client side GTM loads from sGTM\nConsent is via CCM19.\n*GA4* had issues with consent for long, creating session fragmentation with Checkout Extensibility only. So I went hybrid and it fixed the traffic source identification and sessionization. \n*Facebook* in frontend and sGTM (stape io template). `event_id` by Markus Baersch template in frontend and consumed from GA4 requests on sGTM.\nThe Facebook configuration loads as custom html loads on DOM ready OR after  Consent Update or in a trigger group with the two. Third parameter is a custom js that returns an object with i.e. ```currency: 'EUR', event_id: {{variable}}, test_event_code: {{ever changing test code}}```.\nThe Facebook page view custom html tag fires after DOM ready or with the groupDom ready or consent update. The third parameter is an object with only currency:'EUR', the fourth is the same as with the config ```currency: 'EUR', event_id: {{variable}}, test_event_code: {{ever changing test code}}```.\nThe Facebook purchase sGTM fires on 'purchase'. \n\n### Issue\nThe Facebook ad report I created shows a drastic drop in Average Purchase Revenue\nThe diagnostics show **missing purchase value and currency**.\nThe sample data shows that all these 'empty purchase' events are **iOS generated exclusively**. \n\n### Diagnostic and actions\nSo far I have *excluded* all *domains* but my own, which only helped slightly. \nThere is also the Facebook *sales channel app* active. But that was there before. Any correlations here?\nI checked the *GA4* purchase events in. Big Query. None of these have no revenue or null values there.\n\nDo you have any idea what could be wrong here? I am at a loss. ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lowl3z/facebook_purchase_events_without_valuecurrency/",
        "num_comments": 18,
        "comments": [
            {
                "body": "Another thing I reacted to was the use of multiple triggers together with \"once per page\"-rule and \"require additional consent\".\n\nI don't know if you're aware of this but if a tag with \"once per page\" is fired and the built-in consent is evaluated, even if the consent criteria was not met, that tag will not fire again. This is because evaluation of built-in consent only happens once a tag actually fires, and if a tag fires it will be marked as \"already fired\".\n\nThis means that if DOMReady fires your once-per-page tag but built-in consent prevents it from running, that tag will not be re-evaluated on subsequent triggers.\n\n\n\nIn any case, you mentioned that the problem is strictly isolated to iOS devices so it could be related to ITP. Although, in that case I would expect attribution loss more than missing event properties.\n\n\nI'd be curious to know as it wasn't very clear, are you also sending events to Meta from the sGTM container? If so, do those events show the same issue?",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Need to check your website dataLayer, existing Meta Pixel and Conversion API events tracking configuration to identify the exact glitch!",
                "author": "svkmndl97",
                "score": 2
            },
            {
                "body": "I'm a bit confused bythe explanation of the FB client-side setup, but it reads like you are placing the properties incorrectly. Do you mind sharing examples of the function calls to fbp?",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Just saw that you shared this here. Have you tried triggering this event manually to inspect the results in preview mode?",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "In your purchase example, the `currency` property has a static value of `\"currency\"` instead of the variable `{{currency}}`.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "> I am aware, hence, they are set to \"once per event\" not \"per page\". \n\nMy bad, I completely misread your trigger setup.\n\n\n> I am considering attribution loss as well. Not necessarily due to ITP but catching the initial information in time (consent).\n\nA \"consent updated\" trigger should be most reliable in any case. If I were you I would switch it up to using a trigger group with the \"consent updated\" and \"purchase\" events. This will guarantee that both order data and consent data is available before firing the tag.\n\n\n> I have a feeling that the sample data wrongly shows iOS as a system with these symptoms. It's too weird. \n\nWhere exactly are you getting your data from? Meta Business Manager, Shopify or some other source?\n\n  \n> And yes, using **sGTM** via Cloud Run on own domain. Any idea -even if wild- what server side setup could cause this? Again the environment: Shopify shop, checkout extensibility basically leads to client side and sand boxed tracking plus server side GTM on own domain.\n\nYeah I do actually. I tackled a similar issue with the Meta CAPI where the `value` parameter was being passed as a string instead of number. The tag fired, all values were present in preview and a request was sent to Facebook servers. So I was scratching my head for a while until I realized the response from the facebook request returned a status of 400 (bad request). The response payload included an error message that explicitly explained what was wrong with the request. It was an easy fix after that.\n\n\nBy the way, usually when looking at failed events in the Meta Events Manager, it will state which source sent the incorrect event, i.e. browser or server. Have you had a look at that?",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "It’s necessary you don’t get purchase event in date layer after Shopify update. If you got this event you would lose some event parameters. So you should try bypass method.",
                "author": "AhmedNayem01",
                "score": 1
            },
            {
                "body": "Thank you for your interest and support! At purchase, a GA4 event is carried to sGTM where the Meta Tag (stape io) is reading the information out, including `event_id` from the GA4 request and consent information.  \nHere is the data layer at time of the purchase event (shopify custom pixel):\n\n```\n{\n      event: \"purchase\",\n      timestamp: event.timestamp,\n      event_id: event.id,\n      event_source: \"checkout_extensibility\",\n      customerPrivacyStatus: customerPrivacyStatus,\n      customPrivacyStatus: consentSettings,\n      page_location: event.context.window.location.href,\n      page_title: event.context.document.title,\n      token: checkout.token,\n      client_id: event.clientId,\n      city: shippingAddress.city,\n      orderId: checkout.order.id,\n      ecommerce: {\n        transaction_id: checkout.order.id,\n        value: checkout.totalPrice.amount,\n        currency: checkout.currencyCode,\n        tax: checkout.totalTax.amount,\n        shipping: checkout.shippingLine.price.amount,\n        coupon:commaSeparatedDiscountTitles(checkout.discountApplications),\n        items: checkout.lineItems.map(shopifyCheckoutLineItemToGA4Item),\n        ignore_referrer: \"true\"\n      },\n      customerId: event.data.checkout.order.customer.id,\n      page_type: page_type,\n      checkout_items: checkout.lineItems,\n      items: checkout.lineItems.map(shopifyCheckoutLineItemToGA4Item),\n      coupons: commaSeparatedDiscountTitles(checkout.discountApplications),\n      currency: checkout.currencyCode,\n      subtotal: checkout.subtotalPrice.amount,\n      shipping: checkout.shippingLine.price.amount,\n      value: checkout.totalPrice.amount,\n      tax: checkout.totalTax.amount\n    };\n```",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "Thank you for your thoughts and support. Sure, here is the **client side** setup of tracking: \n\n## config tag\n```<script>\n  !function(f,b,e,v,n,t,s)\n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n  n.queue=[];t=b.createElement(e);t.async=!0;\n  t.src=v;s=b.getElementsByTagName(e)[0];\n  s.parentNode.insertBefore(t,s)}(window, document,'script',\n  'https://connect.facebook.net/en_US/fbevents.js');\n  fbq('init', '{{facebook_id}}',{{facebook_object}});\n</script>`\n```\n**Additional Consent** required: ad_storage  \n**Trigger**: Consent Update (custom event) OR `DOM Ready` OR Trigger Group `TG DOM ready and consent updated`  \n**Firing Options**: Once per event (as otherwise, if DOM Ready occurs without consent yet, one might lose traffics source/marketing information)\n\n## page view tag\n```\n<script>\n  fbq('track','PageView',{currency:'{{currency}}'}, {{facebook_object}}\n     );\n</script>\n```\n**Additional Consent** required: ad_storage  \n**Sequencing**: Preceeding Tag: Config Tag  \n**Trigger**: `DOM Ready` OR Trigger Group `TG DOM ready and consent updated`  \n**Firing Options**: Once per event (as otherwise, if DOM Ready occurs without consent yet, one might lose traffics source/marketing information)\n\n## purchase\n```\n<script> \n  fbq('track', 'Purchase', {\n      value:{{order_value}},\n      currency:'{{currency}}',\n      order_id: '{{dl_orderId}}'}, \n      {{facebook_object}}\n     );\n</script>\n```\n**Additional Consent** required: ad_storage  \n**Sequencing**: Preceeding Tag: Config Tag  \n**Trigger**: `purchase` (Custom Event, received via Shopify custom pixel as per checkout extensibility)  \n**Firing Options**: Once per event (as otherwise, if DOM Ready occurs without consent yet, one might lose traffics source/marketing information)",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "Hi u/AhmedNayem01 , thanks for joining the quest. Can you elaborate? I don't understand what you mean. I should not get a purchase event in the data layer after Shopify Update?  \nI am pushing this into the data layer by subscribing to the analytics event (custom pixel, checkout extensibility). \n\nAnd that worked, client side. There is a time correlation to server side tracking being deployed. The issue is, that there are a lot of events with null purchase value and null currency.\n\nDo you have any idea how to further investigate this?  \nSample data shows/indicates all null values are from iOS requests exclusively.   \nCould it be a setting within facebook business portfolio as well?",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "DM me for more details. I would be happy to guide you.",
                "author": "AhmedNayem01",
                "score": 1
            },
            {
                "body": "Yes, the qualitative checks are always absolutely correct, which is the frustrating part... \nAgain, this started close to the time as I deployed *Server Side Tracking* in parallel. But there the *qualitative checks* are *fine* as well.\nI thought there might be any advertising channel that is categorized as iOS which triggers a purchase event but without values. Is there any such thing? \nNot trying to deflect, but running out of ideas. \n\nReally, appreciate your thoughts a lot!",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "Good catch. Unfortunately just a stupid error when I put this comment together. The variable has the default string 'EUR' if not overwritten.",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "Thank you so much. I am aware, hence, they are set to \"once per event\" not \"per page\". Used to be \"per page\". I consider to go back to old fashioned consent tracking for these non-Google tags.\n\nI am considering attribution loss as well. Not necessarily due to ITP but catching the initial information in time (consent).\n  \nI have a feeling that the sample data wrongly shows iOS as a system with these symptoms. It's too weird. \n  \nAnd yes, using **sGTM** via Cloud Run on own domain.\nAny idea -even if wild- what server side setup could cause this?\nAgain the environment: Shopify shop, checkout extensibility basically leads to client side and sand boxed tracking plus server side GTM on own domain.",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "So, also for page views you would recommend to reduce to only a trigger group plus consent signal? \n\n> Where exactly are you getting your data from? \nExactly, I got this from Meta Business Manager, from the events sample data\n\n> response from the facebook request returned a status of 400 (bad request).\nI will look at that directly! Very curious. Thanks for the hint! Didn't check that at all yet.\nIn Meta Business portfolio event manager, where you can test events, they always looked good. \n\n> it will state which source sent the incorrect event, i.e. browser or server. Have you had a look at that?\nDo you mean the diagnosis?",
                "author": "3c7o",
                "score": 1
            },
            {
                "body": "I checked the console log and the \\`value\\` parameter \\`is numeric\\`. Also the status \\`response\\` code is \\`200\\` . item\\_price is also numeric.  \nThere is only one purchase event request reaching the sGTM.  \nBut there are **two GA4 page view events** per page reaching the sGTM. I recognized one is originating from the Shopify sandbox, one is from the client side. I was quite sure to have blocked page views from sandbox. Looks as if it is one is coming from an Analytics tag and fires **on history change**. Though. in GA4 setting, the **enhanced measurement is switched off**. Maybe this is messing with the attribution and sessionization though as facebook page views were triggered by that?   \nI now implemented a trigger based on \"dl\" parameter value to exclude requests from \"sandbox\" or \"/@wpm\" for the Shopify Sandbox requests",
                "author": "3c7o",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1759151211.0,
        "title": "I’m stuck on one last piece of a GTM + server-side setup",
        "author": "Murky-Ant3910",
        "id": "1nthjbh",
        "selftext": "Site has Web GTM and Server GTM. GA4 events are routed to the server via transport_url, and in sGTM I’m using the “Conversions API Tag by facebookincubator”. Server-side is healthy: GA4 purchase reaches sGTM, the CAPI tag fires, and the Graph API returns events_received: 1. In Events Manager I can see the server events as expected.\n\nThe base Pixel (via GTM) is now running on all pages and PageView is visible in the network tab and Pixel Helper. However, the Purchase event will not fire in the browser on the live site. On a test/staging domain, Purchase fires fine. On live, there’s no tr?id=...&ev=Purchase request at checkout/thank-you, even though the GA4 purchase event (with value, currency, items, transaction_id, event_id) is present and feeds the server.\n\nThings I’ve tried/checked: the Pixel Purchase tag is set to the standard “Purchase” event, uses the same event_id variable as CAPI, and is wired to the same trigger as the GA4 purchase tag. I’ve also enabled tag sequencing so the base Pixel fires before the Purchase tag. Test Event Code was used during testing and then removed. Consent tab in the tag is currently default; I’m accepting the banner during tests. The network panel shows GA4 purchase requests, but never a browser request to Facebook for Purchase.\n\nHas anyone seen this exact pattern recently? Server purchase accepted, base Pixel working, but the browser Purchase won’t fire only on the live domain. \n\nAny targeted debugging steps I’m missing would be hugely appreciated.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nthjbh/im_stuck_on_one_last_piece_of_a_gtm_serverside/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "what you’re describing usually points to something domain-specific blocking the browser pixel from firing. since GA4 events are making it to sGTM and server CAPI is fine, the problem isn’t your setup, it’s how the browser pixel triggers on live. a few things i’d check:\n\nfirst, confirm the live site isn’t blocking fb scripts via content security policy, ad blockers, or privacy headers. even subtle differences from staging can prevent the pixel request from firing.\n\nsecond, look at the page where the purchase event should fire and verify the trigger conditions match exactly. sometimes thank-you URLs or redirect behavior on live differ slightly from staging, so the same GTM trigger never actually activates.\n\nthird, check for script errors on live checkout pages, if any JS breaks before the pixel fires, the Purchase tag won’t execute.\n\nfourth, review consent/opt-in differences between staging and live. if the live site has a stricter cookie banner or auto-blocks pixels before consent, that will suppress the browser purchase.\n\nfinally, try forcing the base Pixel Purchase tag to fire manually via GTM preview mode on live. if it works manually but not automatically, that confirms it’s a trigger/consent issue rather than tag config.",
                "author": "DigMundane5870",
                "score": 1
            },
            {
                "body": "I’ve seen this happen when consent management scripts or cookie banners behave differently on the live site than staging. Even if GA4 is sending purchase events, the browser Pixel can get suppressed if fbq isn’t allowed to initialize before the trigger fires. Checking how the consent state is passed and whether the Purchase tag sequencing depends on it usually uncovers the gap.",
                "author": "Green_Database9919",
                "score": 1
            },
            {
                "body": "check the consent setting on the tags and the consent banner default profile.",
                "author": "Viper2014",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1757496438.0,
        "title": "Server Side GTM and OneTrust - Client to Server Side Handover Problem",
        "author": "These-Tea6804",
        "id": "1nd9hsf",
        "selftext": "I'm trying to set up server side tagging via GTM for our websites, for websites with Onetrust CMP I'm seeing a 70% or higher decrease in the below events in ga4 server side, vs client side.\n\n* session start\n* first\\_visit\n* page\\_view\n* user\\_engagement\n\n  \nWe're not using the OneTrust CMP template to set the defaults, the code is added directly to the sites. In the server side preview I'm seeing it take 20+ minutes to populate the Outgoing HTTP Requests from Server - before the its None and after its 'Unknown' (when gcs is 101). If all cookies accepted and gcs is 111 outgoing http requests from server is Post - 204.\n\nI have checked our set up against this article: [https://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7](https://my.onetrust.com/s/article/UUID-d81787f6-685c-2262-36c3-5f1f3369e2a7) and it matches, testing shows dataLayer updates are correct too. \n\nIn the client side preview I'm seeing the dma\\_cps parameter is - but the gcs parameter (which also indicates consent) is g101 (analytics accepted only in this instance), I think this conflict is part of the problem.\n\nI've tried consent granted specific triggers in the server side, I'm using a OneTrustGroupsUpdated trigger in the client side, source, medium etc. are being sent from the client side and session ID and client ID are also successfully sent.\n\nClient side tags are respecting cookie choice, the problem seems to be in the handover between client side and server side.\n\nHas anyone seen this before? How do I resolve it?\n\nThanks in advance.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1nd9hsf/server_side_gtm_and_onetrust_client_to_server/",
        "num_comments": 6,
        "comments": [
            {
                "body": "I use a systematic diagnostic approach for tracking issues, and your problem is a Layer 3: Transmission issue.\n\n**Layer 3** focuses on the data journey from client to server - when tags fire correctly but data fails to reach its destination. In your case, events are leaving the client but 70% never make it to GA4 through your server container. This layer specifically deals with network requests, consent handoffs, and the critical handshake between client and server containers.\n\nThe smoking gun in your description: OneTrust shows `gcs=g101` (analytics accepted) but server requests show \"Unknown\" for **20+ minutes**. This delay is the server container timing out waiting for valid consent signals that never arrive.\n\n## Diagnostic for Consent Transmission\n\nRun this to see exactly what's being sent to your server:\n\n```javascript\n// Check what consent signals are being transmitted\n(() => {\n  // Look for server container requests\n  const serverRequests = performance.getEntriesByType('resource')\n    .filter(r => r.name.includes('gtm-server') || r.name.includes('sgtm'));\n  \n  console.log('Server requests found:', serverRequests.length);\n  \n  // Check consent parameters in requests\n  serverRequests.forEach(req => {\n    const url = new URL(req.name);\n    const params = {\n      gcs: url.searchParams.get('gcs'),\n      consent: url.searchParams.get('consent'),\n      gdpr: url.searchParams.get('gdpr')\n    };\n    console.log('Request consent params:', params);\n  });\n  \n  // Check if OneTrust is sending updates\n  const consentEvents = dataLayer.filter(d => \n    d.event?.includes('consent') || \n    d.event?.includes('OneTrust')\n  );\n  \n  console.log('Consent events in dataLayer:', consentEvents.length);\n  return consentEvents;\n})();\n```\n\n## The Root Cause\n\nYour OneTrust CMP is updating consent in the browser but not forwarding it through the client-to-server transport layer. The server container receives requests but can't verify consent state, so it drops them. The article you referenced doesn't cover this specific handoff issue.\n\n## The Fix: Consent State Bridge\n\nYou need an explicit consent forwarding mechanism:\n\n### Client-Side: Capture and Forward OneTrust State\n\nAdd this as a Custom HTML tag in your CLIENT container, triggered on \"OneTrustGroupsUpdated\":\n\n```javascript\n// Add to GTM Custom HTML tag - fires on OneTrustGroupsUpdated\n(function() {\n  // Capture OneTrust consent decision\n  const consentGroups = OneTrust.GetDomainData().Groups;\n  \n  // Map to Google consent types (adjust group IDs to match your OneTrust setup)\n  const consentMap = {\n    'C0002': 'analytics_storage',  // Performance cookies\n    'C0004': 'ad_storage',         // Targeting cookies\n    'C0003': 'ad_user_data',       // User data\n    'C0004': 'ad_personalization'  // Personalization\n  };\n  \n  // Build consent state for server\n  const serverConsent = {};\n  consentGroups.forEach(group => {\n    if (consentMap[group.CustomGroupId]) {\n      serverConsent[consentMap[group.CustomGroupId]] = \n        group.Status === 'active' ? 'granted' : 'denied';\n    }\n  });\n  \n  // Push with server transmission flag\n  dataLayer.push({\n    'event': 'consent_state_sync',\n    'consent_for_server': serverConsent,\n    'timestamp': Date.now()\n  });\n  \n  console.log('Consent forwarded to server:', serverConsent);\n})();\n```\n\n### Server-Side: Receive and Apply Consent\n\nIn your SERVER container:\n1. Create a trigger for the `consent_state_sync` event\n2. Create a tag that reads `consent_for_server` and updates consent\n3. Set this tag's priority higher than your GA4 tags\n\n## Why 70% Loss?\n\n- **30% getting through**: Users who accept all cookies immediately (gcs=g111)\n- **70% lost**: Users with partial consent (gcs=g101) where the handoff fails\n\nThe 20+ minute delay is the server container timeout - it's waiting for consent confirmation that never arrives through the standard OneTrust integration.\n\n## Validation\n\nAfter implementing, you should see:\n- Server-side events matching client-side (minus bot filtering)\n- No more 20-minute delays\n- Consistent gcs parameters between client and server\n- \"Post - 204\" responses instead of \"Unknown\"\n\nThis is a known limitation of OneTrust's standard server-side documentation - they don't properly address the consent state bridge requirement for partial consent scenarios.",
                "author": "vscodr",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How is your serverside setup? Are you routing via client side GA events?",
                "author": "gnaiz",
                "score": 1
            },
            {
                "body": "Yes, we're routing via client side GA4 events, we're also using AWS, not GCP.",
                "author": "These-Tea6804",
                "score": 1
            },
            {
                "body": "When you debug and send client side event through. Are you seeing 100% reconcile?  I would consider debugging by spinning up another instance to send to from client side onlt and then check your match gaps to see if it can be identified as a pattern",
                "author": "gnaiz",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746541626.0,
        "title": "2 Google Tags - GA4 and Google Ads",
        "author": "pongohopper",
        "id": "1kg5uj5",
        "selftext": "Looking for clarification on the way the 'new' Google Tags work since every product has its own.  I currently have a GA4 Google Tag loading in GTM.  Keep in mind that I have some parameters set for it due to my setup : cookie\\_flags, page\\_referrer, and page\\_location are all custom settings/variables and then send\\_page\\_view is false.  I created a separate GA4 event tag to track page views (as is often recommended).\n\nWith that said, do I still need to load the separate Google Tag for Ads?  I know you can add destinations to Google Tags and combine them - neither of which I have done - but my concern is my GA4 Google Tag is not using the default parameters as mentioned above and the fact I am not tracking pageviews with it.  So because of that should I be loading Google Tags for BOTH?",
        "score": 8,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kg5uj5/2_google_tags_ga4_and_google_ads/",
        "num_comments": 23,
        "comments": [
            {
                "body": "No, you do not need separate Google tags for GA4 and GAds. But unless you’ve linked your ga4 and GAds account multiple places, you will get the “missing tag” warning.\n\nYou need to link the accounts both in GA4 admin sections (think it’s called product links?) and in Google Ads.\n\nThen, you need to make sure that your Google tag has two destinations. Click “configure Google tag” in GA4 to add either ga4 or gads (or both, depending on your setup) as destinations for the tag\n\nSeems dumb that is had to be done multiple places. But trust me - I spent hours figuring out how to solve that warning, last month",
                "author": "canned_laughter_lol",
                "score": 5
            },
            {
                "body": "Yep, Google has made a mess of this, they should automatically merge them for us when Google Ads is linked with Google Analytics.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "I had this exact problem today. Hadn't done anything different to my usual setups but suddenly getting an error on Google Ads and Tag Manager that my Google ads tag is missing, when I've only ever needed the one Google tag along with the Google ads conversion tracking. \n\n\nI just ran with it, two tags and combined the tags on GA4 and it seems to be happy but I still feel cautious about it. ",
                "author": "Ilovecheeseytoast",
                "score": 2
            },
            {
                "body": "I would say yes. You should implement a Google Tag for both GA4 and for Ads. The latter to help ensure you capture page visitor data and share with Google Ads.",
                "author": "Amazing_Cod6382",
                "score": 2
            },
            {
                "body": "Which trigger are you using with a gdpr consent implementation for this tag ? \n\nWe usually use a consent_approved trigger but wondering if this affects the system",
                "author": "SnoooCookies",
                "score": 2
            },
            {
                "body": "This is kind of why I was leaning towards both - because I am changing the defaults in the GA4 tag parameters when I load it.  If I have both then the Ads tag is the default without any changes.  I just wish Google would be more specific in their docs so questions like this didn't come up - it is something I have noticed over 20 years now - they aren't very detailed in their explanations or across the board in multiple locations.  An example, their docs say you don't need the Conversion Linker tag if loading a Google Tag... soon as you remove the Conversion Linker in GTM it throws a warning message that you need to add it back lol",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "Let me put it like this. If I'm sending conversions to Google Ads via Tag Manager i want to make sure the ads tag has loaded in first to capture the information. It is just best practice. I'm not technical enough to explain why. But this is the how many experts set it up. An example being: https://www.analyticsmania.com/post/google-ads-conversion-tracking-with-google-tag-manager/",
                "author": "Amazing_Cod6382",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If anyone is reading this thread months later (as I was), I found Google documentation saying to set up **only** **one** tag and add the other product as a destination later. See the text below the headers \"Set up your Google tag in Google Analytics\" or \"Set up your Google tag in Google Ads.\" \n\n[regular link](https://support.google.com/google-ads/answer/12002338?hl=en#100) to article\n\n[link to highlighted text](https://support.google.com/google-ads/answer/12002338?hl=en#100:~:text=If%20you%20use%20both%20Google%20Ads%20and%20Google%20Analytics%20%2C%20only%20set%20up%20the%20Google%20tag%20in%20one%20platform)",
                "author": "jillyrockpo",
                "score": 1
            },
            {
                "body": "While it is true that you can link the two and GA4 therefore shares data. Data collection in GA4 is not the same as data collection from Google Ads. This is why I would go with adding both tags in Tag Manager. Let Google Ads collect data on its own terms. Just like it is generally seen as preferable to create Ads conversions in Tag Manager instead of importing conversions from GA4",
                "author": "Amazing_Cod6382",
                "score": 1
            },
            {
                "body": "Same thinking here - I am changing the defaults for the GA4 tag with the parameters and not sending pageviews... if I load both then the one for Ads will be the default settings/parameters.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Doing the advanced consent mode so just loading the Google Tags with 'Initialization - All Pages' as recommended.  Consent defaults load in the 'Consent Initialization' before it and then the tags adapt if consent is changed after they load - keep in mind this only works for tags with the built-in consent checks.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Keep in mind, if you do this, then any settings you apply in your tag gets applied to all the other destinations too.  For example, in my GA4 tag I am not sending page\\_view (do it with its own tag on 'all pages', change the page\\_referrer, change the page\\_location, etc... I don't necessarily want those settings with my Google Ads so I have a Google Tag for each.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Sounds more like speculation to me, honestly. Regardless if you have one or two Google tags, the tags are literally identical, they function 100% identically - only difference is the measurement ID you enter. \n\nDo you have any documentation that states otherwise? Then I’d be happy to check it out, and correct my stance",
                "author": "canned_laughter_lol",
                "score": 1
            },
            {
                "body": "How are you able to fire the Google Tag on \"Initialization - All Pages\" when the consent states should still be denied by page default ?",
                "author": "Ok_Evidence2594",
                "score": 1
            },
            {
                "body": "you do realize if u dont have a seperate gtag for google ads the auto one that will load before your g ads tag and floodlight tag, will load with full auto config, so it will send remarketing hits, scrape random userdata on the website (emails) etc. \n\nI would always prefer having a seperate gtag for ads for the control and transparency",
                "author": "Mrjeepleet",
                "score": 1
            },
            {
                "body": "There is a different trigger for consent initialization that fires before that one. Also, remember that Google tags will automatically update themselves as consent changes.  I explained everything in my first reply - not sure what you are confused by.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "What “auto one”? Sorry, I’m having a hard time understanding what you wrote.\n\nBut in the EU, no tag will load before the user has granted permission through a cookie consent banner. So no, nothing loads randomly. Every tag is controlled by user consent",
                "author": "canned_laughter_lol",
                "score": 1
            },
            {
                "body": "Sorry I read that too fast, I didnt understand corretly.\n\nDo you mean that the google tag will try to fire again if the consent state is updated ?",
                "author": "Ok_Evidence2594",
                "score": 1
            },
            {
                "body": "The april 10th update. If you dont have a gtag for ads, an automatically gtag for ads will load for you before your ads tag will fire.",
                "author": "Mrjeepleet",
                "score": 1
            },
            {
                "body": "It doesn't need to fire again.  As soon as consent changes it will automatically adjust itself to handle the new consent states.  This is what the 'built-in consent checks' are shown in the tag in GTM.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Do you mean that data will go to GA4 even if the google tag couldnt fire ?",
                "author": "Ok_Evidence2594",
                "score": 1
            },
            {
                "body": "You should be firing the tag regardless of consent - it figures out, on its own, what to do based on current consent.  If it loads with consent denied, then user grants consent, it automatically adjusts in its own. Plenty of information on the web about this. I’m afraid I don’t know how else to explain it to you if you still don’t understand what I’m saying.",
                "author": "pongohopper",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754561466.0,
        "title": "Users in the EEA",
        "author": "Jumpy-Doughnut444",
        "id": "1mjw5n0",
        "selftext": "Hi everyone, \n\nGoogle Tag Manager regularly reports “No consent on certain pages for users in the EEA” on some of my pages, even though it is properly installed.\n\nGTM randomly reports pages, 2 to 3 each week, which affects the quality of the container.\n\nHow can I solve this problem?\n\nThanks a lot!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mjw5n0/users_in_the_eea/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Which cookie consent management platform are you using?\n\nHave you tried rechecking those URLS and pages to see if the banner is showing?",
                "author": "Fazle__",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes it is! Also, the URLs change every once in awhile in GTM.",
                "author": "Jumpy-Doughnut444",
                "score": 1
            },
            {
                "body": "[This is what I got](https://freeimage.host/i/FiP1OXt) (sorry it's in French)",
                "author": "Jumpy-Doughnut444",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[Here it is](https://freeimage.host/i/FiseNQs)",
                "author": "Jumpy-Doughnut444",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Sorry, [that's the one!](https://freeimage.host/i/FskAoRn) \n\n(As usual, a few more pages appeared today in this EEA section, a bunch of others have vanished)",
                "author": "Jumpy-Doughnut444",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748967540.0,
        "title": "Link Click Conversion Action Will Not Fire in Tag Assistant",
        "author": "Current-Ad1250",
        "id": "1l2g5g2",
        "selftext": "Edit\\*\\*: Solved.\\*\\* I'm new to GTM and had four conditions for one trigger which were impossible to all be met at once. Fix is to have four triggers for one tag, one for each link in my case.\n\nHi everyone, I'm trying to setup an ad campaign for my company in which the only conversion is a link click on a page. I've setup the conversion action in Ad Manager as an Outbound Click. I set up that tag using the tag manager container that is loaded onto the website. I've setup both the Google Ads Conversion Tracker and the Conversion Linker. The trigger for the conversion tracker in GTM is \"Click - All Elements\" and is going by link text, which I've verified several times is correct.\n\nThe cookie prefix for both the Conversion Track and Conversion Linker is \\_gcl. I've tried changing it to \\_gcl\\_au which did not solve my issue. I have enhanced conversions turned off.\n\nDespite this, when I go to test my conversion action in the tag assistant, it does not fire. Is anyone able to help?",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l2g5g2/link_click_conversion_action_will_not_fire_in_tag/",
        "num_comments": 17,
        "comments": [
            {
                "body": "I appreciate you trying to help anyways, and the info!\n\nI just made four triggers for the one tag and that's working beautifully. Time to run my ads.\n\nCheers :)",
                "author": "Current-Ad1250",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Change the trigger to \"Click URL equals\" then enter the URL of the outbound page, assuming that click does go out of your domain.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Try using a link click trigger instead. All Elements is extremely specific, so you usually need to use \"Click Element Matches CSS Selector\" to cover all the different things you could technically be clicking on. \n\nLink click only cares about the actual <a> element, so it works much better with URL/text rules.",
                "author": "winless",
                "score": 1
            },
            {
                "body": "Unfortunately it still did not fire. Any other ideas?",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Unfortunately this didn't work either. This is the HTML for the link btw, so no reason that trigger shouldn't be working. The problem must be elsewhere.\n\n\\`\\`\\`<a onclick=\"return gtag\\_report\\_conversion('http://www.activityyachting.com/');\" href=\"http://www.activityyachting.com/\">www.activityyachting.com</a>\\`\\`\\`",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Too bad they don't allow images on here.  Seeing exactly how the triggered is configured would help.  This shouldn't be a cookie issue whatsoever unless you have consent setup (and it's not working properly).",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "What in hades is that?",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "What does Tag Assistant report as Click Text and Click URL on the click event? \n\nIf you click on the event in the timeline, you can also click on the unfired tag to see what check(s) it tried to do, and which one(s) failed. \n\nIf you're not sure what I'm talking about, here's a guide for Tag Assistant: [https://support.google.com/tagmanager/answer/15212503](https://support.google.com/tagmanager/answer/15212503)",
                "author": "winless",
                "score": 1
            },
            {
                "body": "I have consent setup with Google Analytics but that was setup properly.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "elementUrl: \"http://www.activityyachting.com/\",\n\nelementText: \"www.activityyachting.com\",\n\nThe unfired tag is showing a checkmark for Click URL, an X for \\_event equals gtm.linkClick, and a check for \\_triggers matches RegEx.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Consent is going to apply to all tagging you have setup, not just GA4 tagging.  Some of it will auto configure, some of you may have to manually adjust to expect consent behavior.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Did you click on a \"Click\" event or a \"Link Click\" event? That's saying that the only mismatch is the trigger type. It may work if you just switch from whatever you currently have to the other type. \n\nYou might also see both a Click and Link Click event show up in the timeline, in which case the tag should be firing on the other one.",
                "author": "winless",
                "score": 1
            },
            {
                "body": "Okay. Any idea how can I troubleshoot where the issue is then?",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "I've tried both the Click and Link Click events. Both are giving me an X mark for \\_event equals [gtm.click](http://gtm.click) or gtm.linkClick.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Oh wait I think I may have found the issue... I've been trying to do this for 4 different links and didn't realize that the trigger has to find all conditions to be TRUE before firing. Do I need to setup a trigger for each link? Does that also mean setting up a conversion action in Ads Manager for each link?\n\nEdit: I tested this and the conversion tag fired... I am such a fool for not seeing that all conditions must be met before firing.",
                "author": "Current-Ad1250",
                "score": 1
            },
            {
                "body": "Ahh, glad it's working! \n\nWhen creating a tag, its triggers work as OR conditions, whereas when creating a trigger, the criteria work as AND conditions. \n\nSo a tag only has to have at least one of its triggers go off in order to fire, but any given trigger must meet all the criteria that you set for it in order to be triggered.\n\nThe difference there messes just about everyone up at least once when getting started in GTM.\n\nYou generally don't need to create individual conversions in the ad platform. You can create a single tag with multiple individual triggers that cover the different cases where you want it to fire. \n\nYou can also just use one trigger if you're down to use a regex match on URLs or text, but it's a bit more advanced if you're not familiar with regular expressions. Worth learning long-term along with CSS selectors.",
                "author": "winless",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748350535.0,
        "title": "Google Ads Tag firing but failing",
        "author": "ReadingMaleficent121",
        "id": "1kwmjqy",
        "selftext": "I have a GTM setup for a campaign and it's getting 0 conversions because the Google Ads tag is firing but failing and it gives me no indication as to why. Has anyone seen anything similar? Been searching for ages\n\nIt has a value, transaction ID & currency all OK and like I said no errors in GTM preview and all the other tags seem to be fine, it even sends purchase event to GA4\n\n**Update: I managed to fix this by configuring cookie consent with Google Tag Manager and Cookiebot. The consent for all of the cookies was denied which was firing other tags but failing on the Google Ads Conversion one. All working OK now thank you for the help**",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kwmjqy/google_ads_tag_firing_but_failing/",
        "num_comments": 18,
        "comments": [
            {
                "body": "It's pseudo error, ignore it https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf?utm_source=share&utm_medium=member_android&utm_campaign=share_via... read this.  However if you are more concern about this \" failed\" status just use cookie prefix __gcl instead _gcl.",
                "author": "Ok-Square9320",
                "score": 2
            },
            {
                "body": "Have you implemented Consent mode? I've heard that some people get this error when they don't have consent mode set up.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you take a screenshot of the issue you are seeing?",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "Did you forget the Conversion Linker?",
                "author": "Jadecat801",
                "score": 1
            },
            {
                "body": "Google Ads purchase tag firing failed — there could be multiple causes behind this. Have you tried configuring the cookie prefix setting? \n\nAdditionally, could you please specify the type of campaign you're running in Google Ads — is it a Smart campaign or a Standard campaign?\n\nIf you're using a Smart Campaign, Google Ads will not receive any manual conversion data from Google Tag Manager, as Smart Campaigns rely on automated tracking and don't support custom tag configurations.",
                "author": "motiur_ak07",
                "score": 1
            },
            {
                "body": "Sounds like the setup is mostly fine if GA4 is receiving the purchase. Double-check the Google Ads Conversion ID/Label, make sure enhanced conversions (if used) are set up right, and watch for consent issues or ad blockers, those can silently stop Google Ads tags from working.",
                "author": "Shot-Bumblebee-1914",
                "score": 1
            },
            {
                "body": "I confirm what u/Etianen7 said, if the consent signals are not installed this could be the cause. I've already had several tags fail because of this. \nAnother point to consider. It may be a bug in the GTM preview, which is common. To do this, check http requests in the browser via Chrome DevTools. You trigger your event and you look in the Network tab of the inspector if the request called \"conversion\" (or \"aw\"+\"method:POST\") is triggered. Its status should be \"200\". This means that it is transmitted to Google Ads and is a bug. \nKeep us informed here",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "It doesn't show as a conversion in Google Ads however which will surely affect targeting when running a conversion based campaign?",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "I've also been using \\_\\_gcl and it is still failing [https://ibb.co/yFc0QRYK](https://ibb.co/yFc0QRYK)",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "[https://ibb.co/yFc0QRYK](https://ibb.co/yFc0QRYK)",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "No, I have the conversion linker on there too",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "Have tried configuring the cookie prefix setting (https://ibb.co/yFc0QRYK) for both this tag and the conversion linker\n\nIt is shopping campaign, automated for max clicks with it being a new campaign",
                "author": "ReadingMaleficent121",
                "score": 1
            },
            {
                "body": "OKay ! open your website in chrome , then inspect it ( press f12) then in network tab type your conversion label exactly as your in Google ads, then confirm the your desired conversion action. If you see http request  status \"200 ok\" for your  conversion label then your tag is perfectly implemented, ignore error you get as google ads conversion tag \"failed\" status in GTM.",
                "author": "Ok-Square9320",
                "score": 1
            },
            {
                "body": "**Do you currently have only the Google Ads conversion tag for purchase, or are there other tags implemented as well?**\n\nIf you only have the purchase conversion tag, I recommend creating a basic google ads conversion for pageview in Google Tag Manager for testing purposes. This will help determine whether the issue is isolated to the purchase tag or is affecting all tags in general.\n\nIf other tags like **Add to Cart** or **Begin Checkout** are firing correctly, but the purchase tag is not, try testing the setup on a different laptop or PC. Sometimes local browser settings or extensions can interfere with tag firing.\n\nLet me know what you find!",
                "author": "motiur_ak07",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1754217689.0,
        "title": "Built my own privacy first GTM Web container analysis tool, would love feedback from the community",
        "author": "Tagnetica",
        "id": "1mgg5f3",
        "selftext": "Hey folks,\n\nI've been working in analytics for several years now, and recently built a tool to help with my own GTM container analysis. After using it myself for a few months, I thought others might find it useful too. It's still a work in progress but I'd love to get some feedback from the community.\n\nWhat it is: GTM Super Hero (Ha ha I know a bit exaggerated probably),  a privacy-focused web app for analysing and auditing GTM containers. You can import JSON exports or connect directly via the GTM API.\n\nWhy I built it: I was tired of manually reviewing containers or sifting through GTM exports and wanted something more visual, responsive and interactive. The existing tools I knew about didn't *exactly* fit my needs.\n\n\n\nWhat makes it different:\n\n* 100% client-side analysis - Your GTM data never leaves your browser\n* Interactive network visualization - See tag-trigger-variable relationships visually\n* Advanced unused entity detection - Accounts for tag sequencing (setup/cleanup tags)\n* AI-powered regex generator - Describe patterns in plain English, get GTM-ready regex\n* Container cleanup feature - Remove unused entities directly via API\n* Feature-based pricing - Simple free vs pro feature access\n\n\n\nFree tier:\n\n* Full container analysis and visualization\n* Unused entity detection with sequencing logic\n* Global search across all entities\n* Consent audit features\n* JSON export/import\n* Interactive network graphs\n\n\n\nPro tier ($9.99/month):\n\n* All Free tier features\n* Container cleanup (remove unused entities)\n* Export to Excel\n* Bulk editing and name changes\n* Priority support\n\n\n\n**Privacy first**: Everything runs in your browser. No GTM data is ever uploaded to external servers.\n\n\n\nI've followed the likes of Julius and Simo for years and I was inspired by GTM Tools, but I deliberately didn't look at the current implementation (post Stape adoption) while building this to avoid just creating a clone. I'm happy with how it turned out - it's my own thing in it's way.\n\nThis started as a personal tool but I'm hoping it might become a small side income and at least be useful to some even if they just use the free bits. I'd really appreciate any feedback, especially on:\n\n* What current features would be most valuable to you?\n* Is the pricing reasonable?\n* What's missing that you'd want to see?\n* Other than here on reddit, whats best to get feedback & requests from users at the point of usage (eg Hotjars feedback tools)?\n\n\n\nYou can check it out at [https://gtmsuperhero.tagnetica.co.uk/](https://gtmsuperhero.tagnetica.co.uk/)\n\n\n\nThanks for reading, and I'm open to any questions or suggestions!",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1mgg5f3/built_my_own_privacy_first_gtm_web_container/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Whilst I don’t agree with a lot of what Gary Vaynerchuk says, “jab, jab, jab, right hook” has a basis in reality.\n\nStart contributing. Don’t just put out content with the intent that you are doing it purely to be seen. Put out genuinely useful content. Make sure you’re right. Be prepared to do more research and admit you got it wrong when you get it wrong. \n\nAnswer questions. Be helpful. *Do experiments and post about the results, whether negative or positive*.\n\nAbove all, be curious. \n\nYou’re not chasing engagement. You’re building your own knowledge. If someone asks about something they are struggling with, go and research the hell out of it and figure out how you can help.\n\nYou aren’t giving your time away for free, you’re learning and sharing. You’ll become expert in the things people actually care about.\n\nOne rule though…\n\nDon’t solve problems privately in DMs for free. If someone wants private help, it’s valuable to them.\n\nI have had people DM me for help and I invite them to post their problem in an appropriate subreddit so that others can benefit or I can help them privately for a cost.  That is fundamentally how consulting and freelancing exists.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "If the tool runs fully offline in the browser, then login shouldn’t be required for the free features. Just saying…",
                "author": "Kutsan",
                "score": 2
            },
            {
                "body": "Not a chance can I authorise access to the containers attached to my account without knowing more about what and who I'm giving access to.\n\nI have client confidentiality to consider.\n\nA 1-karma Reddit account asking for implicit trust is a stretch!",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Appreciate the input. Cheers",
                "author": "Tagnetica",
                "score": 2
            },
            {
                "body": "Good luck with it!",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This is huge, u/Tagnetica.\nBuilding a GTM analysis tool is smart.\nThe real win is automating the actions that come from those insights.\nThink about scaling GTM efforts. https://myli.in/JC2ZUMT0",
                "author": "Lakshmifn7",
                "score": 1
            },
            {
                "body": "Thanks for the feedback, how would you suggest I build trust given my Karma immaturity? \n\nMy personal Reddit account wouldn't be much use either as although it's like 10+years old I've only ever been an observer, not much contributed / posted (Lurker I know).",
                "author": "Tagnetica",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744988353.0,
        "title": "Custom html gtag to using Google Tag",
        "author": "pongohopper",
        "id": "1k26zbe",
        "selftext": "So here is the scenario.  An order processor I am using supposedly requires that GA4 be setup in GTM with the following custom html tag rather than a Google Tag :\n\n    <script async src = \"https://www.googletagmanager.com/gtag/js?id={{ga4-tracking-id}}\"></script>\n    <script>\n    function gtag() {\n    dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n    if (!window.clsid) {\n        gtag('config', '{{ga4-tracking-id}}', {\n            'cookie_flags': 'SameSite=None;Secure',\n            'page_referrer': '{{fsc-referrer}}',\n            'page_location': '{{fsc-url}}',\n        });\n        window.clsid = {\n            client_id: '',\n            session_id: ''\n        };\n        gtag('get', '{{ga4-tracking-id}}', 'client_id', function(r) {\n            window.clsid.client_id = r\n        });\n        gtag('get', '{{ga4-tracking-id}}', 'session_id', function(r) {\n            window.clsid.session_id = r\n        });\n    } else {\n        gtag('config', '{{ga4-tracking-id}}', {\n            'client_id': window.clsid.client_id,\n            'session_id': window.clsid.session_id,\n            'cookie_flags': 'SameSite=None;Secure',\n            'page_referrer': '{{fsc-referrer}}',\n            'page_location': '{{fsc-url}}'\n        });\n    } \n    </script>\n\nThere reasoning for this isn't clear and after contacting them about it and if it was possible to just use a regular Google Tag they were clueless and of no help at all.\n\n{{fsc-referrer}} and {{fsc-url}} are not a big deal and I always have access to them.  Other than that the only variable used is {{ga4-tracking-id}} which I of course have also.\n\nThe reason I want to change over to a Google Tag instead of the above custom html is because of the built-in consent checks that come with the Google Tag - a custom html tag does not have these.  I want to take advantage of consent mode v2 where it can still track events even without consent given.\n\nLooking at the code I don't see a whole lot going on other than the custom cookie\\_flags, page\\_referrer, and page\\_location parameters.  client\\_id and session\\_id shouldn't even need to be set right because that will just happen automatically I would think, but then why the if/else depending on if window.clsid exists or not?\n\nI am just trying to make sense of the code and what it is actually accomplishing over just using a plain old Google Tag instead.  If it makes a difference the order processor's checkout pages, which is the most important part here because I want to track the checkout process and sales, is hosted on their domain and not mine.  The checkout process appears to load inline or within an iframe 'in' my own hosted html - that is accomplished with js.  I'll also add that they load my gtm on their side with my container id as well.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k26zbe/custom_html_gtag_to_using_google_tag/",
        "num_comments": 22,
        "comments": [
            {
                "body": "Are they actually going to know if you just use the normal Google Tag?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "A quick Google search found me this page: \nhttps://developer.fastspring.com/docs/google-tag-manager#popup-storefront-or-embedded-storefront\n\n\n\n\nThe code here is identical to what you've shared here. From what I gather, it seems like the client and session ids stored in `window.clsid` are used by the custom link decorator function. This function is used to manually decorate the callback URLs of the storefront. \n\n\n\n\n**Why do they need a custom link decorator when the Google tag already handles this automatically?**\nThe Google tag linker only decorates `<a>` link elements by default. Since the checkout redirect is most likely handled programmatically (the user never clicks a link element to trigger the navigation) the linker parameters aren't appended to the destination URL. Passing client and session ids allows you to manually stitch the visit without using linker parameters.\n\n\n\n\nWhile this does get the job done there are a number of improvements that could be made here. It would for example be much more preferable to generate a linker parameter and pass that on instead of client and session ids. This would allow the Google tag to stitch the visit automatically instead of having to manually map the ids to the tag. Although I won't go into much detail on this and will try to focus is solving your issue as it is presented.\n\n\n\n\nAll of this code can be updated to work with the GTM Google Tag:\n\n1. Create two Google Tags. Tag A, which is blocked if `window.clsid` is defined and Tag B, which is blocked when `window.clsid` is `undefined`.\n\n\n2. Configure Tag A according to the config seen in the if-statement.\n\n\n3. Configure Tag B according to the config seen in the else-statement.\n\n\n4. Create a custom HTML tag with the following code:\n```html\n<script>\n    window.clsid = window.clsid || {\n        client_id: '',\n        session_id: ''\n    };\n    window.gtag = window.gtag || function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag('get', '{{ga4-tracking-id}}', 'client_id', function(r) {\n        window.clsid.client_id = r\n    });\n    gtag('get', '{{ga4-tracking-id}}', 'session_id', function(r) {\n        window.clsid.session_id = r\n    });\n</script>\n```\n   5. Save the custom HTML tag without a trigger.\n\n   6. Go to Tag A and use tag sequencing to fire the custom HTML tag **after** Tag A has fired.\n\n\n\n\nThe configuration outlined above **should** provide the same results as the original code while allowing the use of the built-in Google Tag.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "This is the kind of answer I was looking for.  Great out of the box thinking as this idea didn't cross my mind.  Looking over this the only problem I see is for my GA4 events I use the Google Tag as a setup tag.  If there are two tags, not knowing which will fire, then I can't use it as a setup tag.  With that said, I was triggering the Google Tags on 'initialization - all pages' as recommended in the docs...... I guess I'll just have to hope that events don't trigger before the tag actually loads?",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "That is kind of what I was thinking... old habits of always having the setup tag, but yeah, if it runs on 'initialization - all pages' it is going to always hit before an event would.  Going to try this out tonight and run some tests in tag assistant... fingers crossed.  Thank you!",
                "author": "pongohopper",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "visit that site in your regular flow and check if there are cookies for this - \n\n    {{fsc-url}} \n\n    {{fsc-referrer}}",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "Doesn’t have anything to do with it.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Data layer variables and yeah they are always going to be there on the checkout pages with valid values. Defaults are set for them if undefined which would only happen on non order processor pages.\n\nThere has to be a reason for their code mentioned involving the client and session id - I don’t see any other reasoning to do it that way over a ‘regular’ tag.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Sorry I'm not sure I'm understanding what you mean",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Since your goal is to use Advanced Consent Mode you can scrap the tag sequencing for your GA4 events and simply trigger both the Google Tags on the initialization event. That way they will be guaranteed to trigger prior to any other GA4 tags.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "hmm... not getting any value for window.clsid when checking in console.  It is returning :\n\nwindow.clsid;\n\n{client\\_id: '', session\\_id: ''}\n\nFor A I trigger on 'initialization -all pages' then added an exception trigger :\n\nsome custom events : when js var window.clsid does not equal undefined\n\nfor B the exception is the opposite :\n\nsome custom events : when js var window.clsid equals undefined\n\nLooking in tag assistant it shows both fired at initialization.  A shows blocking triggers :\n\nX window.clsid set\n\nX gtm.init equals window.clsid\\_set\n\nX null does not equal undefined\n\nB shows blocking triggers :\n\nX window.clsid undefined\n\nCHECK null equals undefined\n\nX gtm.init equals window.clsid\\_undefined\n\nMaybe I set up the blocking wrong or just reading the tag assistant blocking wrong?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "check those values and how they change on the checkout page. if this is an iframe, could be they are looking at the  parent pages refferer / client id / session id parameters. so better to use this script and maybe set this to trigger only on the iframe page",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "What don't you understand?  Maybe I can explain it differently if I knew?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "Let me know how it goes as I'm a bit unsure if the gtag API to fetch these values is even exposed when strictly loaded through GTM. If I remember correctly they should but I can't really test that from where I am right now. \n\nEither way, if it doesn't work I have other ideas. ( :",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Yeah, not sure what is going on.  I am never getting any values for window.clsid when checking in the console.  Triggers working fine though... just the custom html is not setting the values for some reason.  Maybe the gtag function doesn't work when loading a google tag in gtm instead of manually?  I can click through page after page on the site and tag A runs then the custom html cleans up after because window.clsid is undefined, but then it never sets the values either.",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": "I just tested this myself and it seems to work exactly as intended.\n\nMake sure that you have mapped the same GA4 Measurement ID that you are using in the Google Tags to the Custom HTML as well. If that isn't the issue then there might be something else preventing you to set the values. \n\n  \nIf you share or export your preview session with me I can take a look at it. You can DM me or send a chat message if you don't want to post it publicly.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Stupid mistake on my part was the issue.  Forgot the var {{}} likely because it was late.  Currently here is the behavior I am seeing :\n\nIf consent is given then everything works fine.  Tag A then custom html on all site pages then just tag B on the checkout stuff (confirmed to have the correct client\\_id and session\\_id as well).\n\nIf consent is not given then neither are set.  Tag A then custom html on all site pages, but client\\_id and session\\_id are never set.  It is almost as if the gtag functions fail because I put some console.log() stuff in there to debug and nothing outputs.  On the checkout stuff it gets a little weirder... tag B runs even though client\\_id and session\\_id are empty and it sets them both as empty (\"\") in the tag parameters because of that.  My guess here is that tag is setting both to \"\", which is part of the custom html, but as mentioned the gtag functions below that in the code never does anything.  So now, window.clsid isn't undefined, but both values are empty... that satisfies the !undefined condition to fire tag B.\n\nNot sure if this is the correct behavior or not.  When consent isn't provided there is no client\\_id or session\\_id generated - is that right?",
                "author": "pongohopper",
                "score": 1
            },
            {
                "body": ">Not sure if this is the correct behavior or not.  When consent isn't provided there is no client\\_id or session\\_id generated - is that right?\n\nThey are generated but cookies are not set. Perhaps the gtag API doesn't allow reading these values unless consent is `granted`. I would have to do some tests to check that.\n\n\n> It is almost as if the gtag functions fail because I put some console.log() stuff in there to debug and nothing outputs.  \n\nEven though there is no asynchronous code in your custom HTML tag, the processing that occurs after calling gtag SET is asynchronous. This means that if you placed your console logs below the gtag function call they will always return nothing since the console logs will be executed before the gtag callback function is called. If you want to log the values manually, make sure to place your console logs inside the gtag callback function (same place where the client and session id are assigned).",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "That is where I put them. That’s why I think something is up with the function when consent isn’t given - nothing ‘in’ the function is executed - almost like it just hangs at the point it is called.\n\nThere is a gtag api template available I tried this morning and the same behavior happens - it shows the tag as ‘running’ endlessly in tag assistant when consent isn’t given yet completes instantly when it is.",
                "author": "pongohopper",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741254467.0,
        "title": "Is event tracking a pain? We’re building an AI tool to automate GA4/GTM event tracking—Would love your thoughts!",
        "author": "RexHardan",
        "id": "1j4rzdv",
        "selftext": "Hey everyone,\n\nI know many agencies and consultants spend hours manually setting up event tracking in Google Tag Manager for clients—mapping out events, configuring triggers, debugging, and ensuring data accuracy. It’s tedious, time-consuming, and prone to human error.\n\nWe’re building an AI-powered tool that automates this process. With just one click, our AI generates expert-level event tracking plans and deploys them directly to GTM—eliminating the guesswork and saving hours of manual work.\n\nWe’re still in the early stages, and right now, we’re focusing on automating website event tracking plans.\n\nI’m curious—would something like this be useful to your agency or team? If so, in what scenarios do you think it would provide the most value? Also, what’s the biggest challenge you face when implementing event tracking for clients?\n\nWe’re looking for feedback to make sure we’re solving real problems. If you’re interested in learning more, check out [www.jtracking.ai](http://www.jtracking.ai), and I’d love to hear your thoughts!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j4rzdv/is_event_tracking_a_pain_were_building_an_ai_tool/",
        "num_comments": 26,
        "comments": [
            {
                "body": "I think this is fundamentally a flawed concept. Any automation of this will miss something.\n\nIt’s impossible to replace having real, hands-on with a site when reviewing how or what to measure. If you’re an agency working for a client, you want to understand their site and their existing data collection strategy so that you can do what they’ve asked you to do but also identify things they haven’t even thought to ask yet.\n\nIf you eliminate the understanding, you eliminate any possible ways to improve things, which will then eliminate your ability to generate revenue.",
                "author": "DigitalStefan",
                "score": 16
            },
            {
                "body": "Your website doesn't seem to be working. I am curious as someone who has worked with tagging software for well over 10 years. \n\nDo you see it as a scraping tool, that will scan a website and identify likely conversion points.\n\nHow is it deploying to GTM, is it an agent that builds out the variables/triggers/tags or is it generating a csv that you then upload.",
                "author": "Mysterious_Swan_9941",
                "score": 3
            },
            {
                "body": "Hey OP, you linked https://jtracking.ai, but your 'www' subdomain isn't configured to automatically redirect users who don't append it themselves. I can load www.jtracking.ai just fine, but need to add the 'www' subdomain to the URL myself; please consider updating your posted link to include 'www', or set-up an auto redirect on the subdomain.",
                "author": "lifemarket",
                "score": 3
            },
            {
                "body": "Websites are built differently. Companies have different ways and SOPs regarding their websites, so I’m not sure how using AI on tracking events would be feasible in the long run\n\nStill a great concept though",
                "author": "ch0lok0y",
                "score": 3
            },
            {
                "body": "I know you’re somewhat at the forefront of AI, but em dashes in Reddit posts are a giveaway that those posts are from an LLM 🖖",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "If you could just build something that QA's tracking efficiently and reliably, that would be a big win IMO.\n\nThe rest seems a bit much. No 2 sites are built the same and having to go behind some AI system to clean up tracking sounds more tedious than just setting it up myself.",
                "author": "TheHobbyist_",
                "score": 2
            },
            {
                "body": "Automation tool add unnecessary things 🙄 \n\nEach site is different as well makes it more challenging to apply to some of it..",
                "author": "Muted-Champion-6841",
                "score": 2
            },
            {
                "body": "How does it work with Cookie Consent and sGTM?",
                "author": "Zealousideal-Ask5822",
                "score": 2
            },
            {
                "body": "If it works, of course it would be useful! I set everything up myself by reading articles and watching YouTube tutorials and constantly wonder if there’s any settings I’m missing that would improve my attribution.",
                "author": "Global-Bite-306",
                "score": 2
            },
            {
                "body": "Right on. Anyway Google tag manager isn't that hard to figure out. And the job pays mighty well so why deny a human the opportunity to live?",
                "author": "intrepid789",
                "score": 2
            },
            {
                "body": "Thank you for catching that! I’ve fixed the issue. Appreciate the heads-up!",
                "author": "RexHardan",
                "score": 2
            },
            {
                "body": "Totally agree! Event tracking validation is time consuming, especially when ensuring accurate attribution. Hopefully, JTracking can solve this problem and reduce the hassle of manual checks while improving efficiency!",
                "author": "OutlandishnessWild57",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Well this drive by this went well.",
                "author": "gladue",
                "score": 1
            },
            {
                "body": "Like all the comments here, but what IF it's consistent?",
                "author": "Necessary_Fondant390",
                "score": 1
            },
            {
                "body": "I am consulting billion dollar brand and it's not feasible when you comes to large scale where things are behaving differently. I might be good did idea for some cookie cutter tracking.",
                "author": "Additional-Side-457",
                "score": 1
            },
            {
                "body": "This sounds super interesting! I’ve definitely felt the pain of manual event tracking. it’s tedious and sometimes frustrating to debug. If your tool can truly automate the process accurately, it would save so much time. I’ve been using Qwestify, which is like ChatGPT for GA4. It makes tracking and analytics way easier with real-time insights and automated event tracking. Plus, it’s free, which is a huge plus! Would love to see how your tool compares.",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "If your main feature would be to detect the industry & business objective of the website and generate a meaningfully structured tracking plan, then you may have a product. Automated event detection/collection is always poor and has been offered multiple times by different entities. I don't see them taking off.\n\nIf you DM me your app, I'll be sure to test & provide feedback on improvement since i see you do have a \"generate tracking plan\" option",
                "author": "t0pz",
                "score": 1
            },
            {
                "body": "If it is consent mode and rgpd compliant that would open even tracking specific actions on any landing page and added with ia stuff (like heatmaps, button clicks for ads,etc) that would be a bangerrrr",
                "author": "tonyhawk555",
                "score": 1
            },
            {
                "body": "Hi! I was thinking about purchasing Qwestify and would love to get your honest opinion. Thanks!",
                "author": "Sharp-Company8863",
                "score": 1
            },
            {
                "body": "I can see how this could be very effective, and I wish you the best in your project, I have signed up for your wait list and look forward to your product.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "You're absolutely right—deep understanding and hands-on analysis are essential for meaningful insights and business growth.\n\nMany of our team members have worked in data analytics and event tracking for years. Our approach is to identify key, high-value metrics for specific industries and leverage AI to map corresponding events on a website, generating a tracking plan automatically. So far, we've seen promising results, especially with SaaS websites.",
                "author": "RexHardan",
                "score": 0
            },
            {
                "body": "I’ve fixed the issue—please visit [www.jtracking.ai](https://www.jtracking.ai). It would be a pleasure to chat with an expert like you!\n\nOur tool does have web scraping capabilities, but it functions more as an AI agent. It directly builds variables, triggers, and tags into GTM using the GTM API, rather than just generating a CSV for manual upload.",
                "author": "RexHardan",
                "score": 0
            },
            {
                "body": "Absolutely! For beginners, especially those without a technical background, setting up GA/GTM tracking and analyzing data can be a real challenge. That’s exactly why we built JTracking: to make generating and implementing event tracking plans simple and hassle-free. We’re here to take the guesswork out of the process so you can focus on what really matters—your data and insights.\n\nIf you’re interested, feel free to DM me your email, and I’ll make sure you’re the first to know when JTracking is ready. Would love to have you try it out!",
                "author": "RexHardan",
                "score": 0
            },
            {
                "body": "Thanks for the feedback! I hear you—automated event detection has been hit-or-miss in the past, but we believe this time will be different. With the advancements in LLMs and our deep understanding of tracking plan best practices, we’re confident our approach will stand out.",
                "author": "RexHardan",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748178877.0,
        "title": "Discrepancies in GA4 Server-Side vs Client-Side",
        "author": "Siewik",
        "id": "1kv29e5",
        "selftext": "I have two properties under GA4 account (for testing purposes), one is getting data directly trough normal setup via GTM, and the other one is getting data with server-side setup. There is like 20-30% difference in all metrics between the two. The server-side GA has lower values, in real time preview, less traffic, less users, less conversions etc. When I tested everything in both gtm debug and ga4 debug everything seemed to be working as expected. Does anyone know what to check or why is this happening? Thank you",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kv29e5/discrepancies_in_ga4_serverside_vs_clientside/",
        "num_comments": 14,
        "comments": [
            {
                "body": "There are many possible causes for the discrepancy. Could you share a GTM container preview link?",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "Are you using the correct region for server side tracking? That inaccuracy can be caused by request latency. As you've already mentioned that you've masked the custom domain by a path that's a good step but you have to find out if any latency is being happening in realtime which the requests redirected to the custom domain by the CDN that you're using",
                "author": "analyst_bappy",
                "score": 2
            },
            {
                "body": "The managed hosting server is located in germany and the vps server for server side is in Lithuania which is 1000km distance between that is average 25ms ping",
                "author": "Siewik",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I beleive noone can tell you what is the exact reason without look to it deeper.",
                "author": "Damaskin",
                "score": 1
            },
            {
                "body": "It's normal. Server side stores cookies different e.g. longer than client side and thus metrics like sessions, engagement, revisit etc will have discrepancy. Conversions are usually higher though with SS like 15%.",
                "author": "kreativo03",
                "score": 1
            },
            {
                "body": "Is your GA4 data stream on any domains you don't want it on? Check acquisition by hostname report.",
                "author": "boschmktg",
                "score": 1
            },
            {
                "body": "not sure if you mean this [https://auto123.sk/metrics/gtm/debug?id=GTM-P5RQLP54&gtm\\_auth=mKIcTaYPvYIsO3eMduv5Dw&gtm\\_preview=env-3&hl=en](https://auto123.sk/metrics/gtm/debug?id=GTM-P5RQLP54&gtm_auth=mKIcTaYPvYIsO3eMduv5Dw&gtm_preview=env-3&hl=en)",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "Currently not sending country and region in http headers (working on it), thus not having \"**Enable region-specific settings**\" enabled, and all the traffic in GA is showing Germany and not Slovakia (real location of users), do you think it can be related to the problem?",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "what do you mean by \"not using a custom domain\"? we are using [auto123.sk/metrics](http://auto123.sk/metrics) which is reverse proxied to [gtm.auto123.sk](http://gtm.auto123.sk) , its according to best practices [https://developers.google.com/tag-platform/tag-manager/server-side/dependency-serving?tag=gtm](https://developers.google.com/tag-platform/tag-manager/server-side/dependency-serving?tag=gtm)",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "sure, i understand that, but what would be the main things to look when troubleshooting something like this? When testing it seems like everything is working good, server logs dont have any errors etc.. Dont really know how to check if it is related to cookie consent though",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "and this is from the web container [https://tagassistant.google.com/#/?id=GTM-5QD9L77F&url=https%3A%2F%2Fauto123.sk%2F%3Fgtm\\_debug%3D1748185805519&source=TAG\\_MANAGER&gtm\\_auth=y1WCGf1l07Z6bewMtcewxg&gtm\\_preview=env-5](https://tagassistant.google.com/#/?id=GTM-5QD9L77F&url=https%3A%2F%2Fauto123.sk%2F%3Fgtm_debug%3D1748185805519&source=TAG_MANAGER&gtm_auth=y1WCGf1l07Z6bewMtcewxg&gtm_preview=env-5)",
                "author": "Siewik",
                "score": 1
            },
            {
                "body": "Normally you always see that the server GA4 measures higher values. That would mean that your g-tag G-BC31VW7TZG overperformed. I don't see anywhere that tags are fired twice.   \n  \nWhat I do see is that when consent is given, a pageview tag is sent and a consent\\_update tag is sent to the g-tag. I think he can't combine these two. Which is why (I think) he measures them twice.",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747864242.0,
        "title": "High Direct Traffic in GA4 Due to CookieYes and Google Tag Manager Configuration",
        "author": "microwave-2025",
        "id": "1ksa7y5",
        "selftext": "Hi @cookieyesHQ \n\nI'm currently implementing CookieYes via Google Tag Manager, but I'm running into a significant issue with traffic attribution in Google Analytics 4 (GA4). Here's a summary of my setup and the problem:\n\nMy GA4 config tag has built-in consent checks and triggers on 'Initialization - All Pages'.\n\nThe CookieYes configuration tag in GTM has default consent settings set to 'disabled' and triggers on 'Consent Initialization - All Pages'.\n\nThe Problem:\nIn Google DebugView, I see that CookieYes sends an automatic cookie consent update to GTM. After the user interacts with the cookie banner, a second consent update is sent. This seems to cause GA4 to incorrectly classify over 90% of traffic as 'Direct', which is obviously not correct.\n\nPreviously, with other CMPs, I triggered the GA4 tag on 'cookie consent update' and it worked with a single event when the user actually updated their consent.\n\nCould anyone provide step-by-step instructions on how to set up the GA4 tag and the CookieYes tag to work together properly? I need to troubleshoot this to ensure accurate traffic attribution.\n\nThanks in advance for your help!",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ksa7y5/high_direct_traffic_in_ga4_due_to_cookieyes_and/",
        "num_comments": 14,
        "comments": [
            {
                "body": "A lot of this information is incorrect.\n\n\n> So it’s not that GA4 is blocked from firing it’s that it fires before consent is granted, and once consent is updated, GA4 starts collecting but by then the attribution info has already been lost. \n\n\nWhile it is true that url parameters are lost after you navigate away from the landing page, loading the Google Tag with consent set to \"denied\" and then updating it to \"granted\" while still on the same page will not cause attribution to be lost. This is the whole point of \"advanced consent mode\".\n\n\nIn fact, attribution will not be lost even if the user grants consent after navigating away from the landing page, as long as you loaded your Google tag on the first page and you don't have the \"redact ads data\" flag enabled.",
                "author": "brannefterlasning",
                "score": 7
            },
            {
                "body": "ChatGPT lies. Sort of. If you ask ChatGPT a question in a way that presupposes an answer, it will give you an answer that includes your supposition. In other words ChatGPT will sometimes tell you what you want to hear, whether true or not. Had a boss once who told me that links in YouTube descriptions hurt SEO. I asked him who told him that. He said SEO experts - but I knew he got it from ChatGPT - he was always spouting nonsense he got from ChatGPT. I told him that YouTube descriptions links were nofollow and we should fire those SEO experts.",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "You might want to try this: [https://github.com/tudorhoriadaniel/persist-original-traffic-source?tab=readme-ov-file](https://github.com/tudorhoriadaniel/persist-original-traffic-source?tab=readme-ov-file)",
                "author": "zenith66",
                "score": 2
            },
            {
                "body": "I put a JSON file in the below Google Drive link that you can import into a scratch/sandbox workspace. just import / merge / rename conflicts. it includes a few things. had someone import it and they told me it worked. there is a folder for referral source (why? because i get marketers who put garbage into utm\\_source and the site landing referral source helps be figure out what happened). there is an example of capturing the site landing URL (why? start of user journey across domains when there is a multi domain site and all the subdomains have a '/' path). there is an Analytics folder that has the shared event settings. you'll want to turn the shared event settings into event and user custom definitions in GA4 [https://drive.google.com/drive/folders/1l-f-e9IfycLa-73pzBJR0a1s1aKTzfA3?usp=sharing](https://drive.google.com/drive/folders/1l-f-e9IfycLa-73pzBJR0a1s1aKTzfA3?usp=sharing)",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, I’ve asked ChatGPT and it helped me piece this together more clearly.\n\nTo clarify: my GA4 config tag isn’t blocked initially it fires with an Initialization trigger on all pages, which is actually correct for setups using Google Consent Mode v2. CookieYes sends an initial consent state (defaulted to “denied”) and then updates it once the user interacts with the banner. So GA4 respects that and adjusts accordingly.\n\nNow here’s where the issue comes in:\n\nOn first page load, GA4 fires but sees consent as “denied,” so it doesn’t collect identifiable data. UTM parameters like source/medium/campaign do appear in DebugView, which tells me they’re being passed but they don’t carry over into real-time or standard reports unless the user accepts cookies and then refreshes or navigates to another page.\n\nThis seems to be because UTM data is only available via document.location and document.referrer on the first page load. If the user consents after that first load, and GA4 only starts collecting data then, the original attribution context is gone so the session is marked as Direct.\n\nSo it’s not that GA4 is blocked from firing it’s that it fires before consent is granted, and once consent is updated, GA4 starts collecting but by then the attribution info has already been lost.\n\nSession counts seem fine, it’s just that the quality of attribution is poor unless the user refreshes or navigates after accepting. It’s a timing issue, really.\n\nAnd yes, defaulting to “denied” is required to stay GDPR-compliant for first-time users.",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "Let pageview fire only after consent update is fired",
                "author": "Interesting-Plan-618",
                "score": 1
            },
            {
                "body": "Since UTMs were initially showing in DebugView and now they’re not, and I’ve confirmed my GA4 config tag fires on all pages (Initialization trigger), I’m wondering if there’s something off with either how CookieYes is updating consent or the tag timing.\n\nIn your opinion, what would be the best way to fix this setup? Should I be changing how consent is handled in GTM or adjusting how UTMs are captured?\n\nWould really appreciate your take on what I might need to do to get this tracking working properly again.",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "Thanks for this!",
                "author": "Strict-Basil5133",
                "score": 1
            },
            {
                "body": "Haha funny! ITotally agree with you ChatGPT can be useful, but it definitely has a habit of confidently suggesting overcomplicated solutions, especially when you’re trying to debug consent or tagging issues.\n\nFor example, in my case, ChatGPT suggested I disable the default page view by setting send_page_view: false in the GA4 config tag. Then, I was supposed to create a separate GA4 page_view event tag that would only trigger when analytics_storage = granted, using a custom event like cookie_consent_update and a Data Layer Variable {{dlv - analytics consent}} set to granted.\n\nIn theory, that would delay the page view until after consent and preserve UTM parameters but the issue was that CookieYes wasn’t pushing any analytics_storage consent updates into the Data Layer. The DataLayer variable just stayed \"undefined\" even after users accepted cookies. So the trigger never fired, and no page_view was sent at all.\n\nWhat’s strange is that I couldsee in GTM's Consent tab that the consent status was updated to \"granted\", but since CookieYes was handling it internally and not pushing that to the Data Layer, it broke ChatGPT’s whole approach.\n\nSo yeah, I’m struggling a bit here. I’ve spent hours trying to get UTM parameters to persist correctly. I can see in GTM Debug Mode that the initial page view is being sent before consent is granted, and I’m pretty sure that’s where the UTM data is captured and lost.\n\nOnly after users accept cookies and navigate to another page does a new page view get triggered and that shows up as the first page view in GA4’s DebugView, which confirms that attribution is getting lost right at the start.\n\nCan anyone confirm if that’s likely the root cause? And if so, what’s the best way to solve it?\n\nReally appreciate any insight this one's been driving me mad for days!!",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "all the talk about persisting UTM parameters - google is handling that 'on the fly' in the reporting API. you should not need to do anything. any of the 9 legitimate UTMs that come in on site landing, GTM/GA4 will automatically 'handle' them with no effort on your part. that you see them show up correctly as 'first user medium' or 'session medium' etc in GA4 is something that GA4 is addressing without assistance. yes - i have written code to persist both first user and current UTM URL query strings using 1st party cookies. but there are only really 2 reasons to do that. 1) something peculiar with how your subdomains are set up with different GA4 measurement streams (not a good reason) or some sort of server side URL query string parameter truncation, or 2) needing to pass on the UTM values to something else like HubSpot or Salesforce as a form input.",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "That’s good to know, and I really appreciate the explanation.\n\nBut here’s where I’m still stuck: when I preview my website in GTM using a URL with UTM parameters (e.g. https://mywebsite.com/?utm_source=test&utm_medium=test&utm_campaign=test), and then open GA4 DebugView, I don’t see the source, medium, or campaign in the page view event. They’re missing completely even though I understand they should be auto-handled by GA4.\n\nThis is also why they’re not showing up in my real-time reports under Page view → Source / Medium / Campaign, and why I’m getting 90+% Direct traffic in reports. So it seems like GA4 isn’t picking them up at all.\n\nThe strange part: if a user accepts cookies and then hard-refreshes the page, then the UTM parameters appear in DebugView and Real-Time  so that seems to be the key moment where the UTM data actually gets captured and passed through.\n\nSo it looks like the initial page view is happening before consent is granted, and GA4 is either not allowed to collect attribution info at that point or isn’t persisting it and then by the time consent is granted, the UTM data is already lost from the URL.\n\nAny idea why that’s happening? That’s the crux of the issue, and I’d really appreciate any thoughts or direction on what to try next.\n\nThanks again for taking the time!",
                "author": "microwave-2025",
                "score": 1
            },
            {
                "body": "Have you asked ChatGPT? Seriously, it’s made exceedingly quick work of every third party integration I’ve thrown at it. \n\nAt a glance, if you’re defaulting to opt out, and then a user accepts, I can imagine initiating an anonymous session pre banner interaction if it somehow qualifies as engaged, and then initiating a second direct cookie’d session when the user consents. Even if it’s not splitting the session, I’d guess that the interaction would drop the cookie, initiate a session, and that session would be direct since it starts on the site. Are your session counts normal? Is there a specific reason you're defaulting to opt out?",
                "author": "Strict-Basil5133",
                "score": 0
            },
            {
                "body": "Hi,\n\nWhen you implement CookieYes, it blocks third-party analytics (like GA4) from firing until the user accepts the relevant cookies. That means GA4 doesn't capture source/medium data unless consent is given, so traffic that *should* be attributed ends up labelled as ‘Direct’.\n\nTo address this:\n\n* **Google’s Advanced Consent Mode V2** can help. It allows tags to send cookieless pings *before* consent is given. These are used by Google to model user behaviour but aren’t shown in your actual GA4 reports, they just help fill in the gaps.  \n* Full tracking only kicks in once the user accepts analytics cookies. If most visitors don't consent, GA4 ends up labeling a big chunk of traffic as 'Direct'.\n\n\n\nEven with these features in place, you may still see major gaps in reported traffic if users don’t accept tracking cookies. To stay GDPR compliant, analytics tools must respect user consent, so you can’t collect complete tracking data without explicit permission.\n\nRefer: [https://www.cookieyes.com/documentation/drop-in-traffic-on-google-analytics-after-adding-cookieyes/](https://www.cookieyes.com/documentation/drop-in-traffic-on-google-analytics-after-adding-cookieyes/)\n\nIf you need help troubleshooting your setup or setting the tag behavior correctly, feel free to email us at [support@cookieyes.com](mailto:support@cookieyes.com).",
                "author": "cookieyesHQ",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1751276718.0,
        "title": "Tags not sending to Google ads, Conversions",
        "author": "--Arthur--",
        "id": "1lo3d91",
        "selftext": "Hello everyone.\n\nI have some problems with conversions sent from GTM to Google Ads. \n\nEverything in GTM says it works, tags are fired, and in preview mode it says data is being sent to Ads. \n\nI'm stuck in a black hole with chatgpt, and I can't get any further...\n\nRight now my search campaigns are receiving zero conversions and my conversion goals are listed as inactive :(\n\nWhat could be the reason that Google Ads is not receiving anything? \n\nAnyone want to take a look at it, or explain to me what I could do? \n\nIt's  1 contact form conversion goal and 4 types of contact clicks (email, phone, etc.) ",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lo3d91/tags_not_sending_to_google_ads_conversions/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Please make sure if you are getting real conversions (form submissions and those button clicks) from your G-Ads!\n If yes, please double check conversion id and labels in G-Ads Conversion tracking tags in GTM, and Publish the GTM container!\n\nIf you are still not getting conversions, feel free to contact me and I will check.\n\nThanks",
                "author": "svkmndl97",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Is the campaign active?",
                "author": "BigMidnight2104",
                "score": 1
            },
            {
                "body": "Can you screenshot your GTM setup ? And is the container changes published ?",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "I’m trying to keep it simple and useful. Have you sent the container?\n\nWas the Google Tag for Google Ads already installed?\n\n  \nTry to send screenshot of configurations.",
                "author": "enrico-chiolo",
                "score": 1
            },
            {
                "body": "Check the conversion id and the conversion label.\n\nConsent is set up properly?",
                "author": "Chjji22",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1753870786.0,
        "title": "[HELP] Issue with higher converions value then in CMS",
        "author": "Dzuri_17",
        "id": "1md2ugk",
        "selftext": "**TL;DR**\n\n* E‑shop on **Shoptet (CMS like shopify)** (CZ), tracking **GA4 + Google Ads** via **GTM** (client‑side only).\n* Google Ads **Conv. value** is **70–80% higher** than CMS real revenue.\n* In Tag Assistant, **one** `purchase` event fires **two** Google Ads hits to the **same AW-ID/label/transaction\\_id**:\n   1. `https://www.googleadservices.com/pagead/conversion/<AW-ID>/`\n   2. `https://www.googleadservices.com/ccm/conversion/<AW-ID>/`\n* Add‑to‑cart / add\\_shipping\\_info fire **once**. Only **purchase** shows as two hits (under the **same event**, not separate events).\n* I can switch to 1 source (GTM **or** Shoptet), but I want to understand why this happens and how to stop any duplicate counting / inflated value.\n\n# Stack / context\n\n* Platform: **Shoptet** (SaaS e‑commerce, CZ).\n* Tracking: **GTM (web)**, **GA4**, **Google Ads**.\n* Consent mode present (`gcs=G111`).\n* Previously had **two purchase sources**:\n   * **Shoptet’s native Google Ads conversion** (set by Conversion ID + Label in Shoptet admin)\n   * **GTM Google Ads Conversion tag** for purchase\n\n# Numbers (example month: May 1–31)\n\n* **Real revenue (CMS/Shoptet):** CZK **1,056,025.86** across **1,170** orders.\n* **Google Ads – “Purchase – Shoptet” (Primary):** **796.61** conversions, value **CZK 1,903,212.27** (DDA).\n* **Google Ads – “Purchase – GTM” (Secondary):** **796.80** conversions, value **CZK 1,825,633.53**.\n* **GA4 – purchase event:** \\~**CZK 705,000** (converted from **€27,620.40**) with **2,621** items purchased.\n\nSo Ads values **exceed real revenue by \\~70–80%**. Conversion *counts* for the two purchase actions are almost identical → suggests either value inflation or double‑firing across actions.\n\n# DataLayer (thank‑you) has transaction ID\n\nExample keys: `transactionId: \"2026003069\"`, `currency: \"CZK\"`, items array, etc. So we do have a unique order ID to dedupe.\n\n# What Tag Assistant shows for purchase (both when I kept only GTM and when I kept only Shoptet)\n\n**Under the same** `purchase` **event**, I see **two** hits to the **same** AW‑ID + label + value + currency + `oid`:\n\n    makefileKopírovaťUpraviť# Hit A (main)\n    https://www.googleadservices.com/pagead/conversion/<AW-ID>/\n    label=4tR9CJTmzZ0aELThy-0-\n    value=474.38\n    currency_code=CZK\n    oid=2026003705\n    en=purchase\n    ... (gcs=G111, etc.)\n    \n    # Hit B (secondary)\n    https://www.googleadservices.com/ccm/conversion/<AW-ID>/\n    label=4tR9CJTmzZ0aELThy-0-\n    value=474.38\n    currency_code=CZK\n    oid=2026003705\n    en=purchase\n    ... (gcs=G111, etc.)\n    \n\n* In earlier tests I saw `ec_mode=m` or `ec_mode=a` and `em=tv.1`.\n* When I **paused all Ads tags in GTM**, Shoptet still pushed **two** purchases.\n* When I **removed Shoptet’s Ads integration** and left **only GTM**, I **still** saw two hits (one `/pagead/`, one `/ccm/`).\n* **add\\_shipping\\_info** fires **once**, not duplicated.\n\n# What I’ve already tried\n\n1. **Disable GTM Ads tags** → Shoptet alone still sent **two** purchase hits.\n2. **Disable Shoptet Ads integration** (keep GTM only) → still **two** hits.\n3. **Turned off Enhanced Conversions in GTM** → still seeing `/ccm/conversion` \\+ `em`/`ec_mode` in hits (so EC likely still **ON in the Google Ads conversion action**, not just GTM).\n4. Verified **same** `AW-ID`, **same** `label`, **same** `transaction_id (oid)`, **same** value/currency on both hits.\n5. GA4 purchase looks lower; **conv counts** in Ads for the two purchase actions were almost matching; **value** in Ads is much higher than CMS (70–80%).\n6. I can keep **only one** purchase source (GTM or Shoptet). I just want to make sure the **value inflation** truly stops and understand the **two‑hits behavior**.\n\n# Hypotheses\n\n* `/pagead/conversion` is the **main** conversion request; `/ccm/conversion` might be an **EC/consent‑related companion ping** (user‑provided data pipeline). If so, **it shouldn’t create a second conversion**, but Tag Assistant shows two hits, which is confusing.\n* Historic **double‑counting/value inflation** likely came from having **two purchase actions** (Shoptet + GTM) both set as **Primary**, so Ads **summed** values across actions (dedupe by `transaction_id` works **only within the same action**, not across actions).\n* **Conversion Value Rules** in Ads (if any) could also inflate value after the hit (not visible in the request).\n* **Consent‑mode modeling** might add modeled conversions/value into standard columns (again not visible in the hit), but consent is `G111`, so maybe less likely here.\n* I susspect that value in GA4 is the real one. \n\n# What I’m asking the community\n\n1. **Are two hits (**`/pagead/conversion` **+** `/ccm/conversion`**) for a single purchase event expected** when Enhanced Conversions are enabled (at the **Ads action** level), even if EC is switched off in GTM?\n   * If yes, can someone point to **docs** that explain `/ccm/conversion` specifically and confirm it **doesn’t count** as a second conversion?\n2. **Best practice to stop value inflation** in this setup:\n   * Keep **only one** purchase action (either Shoptet **or** GTM) as **Primary**, set the other to **Secondary** or disable?\n   * Any Shoptet‑specific quirks where their native script may fire **two** purchase hits (not only EC), and how to fully disable them?\n3. **Where exactly to 100% disable Enhanced Conversions** so `/ccm/conversion` disappears in Tag Assistant?\n   * I turned off EC in **GTM**, but `/ccm/` still fires (which suggests EC is still ON in the **Google Ads conversion action**). Is that the right place to turn it off so only `/pagead/conversion` remains?\n4. **Other gotchas that inflate Conv. value:**\n   * **Conversion Value Rules** report to see original vs adjusted value — anything specific I should check?\n   * Any **Consent Mode** nuances that could affect only **purchase** (and not add\\_shipping\\_info) by adding modeled value?\n   * Shoptet sending **gross vs net** or shipping included? (My DL shows value/currency consistently; just checking if someone hit a Shoptet edge case.)\n5. **Guard solutions** you recommend:\n   * If I must, I can add a **GTM blocking mechanism** (cookie/localStorage) to prevent a second purchase fire for the same `transaction_id`. Any proven recipes/templates you like?\n\n# Goal\n\n* End up with **one** clean purchase action in Ads (Primary), **one** hit per purchase in Tag Assistant (ideally just `/pagead/conversion`), and **Conv. value ≈ CMS revenue** (minus normal attribution/modeling differences).\n* Confirm whether `/ccm/conversion` is purely an EC/consent companion ping and **not** a second counted conversion.\n\nHappy to share HAR or more redacted screenshots if needed. Any pointers or war stories from Shoptet + GTM folks would be much appreciated! 🙏\n\n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1md2ugk/help_issue_with_higher_converions_value_then_in/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749112137.0,
        "title": "Migrating to GTM with existing GA4 and Google Ads Tags",
        "author": "LateReadingThis",
        "id": "1l3u020",
        "selftext": "I'm looking to start using GTM for a site I've inherited but I'm a bit confused how to go about it.  \nI've currently got GA4 and Google Ads running with just the GA4 ID tag installed on the site itself with things like consent mode set up.\n\nCurrently data is being tracked and pulled as I'd expect but I'm unsure what I should do, whether I need to replace the GA4 ID tag with a GTM container tag or if tags should be merged and what the upsides/downsides of doing the different options might be and how it might affect our current reporting.\n\nFrom what I've read, if I've understood correctly, is that you would usually use GTM to hold all your other property tags (GA4, Google Ads etc) and that the benefit to this is that you don't need to install multiple individual ID tags and that config options can be shared across tags and that you can add initial functionality/tracking beyond the automated default options in GA4(like tracking email link clicks).\n\nMy main confusion is about how do I take the existing tags and migrate them over to GTM without breaking anything as I've read in a few places that I might need to completely redo my existing tag setup.\n\nSorry for seeming a bit lost, I've tried figuring it out myself but the Google documentation has left me a bit confused about similar sounding terms. I've just started a junior digital marketing role and it's my first time trying to use GTM.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l3u020/migrating_to_gtm_with_existing_ga4_and_google_ads/",
        "num_comments": 11,
        "comments": [
            {
                "body": "What are you hoping to get out of GTM? If you're not planning on adding more tags, events, and so on, it's ok to leave your existing setup if it's working.\n\nIf you want to move over to GTM, you have to deploy your GTM script, recreate your existing setup in GTM via tags and triggers, consent mode settings, etc, and finally remove the GA4 script from your website. You'll have to do some reading to figure out how everything should be configured to work correctly, but there are lots of free resources out there like Analytics Mania.\n\n>if tags should be merged\n\nGTM can't be merged with other tags, because it's a tag manager/container. It sounds like you've got GA4 and Google Ads already merged and it's ok to leave them like that. If you migrate them to GTM, you'd have 1 Google tag for both (to reflect that they're merged) instead of 2 Google tags (1 for each; that's necessary for people who have separate tags for GA4 and Google Ads, and thus need separate tags in GTM as well).\n\n>you don't need to install multiple individual ID tags and that config options can be shared across tags\n\nThis depends not on GTM, but on your current tag structure (see above). In your case that would be 1 tag (more tags if you decide to add event tracking, conversion tracking, etc in the future). Config options can be set up from the Google Tag settings outside of GTM; you can also set them in GTM but it's not necessary. And the config sharing options are useful for more complex GTM setups, which is not the case yet for you.\n\nIf you decide to migrate, be very very careful about your cookie consent and consent mode setup, refer to the official documentation of the tool you're using.",
                "author": "Etianen7",
                "score": 3
            },
            {
                "body": "So there's no cost to adding GTM, and it won't mess with anything that is already working on your site.  You have to add the configuration tag for ga4 if you want to do ga4 custom event tracking through GTM, but you can disable it from counting default events like page views and just leave your original 'hardcoded' ga4 tag.  You can then use GTM for the custom events you want while keeping your original config.  The only cost is complexity and confusion for anyone else that might need to administer the site in the future.  \n\nNot recommended, of course of course BUT absolutely will work.  The lazy way is valid here.",
                "author": "teccy366",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You're currently tracking GA4 and Google Ads directly on your website using the GA4 Measurement ID tag. But now that you're thinking of using Google Tag Manager (GTM), it’s a smart move — GTM lets you manage all your tracking tags from one place and makes it easier to set up advanced tracking later (like button clicks, email clicks, form submissions, etc.).",
                "author": "Shot-Bumblebee-1914",
                "score": 1
            },
            {
                "body": "Serach for gtag vs tag manager and read documentation.",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": ">What are you hoping to get out of GTM? \n\nThe ability to get more granular events & conversion tracking/reporting, currently we're not tracking things like email link clicks and phone call tracking was set up in the days of UA as far as I know and doesn't seem to be working anymore.  \n  \nWith the current setup I'm limited to picking from lead form submission and phone calls as conversion options in Google Ads but I'd like the option for more if possible and I'm assuming  (maybe incorrectly) that a GTM setup might allow this, as some of the conversion/event tracking for phone calls seem to be inactive according to Google Ads.\n\nThis is what my [current setup](https://imgur.com/a/81JMKiL) looks like with the GA4 ID tag code snippet installed on the site, the site's built on Wordpress and we use the Complianz plugin to handle cookies/consent currently.\n\nBased on what you've said I'm assuming that I'll have to redo all the consent settings and any additional tags/triggers that have been setup historically as from the sound of things it sounds like using GTM would be a more 'future proofed' setup?",
                "author": "LateReadingThis",
                "score": 1
            },
            {
                "body": "Thanks for the idea, didn't even think that this could be an option. I'm not opposed to doing things the 'lazy' way but would there be any issues with how GTM does default events vs GA, like how it handles attribution for example?",
                "author": "LateReadingThis",
                "score": 1
            },
            {
                "body": ">was set up in the days of UA as far as I know and doesn't seem to be working anymore\n\nYes, UA was sunset a while ago and that's why it's not working anymore.\n\n>The ability to get more granular events & conversion tracking/reporting,\n\nYes, you can do that with GTM.\n\nFrom the screenshot it doesn't look like your Google tag has Google Ads listed as a destination, perhaps you have 2 separate Google Tags?",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "I think I'm wrong about this actually.  I was assuming you could just add the GA4 config tag to GTM with no trigger and then make custom events that point to it, but on testing the events won't actually send from GTM to GA4 unless the config tag fires first.  \n\nWhat I think you CAN do is get the measurement ID (G-xxxxxxxxx) from your existing GA4 then create your custom events in GTM and point to this ID when prompted.  It will warn you that it can't detect that ID in the container but I think the event will work when fired as the 'hardcoded' GA4 tag will already have loaded.\n\nThis would be easy and risk free to test with GTM and preview mode.",
                "author": "teccy366",
                "score": 1
            },
            {
                "body": ">From the screenshot it doesn't look like your Google tag has Google Ads listed as a destination, perhaps you have 2 separate Google Tags?\n\nI don't know if [this](https://imgur.com/a/U9Qvbwb) will clarify anything but it looks like the tags for GA4 and Google Ads only have themselves as destinations. I'm not sure if this should be the case or if I should look to join them together somehow before I look to take them into GTM.\n\nAlso thanks for the advice so far, are there any other places I should look up if I'm just beginning with it all, other than Analytics Mania?",
                "author": "LateReadingThis",
                "score": 1
            },
            {
                "body": "If you have 2 separate Google tags, you can just add them as 2 Google tags in GTM, there's no need to merge them at this point.\n\n>are there any other places I should look up if I'm just beginning with it all\n\nThere are many places, but being able to search for things and compare sources is a good skill to develop in the realm of tracking and analytics.",
                "author": "Etianen7",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749930119.0,
        "title": "Server to server side tracking",
        "author": "Programer_Marktech",
        "id": "1lbh81w",
        "selftext": "Hi all,\n\nWe’re running a fully self-hosted server-side GTM (sGTM) setup for our eCommerce business — no Stape, no managed services. It’s deployed via Docker, behind Nginx (with OpenResty/Lua for geo enrichment), and connected to both browser-side GTM and backend events (e.g., purchase confirmations, server-generated events).\n\nI’m mostly interested in hearing from others who are running their own in-house sGTM infrastructure and dealing with real-world tracking challenges — especially:\n\nAdblockers / Privacy Browsers / Tracking Protection:\nWhat kind of issues have you seen in production (e.g., dropped hits, missing data, failed cookie writes)?\nHow do you monitor the reliability of client → server → sGTM → GA4 flows?\n\nAttribution gaps:\nHave you implemented any form of server-side user identity mapping, or started storing your own version of event logs or session data to reduce reliance on GA4 for attribution?\n\nCustom DB tracking:\nDid you build your own database to store events or user journey snapshots? If yes — what was the trigger (e.g., poor reliability, consent enforcement, audit reasons)?\nHow do you correlate data from multiple sources (frontend, backend, ads)?\n\nConsent Mode enforcement:\nAre you handling consent at the edge (e.g., Nginx + geo + cookie inspection) or passing everything through the browser layer?\n\n\nI’ve read most of the guides and docs, but I’m more interested in hearing what breaks in practice, and what people had to build themselves to get tracking truly reliable.\n\nIf you’ve been through this — even partially — I’d really appreciate hearing your experience. Mistakes, lessons, regrets, anything.\n\nI'm also happy to share details about our setup or lessons we've learned so far — hoping this can help others going down the same path.",
        "score": 10,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lbh81w/server_to_server_side_tracking/",
        "num_comments": 9,
        "comments": [
            {
                "body": "I come at this from the privacy/compliance side, not infra. One thing I’ve seen bite teams is when adblockers or privacy browsers strip consent signals, which can lead to data being logged without valid consent.   \n  \nThat’s less a technical reliability issue and more a legal one — regulators increasingly want to see not just ‘what data did you capture,’ but ‘under what consent state.’   \n  \nCurious if anyone here is storing consent states alongside events in their own DB for auditability? That seems to be a growing best practice",
                "author": "Far_War_9778",
                "score": 2
            },
            {
                "body": "Good point — I haven’t really seen many teams actually storing consent state alongside events, but it makes a lot of sense. In our setup, if no consent exists we don’t store any personal data (or anything that could point to an individual), but when consent is present we generate a snapshot ID on the edge and tie it to the event in sGTM/DB. This way each event can be traced back to its consent state, which feels like a best practice going forward.",
                "author": "Programer_Marktech",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How are u hosting the Gtm? Cloud Run?",
                "author": "South_Area9791",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Nope, it's too expensive. It's on our servers.",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "What is great? 😀",
                "author": "Programer_Marktech",
                "score": 1
            },
            {
                "body": "Hello to you.\n\nDo you have any advice on this topic, or do you just want to say hello?",
                "author": "Programer_Marktech",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746291497.0,
        "title": "analytics_storage stays denied with new cookie banner?",
        "author": "LightTheFerkUp",
        "id": "1kdxl7q",
        "selftext": "Hi all, not quite sure where to look for this solution.\n\n\n\nI was using a cookiebot banner from Usercentrics for a year with no issue, but switched it for the same, but on another account with Usercentrics. Since then, no more traffic is being sent to Google Analytics, and analytics\\_storage stays denied after consenting on the banner.\n\n\n\nAll other aspects, Google ads etc, are fine, but for some reason something is blocking the analytics\\_storage cookie?\n\n\n\nAnyone experienced something similar?",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kdxl7q/analytics_storage_stays_denied_with_new_cookie/",
        "num_comments": 14,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This was my annoyance with that CMP. If it has scanned the site and not found any analytics cookies, it provides no way to consent to analytics_storage.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Try rescan. If that doesn't work, create a new dummy marketing cookie in your Cookie it account.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Could you share a container preview link? It’s easier to see what’s going on.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Feel free to give Consent Studio a go. Might as well save you from the pricing drama…",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I think your new cookie banner is blocking the data being sent to GA4. Go through the consent settings inside the cookie bot once again. Turn on the necessary cookies (analytics cookies) this could solve ur issue ig",
                "author": "Main-ITops77",
                "score": 1
            },
            {
                "body": "u/LightTheFerkUp you're definitely not alone - I ran into the same issue with a client recently... we ended up switching to [Cooki.fi](https://www.cooki.fi/), which is much simpler and more affordable... and I haven't experienced any issues whatsoever with things like Consent Mode v2 or data layer pushes",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "I am experiencing the exact same issue with a new CMP on Usercentrics. analytics_storage remains denied despite granting consent on the banner. I have reached out to support and am now awaiting their reply.",
                "author": "Greedy-Towel152",
                "score": 1
            },
            {
                "body": "Do you have a link to your website? Also, sometimes it wouldn't hurt to give another CMP a go too, like Axeptio, OneTrust, Consent Studio or others.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I fixed this by ticking \"Category Consent\" under \"Configuration > Legal Specifications\"  This takes away ability for users to disable individual services but was the only way I could fix it... Users can still control cookie categories.",
                "author": "Karlos_shift",
                "score": 1
            },
            {
                "body": "It's weird because I installed it on two other clients websites the exact same way and it does find it...",
                "author": "LightTheFerkUp",
                "score": 1
            },
            {
                "body": "I fixed this by moving all _ga cookies to the 'Google Analytics 4' DPS from their database. This DPS seems to fire the correct signals for analytics_storage consent.",
                "author": "Greedy-Towel152",
                "score": 1
            },
            {
                "body": "Perhaps engage with Usercentrics support. I'd be interested to find out how responsive and good their support is.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Can you help me set it up please ? It sounds correct but I don't know the steps you take to fix the issue",
                "author": "Escrobaria1997",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746783103.0,
        "title": "All cookies denied with Usercentrics",
        "author": "Chateausi",
        "id": "1kiecr6",
        "selftext": "I’ve added the usercentrics cookiebanner with GTM and it’s showing on the website so it seems to be working. The problem is when I accept all cookies in the preview mode, I get a cookie consent update in GTM showing all cookies as ‘denied’. This is causing problems for tags that need cookie consent. \n\nAnyone else who experienced this and knows a solution? \n\nMany thanks!",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kiecr6/all_cookies_denied_with_usercentrics/",
        "num_comments": 13,
        "comments": [
            {
                "body": "You can use Tag Assistant to troubleshoot if Consent Mode V2 works correctly. If Consent Mode V2 is integrated correctly, the consent status must be \\`denied\\`  on page load until you click I Agree, after that the consent status is updated to \\`accepted\\`. The \\_ga cookie should appear in Dev Tools after you provide consent.",
                "author": "termsfeed",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you using their official google consent mode template for GTM?",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "Have you added any data processing services to your Usercentrics account yet? Are they categorised correctly?\n\nI think they only update the specific consent categories that you've applied to your DPS list. \n\nI've had a similar issue where I added a LinkedIn remarketing tag but it didn't classify it correctly. Accepting marketing cookies only granted analytics\\_storage consent when it should've also granted ad\\_storage consent.  The GTM events that relied on ad\\_storage consent therefore weren't firing at all.",
                "author": "alex_webdev",
                "score": 1
            },
            {
                "body": "What do you think about their pricing? Feel free to check out our more affordable alternative — Consent Studio!",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "I'm having the same problem . First time doing something like this. It's the worst timing cuase i think they changed something recenetly. all the yt videos don't match the current ux. Something is wrong on their side :(",
                "author": "Natural-Book6847",
                "score": 1
            },
            {
                "body": "Yes, I am!",
                "author": "Chateausi",
                "score": 1
            },
            {
                "body": "Okay and what data processing services should be added?",
                "author": "Chateausi",
                "score": 1
            },
            {
                "body": "They changed the interface about 1 or 2 months ago so indeed there is barely anything to find online. I just switched to Cookiescript and it works flawlessly.",
                "author": "Chateausi",
                "score": 1
            },
            {
                "body": "Check if the site is loading multiple usercentrics scripts.",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "Add a bunch of DPS that comes under the \"Marketing\" category that requires \"Analytics\" or \"Advertising\" just to see if it works. You can create you own custom one if you need to like this [https://help.leadinfo.com/en/how-to-set-up-leadinfo-in-usercentrics](https://help.leadinfo.com/en/how-to-set-up-leadinfo-in-usercentrics)",
                "author": "alex_webdev",
                "score": 1
            },
            {
                "body": "u/Chateausi sounds like something might be misconfigured — but honestly, issues like this happen far too often, and it’s not always your fault. That’s exactly why we built [Cooki.fi](https://www.cooki.fi) — a lightweight, fairly priced alternative to the bloated CMPs out there. It’s currently free for early adopters, so you might want to give it a try",
                "author": "puk789",
                "score": -2
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747673620.0,
        "title": "Missing transactions in GA4/Google vs Magento API",
        "author": "FigSpecific6210",
        "id": "1kqgpof",
        "selftext": "I setup my clients in GTM for tracking all the standard stuff.  I've noticed lately though, that there are \\*missing\\* purchase transactions in GA4, vs what is pulled from the Magento store API.  I'm currently firing the transaction (conversion) on the \"purchase\" event.  I've been bugging their devs, and come to find out they are using lazy loading for all JS.  \n\nWould it be prudent to move the \"conversions\" to the success page, rather than the purchase event?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kqgpof/missing_transactions_in_ga4google_vs_magento_api/",
        "num_comments": 12,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you using one step checkout?",
                "author": "OliverMachinery",
                "score": 1
            },
            {
                "body": "Yes, I believe so.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "So, your solution is self-promotion?  Classy.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Did you get your issue solved? \n\nIm struggling getting our conversion events to populate, specifically there is no data layer on the checkout pages. We have one step enabled, the gta module were using (Anowave) has a separate module for one step checkout that is supposed to populate a data layer on the one step pages that include the success page I believe.",
                "author": "OliverMachinery",
                "score": 1
            },
            {
                "body": "It is recommended to fire the purchase event (along with conversions) on the success page rather checkout to avoid any delayed JS and other \"obstacles\", but if it doesn't help and the person with this issue finds out the issue was actually with the consent or adblockers, the solution would be the server side tracking or the simple alternative - Google Tag Gateway. You can set it up manually without any third party tools. We did suggest that. Our solution just simplifies the setup to a few clicks.",
                "author": "Magefan_User",
                "score": 1
            },
            {
                "body": "None of our Magento clients are having datalayer issues.  We pull the orders via API for enhanced conversions, and that's working 100%, not missing any orders.  I have a suspicion that we are missing on the order of maybe 30% of purchase conversions (In GTM) due to the lazy loading of the JS.... and we always strive for a good overlap.\n\nI like to add a secondary purchase conversion using GA4 as a source.  It becomes pretty obvious.\n\nA solution is in the works though, I'll need to talk it over with my boss today.  I need to test on a client with sufficiently high hourly conversion rates w/o worrying about tanking their stats.",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "What about consent? Could the reason simply be: consent was denied and therefore missing event on ga4?",
                "author": "Interesting-Plan-618",
                "score": 0
            },
            {
                "body": "Firing the purchase even on the success page is actually the best practice, since that's the best way to know if someone actually finalised the payment. Besides, as someone out here mentioned, it could just be the consent issue or someone using adblockers to block your scripts, which could only happen if you use web container only. \n\n  \nSo our suggestion would be to switch to server-side tracking using Magefan GTM Extension or the newly introduced Google Tag Gateway feature for your web container, which offers similar results to server-side. But without all the \"trouble\" of setting up a server container.",
                "author": "Magefan_User",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749726726.0,
        "title": "Duplicate events (view_item, add_to_cart) with GTM4WP & Complianz",
        "author": "jeremyfisher2",
        "id": "1l9jrpn",
        "selftext": "Hi all, I'm setting up Tag Manager & GA4 & later Ads, the setup for my Woocommerce store is this:\n\n* Complianz paid version, where I have my GTM-xxxxx set. Also Consent Mode V2 enabled.\n* GTM4WP installed, where I also have GTM-xxxxx and Container code OFF, because it is set in Complianz. Enhanced e-commerce is set on.\n* In Tag Manager I have these tags:\n   * [Complianz.io](http://Complianz.io) \\- The Privacy Suite for Wordpress (From the community list as instructed by complianz docs)\n   * GA4 Page view (Type: Google-tag, Trigger: Initialization - All pages)\n   * Imported Ecommerce events by Loves Data\n\nI was testing with Tag Assistant and noticed duplicate events, for example two *add\\_to\\_cart*'s and they differ slightly, first is\n\n>*dataLayer.push({*  \n*event: \"add\\_to\\_cart\"*  \n*eventModel: {....*\n\nand the latter is\n\n>*dataLayer.push({*  \n*event: \"add\\_to\\_cart\",*  \n*ecommerce: {....*\n\nI'm trying to use chatgpt to help out, it said that the *ecommerce* is correct and eventModel is old and coming from somewhere else than Complianz/GTM4WP, but I don't have any other plugins or tags in php files that I know of... \n\nThe problem: I'm automatically assuming these duplicates are bad, but is it so? Can I do something about them? Thanks! :)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l9jrpn/duplicate_events_view_item_add_to_cart_with/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "1. To confirm if one of the data layer pushes is coming from elsewhere, try disabling GTM4WP and see what data layer pushes still happen.\n2. Pushing data to both ecommerce and eventModel doesn't necessarily result in duplicates. For example, the GTM tag that will send data to GA or other providers hooks into events such as view_item and typically sends data once from ecommerce or from eventModel as a fallback.",
                "author": "whitepanda07",
                "score": 1
            },
            {
                "body": "Yes, the \"ecommerce\" is the correct version of the code, \"eventModel\" is a type I'm seeing for the first time. Both GA4 and UA use the \"ecommerce\" array, although there are some differences in the code for each version. Something is sending the second dataLayer push. Try switching things off 1 by 1 (e.g on a staging copy of the site) to find out what pushes it.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "After disabling GTM4WP the \"ecommerce\" events stopped, and the \"eventModel\" remained :)\n\nI was not yet able to test with disabling Complianz and enabling GTM4WP Container code, because tag assistant said that no container found at all... But I guess Complianz is pushing something?",
                "author": "jeremyfisher2",
                "score": 1
            },
            {
                "body": "Then it's possible, yes. Double-check the GTM4WP settings to ensure it's initializing the container, then try this:\n\n1. disable Complianz & enable GTM4WP\n2. open a product page and do an add to cart\n3. open the dev console in the browser (right click > Inspect > Console), then type \\`dataLayer\\`\n\nIf \\`dataLayer\\` does not exist, then GTM4WP is not initializing the container (though it should). If it exists, check there if it contains multiple \\`add\\_to\\_cart\\` pushes. \n\nWe can also jump on a quick call if it helps.",
                "author": "whitepanda07",
                "score": 1
            },
            {
                "body": "It seems I got rid of the \"eventModel\" duplicates :) When I disabled the Complianz plugin, Tag Assistant didn't find the GTM container at all even though I set it ON in gtm4wp.\n\nBut, what I also did was play around with complianz settings by just disabling the container (Do you want Complianz to add Google Tag Manager to your website -> No), then switching back. I don't know if this is what helped but I don't see the duplicates anymore. Works for me! Thanks for your input :)",
                "author": "jeremyfisher2",
                "score": 1
            },
            {
                "body": "Great, happy to hear it!",
                "author": "whitepanda07",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743043511.0,
        "title": "GA4 not receiving woocommerce events but GTM is firing them just fine",
        "author": "Somechords77",
        "id": "1jku0ma",
        "selftext": "Hello People,\n\n\nI’m currently setting up GA4 + GTM for a WooCommerce site. I’ve configured events like add_to_cart, begin_checkout, and purchase via GTM — and in GTM Preview Mode, everything looks great:\n\n✅ All GA4 tags are firing\n✅ Data Layer contains clean ecommerce object (with item IDs, value, etc.)\n✅ Event names are correctly set as: add_to_cart, begin_checkout, purchase\n\nBut... in GA4 DebugView, I only see these basic events:\n\npage_view\n\nuser_engagement\n\nregistration_completed\n\nform_submit\n\ncourse_pageview\n\n(etc.)\n\n❌ Nothing related to WooCommerce is showing up.\n❌ purchase doesn’t appear\n❌ GA4 event count for purchase = 0\n❌ Even after renaming tags to standard GA4 names (purchase, add_to_cart)\n\nWhat I’ve tried so far:\nEnabled \"Send Ecommerce Data\" in GA4 tags\n\nChecked dataLayer — confirmed clean ecommerce structure for all events\n\nSet Measurement ID correctly\n\nTried adding consent_update manually via a cookie tag\n\nWordPress GTM plugin is configured to auto-grant all consent flags (ad_storage, analytics_storage, etc.)\n\nGA4 DebugView shows other custom events from GTM — just not Woo ones 🤷‍♂️\n\nSo the problem seems to be:\nGTM is pushing the data ✅\nGA4 DebugView is NOT picking it up ❌\nAnd it’s only the WooCommerce-related events that are affected.\n\nAnyone else run into this issue? Is this a Consent Mode hiccup? WooCommerce block? Something missing in GA4 settings?\n\nAny help would be super appreciated 🙏",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jku0ma/ga4_not_receiving_woocommerce_events_but_gtm_is/",
        "num_comments": 18,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check the real-time reports. Are the ecommerce events missing from there too?",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "If GTM is firing WooCommerce events correctly but GA4 isn't picking them up in DebugView, it might be worth double-checking a few things:  \n  \nConsent Mode – Even if GTM is firing tags, GA4 might still suppress data if consent flags aren’t fully granted before the events fire. Try firing a consent\\_update before your ecommerce events.  \n  \nEvent Parameter Structure – GA4 can sometimes ignore events if the items array isn’t exactly as expected. Make sure each item in the array includes item\\_id or item\\_name at minimum.  \n  \nDuplicate GA Tags – If GA4 is loaded both via your plugin and GTM, it can cause unpredictable behavior. Stick with GTM only for cleaner results.  \n  \nThat said, if you want an easier way to capture all Woo events (purchase, add\\_to\\_cart, etc.) without worrying about GA4’s picky behavior or consent handling, I’d highly recommend trying Qwestify. It auto-captures all ecommerce events (even in WooCommerce), works with cookie-less tracking, and needs no extra setup. Might save you from all this debugging madness!",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "If GTM is firing WooCommerce events but GA4 isn’t showing them, it’s likely a consent or data structure issue. Make sure consent\\_update fires before any GA4 tags, and your items array includes item\\_id or item\\_name. Also, avoid loading GA4 both via plugin and GTM — stick to GTM for consistency.  \n  \nFor a simpler and more reliable setup, try Qwestify it auto-tracks WooCommerce events like purchases, ATC, and more without manual tagging or consent headaches. It’s accurate, cookie-less, and works out of the box.",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "Let's refocus on the GTM Preview mode.\n\nWhen you said it looks great, did you check BOTH tag  \"views\"...meaning the GTM tag data AND the GA4 data?\n\nYou select between those by clicking the relevant tag id at the top of the screen.\n\nThis is absolutely critical.  Its technically almost impossible to show GA4 data here but nothing in GA4 itself. Well, anything is possible....\n\nIn my opinion, GA4's debug mode is useless, and GTM's browser extensions are useless.\n\nThere is one test that reveals all...GTM's Preview mode.",
                "author": "Adept-Requirement321",
                "score": 1
            },
            {
                "body": "You can use this plugin if purchase event not firing\n\nhttps://youtu.be/vdkAIEcCt9Y?si=6MDAOo5knKCLLnt8",
                "author": "webhasan89",
                "score": 1
            },
            {
                "body": "Yes. Every thing else is working. Page view, registration_completed. But no woocommerce events.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Yes I did checked those . Firstly I made sure that I send the ecommerce data in tags and thy are ‘true’. Then I created variables manually. \n\n\nOne thing I need help is earlier I didn’t created variables and just used tags and key events . Now multiple purchases are firing. How to make sure to remove the extra ones.???\n\nBtw thanks for the extension info. I removed it.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Install the Analytics Debugger extension for Chrome by David Valleho. It checks the outgoing network logs from the browser. Do you see ecommerce events there?",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "Yes I have installed this and no I am not able to see  ecommerce events.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Very interesting. Have you checked the console for error logs? Maybe the network tab shows requests in red color? I am trying to narrow down the source of the problem.",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "Analytics Debugger extension for Chrome by David Valleho:\n\nThis extension is likely malware. It was non-functional when J added it, and none of the developer links were valud.\n\nMost concerning is that the extension has permission to read your keystrokes.  That means usernames and passwords, too.  This extension has no business doing that.  \n\nUse any other inspector.",
                "author": "Adept-Requirement321",
                "score": 1
            },
            {
                "body": "Console as in inspect>console?",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Great but thank you It was resolved. Someone here suggested that disconnect from google site and ecomm events started coming .",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Wow thank you.",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Is it ok if I DM you?",
                "author": "Somechords77",
                "score": 1
            },
            {
                "body": "Sure!",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "Sent Hi check please",
                "author": "Somechords77",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752016976.0,
        "title": "Form submissions not showing in Google Ads, but tag fires fine?",
        "author": "Infamous_Solid_3465",
        "id": "1lv3l22",
        "selftext": "I started running Google Ads and we’re definitely getting more leads through our contact form.\n\nBut in Google Ads, the form submission conversion isn’t increasing at all. Could this be due to cookie consent? Like if people don’t accept cookies, does the submit event not get sent to Google Ads? Or is it a conversion attribution issue? \n\nI checked in Google Tag Manager, and the tag does seem to fire correctly. \n\nWe also track other conversions as secondary goals (like page views, time on page), and those are being counted normally in Ads. At least the count is going up. \n\nAny tips on how to troubleshoot this?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1lv3l22/form_submissions_not_showing_in_google_ads_but/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Sometimes there's a 16-24 hour delay before Google ads will record a lead. How long has it been for you?",
                "author": "mud4231",
                "score": 1
            },
            {
                "body": "Yeah, I’m talking about a month. We usually get a few leads per month, but once the search campaign started, we are getting around one request per day, which is great for our niche. The first two were tracked in Google Ads, but after that, nothing else has been recorded there.\n\nI’m not running any other marketing activities that could explain the increase, so it feels like the campaign is working. But from a tracking perspective, it looks like we’re spending money and getting zero results. I’m really confused. Because technically things seems to be set up and working correctly.",
                "author": "Infamous_Solid_3465",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739191533.0,
        "title": "GTM in Shopify checkout",
        "author": "FullSpare1352",
        "id": "1im5a7b",
        "selftext": "Hey,\n\nAnyone using stape.io? \n\nTrying to figure out how to set up checkout conversion for google ads/GA4 with stape.io.\n\nDo you use set up analytics.subscribe() for checkout events, or do you go the full analytics route listed here \n\nhttps://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels/gtm-tutorial\n\nStaple is getting all the info in its data layer, but as it doesn’t have the conversion linker it doesn’t seem to sync all. \n\n\n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1im5a7b/gtm_in_shopify_checkout/",
        "num_comments": 22,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I have a similar problem with Shopify checkout. \n\nFor me, the event fires correctly, but the attribution in GA4 seems to be incorrect. Most purchases fall under ‘Unassigned,’ while all other events appear to be attributed correctly—it’s only the purchase event that has issues.",
                "author": "Traditional_News_286",
                "score": 1
            },
            {
                "body": "analytics.subscribe() is the way to go with [stape.io](http://stape.io) for syncing checkout events to GA4. Just double-check your data layer and GTM setup. If it’s still not working, maybe look into Shopify Plus or see if there’s an issue with the data getting to your server.",
                "author": "HairyAd9106",
                "score": 1
            },
            {
                "body": "Hey,\n\nHonestly I’ve been scratching my head on it. \n\nDatalayer events are there and trigger is good (from stale custom script), just can’t seem to get it over to gtm server so trying to figure out why and how to resolve.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Mainly I am struggling to catch the gtm datalayer event to send to GA4/google ads.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Yeah I thought it might be, a little easier to diagnose what’s going on. \n\nWould you push a fetch type payload or load the gtm script and then analytics.subscribe to it?",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Yeah, we are using the shopify script from stape that loads GTM into the web container (customer pixels), so we can see the events firing in the console (under custom events)",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Sounds like the same kind of issue.\n\nI am actually considering migrating to Shopify consent, instead of gtm consent. I think my consent call is failing (as the custom pixel can’t access cookies where it is stored).",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Thanks. \n\nAfter about two days of digging I think the issue is squarely with google consent. Effectively the stape script doesn’t look to be able to deal with  iubenda constant not loading in sandbox... \n\nSo really the options are: \n1. Manually send each checkout event (not impossible but just felt backwards as we would be loading the tag manager url at the point when you probably want first party) \n2. Migrate from iubenda to another CMP that allows Shopify Privacy API and then adjust the stape Shopify app to use Shopifys consent. \n\nAfter about a day or reading the dev docs, felt easier to put a new CMP on play (end up being the same), and is native with Shopify consent.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Do agree that if analytics.subscribe() is most likely the best route. I would also (and still have) a secondary purchase event directly to google ads just to sanity check the data.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "You can’t. You can only do it if you’re on Shopify Plus",
                "author": "sAnakin13",
                "score": 1
            },
            {
                "body": "Hit me up over LinkedIn will help you get this done [https://www.linkedin.com/in/jaychhatriya/](https://www.linkedin.com/in/jaychhatriya/)",
                "author": "Jaychhatriya05",
                "score": 1
            },
            {
                "body": "I am on plus",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "If you’re on plus why not pay someone to get the job done? You’re probably losing a lot more each day bu not having it setup",
                "author": "sAnakin13",
                "score": 1
            },
            {
                "body": "It’s not an issue on our current market (AU/NZ) but one we are expanding into shortly. \n\nGet what you’re saying, if it was a prod problem it would def outsourced.",
                "author": "FullSpare1352",
                "score": 1
            },
            {
                "body": "Oh and I like to tinker.",
                "author": "FullSpare1352",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748501067.0,
        "title": "Re-evaluated Ketch after 2 years... oh boy",
        "author": "DigitalStefan",
        "id": "1ky40mi",
        "selftext": "I was recently invited to evaluate Ketch, which positions itself as a competitor to OneTrust as a CMP.\n\nThe tl;dr is it is still not in a state where I would recommend it to a client. It's not that it doesn't work or it doesn't have some good features, it is because it still has a poor GTM integration.\n\nThe premise is actually good. You have the option (and it seems like a default \"do it this way\") to directly link a GTM container to the Ketch service and it will automatically manage your tags for consent.\n\nWhere it falls down is when you want to do the \"advanced\" GTM implementation, because the guidance for dealing with 3rd-party tags (Facebook etc) is to use a trigger group based on page view and a specific data layer event emitted by Ketch.\n\nWhy a trigger group? That's because Ketch haven't solved the problem that practically every other CMP has solved, which is to provide a data layer event that can be used as a direct replacement for an All Pages trigger, but it fires after consent is established and also after Google Consent Mode has updated its state. Effectively, Ketch is advising to use a non-optimal and fairly old fashioned method to control consent for 3rd-party tags.\n\nIf you've used GTM for any length of time, you have probably used a trigger group. If you've tried to use a trigger group for anything interesting, you'll have discovered that it has a major limitation of a trigger group never being re-evaluated, meaning if any part of the group fails to fire you have zero opportunity for the group to fire until the next page load, no matter what events occur. Trigger groups are not an \"and\" condiion for triggers!\n\nThe other major failing is there is no native tag template for the main Ketch script. There's a required tag template to manage Google Consent Mode integration... there's a version in the community gallery, but it's not the same version as the one they want you to download and then import.\n\nYou can do a Custom HTML tag with the Ketch script, but this is not great in terms of timing.\n\nSo... sadly, the recommendations are still CookieBot, CookieYes, Enzuzo, UserCentrics and OneTrust, depending on features and budget.",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ky40mi/reevaluated_ketch_after_2_years_oh_boy/",
        "num_comments": 9,
        "comments": [
            {
                "body": "That’s an interesting idea. \n\nI know a GTM template can use `addConsentListener` but I didn’t think there was a way to do that from outside the ecosystem.\n\nI’m struggling to find anything bout it. Do you have any links please?\n\nEdit: or maybe you meant as a callback from the OneTrust consent update? I believe they do have event listeners you can bind.",
                "author": "iamfuzzydunlop",
                "score": 2
            },
            {
                "body": "Yes. I have full access to change the site push code. That’s no problem. I’m end to end here, so can make any changes necessary to try to get this stuff easier to maintain and understand.",
                "author": "iamfuzzydunlop",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What approach are you using for OneTrust? My experience is that their events tend to be late enough that I still need to use a trigger group for something like a purchase to ensure that the consent update has arrived.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "It depends on how you are recording a purchase event. If you’re doing it based on a page view, the easy answer is to use the OneTrustGroupsUodated event, which is guaranteed to be immediately after consent is updated (including Google Consent Mode).\n\nIf you have a plugin or a hand coded “purchase” event, the plugin providing that event should be smart enough to understand consent or if you have your own purchase event from your dev resource, they should make sure the event fires at the right time so you don’t have to worry about it.\n\nBut… if you really have no control over the timing, your example is actually one that fits the use case of a trigger group so long as one of the triggers in the group is guaranteed to fire late enough that consent is established, but early enough that you’re not losing the data due to user quickly navigating away from the page.\n\nA trigger group can work in that instance because you don’t want to measure more than one event on that page.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I have e-commerce events that are pushed into the datalayer in the source of the page. \n\nWhile it’s possible to delay them, you can’t reliably be sure they are going to come after OneTrustGroupsUpdated because the OneTrust loading is asynchronous. \n\nI’ve always felt that the real solution is for Google consent mode to be cleverer. If it held back the tags that don’t meet consent until a consent update call, everything would be trivial.\n\nI’d really love to lose the trigger groups as they cause so much pain when trying to get event deduplication working for server side.",
                "author": "iamfuzzydunlop",
                "score": 1
            },
            {
                "body": "If you need to have a data layer event fire after a consent update, you can run the code for the DL push as a callback from the update.\n\nThis is actually the one thing I haven’t done myself, so I’m going to have a crack it it over the next week and write up a how to.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "This would be an actual amend to the on-site code responsible for the DL event push.\n\nThis is where that kind of thing *should* be.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I had to poke around in the OneTrust API today and rediscovered the facility to put code inside an OptanonWrapper() function on site.\n\nI need to test it (which may take a while... I have a busy few days ahead), but in theory placing code to generate your purchase event data layer push inside OptanonWrapper() should mean that code runs after consent is established.\n\nI'm sure there are other ways to achieve it, but that seems the more straightforward.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747173010.0,
        "title": "2 wordpress sites, exact same install, tags, & triggers; only works on 1 site - help please",
        "author": "Idontlikethenamegame",
        "id": "1klyimo",
        "selftext": "UPDATED BELOW\n\nHello- as the title suggests. \n\nDetails below, but I am trying to track just simple things: clicking on tel: and clicking on an outbound link. Healthcare field. I set it up the same way on both sites on the same date, but it's only working on one. GTM preview mode shows success on both sites. Details:\n\n- Wordpress sites\n- GTM is installed via the WP plugin called \"Site Kit\"\n- tag is GA4 Event\n- trigger is clicks - just links \"click URL starts with tel:\"\n- For both sites, it appears GA4 is installed within the Site Kit GA4 option AS WELL AS a container inside of GTM. It's the same on both. \n\nThe ONLY difference I can see is that in Site Kit inside WP, in the module where GTM gets installed, on the site where it's not working, at the bottom there is a message that says \"Placing two tags at the same time is not recommended.\" and I'm not sure what that means. Does that mean GTM is stalled twice? Is GA4 installed twice?\n\nI installed both of these on Friday, May 9. Again, verified that both were firing properly via tag manager preview. Didn't look all weekend. On Monday I verified the event was populating in GA4 on one site but not the other.  \n\nI'm stumped. Please help?\n\nUPDATE: So it's looking like the consent issues here are restricted on GA4 and it's not necessarily an issue with Site Kit. I had hoped to keep the tag as a GA4 event so I could track on all channels, but ultimately decided to create the tag as a Ads conversion and it's now recording just fine. Not ideal but better than nothing. Now that I'm at least getting that data to come in, I'll be more comfortable working with their team to find other solutions to track across all channels over time. \n\nMeanwhile, if I could just figure out why my Google Hosted 'All Conversions' aren't populating..... (see the [SECOND issue](https://www.reddit.com/r/PPC/comments/1kcg4s3/google_ads_location_extension_question_x2/) I lay out here). Thanks for all the assistance on this, y'all.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1klyimo/2_wordpress_sites_exact_same_install_tags/",
        "num_comments": 10,
        "comments": [
            {
                "body": "1. Site Kit is crap, you have to get rid of it and install a plugin like “WPcode snippet” I am often annoyed with SiteKit. (Possibly with GTM4WP)\n2. Consent signals can also largely block the reporting of tags. Checks if the consent mode signals are OK ✅",
                "author": "Chemouel_Dgx",
                "score": 2
            },
            {
                "body": "I second.  \nInstall GTM using the GTM4WP plugin—it's the smarter way.",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "thank you so much for taking the time to provide the insight. I'll take some action and report back. Thanks!",
                "author": "Idontlikethenamegame",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Agree with Chemouel, get rid of SiteKit. As for the duplicate tag warning that you are getting, SiteKit probably installed GA4 tracking code as well as the GTM container (which probably contains GA4 tracking already).",
                "author": "blaff3687",
                "score": 1
            },
            {
                "body": "If you're using GTM, remove GA4 from other places and keep all GA4 tags within GTM. This way it's easier to prevent duplication.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "So I've not made any changes as of yet - I wanted to explore the consent signals you've mentioned as that's outside my wheel house. I'm an contractor ads manager who has been granted access to the site with permission to set up Site Kit. I'll need to talk to them before I install any further plugins. \n\n\nMeanwhile, I see they are using PixelYourSite for consent settings and where I see there are some sections on GTM and there is a some development stuff for firing sequence and other various things that are also outside my pay grade. I don't know this plugin at all?\n\nAny insight as to how I might be able to find a solution here? I'd love to get this figured out without needing to ask them for help. Thanks.",
                "author": "Idontlikethenamegame",
                "score": 1
            },
            {
                "body": "In my opinion, you shouldn't fiddle too much with WordPress if you don't know what you're doing. \nPixelYourSite + SiteKit + code snippets is already a lot. And I've seen WordPress crash for less than that. However, you can ask them to list the code plugins they are currently using and why. If everything is not centralized in GTM it quickly becomes a mess. \nManaging consent with PixelYourSite must also be the problem and I didn't even know this plugin did that! Not very academic. It is better to have a CMP (CookieBot, Axeptio, Didomi, etc.) which manages all of this from GTM. \nSo unfortunately I can't help you much more. In general it takes a little audit to go further and really know what to do. \nWordPress can quickly get out of hand! Too many plugins, no data layer, snippets, hard code…etc. \nRemove SiteKit and install GTM4WP instead already.  You will definitely see a difference. In a case like that, we have to move forward one step at a time, I want to say!",
                "author": "Chemouel_Dgx",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746182123.0,
        "title": "Google Ads not showing all conversions tracked on Shopify",
        "author": "DefinatelyNotACat",
        "id": "1kcxpt4",
        "selftext": "Our website domain is not on shopify, just the checkout page (which is shopify). So I ended up using the google & youtube app to track purchases as the primary action in Google Ads, with the GTM purchase setup as secondary (This was recommended as not to be used because it cant track properly on shopify) However, The gtm setup did track the conversion action but not the value. \n\nGoogle shopping app purchase (shopify tracking) on Google Ads has tracked 2 conversions so far. Where as on Shopify theres 3 more conversions back to back after the 2nd conversion but were not recorded by Google Ads. Is there a reason for this? I have set up the pixel code and even used the assistance of tech support from Google for the setup.\n\nIm wondering if having the GTM Purchase action along with google & youtube app is causing miscalculations?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kcxpt4/google_ads_not_showing_all_conversions_tracked_on/",
        "num_comments": 12,
        "comments": [
            {
                "body": "Could it be Ad blockers &/or non consented users? Depending on your user's location, non-consented traffic could be > 60%.",
                "author": "TedTheTopCat",
                "score": 2
            },
            {
                "body": "What is the difference between Addingwell and TAGGRS? I use TAGGRS for Sgtm.",
                "author": "OnlineMarketeerNL",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you want an application that works well with GTM I recommend the one from Addingwell. The data layer is GA4 Ready. If you're on Shopify Plus the app supports Checkout Extensibility.  Then you can uninstall the Google app which is not really the best. \nAddingwell also works if you have server-side tracking, even if it is not hosted by them. \nBy installing the application you just have to enter your GTM container and off you go!",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "Also you should check your consent mode which is sometimes blocking the reporting of data",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "That’s a common and frustrating issue when trying to track conversions across different platforms like your main site and a Shopify checkout.\n\nIt sounds like you’re running into the classic problem of browser-side tracking limitations and conflicts.\n\nThe core reason you're seeing discrepancies is likely due to the inherent unreliability of client-side tracking, especially when using a mix of the Google & YouTube app's tracking and a separate Google Tag Manager (GTM) setup.\n\nThe Google & YouTube app typically uses direct browser tracking (pixels/cookies) that can be easily blocked by ad blockers or privacy settings.\n\nFurthermore, having two separate purchase actions – the Shopify-based one and your GTM-based one – could certainly be causing issues, even if one is set to 'Secondary.' It might lead to one firing but not the other, or one action overriding/confusing the data for the other, especially regarding value, which relies on the e-commerce data layer being consistently present and correctly structured for both setups.\n\nSince your GTM setup tracked the conversion but missed the value, it suggests the GTM-based 'Purchase' Standard Event was triggered, but the e-commerce data layer variables needed for transaction ID and value weren't correctly available or pulled in at that moment.\n\nA more robust and reliable solution for tracking conversions, especially on a Shopify checkout, is to move towards a server-side tracking architecture.\n\nThe better solution is to combine the Google Ads API with your existing Google Tag Manager setup and a service like Stape.io (or a similar server-side container provider).\n\nHere’s why this is superior: instead of relying on the customer’s browser to send the conversion data directly to Google Ads, the conversion event (like the 'Purchase' Standard Event) is first sent from the Shopify checkout to your server-side GTM container (hosted on Stape) using a unique URL.\n\nThen, the server-side container securely and reliably forwards this data to Google Ads using the Google Ads API (Conversion API).\n\nBecause this communication happens server-to-server, it bypasses browser limitations, ad blockers, and cookie restrictions, significantly increasing the accuracy and match rate of your conversions, including the transaction value, leading to more complete reporting in Google Ads and better optimization of your campaigns.\n\nYou’ll set up a single, reliable 'Purchase' action in Google Ads based on the data flowing through the server, and you can then remove the conflicting, unreliable client-side tracking methods.",
                "author": "Mental_Elk4332",
                "score": 1
            },
            {
                "body": "We have cookie bot installed from GTM but our conversions occured within UAE which does not have any cookie banners displayed when session starts. But I have enabled the the consensual initialization all pages so would that be a problem?",
                "author": "DefinatelyNotACat",
                "score": 1
            },
            {
                "body": "I know TAGGRS without being a user. So I couldn't completely benchmarked the solutions. But being users of Addingwell and Stape, I can say that Addingwell has very solid and responsive customer and partner support. \nThey have resources to help partners with their closing. \nInstallation and deployment of monitoring is done in seconds. \nBut above all, they have a “Tag Health” monitoring solution which provides alerts if the quality of the data drops or if there is a problem with the tags. Which is really great and useful. \nPrices are transparent and consumption is displayed almost in real time. \nThe plans are accessible and transparent but what I really prefer is the super professional and responsive support.",
                "author": "Chemouel_Dgx",
                "score": 1
            },
            {
                "body": "Definitely Google & YouTube isn't the right choice to track purchases for Google Ads conversion. If you want to schedule a meeting to dig deeper into this situation ping me.",
                "author": "analyst_bappy",
                "score": 0
            },
            {
                "body": "Congratulations 👏🎉. What a configuration, how you doing that massacre. I want to learn?\n\nSorry jokes apart, keep one. If you are not pro, then keep Google & YouTube app. GTM is not so easy for Shopify",
                "author": "motiur_ak07",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752617553.0,
        "title": "Issue with SST GA4 Data: DebugView works, but standard reports are empty",
        "author": "Acceptable_Voice7798",
        "id": "1m0vgpe",
        "selftext": "Hi everyone,\n\nI’m running into a frustrating issue with my GA4 implementation and could really use some help from the community. I’ve set up a client-side GTM container that successfully sends data to my server-side GTM container. But the data doesn't show up in my GA4 dashboard, even though it does show up in the GA4 debugview. I’m also using Consent Mode and made some configuration changes recently.\n\nWhat works:\n\n* GA4 debugview: I can see all events (like view\\_item) correctly in GA4 DebugView when I enable both the client-side and server-side Debug Modes.\n* Server reception: The server-side container receives data (only if I first activate the client-side Debug Mode and then start the server-side Debug Mode.)\n\nWhat doesn’t work:\n\n* Standard reports: Despite data showing in GA4 DebugView, my standard GA4 reports (like Events) remain empty.\n\nConfiguration details:\n\n* Client-side GTM sends data to the server-side container with a server\\_container\\_url and a transport\\_type set to the same URL.\n* The server-side tag (GA4 event) triggers on all events.\n\nI’d appreciate any insights or steps to debug this further. Thanks in advance for your help!\n\n\n\nEDIT: it's solved. I just had to wait 24 hours.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1m0vgpe/issue_with_sst_ga4_data_debugview_works_but/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How is sst implemented, trough your own cloud server or a platform like Stape for example?\n\nIs your gtm tracking script changed to contain your own server url? So src=googletagmanager should now be replaced by your server.\n\nHow does your client side google tag look? Did you add your usual GA4 measurement id that you want to track server side? And under configuration variables did you add the parameter server_container_url with the value of your server container url?\n\nIn sGTM, under settings, > container settings recheck that your server url is correct. \n How does \n\nIn sGTM, under clients, did you add GA4 as a client?\n\nIn your GA4 tag in sGTM did you create the trigger type ‘Custom’ and under ‘this trigger fires on’ have you set the built in variable client name - contains - GA4?\n\nIn the sGTM debugger, are you seeing requests coming in? And do you see the GA4 tag fire?\n\nAnd, unlikely but it wouldn’t be the first time this it happened, are both client and server side tag manager containers published?\n\nOne last thing. You state that you can see your events in the debugger but not in reports. Is your website a production environment or are you just testing yourself? If you created an internal traffic > developer data filter for the GA property for example, it would show in the debugger of GA4 but not in your reports. \n\nI think we have very little context about how you’re running sGTM and what your setup in both client side and sGTM look and all we can do is throw random ‘might be’ solutions to you haha.\n\nYou might want to add screens of your setup or a more elaborate description on what you’ve set up.",
                "author": "Pretty-Appearance226",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1752616555.0,
        "title": "GA4 Event Data Discrepancy After GTM Container Migration",
        "author": "No-Resolution9527",
        "id": "1m0v24a",
        "selftext": "Hi everyone,I’m working on a GA4 migration project where we recently imported tags from one GTM container (let’s call it *Container A*) into another (*Container B*). All event data from the imported tags in Container A is now being sent to the GA4 property connected with Container B.However, the original GTM container and GA4 property (Container A + GA4 A) are still active. So currently, two GA4 properties are collecting data for the same website hostname — one via the original setup, and one via the new one.The issue:  \nWhen comparing GA4 event data between the original property (GA4 A) and the new property (GA4 B), I’m seeing a **significant data discrepancy** for the same hostname. The volumes are far off, and I’m unable to pinpoint the root cause.Some additional context:\n\n* I have already paused the tags in *Container B* that could potentially interfere with *Container A* — particularly marketing-related tags that weren’t needed on the other site.\n* Even after doing that, the numbers did **not** improve.\n* My initial suspicion was that there might be interference — e.g., conflicting `gtag` instances, consent settings, or tag sequencing issues due to both containers being present on the same pages.\n\nHas anyone experienced similar discrepancies when running multiple containers on the same domain?  \nCould conflicting tags or consent issues cause data loss or suppression like this?Thanks in advance for your help!Let me know if you want to include logs, screenshots, or GTM debug notes in a follow-up.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1m0v24a/ga4_event_data_discrepancy_after_gtm_container/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hey OP, While running two tag containers on one site / page is generally discouraged it is as you've demonstrated doable fairly easily. The first concern usually is how the datalayer(s) interact with each other so that could be a factor to investigate if you have a number of datalayer event related custom triggers?\nyou might want to check the order of your gtm script implementations as well, is it possible you are setting your default consent only after one of the containers which might have an impact?\nJust some thoughts as a starter...",
                "author": "Tagnetica",
                "score": 1
            },
            {
                "body": "I have paused the consnet tags for now but i can into it further  \nI tried checking the consent mode, I thought that may be affecting it, but didn't seem like it in the Cookies when I checked the `gcs` parameter was showing `G100` when user didnot give consent and it properly changed to `G111` when i accepted the cookie policy\n\nand only few events use custom events and some use the css selectors\n\nyeah i think i can re check the order script and the dataLayer interactions",
                "author": "No-Resolution9527",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739793610.0,
        "title": "Code for Googletag manager not working - is it incorrect?",
        "author": "tryinganewpath",
        "id": "1iri94w",
        "selftext": "I was told to add this code immediately after the header tag on every page of my site, so that we can use the google consent manager tag. However, when I am troubleshooting, apparently no tag can be found. I have been trying for hours but I am really confused. This is what I was told to insert:\n\n \n\n<script>\n\n// Define dataLayer and the gtag function.\n\nwindow.dataLayer = window.dataLayer || \\\\\\\\\\\\\\[\\\\\\\\\\\\\\];\n\nfunction gtag(){dataLayer.push(arguments);}\n \n\n// IMPORTANT – DO NOT COPY/PASTE WITHOUT MODIFYING REGION LIST\n\n//Set default consent for specific regions according to your requirements\n\ngtag('consent', 'default', {\n\n  'ad\\\\\\\\\\\\\\_storage': 'denied',\n\n  'ad\\\\\\\\\\\\\\_user\\\\\\\\\\\\\\_data': 'denied',\n\n  'ad\\\\\\\\\\\\\\_personalization': 'denied',\n\n  'analytics\\\\\\\\\\\\\\_storage': 'denied',\n\n'regions':\\\\\\\\\\\\\\[<list of \\\\\\[ISO 3166-2 region codes\\\\\\](https://en.wikipedia.org/wiki/ISO\\\\\\_3166-2)\\\\\\\\>\\\\\\\\\\\\\\]\n\n});\n\n\n\n// Set default consent for all other regions according to your requirements\n\n\ngtag('consent', 'default', {\n\n\n  'ad\\\\\\\\\\\\\\_storage': 'granted',\n\n\n  'ad\\\\\\\\\\\\\\_user\\\\\\\\\\\\\\_data': 'granted',\n\n\n  'ad\\\\\\\\\\\\\\_personalization': 'granted',\n\n\n  'analytics\\\\\\\\\\\\\\_storage': 'granted'\n\n});\n\n \n\n</script>\n\n\n<!--Banner script here!-->\n\n\n \n\nIt then said to insert our website code from Consent Manager immediately afterwards. I have done all of this but it is still not working and I am getting errors in my Google Analytics account. I know it says to edit the regions but then the instructions said to leave it blank so I am utterly confused. Can anyone help? What am I doing wrong?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1iri94w/code_for_googletag_manager_not_working_is_it/",
        "num_comments": 19,
        "comments": [
            {
                "body": "Sorry it pasted horribly and I can’t seem to fix it. It was line by line. And no I’m not sure what to do for the region list as we don’t want specific regional settings I don’t think? We are based in the UK but do get some international traffic",
                "author": "tryinganewpath",
                "score": 2
            },
            {
                "body": "My recommendation would be:  \n\\- talk to the person who sent you the code. Ask them to send you the proper code (properly formatted, with regions included or not), without any placeholders or repeated escaping slashes. Regarding the regions, discuss with them which countries or regions you want to manage consent for, so that this is reflected in the code. Make sure you copy the code correctly so that the formatting isn't lost.\n\n\\- OR research how Consent mode should be implemented, e.g starting here [https://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced](https://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced) and finalize the code yourself. You should still discuss which the target regions should be.\n\n\\- choose one of those two options based on your current working relationship with the other person and skillset.",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Your code looks all messed up, did it look like that when you pasted it into your site? Did you add an actual region list?",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Hey, let us know if removing consent code helped. And remember one main thing - consent **isn't only about banner**, it's also about consent log - which this solution won't provide.",
                "author": "WojtGalucci",
                "score": 1
            },
            {
                "body": "When I first came across this I struggled with endless options to get consent installed. Let me know if you need help and I will take a look.",
                "author": "sweetchiicka",
                "score": 1
            },
            {
                "body": "Hi all, I'm a former mysql/php developer and I recognize the code problem which is preventing others from helping.\n\nThe backslash is an escape character:\n\\\n\nThese are added around \"reserved\" characters that have special meaning to the web parser and would cause the page to distort.\n\nLooks like op fixed the problem, but this explains why.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "The code was directly from Google Analytics, I'll try to paste it below again in case it works better! We are using Consent Manager as our CMP. I am trying to follow all the online instructions but something is definitely not working properly\n\n`<script>`\n\n`// Define dataLayer and the gtag function.`\n\n`window.dataLayer = window.dataLayer || [];`\n\n`function gtag(){dataLayer.push(arguments);}`\n\n \n\n`// IMPORTANT – DO NOT COPY/PASTE WITHOUT MODIFYING REGION LIST`\n\n`//Set default consent for specific regions according to your requirements`\n\n`gtag('consent', 'default', {`\n\n  `'ad_storage': 'denied',`\n\n  `'ad_user_data': 'denied',`\n\n  `'ad_personalization': 'denied',`\n\n  `'analytics_storage': 'denied',`\n\n `'regions':[<list of` [`ISO 3166-2 region codes`](https://en.wikipedia.org/wiki/ISO_3166-2)`>]`\n\n`});`\n\n`// Set default consent for all other regions according to your requirements`\n\n`gtag('consent', 'default', {`\n\n  `'ad_storage': 'granted',`\n\n  `'ad_user_data': 'granted',`\n\n  `'ad_personalization': 'granted',`\n\n  `'analytics_storage': 'granted'`\n\n`});`\n\n \n\n`</script>`\n\n`<!--Banner script here!-->`",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Thank you! Unfortunately the code was sent from our PPC agency who say they don’t know more than that. It’s essentially from the Google analytics guide. I looked at the link you sent too but it’s too complicated for me. I’m thinking maybe we need to find an emergency web developer or something",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "Sorry I don’t know why. This is the code I used and I added it to the website header, site wide. I also added the semi-automatic blocking code from Consent Manager within the body, which is what it told me to do. I have previewed the site in tag assistant and it does seem like the tag is firing now, but Google analytics is just showing an error still and says none of it is set up.\n\nI have spent 6 hours on this already today and just feeling incredibly stupid and frustrated. Web development is not my area of expertise!",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "What consent management platform are you using? Most of them have built-in ways to implement consent mode which will not require developers (e.g deployment via a WordPress plugin or via Google tag manager for example). The current CMP you have may have a detailed guide on how to do that.",
                "author": "Etianen7",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Sorry late reply, if you're still stuck DM me, I'll help you fix it",
                "author": "sp_net",
                "score": 1
            },
            {
                "body": "We’re using Consent Manager. It had a guide but I did follow it all and somehow it still didn’t work :( I am sure there is something wrong somewhere, maybe on the site itself, so I’ve reached out for some help from our PPC agency’s developer guy as clearly this is too far from my skill set. But thank you for trying to help me!",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "Thanks this maybe actually sounds like a good plan. In this case would I go through and delete any consent manager code first?",
                "author": "tryinganewpath",
                "score": 1
            },
            {
                "body": "You're welcome!\n\nHave you tried these? [https://help.consentmanager.net/books/cmp/page/google-tag-manager-%28gtm%29](https://help.consentmanager.net/books/cmp/page/google-tag-manager-%28gtm%29)  \n[https://help.consentmanager.net/books/cmp/page/working-with-gtm-google-consent-mode-v2](https://help.consentmanager.net/books/cmp/page/working-with-gtm-google-consent-mode-v2)  \nThere's no need to implement Consent mode code directly if you follow the GTM instructions.",
                "author": "Etianen7",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748599733.0,
        "title": "The Container loaded three times, is this a problem? and why it's happening",
        "author": "Single_Version_540",
        "id": "1kz0i2g",
        "selftext": "https://preview.redd.it/j07aoeuf8w3f1.png?width=321&format=png&auto=webp&s=533278961fb41779c8c11735a485295154c49a54\n\nHey Guys, thank you for reading this. My container is being loaded three times. Does anyone know why that is? All tags are firing in the first one, so that's good.ey Guys, thank you for reading this, my container is being loaded three times. Does anyone know why that is? All tags are firing in the first one, so that's good,  \nAnd does this affect anything?\n\nI can share the website and any information\n\nthank you",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kz0i2g/the_container_loaded_three_times_is_this_a/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "This sometimes happens with single page applications, if the GTM snippet is (wrongly) placed inside a component that is re-rendered. Is the website developed with React/Vue/Angular or another SPA library?",
                "author": "LeHvass",
                "score": 1
            },
            {
                "body": "It's developed using Wordpress Elementor",
                "author": "Single_Version_540",
                "score": 1
            },
            {
                "body": "Are there other containers on the site?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "nop",
                "author": "Single_Version_540",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741616668.0,
        "title": "Google Tag Manager Changes email incorrect?",
        "author": "jamieburchell",
        "id": "1j7zsz2",
        "selftext": "Just received this email from Google:\n\n>**Google Tag Manager containers will automatically load a Google Tag starting in April 2025**\n\n>**What’s changing?**  \nCurrently, you have 32 Google Tag Manager containers that send events before loading a Google tag. Starting April 10, 2025, containers with Google Ads and Floodlight tags will automatically load a Google tag first, before sending events.\n\nAll of my GTM containers already have a Google Tag firing on trigger \"Initialization - All Pages\". No other tags fire before that except for default consent settings at \"Consent Initialization - All Pages\".\n\nIs this yet another incorrect, misleading and ultimately useless notification from Google?\n\nI would ask them directly, but the email is from a no-reply address and despite the reassurance that I can \"contact them any time about this change\" there apparently isn't a route to do so.\n\nEdit: It turns out what they mean is I should add a Google Tag for Ads, as well as the one I have for GA4. No idea where they got that number of containers from though - I must have about 3 that use Ads. Also, even after adding the suggested tag it's still prompting me to create the same missing tag.",
        "score": 10,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j7zsz2/google_tag_manager_changes_email_incorrect/",
        "num_comments": 13,
        "comments": [
            {
                "body": "It pretty much announces itself as an ignorable email anyway.\n\nFalls under “nothing for me to do here” in my priority list.",
                "author": "DigitalStefan",
                "score": 4
            },
            {
                "body": "You probably needed it",
                "author": "DigitalStefan",
                "score": 4
            },
            {
                "body": "Had a job where the guy before me who quit was actually NOT firing the Google Tag on initialization. This change is to address 'those guys'.",
                "author": "Humble_Elderberry_25",
                "score": 3
            },
            {
                "body": "Send the notification to those guys then 🤷🏻‍♂️",
                "author": "jamieburchell",
                "score": 3
            },
            {
                "body": "They added GTAG randomly to my container, value is AW-xxxxxxx",
                "author": "mar1_jj",
                "score": 3
            },
            {
                "body": "Until they start adding random tags and triggers to my container that is.",
                "author": "jamieburchell",
                "score": 2
            },
            {
                "body": "i am just glad that he is gone.",
                "author": "Humble_Elderberry_25",
                "score": 2
            },
            {
                "body": "yep",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Then you should be good, no action needed. I think Google just mass emails everyone with a GTM account they don’t actually check your container to see if the update applies to you. \n\nI’ve seen client containers where they don’t have it set up properly so this should fix that for those people.",
                "author": "coffeeandbags",
                "score": 1
            },
            {
                "body": "Honestly, Google share some blame here. They keep trying to make implemention easy, resulting in many people going with the easy option resulting in not the best implementation.\n\nDid you notice the recent update in GTM where you create a Google Tag and it automatically receives an Initialization trigger by default?\n\nBut then by default a GA4 Google Tag sends a page\\_view event, which I think should be separate and fired via All Pages.\n\nLong story short, I manage to earn above the UK average salary because I know how to wrangle GTM into a good shape.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I really wouldn’t worry about it. Nothing we can do other than keep an eye out.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737654684.0,
        "title": "GA4 not recording page_view",
        "author": "popLand72",
        "id": "1i89atx",
        "selftext": "In my \"real time pages\" report i have a list of pages that have active users but no pageviews  \nalso in my real time report i see \"people on the map\" i see custom events that i send, but very often no page view  \nI'm implementing GA4 via GTM, i \"manually\" send page\\_view events to GA4 (i send a lot more events manually to GA4 that looks they go in correctly)  \nif i preview the GTM (even in incognito mode to start from a blank consent) the page\\_view event is correctly fired and recorded by GA4, also if i navigate the published site  \nIt looks like my page\\_view are going correctly to ga4, but most of the other users page\\_view are not fired\n\nI'm using consent mode and integrated consent control, and everything looks correct  \ncontextually to GA4 page\\_view event i send a page\\_view evento to a Matomo instance too, and it looks like the Matomo one is arriving correctly, so it seems that GTM send the page view witht the user but without the effective view\n\nTo be complete, i fire the page view \"on history change\" and i disabled the page\\_view event from the TAG configuration which is fired once on \"Initialization - All pages\"\n\nalso the GTM receive an event ad\\_impression that automatically forward to GA4, but since few days GA4 is no longer receiving it",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i89atx/ga4_not_recording_page_view/",
        "num_comments": 19,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you see your page view event firing in the GTM debugger? And did you also check the GA4 debugger? If it’s working as expected if you’re navigating trough your website then it should for others to, except if you didn’t publish your container.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "If it’s due to consent being declined then the other events wouldn’t show either. Are you using a cookie consent platform? If you’re missing over 50% due to consent declined than that would be a lot. Make sure they can’t avoid your banner. So, not like one of those banners that’s like 2 cm high and on the bottom of the screen 😜\n\nBy the way. How long ago did you publish the container?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "What is your reporting identity in ga4? Do you also fire ga4 page_view event on gtm incialization? Because history change is not fired on the first page of Single page application.",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "If users haven't given consent, GA4 might not track page views properly. Check if the consent signals (like ad\\_storage and analytics\\_storage) are set correctly.  \n  \nAlso, since you're firing page views on \"history change,\" make sure the default page view tag in GTM is enabled, as it could be affecting how data is tracked.  \n  \nFor the ad\\_impression event issue, check if anything changed recently in your GTM or GA4 setup that could be blocking it.  \n  \nIf things keep getting tricky, I’d recommend trying Qwestify. It's much easier to use and gives more accurate results compared to GA4.",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "Yes, it fires in debugger, yes im tracked in GA4 debugger, with all the events i send  \nAlso i'm tracked on \"live\" since the container is published  \nI guess that at least 50% of the traffic is not tracked by GA4 due to browser privacy and third party cookies blocking (in fact i can track custom events but page\\_view is probably blocked due to browser)  \nMy traffic (in debug and live) is probably coming because i accepted all the privacy and allow all cookies and everything",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "using a consent mode enabled provider for the banner, so it can be viewed correctly....   \ndue to privacy regulation in EU consent must start to \"denied\" to almost evertyhing, so if people close the banner + keep the browser privacy on (especially on mobile where it's difficult to manage these kind of options for a normal user)... loosing a lot of analytics data... that's a reason i added a Matomo self hosted analytics, i have more freedom on it (i can log easily anon data)",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "As for reporting identity i have Blended but it says the Modeling is not active for the property\n\nYou are right, i simplified a bit my setup:\n\ni send the GTA Config (Google Tag with GA4 ID) on \"Initialization - All Pages\" whithout the page\\_view event (send\\_page\\_view -> false)  \nI send the page\\_view GA4 Custom Event on a custom event (pageview) that my site send every time the route change\n\nIn addition to page\\_view events i send some performance event (CLS FCP LCP and so on) and these are correctly forwarded and showed in real time report  \nthe page\\_view is also sent to GA4 because in the real time page report i have the accessed page with active users and 0 views",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "I would try to use device-based anyway to be sure. You can switch it any time. Do you use advanced consent mode (with anonymous hits)? In data streams settings, did you turn off “page views based on history changes”?",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "Are you only validating this thing on real time reports? Maybe i would try to valide it in explore section for previous days. Sometimes ga4 UI just do weird things and evaluate data for previous days. So i would look back 2days+",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "Switching to device based right now\n\nDisabling the history change too\n\nim using google consent mode v2 (my 'banner' provider is compatible), from what i read it looks like the ga4 are sent anonymous at beginning and reprocessed once the user accept/deny the policy\n\nCheckiing the past too... but what it looks weird is that when i test (or navigate) my page\\_view is getting ok and all the other events for users are going ok",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "i have a average of half visitors and 2/3 of page views compare to data in Matomo\n\ni tried a lot of combination, it looks the page\\_view is not sent, i see the first time the pageview is invoked it is sent to ga4 (seeing it in debug tag manager view) with consent to denied, but in ga4 debug mode it does not arrive (it should arrive with anon data!), when updating the consent (using gtag(\"update\"...) the page\\_view is still not sent, i dont really understand how to make it work\n\n  \nit looks like that when i send the update to consent on the first page i view, the hit is not reprocessed the way i expect, also the page\\_view that is sent before the consent (any ind of consent) is not recorded",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "Do you have any progress? You can use user explorer in expore sections to debug. You will find out, if user made page_view or not. Or you can create 2 user segments and compare how many users had pageview and how many not.",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "Im thingking my cmp (depsite the fact they say is fully compatible) its not relly consente mode v2 enabled  \nwhen i visit a page in incognito the \"page\\_view\" is triggered but not sent to ga4 (it should be sent with anonimous data until i accept the policy)  \nonce the policy is accepted i send a gtag(\"update\"...) that shoud force the reprocessing of data with new data according to granted policy...  \nBut in my case nothing happen despite all the consent a correctly configured and update in the correct way; google products should automatically rely on this from what i have read",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "There will be some weird configuration of cmp i quess. I would check settings of CMP.",
                "author": "Quirky-Cookie-8931",
                "score": 1
            },
            {
                "body": "If you can share the URL of your site, I can tall within a minute whether your have any issues with your Consent Mode implementation. If you would rather not share it here, send me a message, but I would like to share the results here (without identifying your site, if that's your wish).",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Tried a lot o CMP in these days, it looks none of them seems to record the first page view even after the consent is given",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "a fun thing is that i have a bunch of other custom event (with same permissione as page\\_view) that are sent correctly and shown in debug mode, it looks like that page\\_view sent as custom event got some problem",
                "author": "popLand72",
                "score": 1
            },
            {
                "body": "Then there must be some mistake in your GTM configuration. Can you share preview?",
                "author": "Quirky-Cookie-8931",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747136662.0,
        "title": "Solutions for Cross-Domain Tracking for Hotels",
        "author": "Piocol95",
        "id": "1kljsif",
        "selftext": "Hey everyone,\n\nI'm currently working on tracking setup for a group of luxury hotels, and we’ve run into a frustrating issue with tracking conversions accurately via Google Analytics.\n\nHere’s the situation:\n\n* On the **main hotel websites**, we’ve correctly implemented **Google Consent Mode**, and everything seems to be firing as expected.\n* However, some of the **external booking engines** we use also implement **their own consent layers** (with Consent Mode support).\n* The problem: if a user **doesn't provide consent again** on the booking engine page (even if they did on the hotel website), we **lose the ability to track conversions**.\n* As a result, **many bookings show up as \"direct\" traffic** in GA4, or are completely untraceable back to source campaigns.\n\nWe’re trying to figure out the best way to:\n\n1. **Minimize the loss of attribution** due to consent mismatch.\n2. **Reduce the volume of “Direct” traffic** reported in Analytics for bookings.\n3. Possibly **streamline consent handling** across the main site and the booking engine.\n\nHas anyone faced this kind of cross-domain consent fragmentation before?  \nAny tips on how to:\n\n* Sync consent across domains?\n* Leverage server-side GTM or GAds conversion linker better in these cases?\n* Apply workarounds like click ID forwarding or 1st party cookies across redirect chains?\n\nWould really appreciate any insights, examples, or tools that helped you solve something similar!\n\nThanks a lot in advance 🙏",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kljsif/solutions_for_crossdomain_tracking_for_hotels/",
        "num_comments": 6,
        "comments": [
            {
                "body": "It might be possible to share consent cross-domain if both domains are using the same account of the consent management tool (and the tool allows this feature), which I think is not the case in your situation. Additionally, there are browser-level restrictions which may prevent consent from being shared between domains even if the tool allows it, e.g Storage Partitioning in Chrome [https://privacysandbox.google.com/cookies/storage-partitioning](https://privacysandbox.google.com/cookies/storage-partitioning)\n\nIf the traffic ends up showing as direct instead of at least referral, that might be caused by several things, such as the third party website using noreferrer, or your GA4 account having referral exclusion for the third party domain.",
                "author": "Etianen7",
                "score": 3
            },
            {
                "body": "Easiest solution is to redirect back to your own domain and trigger the conversion from there. If you've excluded the external booking domain from referrals then the attribution should work correctly.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Are the external booking engines on a third party domain (like not just a subdomain?) Do you have any ways to inject GTM /  scripts on those third party domains ?",
                "author": "RCoffee_mug",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Redirect users back to your main site after booking, and just add the booking/payment domain to your GA4 unwanted referrals list. \n\nThat way, the user journey stays intact *and* you avoid the headache of installing GTM on the booking engine.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "\\+1",
                "author": "wardogfufu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742243415.0,
        "title": "GAds Conversion Tag Fails, Duplicate GA4 event tag (same trigger) Fires",
        "author": "Otto_Maller",
        "id": "1jdmxlm",
        "selftext": "Any idea what is it about my GAds conversion tag that the trigger fires but the tag status reads failed? We have a cookie consent banner set up, the tag ID and Label are correct. Just for shits and giggles, I created a GA4 event to track the same GAds conversion event (it's just a click on the phone number link) and it fires no problem. \n\n  \nThe GAds tag has built in consent checks (ad\\_storagead\\_personalizationad\\_user\\_data) with no additional consent required.\n\nGAds is using the Google Tag for enhanced conversion tracking. \n\nAny help is greatly appreciated.",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jdmxlm/gads_conversion_tag_fails_duplicate_ga4_event_tag/",
        "num_comments": 12,
        "comments": [
            {
                "body": "I've experienced this lately, apparently there is some sort of issue in GTM where there is mismatched between what GTM expects to see and what happens so it responds as 'Failed' but the data is getting through.",
                "author": "Taca-F",
                "score": 3
            },
            {
                "body": "**Root Cause:**   \nThe \"Failed\" status is caused by an *additional request* to: `https://www.googleadservices.com/ccm/conversion/<Conversion ID>`   \nThis happens only when User-Provided Data (PII like email, phone) is collected and joined with Google Ads via the `_gcl_au` cookie (long format).\n\n**The Issue**:  \nThis request loads as an image but receives a `text/plain` empty response, causing the browser to flag it as a *failed image load*. \n\n**Result:**   \nGTM Tag Assistant shows \"Failed\" — but data is sent successfully to Google.\n\n**Solution:**   \nNo real fix (Google’s handling issue).   \nWorkarounds (not recommended due to tracking impact):\n\n* Disable User-Provided Data collection or Enhanced Measurement for Forms.\n* Change the `_gcl` cookie prefix (advanced, risky).\n\n***The \"Failed\" status is visual only — conversions are tracked correctly.***\n\n[https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/](https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/)",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "Right! — and totally fair point about needing confirmation on real conversions, not just test forms.  \nThe \"Failed\" status in Tag Assistant is mostly cosmetic. The conversion data is still sent correctly to Google Ads.\n\nHowever, your real concern — the drop in conversions starting March 1 is valid and likely unrelated to the \"Failed\" status glitch.\n\nThe cookie prefix workaround (\\_\\_gcl\\_au) simply bypasses the User-Provided Data (UPD) join request that triggers the \"Failed\" status. It fixes the cosmetic error in Tag Assistant but won’t fix real conversion tracking issues if something else is broken.",
                "author": "wardogfufu",
                "score": 2
            },
            {
                "body": "example here for google analytics hits, google ads is very similar : [https://www.analyticsmania.com/post/check-if-google-analytics-is-installed/#network](https://www.analyticsmania.com/post/check-if-google-analytics-is-installed/#network)",
                "author": "Fun_Ad_2011",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you check network and see if hit to gads is blocked by orb? Or is it 200?",
                "author": "Fun_Ad_2011",
                "score": 1
            },
            {
                "body": "Yes, I think we're all facing the same issue. Even if it shows as \"Failed\", conversions should still track properly.",
                "author": "AdinityAI",
                "score": 1
            },
            {
                "body": "Best, to-the-point answer I've seen. My only quibble would be confirmation that the real-life Google Ad click and subsequent form submission was in fact successful. \n\nWhile the following is potentially coincidental, having started a web business in 1998 and being forced to learn GAds when it originally came out as AdWords, coincidences are rare, often non-existent. What motivated me to re-visit our GTM tracking was the lack of conversions beginning March 1. All data prior shows and average of one per day. \n\nI implemented the cookie prefix work around adding an underscore to the cookie changing \\_gcl\\_au to \\_\\_gcl\\_au. Test forms via Google Tag Assistant now indicate the tag status as \"fired\" where as previously it indicated \"failed.\" \n\nIn all honesty, I don't get it. I only know enough about coding to break stuff. I saw the above workaround in other Reddit posts.",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "I love that I know what you mean, but I’m not exactly sure how to inspect whatever it is I’m inspecting to see the network status",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "Thanks again. Good info.",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "That’s the ticket. Thank you.",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "If it's blocked by orb it's due to account gdpr issue if needed i have dedicated email to contact google about this",
                "author": "Fun_Ad_2011",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744653264.0,
        "title": "Avoid tag firing",
        "author": "henrikgemal",
        "id": "1jz58wv",
        "selftext": "I have some pages on my website where I dont want the cookiebot tag to fire. There are many URLs so a URL block is not possible\n\nBut all of the pages have this code:\n\n    dataLayer.push({'event': 'backend'});\n\nis there a way to use this in a exception to the firing of the cookiebot tag?  \n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jz58wv/avoid_tag_firing/",
        "num_comments": 9,
        "comments": [
            {
                "body": "You could probably create a JavaScript variable that checks for that condition and if it false, then fire.",
                "author": "stopthecrowd",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Don't push an event. Instead create a data layer push that simply pushes a parmeter and value something like \"cookiebot\\_suppress\": \"true\"\n\nMake sure that push happens *before* the GTM script snippet.\n\nCreate a data layer variable \"cookiebot\\_suppress\" and then add a condition to the CookieBot tag so that it only fires when the value of that data layer variable does not equal \"true\"",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "What I usually do is fire a dataLayer.push({pagetype: \"backend\"}) or dataLayer.push({pagetype: \"frontend\"}) on all pages BEFORE THE GTM code and use this information in my triggers.",
                "author": "amlozek",
                "score": 1
            },
            {
                "body": "URL-based restrictions can be implemented within the tag's options to limit its execution on specific pages.",
                "author": "always_judging_u",
                "score": 1
            },
            {
                "body": "so I create a variable called dbPageType and on the pages that I DONT want it it has the value \"backend\".\n\nBut the trigger still fires. Ypu can see why here:  \n[https://www.dropbox.com/scl/fi/mwszd1t8hshlbiaqia99d/Screenshot-2025-04-14-at-22-15-32-Tag-Assistant-Connected.png?rlkey=75x4i2s4sz9npbzx1oxt23gtb&dl=0](https://www.dropbox.com/scl/fi/mwszd1t8hshlbiaqia99d/Screenshot-2025-04-14-at-22-15-32-Tag-Assistant-Connected.png?rlkey=75x4i2s4sz9npbzx1oxt23gtb&dl=0)",
                "author": "henrikgemal",
                "score": 1
            },
            {
                "body": "it seems that in the exception I can only add a Trigger. So I added a custom event called with eventname \"backend\" that triggers if the dbPageType contains \"backend\"\n\nIs this the correct way?",
                "author": "henrikgemal",
                "score": 1
            },
            {
                "body": "if I change the custom event name to \"gtm.init\\_consent\" it works!",
                "author": "henrikgemal",
                "score": 1
            },
            {
                "body": "You're defining an event `backend` and your exception trigger will fire on that event.\n\nThe actual trigger for the CookieBot tag fires on `gtm.init_consent`, so of course your exception trigger won't stop the tag firing. The firing trigger and exception trigger are activating at different times, on different events.\n\nThat's why I said do not push a data layer event for the purpose of controlling when to block the CookieBot tag.\n\nYour easiest option is to drop the exception trigger entirely and add the condition I mentioned into the Consent Initialization trigger. If you don't want to change your data layer push, you could define the condition as \"dbPageType does not equal backend\", but you **must** ensure that data layer push script is above your GTM code snippet, otherwise GTM will load, gtm.init\\_consent will fire, the value of dbPageType won't be set and you won't have the condition required to prevent the CookieBot tag from firing.",
                "author": "DigitalStefan",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1749462920.0,
        "title": "Conversion tracking tag is fired but not hits being sent to google ads!",
        "author": "BigMidnight2104",
        "id": "1l70r4c",
        "selftext": "I’m using Google Tag Manager to fire a Google Ads conversion tag on a custom form submission event: dataLayer.push({\n\n  event: \"form\\_submit\\_custom\",\n\n  form\\_type: \"lead\\_form\",\n\n  user\\_data: {name: \"testjune\", phone: \"+918220001xxx\"}(replaced actual number),\n\n  gtm.uniqueEventId: 11\n\n}) In Preview Mode, the event shows up, and the tag fires — but no hit is being sent. Tag Assistant shows “No hits were sent by this tag,” and I don’t see any network requests going out to Google Ads.\n\nInterestingly, a purchase event (not inside the GTM container) is sending hits successfully to Google Ads — both conversion and remarketing \n\ngtag(\"event\", \"purchase\", {\n\n  value: 0,\n\n  conversion\\_linker: true,\n\n  allow\\_enhanced\\_conversions: false,\n\n  send\\_to: \"AW-xxxxxxx/label\\_\"\n\n})(replaced ID and label)\n\nI’ve also disabled automatic form collection and user data collection in the tag settings to rule out consent or user info blockers.\n\nIs there anything I'm missing that’s required for the Google Ads conversion tag to actually send the hit from a custom event? Appreciate any help or suggestions.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1l70r4c/conversion_tracking_tag_is_fired_but_not_hits/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741260492.0,
        "title": "GTM is not Working after Feb 2025",
        "author": "digital_789",
        "id": "1j4te9o",
        "selftext": "Heyy All,  \n\nAll of a sudden I noticed that GTM has stopped tracking my website event data after the 28th Feb 2025, \n\nHere are a few other things I noticed:\n\n1. I did not find any GTM code on the website (my ex-colleague had connected the same, not sure how)\n\n2. Not sure, but i think it's happening because Universal Analytics has been completely removed from Google, and that's why the GTM tag has also been removed (may be it was integrated through Analytics)\n\n3. Shopify has recently sent an email saying to move tag to Google and YouTube app before 2nd Feb 2025 to ensure continuity.\n\nPlease check and share any solution, thanks in advance for your valuable time.\n\nBest Regards.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1j4te9o/gtm_is_not_working_after_feb_2025/",
        "num_comments": 13,
        "comments": [
            {
                "body": "5 Points:\n\n\\- Universal Analytics has been gone for well over 12 months now. (You most likely have GA4)\n\n\\- GTM doesnt track website events, GTM connects your website to your analytics tool which tracks it.\n\n\\- Sounds like you should check your website change history log and see what changed on the 28th of Feb.\n\n\\- Most likely your GTM code stopped being passed to the website.\n\n\\- Find what changed on the 28th, that will tell you what happened.",
                "author": "Mysterious_Swan_9941",
                "score": 4
            },
            {
                "body": "OP can test #4 by looking at \"sources\" in Developer tools on the site.\n\nHe can find the answer in 30 seconds.\n\nIts possible the GTM snippet is contained within another js file, as seen in Drupal and others. Maybe that's why he doesn't see it.",
                "author": "Far_Highlight_4334",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Did you setup your customer events pixel?",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Do you have cookie consent or banner setup?",
                "author": "vidrgueht",
                "score": 1
            },
            {
                "body": "Shopify began to sunset conversion tracking set up via additional scripts from 2023. Afaik, they had a deadline on 19th December 2024 and another on Feb 24th 2025. \n\n\nThey wanted to move advertisers from additional scripts to customer events where you can install custom pixels. \n\n\nGoogle and YouTube channel is the way.",
                "author": "Mindula_C",
                "score": 1
            },
            {
                "body": "GA4 is directly connected through App and that's working, only GTM is stopped tracking after the last week of February 2025. \n\nI had added GTM code to \"Additional analytics JavaScript\" section, and now Shopify has paused it, So you think this may cause the error?",
                "author": "digital_789",
                "score": 1
            },
            {
                "body": "I think its directly done through GA4, haven't done anything else to set up.  \nFB pixel is connected.",
                "author": "digital_789",
                "score": 1
            },
            {
                "body": "Hehehe....you are the only commenter who thought of this very real possibility.  Happened to us",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "The default way to install gtm on shopify should be via custom pixel which can be found under customer events",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "You can set a pixel in GA4? 😒 \n\nProbably GTM",
                "author": "Far_Highlight_4334",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1746782083.0,
        "title": "CMP Tarteaucitron, Certifiée ou Pas ? Quels Impacts Réels ?",
        "author": "Lower-Worldliness366",
        "id": "1kie488",
        "selftext": "Hello à tous,\n\nJe m’interroge en ce moment sur l'utilisation de la CMP **Tarteaucitron.js** et ses implications, notamment depuis l’arrivée du **Consent Mode V2 de Google** et les exigences croissantes autour de la conformité RGPD.\n\n* Peut-on bien **implémenter Consent Mode V2** avec cette CMP ?\n* Y a-t-il un **impact sur la diffusion des campagnes Google Ads/GA4** si on l’utilise ?\n* Faut-il forcément passer sur une CMP certifiée pour éviter des problèmes ?\n\nMerci d'avance ! ",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kie488/cmp_tarteaucitron_certifiée_ou_pas_quels_impacts/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Si vous souhaitez du soutien, faites au moins l’effort de traduire votre message en anglais.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Bonjour je suis freelance en tracking et je fais régulièrement des implémentations de CMP.\n\n  \nJ'utilise principalement :\n\n\\- CookieBot\n\n\\- Didomi\n\n\\- Axeptio\n\n\\- OneTrust\n\n  \nJe ne recommande pas du tout tarteaucitron si effectivement vous utilisez GA4 et Google Ads et que vous avez besoin du consent mode v2.",
                "author": "lucas-dms",
                "score": 1
            },
            {
                "body": "Looks like it got answered anyway!",
                "author": "lucas-dms",
                "score": 1
            },
            {
                "body": "Merci pour la réponse. Mais pourquoi vous ne recommandez pas ? Ya t'il des standards du marché dont tarteaucitron ne respecteraient pas ?",
                "author": "Lower-Worldliness366",
                "score": 1
            },
            {
                "body": "En gros si la CMP n'est pas certifiée par Google je ne conseille pas de l'utiliser car ça peut créer des problèmes. Après avoir travaillé sur pas mal de projet je me casse plus la tête avec une CMP qui n'est pas certifiée Google mais si vous débutez et que souhaitez tester, allez-y.",
                "author": "lucas-dms",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1727251909.0,
        "title": "I'm losing my mind trying to connect the browser container with the server one. I need help. ",
        "author": "Previous-Place-9862",
        "id": "1fozb9w",
        "selftext": "I've first setup the browser container all tags, variables and triggers. Followed like 8 tutorials, checked the data layers. The browser container is firing perfectly. I've conntected the server container, added the dns, added the code from the web container to my site, I've installed a plugin on my wordpress site to connect both gtm ids and enable data layer to more precisely track. I then went on the server container and setup a GA4 tag receiving all events...\n\nI've done everything.. Yet nothing. My server container does not react no matter what I do. If I just open the custom domain it receives a 400 https error. Meaning it WORKS. YET IT DOESNT... I am so lost. I do everything I've seen in all the videos. I've setup the server\\_container\\_url to my custom domain and im sending send\\_page\\_view as well...\n\nPlease. I need help. If someone can help me fix it I'll pay for that service. I just need help, because I don't know what I don't know...\n\nThe cloud service im using is - stape io and its confugired correctly\n\nEDIT: So the reason I was not seeing server events was because of cookie consent and chrome blocking it. So that's new. But now the capi aint firing so I got a bigger issue...",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fozb9w/im_losing_my_mind_trying_to_connect_the_browser/",
        "num_comments": 28,
        "comments": [
            {
                "body": "check dms. I really need help with this.",
                "author": "Previous-Place-9862",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have only setup a couple server side setups so still learning myself. I have a WordPress website of my own and been meaning to play around a bit more with server side. If you don't get any comments that help I would be happy to take a look for free as I need to get more server side practice in! Feel free to DM :)",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "What cloud service are you using?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "You don't need to 'connect' client side and server side containers. \n\nAlso, if your server side container is throwing an error on preview, then it is not configured correctly.\n\nCan you provide some screenshots of what you are seeing?",
                "author": null,
                "score": 1
            },
            {
                "body": "I have extensive experience with GTM and Stape and can help you resolve this issue. To provide a solution, I'd need to review your setup. If you haven't found a solution yet, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Are you using Client to capture the requests from sGTM?Client = GA4",
                "author": "Aby666",
                "score": 1
            },
            {
                "body": "Is your problem solved? If not, text me, I may be able to help you.",
                "author": "Ramiittaa",
                "score": 1
            },
            {
                "body": "Still having problems?",
                "author": "sAnakin13",
                "score": 1
            },
            {
                "body": "stape io",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "check dms",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "It's not solved\n\nI need help.",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "I think so..? [https://prnt.sc/2XAbQdvdUesN](https://prnt.sc/2XAbQdvdUesN) [https://prnt.sc/r1Ajn\\_\\_1L325](https://prnt.sc/r1Ajn__1L325) [https://prnt.sc/\\_xvEC5wUeJ0h](https://prnt.sc/_xvEC5wUeJ0h)\n\nThese are the ones I am using. Is that right?",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "check dms",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "Ah okay, well I'd reach out to them, they are very good with customer support from what I've heard so will help you",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It looks like you are missing a client to claim the request, if this request is sent from a web container?\n\nI can take a look if you want.",
                "author": null,
                "score": 1
            },
            {
                "body": "Your manual requests are obviously reaching the server so there is no reason why the collect calls are not unless you haven't configured something correctly in either the web or server container.\n\n\nIt's been like 2 hours since the last message here. Did you resolve the issue?",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Yes",
                "author": "Aby666",
                "score": 1
            },
            {
                "body": "[https://prnt.sc/sWwyptp5hCHV](https://prnt.sc/sWwyptp5hCHV) No they will not help me unless I hire them.",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "YES I DO WANT THAT. I will dm you rtight now",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "It was chrome extensions and cookie consent blocking the server events, also me being logged in admin panel also blocked them, maybe I denied my own cookies idk... That is resolved but now the capi aint firing...",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "just did",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "I think that's a pretty good diagnosis there, having the GTM code appear twice on your site is never good. I'd deal with that and then see if this helps.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "I dealt with that. The thing was their plugin was causing an issue. It was labeling every single event as \\_stape. So it'd be purchase\\_stape, add\\_to\\_cart\\_stape.\n\nAnd I had enabled 2 plugins, so it made 2 events. The normal view\\_item and view\\_item\\_stape.\n\nI fixed that quite quickly.",
                "author": "Previous-Place-9862",
                "score": 1
            },
            {
                "body": "Great to hear 👍",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "It's throwing an error whenever I open my subdomain from stape io - gtm.(mydomain) and there's nothing there so it throws an error. As it should.\n\nWeb container- [https://prnt.sc/hqL9PZlbcr5G](https://prnt.sc/hqL9PZlbcr5G) firing as it should.   \nServer container - sitting [https://prnt.sc/oYte2PaNQK9d](https://prnt.sc/oYte2PaNQK9d) the error is just there because I opened gtm.(mydomain) in another window to see. \n\nthis is the google tag configuration [https://prnt.sc/ifziS4HS4CXn](https://prnt.sc/ifziS4HS4CXn) \n\nEverything is setup as it should be, I have no idea what I am doing wrong.",
                "author": "Previous-Place-9862",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744121122.0,
        "title": "Google Ads, April Deadline",
        "author": "martinbethann",
        "id": "1juedo2",
        "selftext": "Regarding the new google tag that has been added to GTM for the April 10th deadline for Google Ads - we have configured it for consent (with OneTrust).  Is there anything else that needs to be done?  We also have the google ads remarking tag, google ad conversion tracking, and google ad conversion linker enabled. Thanks! ",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1juedo2/google_ads_april_deadline/",
        "num_comments": 8,
        "comments": [
            {
                "body": "I think I am late to the party… I know that the Google tag will be slated to automatically fire… but what is happening with the remarketing tag?? Why is it getting sunsetted?",
                "author": "stopthecrowd",
                "score": 2
            },
            {
                "body": "You can remove the old remarketing tag",
                "author": "caballero87",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Ha, no worries. I see conversions and remarketing firing - just was a little confused on whether or not I still needed the remarketing tag now.",
                "author": "martinbethann",
                "score": 1
            },
            {
                "body": "Thank you!!",
                "author": "martinbethann",
                "score": 1
            },
            {
                "body": "Sorry for being Captain Obvious, but you need to test it to see if it works as intended.",
                "author": "Mysterious_Swan_9941",
                "score": 0
            },
            {
                "body": "Well, it sounds like you've built a fortress for the April deadline. I've been in your shoes, thinking I've covered all my bases only to remember a day too late that one tiny detail was missing. Double-check your tag firing rules, especially to ensure that they align with user consent requirements in all scenarios.\n\nOh, and if you mistakenly cross paths with more GTM woes, checking out some tools like Tag Assistant, Simo Ahava’s GTM Tips, and Pulse for Reddit might just save the day from turning into a digital Gremlins sequel.",
                "author": "Key-Boat-7519",
                "score": 0
            },
            {
                "body": "You can also pump remarketing/marketing audiences/segments from platforms like GA4 , Klaviyo, Adobe Analytics, most of the analytics platforms. (or CMP platforms).",
                "author": "Mysterious_Swan_9941",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1748542282.0,
        "title": "How to access ad_personalization and ad_user_data in BigQuery?",
        "author": "hipsterrobot",
        "id": "1kyhtsw",
        "selftext": "Hi all, our company has recently implemented OneTrust to collect user consent stuff in order be compliant with consent mode v2. We are also asked to share this data with a customer data platform that we work with, so they're asking us for a list of all our users and their ad\\_personalization and ad\\_user\\_data status. However, I'm simply not able to find this data in the BigQuery event or user exports we receive. \n\nThe users\\_ table have these fields: \n\n    privacy_info.is_limited_ad_tracking, privacy_info.is_ads_personalization_allowed\n\nThe events\\_ table these following fields: \n\n    privacy_info.analytics_storage, \n    privacy_info.ads_storage, \n    privacy_info.uses_transient_token \n\nHowever none of this seem to match exactly what they actually need. The is\\_ads\\_personalization\\_allowed field only returns (not set) even though we definitely collect this data and it's being sent to OneTrust. Google and AI tools have failed me, so any advice would be appreciated!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1kyhtsw/how_to_access_ad_personalization_and_ad_user_data/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Those options were added with advanced consent mode, but have not been added to the BigQuery export yet.",
                "author": "radar_3d",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742807897.0,
        "title": "What does the tag starting with GT mean?",
        "author": "lilwolfwithdiarrhea",
        "id": "1jimjm7",
        "selftext": "Hi, on my website I installed my GTM and linked it with GA4 and GAds.   \nWhile browsing on GTM and with double checking with the \"Tag assistent companion\" I found that in addiction to my G- tag (analytics), the GTM- tag and the AW - tag (Ads), there's also a GT- tag. \n\nWhat does the GT tag stand for? where does it come from? \n\nThank you for you time.",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jimjm7/what_does_the_tag_starting_with_gt_mean/",
        "num_comments": 8,
        "comments": [
            {
                "body": "This has been added with the new Google Tag update. It doesn’t really change anything but it’s like your new measurement id. So, for GA4 it was G-XXXXXX and for Google ads it was AW-XXXXX. If you go to analytics or google ads and look for your measurement id you will see your tag now has both the G-XXXXXX id and the GT-XXXXXX id, the same applies for the AW tag. They’ll probably phase out the old id’s sometime but there’s no info about this as far as I know.",
                "author": "Pretty-Appearance226",
                "score": 4
            },
            {
                "body": "That’s Google, their documentation is always so incomplete 😂",
                "author": "Pretty-Appearance226",
                "score": 3
            },
            {
                "body": "Yes, the GT tag is the Google Tag. If you go to data manager in Google Ads, you'll see the Google tag as the tracking ID and the AW and GA4 IDs as the destinations. GTM is the container.  \n\nYou can sorta think about it like this:\n\nGTM container (holdsAllTags)\n[(Tracking: Google tag) sendsTo (Destinations: Ads, GA4)]\n\nIf you were to set up other tags it would look like:\n\nGTM container (holdsAllTags)\n[(Tracking: Google tag, Meta Pixel, Adobe Tag) sendsTo (Destinations: Ads, GA4)]",
                "author": "youareseeingthings",
                "score": 2
            },
            {
                "body": "Hey! That “GT-” tag usually shows up when you’re using Google Consent Mode v2, it stands for Google Tag, which is now part of the new tagging framework Google is pushing. It often appears when you’ve got consent mode properly set up, especially with GA4 and Ads together.  \n  \nIf you’re using a plugin or tool that added consent support automatically (like CookieYes or similar), it might have enabled it without you realizing.  \n  \nOn another note if you ever want to skip the whole GTM + consent mode mess, Qwestify can track everything without cookies, consent popups, or any “GT-” tag drama. It works smoothly and respects privacy out of the box.",
                "author": "the-fire-in-me",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Thank you! Very helpfull, not much info about this online",
                "author": "lilwolfwithdiarrhea",
                "score": 1
            },
            {
                "body": "Yep that’s the data manager in Google Ads that was talking about destination and it’s where I saw this Gt-tag. Thank you, now it make sense :)",
                "author": "lilwolfwithdiarrhea",
                "score": 1
            },
            {
                "body": "Yep 🤦‍♂️",
                "author": "lilwolfwithdiarrhea",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732614340.0,
        "title": "Problem with GA4 e-commerce tracking on Shopify via Google Tag Manager",
        "author": "No-Support-1091",
        "id": "1h086xd",
        "selftext": "Hello everyone,\n\n\n\nI'm having a problem setting up advanced e-commerce tracking on a Shopify site using Google Tag Manager (GTM) and Google Analytics 4 (GA4).\n\n\n\n**Description of the problem:**\n\n**Missing events**: When I use GTM's preview mode to test my implementation, I find that when adding a product to the cart, specific events such as add\\_to\\_cart or view\\_item are not fired. Instead, only the form\\_start and form\\_submit events appear. I don't have any events related to ‘item’ or the expected e-commerce tracking.\n\n**Intermittent loading of the GTM container:** In addition, I've noticed that when browsing the site during preview, the GTM-XXXXX container sometimes loads and sometimes doesn't, even when remaining on the same home page. This inconsistency makes diagnosis even more difficult.\n\n\n\n**What I've already checked:**\n\n**Presence of GTM code:** The GTM container code is present on all pages, placed immediately at the end of the <head> tag in the theme.liquid file.\n\n**Cache and extensions:** I've cleared my browser's cache, tested in private browsing mode, and disabled any extensions that might block scripts (such as ad blockers), but the problem persists.\n\n**Cookie Consent:** There is no cookie consent banner or CMP that could prevent the GTM from loading.\n\n\n\n**Additional information:**\n\n**Shopify Theme**: The site uses a custom theme. I have not made any recent changes to the theme that would explain this behaviour.\n\n**Third-party applications**: No third-party applications or scripts have been added or modified recently.\n\n**Other working site:** On another Shopify site I manage with a similar configuration, e-commerce tracking is working correctly, including add\\_to\\_cart and view\\_item events.\n\n\n\n**My questions :**\n\n**Missing e-commerce events:** Why are specific e-commerce events such as add\\_to\\_cart or view\\_item not being triggered when the corresponding actions are taken on the site?Do I have to manually configure the data layer for these events on Shopify? If so, how do I go about this?\n\n**Intermittent GTM loading:** What could be causing the GTM container to load randomly, even on the same page? Are there any specific settings to check or known Shopify issues that could explain this behaviour?\n\n\n\nI would be very grateful for any help or advice you could provide. Thank you in advance for your time and expertise!",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h086xd/problem_with_ga4_ecommerce_tracking_on_shopify/",
        "num_comments": 19,
        "comments": [
            {
                "body": "I was struggled on this today, my case was my GTM couldn't get fired in the checkout page, therefore no events were recorded. \n\nThen I find a solution, which is the best practice now I guess? Instead of implementing the gtm code into theme.liquid. I put in into custom pixel which is located at shopify>setting>customer events>add custom pixel>(add your GTM code without html script here)  \n  \n Save it, and then test it with the test button you will see on the top. You should able to see GTM is fired on every page and ecomm events you set in the script.",
                "author": "Complex_Raspberry_24",
                "score": 3
            },
            {
                "body": "Shopify new checkout extensibility has eliminated the old way of pushing ecommerce events from theme.liquid files to GTM and then Ga4. \n\nThis method is no longer works.\nSame like in case of adding the Facebook pixel.",
                "author": "Yasirshah313",
                "score": 3
            },
            {
                "body": "I was in the same situation as you, and I was really losing my mind. Now, day by day, I’m starting to make sense of it, and this video and article have really helped me a lot with custom data layer implementation via custom pixel: [https://feedarmy.com/kb/adding-adwords-conversion-tracking-to-shopify/](https://feedarmy.com/kb/adding-adwords-conversion-tracking-to-shopify/)",
                "author": "Significant_Split342",
                "score": 2
            },
            {
                "body": "It looks like the issue might be with the missing data layer events like add\\_to\\_cart and view\\_item. You’ll need to manually configure those events in Shopify or use an app to push the data to GTM.  \n  \nAs for the GTM container not loading consistently, it could be a caching or script issue. Try testing in incognito mode, and ensure the GTM code is placed correctly in the theme.  \n  \nFor a smoother tracking experience, I recommend using Qwestify for easy setup and accurate event tracking. It’s simple and helps optimize your GA4 data.",
                "author": "the-fire-in-me",
                "score": 2
            },
            {
                "body": "You are not enabling the data layer without datalayer GTM give you the automatic events like form start, form submit, container loaded, dom loaded, or something like that\n\nInstalling GTM code to the header is not enough, you need to enable the dataLayer from the theme or sandbox (custom pixel)",
                "author": "motiur_ak07",
                "score": 2
            },
            {
                "body": "It works alright for those who only cares about receiving some data. It is however limitted in what you are collecting in GA4. In my experience, it does not measure the whole ecommerce journey, just a couple main ones like view item, add to cart, remove from cart, begin checkout and purchase. And some of the values you measure will not look the same as what you can see in Shopify.\n\nThe way with custom web pixel combined with GTM allows for a broader way to measure all the events and how you want to receive the data in GA4. (More control)\n\nAlthough you will require some good knowledge to implement it. Or pay someone who knows his way around it.",
                "author": "Tenshichi",
                "score": 2
            },
            {
                "body": "Why would anyone use an app to upload their data layer when they could leverage Shopify’s new custom pixel feature? You can find more information in the Shopify documentation here: https://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels. Custom pixels might be a bit more complex to set up, but they offer a lot of flexibility and customization. I started with this tutorial, which might be helpful for you: https://youtu.be/GflbZL2wyK8.",
                "author": "Significant_Split342",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you set up anything in Customer Events?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Just use the “Google & YouTube” sales channel for ecomm tracking. Works great and all you have to do is drop in your GA ID.",
                "author": "scotty_ducati",
                "score": 1
            },
            {
                "body": "We have written a guide on this with Julius from Analyticsmania: \n\nhttps://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify/",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "You can use [this app from addingwell](https://docs.addingwell.com/en/shopify/shopify-application?ref=data-marketing-school) to push all e-commerce dataLayer events.",
                "author": "lucas-dms",
                "score": 1
            },
            {
                "body": "I'm gonna do that, thanks a lot !",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "So to do that, I need to exclude de snippet inserted in \"theme.liquid\" right?",
                "author": "ImaginationNo7830",
                "score": 1
            },
            {
                "body": "Thanks for the link",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "Thanks, I'm going to try it out!",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "There's already the facebook pixel but I'm going to test it for the GTM as I said above.",
                "author": "No-Support-1091",
                "score": 1
            },
            {
                "body": "Everyone is not a dev/has access to dev resources + this app does leverage the custom pixel,",
                "author": "lucas-dms",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734014048.0,
        "title": "Does Google Ads audit or check your Google Tag Manager settings?",
        "author": "trucker-123",
        "id": "1hcmdwo",
        "selftext": "So a lot of of conversions are being lost in Google Ads because \"Default Consent (Global)\" is being set to \"Denied\" for the tag that I setup for my consent banner in GTM (Google Tag Manager).  I advertise globally.  Originally, what I tried to do was only display my consent banner for EU & UK, and not display it for the rest of the world.  The problem with this is, because \"Default Consent (Global)\" is being set to \"Denied\" in GTM, it doesn't seem to give customers outside the EU & UK a chance to accept the cookies (because the consent banner doesn't come up) and there is a loss of conversions being counted in Google Ads for customers outside the EU & UK. \n\nNow when I asked the CMP Partner of the consent banner I am currently using on what configuration I should use in GTM, the CMP Partner told me that I should set \"Default Consent (Global)\" to \"Granted\" and then in \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"  I then asked Google Ads support about this, and they contradicted the CMP Partner and said \"Default Consent (Global)\" should be set to \"Denied\" in GTM.  Mind you, I think I am in the lowest tier of support for Google Ads and at times, it seemed like the staff I was interacting with were not trained well.\n\nFast forward two months later, I am considering using a completely different consent banner with a completely different CMP Partner, that also offers the option to bring up the consent banner only for EU & UK customers.  When I asked this second CMP Partner what the GTM configuration should be if I only show their consent banner to EU & UK customers, they said the same thing as my current CMP Partner and repeated the same GTM settings! \n\nThat's two different CMP Partners, who recommend if you only display their banner in the EU & UK, to set set \"Default Consent (Global)\" to \"Granted\" and then in \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"  Ergo, that is two different CMP Partners who are recommending the settings I make in GTM, go against what Google Ads support is saying.\n\nWhat I care about is whether my Google Ads account gets banned, if I follow the two CMP Partner instructions as outlined above, since it goes against the Google Ads support instructions. So my question is,  does Google Ads audit or check your GTM settings?  Or is GTM firewalled and Google Ads will never check my GTM settings?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hcmdwo/does_google_ads_audit_or_check_your_google_tag/",
        "num_comments": 18,
        "comments": [
            {
                "body": "How I dealt with this for a US client :-\n\nHardcoded gtag consent default script on site with two sections to it. One that did not include a region definition that denied all consent by default. The second defined the region as 'US' and set default consent to granted.\n\nThis is probably not the perfect consent policy, but it reflects their policy as defined within OneTrust.\n\nTheir CMP (OneTrust) script is also hardcoded on site.\n\nYou don't have to do it this way and I've recently done a similar thing but instead using Simo's \"Consent Mode\" tag template in GTM. Not as neat, but it works.\n\nSo.... the point is it's possible to set the defailt consent differently based on geolocation. In your case, I would set all consent to granted by default but also define the list of regions where consent is denied by default. You can likely easily find the list of 2 letter country codes. Don't forget the UK. Not part of the EU now, but GDPR still applies.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "I would definitely go with the set up your CMP advised. It’s actually also stated in Googles documentation so whoever helped you from Google is wrong. They state that you should set default consent for regions where consent banners are required. So global should be granted and region (eu and uk) should be denied so you’re a 100% sure that anyone outside of the eu and uk will have consent granted. The list is more manageable as wel since you only have to add the EU and UK country codes instead of 200+ other countries.\n\nAbout your worries of getting banned.\nThe documentation also states what is best practice and not as the only way it should be done. In the end, all that matters is that the EU and the UK do have default consent set to denied so you’re compliant.\n\nLike a month ago I got a message from Google that my cookie notice didn’t meet there requirements and I had to change it within like 90 days or they are allowed to stop the partnership. They can’t give legal advice so they don’t say what’s actually wrong and they had to recheck like 30 times before they chose to just tell me what I had to change 😂 I think they where truly done with me hahah. So, no they won’t ban you so easily. They would contact you, give you plenty of time to change it, and they will recheck as many times as needed until your compliant. But if you follow your CMP’s implementation, you will be fine.",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "Trust CMP partners to know their products. Have a look at many popular Google Ads forums to gain some insight on how useful people are finding Google Ads support!",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "“It is best practice to scope the default consent settings to the regions where you are surfacing consent banners to your visitors. This helps with preserving measurement in regions where consent banners are required and Google tags adjust their behavior accordingly. You also prevent any loss of measurement where there are no consent banners or consent banners don’t apply. See Region-specific behavior.”\n\nhttps://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "When they contacted me about our cookie banner notice not being compliant it was kinda funny. They said we have to refer to Google’s privacy and terms documentation while this was already done and is literally added by cookie script, which is an official partner, by default if you don’t erase it. But they also gave another vague answer of something that needed fixing. After like 20 tries and constantly getting declines, I changed my banner to the first version where they commented on that it was incorrect. Guess what, they approved it 😂 Sometimes they don’t know what they are doing I guess",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you use the tag manager template from your CMP? And which CMP?",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Default state should be all be denied then consent should updated by the CMP based on region or past consent. This allows proper update event to be triggered. From last we checked, update event is not triggered if there is no consent state change. Update event needs to be triggered so that everyone knows that the CMP has finish processing.\n\nDont think that Google audits the partner CMP integration with Consent Mode v2. If you look at their templates, some do not have the same flow.",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "I created a FREE tool to create documentation for each tag, trigger, variable etc. Will be useful to decide which assets to let go of.\n\nYou can check the video of the tool in use over here - [https://youtu.be/MIFWMDZZJ6g](https://youtu.be/MIFWMDZZJ6g)\n\nThe tool can be accessed here - [https://mangoblogger.com/apps/gtm\\_audit/](https://mangoblogger.com/apps/gtm_audit/)\n\nLet me know if there is anything extra you would like to see in the audit and I can add it.",
                "author": "RipGroundbreaking470",
                "score": 1
            },
            {
                "body": "Thanks! I am wondering if I do this by script like you are doing, it makes it harder for Google Ads to track what I am doing because I am no longer using GTM to setup the consent banner. \n\n(it's crazy that the 2 CMP Partners are giving me instructions that contradict Google Ads support instructions in the first place and I have to do a workaround like this)",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": ">It’s actually also stated in Googles documentation so whoever helped you from Google is wrong. They state that you should set default consent for regions where consent banners are required. So global should be granted and region (eu and uk) should be denied so you’re a 100% sure that anyone outside of the eu and uk will have consent granted.\n\nHwy, thanka for your reply! Do you have a link to the documentation where they state this? I would love to see that document so that I have some backup in case I get in a dispute with Google Ads. Thanks!",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "Cookie-script. They recommended that I change the template to set \"Default Consent (Global)\" to \"Granted\" and then in \"Default Consent (Region-specific),\" I should add UK and add each country in the EU and set them to \"Denied.\"",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "> Default state should be all be denied then consent should updated by the CMP based on region or past consent. This allows proper update event to be triggered. From last we checked, update event is not triggered if there is no consent state change. Update event needs to be triggered so that everyone knows that the CMP has finish processing.\n\nI agree with what you say if the Consent Banner is shown to the customer. What I want is for the Consent Banner to not be shown to the customer if they are outside the EU & UK.  And that's where \"Default Consent (Global)\" being set to \"Denied\" is causing problems because some conversions are not being counted for customers outside the EU & UK if the Consent Banner is not being shown.\n\n(ie. the CMP should not even become a factor outside the EU & UK if the Consent Banner isn't being shown)",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "Before the CMP decides whether to show the banner, it will determine the visitor’s location, then if said location does not need consent, CMP will update the consent state from the default denied state to granted which then triggers the consent update event. Without consent update event, tags may not get fired.",
                "author": "appfromlab",
                "score": 1
            },
            {
                "body": "Thanks for that link! I can use that link as a backup source in case I have a dispute with Google Ads.  Also, I noticed this in the documentation link that you provided:\n\n> If two default consent commands occur on the same page with values for a region and subregion, the one with a more specific region will take effect. **For example, if you have ad_storage set to granted for the region US and ad_storage set to denied for the region US-CA,** a visitor from California will have the more specific US-CA setting take effect. For this example, that would mean a visitor from US-CA would have ad_storage set to denied.\nRegion \tad_storage \tBehavior\n>\n>US \t'granted' \tApplies to users in the US that are not in CA\n>\n>US-CA \t'denied' \tApplies to users US-CA\n>\n>Unspecified \t'granted' \tUses the default value of 'granted'. In the example, applies to visitors that aren't in the US or in US-CA \n\nEven in their example for the US, they are setting \"Granted\" to everyone in the US, and then setting \"Denied\" for people in California.",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "Nice catch! It’s an example of course, but it does back up our logic I guess 😉\n\nI think if consent mode is correctly installed, like the CMP advises, the chances of Google reaching out to you about this is close zero.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Hi, some conversions won't be counted in Google Ads for customers outside the EU & UK if I do it your way.\n\nAs I mentioned in the original post, both CMP customer support representatives told me I should set \"Default Consent (Global)\" to \"Granted\" to get the conversions for customers outside the EU & UK counted in Google Ads.  So it's the CMP themselves telling me this is the right setting to get it work for their banner - setting \"Default Consent (Global)\" to \"Granted.\"  It's their words, not mine.\n\nThe crux of the problem is that their advice is contradicting Google Ads support advice.",
                "author": "trucker-123",
                "score": 1
            },
            {
                "body": "There are CMP partners who use the default denied state even for regions which does not require consent. Because their GTM template is able to update the default state from denied to granted after determining the location.",
                "author": "appfromlab",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1742983104.0,
        "title": "How to Make Pixels Send Data Without User Info",
        "author": "Acceptable_Smoke_235",
        "id": "1jk85xw",
        "selftext": "Google’s Advanced Consent Mode (ACM) allows tags to send anonymous pings when users decline tracking, helping with conversion modeling without storing personal data.\n\nFor Meta, TikTok, and other pixels, when a user denies consent, tracking stops completely—no data is sent at all.\n\nIs there a way to configure these pixels so they still send anonymized event data (e.g., without PII like cookies, IPs, or user IDs) while staying GDPR-compliant? How are you handling this?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jk85xw/how_to_make_pixels_send_data_without_user_info/",
        "num_comments": 8,
        "comments": [
            {
                "body": "There would be no point. The reason Google anonymise the data is Google also know to divert that anonymised data into their AI model instead of directly into reports.\n\nYou would need Meta, TikTok and others to also implement some understanding of “this data isn’t for reporting, it’s for an AI model”… so of course that won’t work unless there is the underlying tech present to deal with it.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Thanks! So if I understand you well, Meta (and TikTok) dont provide this option because they do not have the tech present that would make sense of the anonimized data?",
                "author": "Acceptable_Smoke_235",
                "score": 2
            },
            {
                "body": "Right now, i have only set up my web container. Google ads and analytics adjust their behavior based on consent. Meta and tiktok just do not fire at all when consent is denied. So I am interested in making the pixels fire without sending PII.\n\nCould you please elaborate in the serverside solution where you can strip out PII’s when consent is denied, but still send event data?",
                "author": "Acceptable_Smoke_235",
                "score": 2
            },
            {
                "body": "Funnily enough, Meta have had an “is there consent?” signal option in their tracking API long before Google Consent Mode was a thing, they just never seemed to have really done anything with it.\n\nOtherwise yes, you have it right.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "interesting. In an ideal setup, you would sanitize the data only when the user does not consent. \n\nHow can i set up this process of stripping out PII?\n\nDo you by any chance have some documentation and/or tutorials that explain this?",
                "author": "Acceptable_Smoke_235",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1747323254.0,
        "title": "Can having two gtag instances in the same GTM container (Google Ads + Floodlight) cause conversion tracking issues?",
        "author": "run-wthewolf",
        "id": "1knb7yj",
        "selftext": "Hey everyone,  \nHas anyone experienced issues when running multiple `gtag` instances inside the same GTM container?\n\nIn the past few weeks, I’ve seen 3 different clients suddenly report a major drop in Google Ads conversions — while GA4, Meta, and other platforms remained consistent with no drop at all.\n\nAt first, I suspected it might be related to the recent cookie handling changes by Google, but none of them are using any advanced consent features or cookieless setups yet.\n\nHowever, there *is* one thing they all had in common: a new Floodlight tag was added recently (at different times for each), which also uses a `gtag` as part of the DV360 setup.\n\nIn theory, these shouldn’t conflict — the original Ads conversion tags remained untouched — but this pattern is hard to ignore.\n\nCould it be that the Floodlight `gtag` is somehow interfering with or overriding the Ads conversion tracking?  \nHas anyone else run into this kind of issue?\n\nAppreciate any insights!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1knb7yj/can_having_two_gtag_instances_in_the_same_gtm/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "DM with the websites if you can.",
                "author": "wardogfufu",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739823983.0,
        "title": "Tag Coverage keeps showing new pages as untagged, even though the pages are tagged.",
        "author": "zombiekop",
        "id": "1irtv8g",
        "selftext": "Tag Coverage keeps showing new pages as untagged, even though the  pages are tagged. Consent Mode is implemented and works as it should.\n\nWhen I visit a page, GTM removes it from the list of untagged pages.\nThe problem is that the website has more than different 3000 pages. So, visiting them all is impossible and my client really wants them away. \n\nDoes anyone know what’s going on?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1irtv8g/tag_coverage_keeps_showing_new_pages_as_untagged/",
        "num_comments": 11,
        "comments": [
            {
                "body": "I understand that google always brings bad reports but my client really wants to fix it. So, I have no choice:(",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "I wouldn't get too hung up on that report. By any measure it's a terrible report at the best of times.\n\nYou need to have the conversation with your client about how bloody awful a lot of the recommendations are that come direct from Google.\n\nDo your standard checks. Verify your tagging is good. It's now for the client / you to simply make sure the data in GA4 / Google Ads / Facebook / wherever looks reasonable, consistent and useful. If the data doesn't look good, then you start looking for causes.\n\nTag coverage is generally not one of the causes.\n\n  \nEDIT: If I had to guess why the report is bad, I would say it's because Google never bothered to even check those \"missing\" pages were really covered or not and just assumed they weren't.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I wouldn’t get to hung up on the message, it could mean GTM surfaced dormant pages or they are hosted on a third-party site such as Calendly. There’s a data layer and listening tool work around for that.",
                "author": "JoanLockwood",
                "score": 1
            },
            {
                "body": "You'll get the same errors in Google Ads saying to check your tags. All this means is that these pages haven't picked up a traffic signal in a while.   \n  \nWhen a page is loaded in a browser, the GTM script fires, and that is how GTM knows the page is tagged. If no one has visited that page in a while, the GTM tag hasn't fired on that page in a while, so this built in feature in GTM thinks that there may be an issue with the tag.\n\nIt isn't that the page is not tagged, just that no one has triggered the GTM script on that page in a while because no one has visited that page.\n\nThat's it. It's a false error.\n\nIf you want to prove this to your client, use a crawler like ScreamingFrog to crawl these pages and check for the GTM script.",
                "author": "whatkindofhotel",
                "score": 1
            },
            {
                "body": "Yes, I have. It’s a e-commerce site with a lot of products. So, everytime it is another productpage or a specific search page.",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "Can you tell me more about that? This was what I was thinking to but couldn’t find any information about it. Where do I have to start searching for it?",
                "author": "zombiekop",
                "score": 1
            },
            {
                "body": "You do have the choice. You can tell them with confidence that it is unimportant, that the report is bad (you can demonstrate it) and if they want you to fix it by manually visiting every page, you charge money for it.\n\nI guarantee if you mention cost they will suddenly realise how unimportant the task is.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Can you give us more details? Are you using a CMS? Are these pages that are being marked as untagged associated with the correct domain? What happens when you open the pages and then refresh the coverage report?",
                "author": "youareseeingthings",
                "score": 1
            },
            {
                "body": "The website is build on woocommerce and when I visit the page with an error, then the error is gone.",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1744027429.0,
        "title": "GA4/gAds missing conversion upload",
        "author": "Pretty-Appearance226",
        "id": "1jtjkvp",
        "selftext": "Hi,\n\nCurrently I’m setting up server side tracking with Stape which is going well! We’re also using a tool that has a conversion booster for Google Ads but I’m a 100% sure that the subscription is way to expensive for what it does and that it could be easily implemented by ourselves. What it does is just sending our missing transactions in GA with click identifiers (if available) to Ads and the GA4 measurement protocol to fill in the gaps.\n\nI understand how I can send conversion to GA4 and Ads but I’m currently thinking about how to set up a system that checks whether a conversion was sent to GA4/Ads and if not, sent the transaction with enhanced conversion data and gclid/wbraid/fbraid params to GA4/Ads (taking into account whether consent has been granted or not).\n\nBefore investing hours into this I’m curious how others have implemented this!\n\nThanks in advance!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jtjkvp/ga4gads_missing_conversion_upload/",
        "num_comments": 6,
        "comments": [
            {
                "body": "That sounds like an (illegal in the EU and UK) end-run around user privacy.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "Updated they question as well for clarity about consent 😉",
                "author": "Pretty-Appearance226",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hey\nI did a quick implemention of this and its in a prototype stage. You can reach out if interested\n\nI am yet to cover the server side things",
                "author": "Awesome_911",
                "score": 1
            },
            {
                "body": "My idea now was to send an transaction id + email from our backend everytime a new transaction occurs to cloud run, then let cloud run query a table with all neccesary data to see if the transaction is missing or not. If missing, then cloud run sends the missing transaction to the GA4 measurement protocol with the needed parameters depending on the consent of the user.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "As simple as I described it yes. But of course, I’ll take in account user consent 😉\n\nThe goal is more like filling in gaps if transaction where the browser crashed or a user who closed the tab to quickly and that kind of errors. Next to that, it’s allowed to send 1st party data like an hashed email address to Google with the transaction id right of course without a gclid if consent is denied or not available (or maybe it’s a grey area)?",
                "author": "Pretty-Appearance226",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1741839728.0,
        "title": "tags firing/events showing during preview but not outside of that",
        "author": "waynegrundy",
        "id": "1ja3vtz",
        "selftext": "Update: was just on the phone with Google Support (got a hold of somebody via the Google Ads support) and they said that for some reason my debug view in GA4 is just not working properly but analytics IS actually tracking everything so.. I guess I'm good lol. Still a bit strange but at least I didn't do anything incorrectly haha.\n\n\\----\n\nSo I've set up a bunch of tags to track a variety of events. The confusing thing is that they all fire in preview (and during that also in the GA4 debug view). When I go to the same pages to trigger the same tags, tag assistant confirms that those tags were fired BUT debug view does NOT show any events. Not even the page views from my GA4 Config tag for page initializations. My website is on Wix (planning on moving to Wordpress in the near future).\n\nWix: under marketing integrations, I've connected Google Tag Manager **and** Google Tag. I've tested disabling the Google Tag option here and that made no difference. I also disabled the cookie consent banner briefly, again no events sent in debug view.\n\nThis is how the tag is set up (I followed Analytics Mania's video most recent video on this):  \n\\- Tag configuration: Google Tag  \n\\- Tag ID: the data stream ID from GA4 (triple checked that it's the right ID)  \n\\- triggering: initialization - all pages\n\nGranted, I'm very new to GTM and GA4 so I must have obviously missed something but I've been racking my brain and can't figure out what.\n\nI double checked the data filters and made sure to switch off the \"internal traffic\" filter. I do have a cookie consent banner on my website but even after accepting that, the event still doesn't show in GA4.\n\nI don't have any ad blockers on my browser (Google Chrome). I downloaded Firefox and went to my home page, still no page\\_view event shown in the GA4 Debug View (same for the Admin Debug View).\n\nI've also read that debug view can be delayed, so I've waited to see what it shows. Nothing. Whereas when I'm in preview, the event usually shows up after a minute or so.\n\nIf tag assistant is confirming the tag fired and the event was sent, something must be wrong with GA4, right? Honestly, my brain feels fried from trying to figure this out all day. I just don't get why it works in preview but not outside of that? (again, I'm very new to this stuff. Forgive me if I'm missing something obvious here)\n\nAny help is highly appreciated. I want to run Google Search Ads soon but I want to make sure everything's tracked properly.",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ja3vtz/tags_firingevents_showing_during_preview_but_not/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Did you publish the container - this could sound dumb but often overseen. \n\nNext as you debug in the preview mode, open debug view in ga4 and you should see the events coming in.",
                "author": "ds_frm_timbuktu",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you tried using a pixel helper extension and/or tag assistant?\n\nHave you tried to inspect using developer tools? Inspect Page > Network > Refresh Page > Search GTM or your GA4 id. That may also give you more information, what's firing, whether it's succeeding, etc.",
                "author": "murffmarketing",
                "score": 1
            },
            {
                "body": "If you used the data stream ID from GA4, then you likely used the wrong identifier. Those were the instructions a version or two ago.\n\nYou seemed content with Google's answer, so this is primarily to benefit others who find this later via search. \n\nBut feel free to verify what Google told you by  running an analytics report in GA4. You did exhaustive testing, but you forgot to verify that you actually have a problem.\n\nIf your reports have data, then all's cool.  If not, I'm sorry Google fed you BS...they don't know what they're talking about half the time.\n\nLet me know if you're report have data.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "Hey, thanks for the reply. Just updated my post. I spoke to Google Support (via Google Ads) and according to them my debug view in GA4 is just not working properly but Analytics as a whole IS properly tracking everything so... \\*shrug\\*\n\nI did use tag assistant and the assistant confirmed my tags were firing and events were being sent.",
                "author": "waynegrundy",
                "score": 1
            },
            {
                "body": "Haha. Yeah, I did. \n\nWell that's the thing. When I'm in preview mode after publishing/or before publishing, the events always show up. It's OUTSIDE of that they GA4's debug view never shows any events",
                "author": "waynegrundy",
                "score": 1
            },
            {
                "body": "Events show in GA4 Debug only when you're debugging. Previewing from GTM will indicate to GA4 that you are debugging. Normal browsing on the site does not.\n\nIf you want to confirm outside of previewing within GTM you can either:-\n\n1. Look at a realtime report in GA4\n2. Use the Google Analytics Debugger extension, which also signals to GA4 that you are in debug mode: [https://chromewebstore.google.com/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna](https://chromewebstore.google.com/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Did you publish the container - this could sound dumb but often overseen. \n\nNext as you debug in the preview mode, open debug view in ga4 and you should see the events coming in.",
                "author": "ds_frm_timbuktu",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736500853.0,
        "title": "What trigger is the best one for the GA4 tag",
        "author": "WillyDoesntMiss",
        "id": "1hy0lvg",
        "selftext": "all pages or initialization and why, because I have no clue thanks in advance",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hy0lvg/what_trigger_is_the_best_one_for_the_ga4_tag/",
        "num_comments": 13,
        "comments": [
            {
                "body": "Initialization.\n\nBecause Google say so. It's in their docs.",
                "author": "DigitalStefan",
                "score": 3
            },
            {
                "body": "For GA4 tags, the best trigger typically depends on what you want to track. If you're looking to track data across all pages, the \"All Pages\" trigger is the most common and will fire the GA4 tag on every page load. On the other hand, \"Initialization\" is useful if you want to track user interactions right when the page starts loading, before any other elements are triggered.  \n  \nIf you’re still unsure, Qwestify can help you analyze your GA4 setup to ensure your tags and triggers are firing correctly, which might make things clearer!",
                "author": "Voyager-77",
                "score": 2
            },
            {
                "body": "Official Google documents recommend using initialization: https://support.google.com/tagmanager/answer/14842872?hl=en",
                "author": "HawkeyMan",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "The Initialization trigger will fire before All Pages making it useful if you need to run a script that is in turn used by a tag firing on All Pages.\n\nIf you have a tag that relies on the GA4 config firing first, then fire the GA4 tag on Initialization. If not, I'd  leave it with the All Pages trigger which retains the flexibility of firing a script before it if needed in the future.\n\nIt's not super important if you have no current dependencies, as you can always change the trigger to what you need when the time comes.",
                "author": null,
                "score": 1
            },
            {
                "body": "Being EU-based I prefer cookie_consent_update almost exclusively.",
                "author": "mbkjeldsen",
                "score": 1
            },
            {
                "body": "Google Recommend initialization",
                "author": "CountDirect5522",
                "score": 1
            },
            {
                "body": "If you use advanced consent mode, does one need to trigger ga4 tag again on the same page to send page\\_view or will google connect the data back to the first cookieless G100 page\\_view as first page view?",
                "author": "priortouniverse",
                "score": 1
            },
            {
                "body": "Yes if you are in a GDPR country then the triggers has to be this.\n\n@OP where are you based?",
                "author": "Taca-F",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1731495656.0,
        "title": "switching from gtag.js to GTM - big drop in GA4 sessions",
        "author": "Electrical-Focus-753",
        "id": "1gqadb1",
        "selftext": "I am a marketing professional struggling with a change in GA4 since I asked our web team to switch from gtag.js to GTM and wondering if anyone has similar experience and / or a fix! \n\nI’ve noticed that GA4 has suggested we’ve dropped in terms of website visitors by 50% compared to the month before. It looks like we had a big dip around late September when the GTM switch went live and we haven’t recovered.\n\nThis also doesn’t appear to show in other platforms. While GA4 suggests a 50% drop in organic search visits, Google Search Console indicates we’re doing better than ever, up 10% on that period, with no dip in clicks through to our site. \n\nI am a bit lost as to next steps. I can’t see anything about GA4 changes or updates - what could be affecting us here? Is there a possibility that our tag or GTM has been set up incorrectly?",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gqadb1/switching_from_gtagjs_to_gtm_big_drop_in_ga4/",
        "num_comments": 18,
        "comments": [
            {
                "body": "The first question I ask in this situation is \"was it almost exactly a 50% drop? If so, what is more likely, that GTM is somehow discarding every other session, or the previous tracking setup was somehow causing double counting of sessions?\"",
                "author": "StefanAtWork",
                "score": 4
            },
            {
                "body": "Could be a consent or tag configuration issue as well.",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "There was a Core update on the 12/13 so data coming from Google is incomplete starting on the 13th. It appears to be a bug or something that is now just taking longer to update.",
                "author": "Similar-Breadfruit50",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Do you have access to consent analytics? How often is it granted by users?",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "Might be closer to the truth? Have you other ways to verify numbers?",
                "author": "pxldev",
                "score": 1
            },
            {
                "body": "Have you seen an increase in bounce rates? If not, check the proportion of entry page sessions before and after the change.",
                "author": "Kelagha",
                "score": 1
            },
            {
                "body": "Few things:\n\n\\- did you implement cookie banner through GTM, which wasn't previously available with gtag\n\n\\- have you checked if cookie banner does not fully reload the page before sending consent signals (what happens, sometimes when users accept cookies, page gets reloaded and first hit happens on new page and traffic is then direct, not organic). That might help with organic part\n\n\\- have you checked statistics from the cookie banner, acceptance rate?\n\nIf this is not the reason, then most likely you had double counting of page views as someone suggested... Maybe switch back to gtag and see what happens?\n\nAlso, can you check if GTM is placed on all pages? Just as a sanity check (google how to do that with screaming frog).",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Really good thinking - it's around 51.4% overall so not exact but close. The drop is roughly equal for all channels too, 47% for organic search, 48% for direct and 49% for organic social just as an example. So plausible that our sessions have increased over the period but have stopped double counting or half of the sessions have been discounted. I may put this to our developers. Any easy way of proving this is happening? It doesn't appear to be half counting currently in debug mode in GA4.",
                "author": "Electrical-Focus-753",
                "score": 1
            },
            {
                "body": "This would make sense to me, given it's a 50% (or close) drop and gtag.js implementation is very vulnerable to counting errors (this is partly why Google bought in GTM in the first place, because so many websites were doing it wrong!).",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Thanks - I've noticed that too. Is it possible that the same thing happened earlier in the month for us? It looks like it's halved the (already halved) numbers of traffic for us.",
                "author": "Electrical-Focus-753",
                "score": 1
            },
            {
                "body": "Thanks - bounce rates have remained similar. Proportion of entry sessions don't seem to have changed that much either, I've checked a few specific pages. Does this suggest anything?",
                "author": "Electrical-Focus-753",
                "score": 1
            },
            {
                "body": "Super helpful, thank you. I believe cookie banner is built separately and I haven't added it through GTM. In fact, when the changes first went live the Google tag wasn't even added to GTM. I had a blank container. I've since added the tag in but the numbers don't seem to have changed over the past couple of weeks. Does that in itself suggest that it's not configured properly? If we were still getting stats through with an empty container?\n\nI will ask our developers to take a look at the cookie banner and if anything has changed. \n\nLooks like GTM has been placed on all pages.",
                "author": "Electrical-Focus-753",
                "score": 1
            },
            {
                "body": "Very possible. Is there any way I can prove this was happening by looking at data before the change vs now? Any metrics that will illustrate double counting?",
                "author": "Electrical-Focus-753",
                "score": 1
            },
            {
                "body": "If bounce increased I would’ve thought there was double tagging (though the fix decreases pageviews and not sessions necessarily). \nBy proportion of landing pages, I meant are there certain landing pages that were there before but not anymore? Maybe there are pages that are not tagged with GTM",
                "author": "Kelagha",
                "score": 1
            },
            {
                "body": "If you are not using any blocking signals I don't think cookie banner affected this.\n\nPotentially, maybe devs can check on server hits and compare it to GA4?",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Thanks. When the changes first went live the Google tag wasn't added to GTM. I had a blank container. I've since added it in but the numbers don't seem to have changed over the past couple of weeks. I wonder if that points to a specific issue (the tag might've still been manually added in code in addition to the GTM code?) as otherwise I would have expected stats to either drop to zero during that period where there was a blank container, or to jump back up when I added the tag to the container. Instead it's all remained roughly the same in terms of stats.\n\nWe did also have our consent pop-up edited slightly in the same update but this I believe was just a content change to mention new cookies rather than change anything about the way it worked.",
                "author": "Electrical-Focus-753",
                "score": 1
            },
            {
                "body": "It's going to be difficult to prove unless you roll back the change, and then run tests to see if the gtag is executing twice on each page load, which you should be able to see in the console.",
                "author": "Taca-F",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737103891.0,
        "title": "Tags Blocked in Google Tag Console but Firing in GTM Preview Mode – Need Help Troubleshooting",
        "author": "Working_Ask_6036",
        "id": "1i3c6oz",
        "selftext": "Hi all,\n\nI’m encountering an issue where the tags in my Google Tag Manager (GTM) container appear to be firing correctly when tested in the GTM preview mode, but when I check the Google Tag Console, I see the following messages indicating that some tags are blocked:\n\n* Tags related to **cross-domain tracking** and **advertisement data** (e.g., Google Ads, Analytics, and custom tags) are being blocked.\n* The console reports issues with certain functions such as `__ogt_ads_datatos`, `__ogt_1p_data_v2`, and `__ogt_cookie_settings`.\n\nI’ve already checked the following:\n\n1. **Tag Configuration**: All tags seem configured correctly with proper IDs and triggers.\n2. **Triggers**: I’ve reviewed the firing conditions, and they seem accurate.\n3. **Preview Mode**: Tags fire as expected in GTM preview mode.\n\nDespite this, the Google Tag Console is showing the tags as blocked. Has anyone encountered similar issues? Any suggestions on what might be causing the tags to be blocked, or how I can resolve this?\n\nThanks in advance for your help!\n\n",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i3c6oz/tags_blocked_in_google_tag_console_but_firing_in/",
        "num_comments": 12,
        "comments": [
            {
                "body": "This issue usually happens when there's a conflict between your privacy/consent settings and the tag implementation. The fact that tags fire in preview but get blocked in production is a classic sign of this.\n\nFew things to check:\n\n1. Make sure you've implemented proper consent management - especially for ad-related tags. Those functions getting blocked (`__ogt_ads_datatos`, etc) are typically related to consent/privacy stuff\n\n1. For cross domain tracking - double check that both domains are properly configured in your GTM settings AND analytics property settings. Easy to miss one side\n\n1. Check if you're using any ad blockers or privacy extensions in your testing browser vs production\n\n1. Verify your GA4 configuration tag is firing before any other tags that depend on it\n\nWhat helped me solve this recently was implementing a consent management platform properly and making sure all advertising/analytics tags only fire after consent is granted. With b2b advertising specifically, getting this tracking setup right is super important for campaign optimization.\n\nhappy to share more specific tips if you need em - proper tracking setup makes a huge difference in campaign performance! lmk what u find when u check those items",
                "author": "thomascloarec",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Is the auto blocking in your consent management system turned on?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Have a look in the browser dev console. Are there any messages about \"content security policy\" blocking some scripts?\n\nIn which market does the website operate? You mentioned that the site doesn't seem to use a consent management platform. I assume that it's also not using Google's Consent Mode, which will be a problem for Google's products if you operate in EEA.\n\nYou mentioned that the tags fire in the preview mode, but when you are in the preview mode, also take a look at the dev console network tab. Do you actually see all the network requests firing and successfully sending data? The GTM preview mode debug window mainly just shows if the trigger conditions were successfully met, but in many cases it can't tell if the network request was actually successfully dispatched (especially when it comes to custom tags).",
                "author": "TG_AnalyticsEngineer",
                "score": 1
            },
            {
                "body": "Hey, what browser did you used for testing?\n\nI had the same problem and figured out, that microsoft edge seems to block something so that Google Ads fails. After switching to Google Chrome the Conversion Tags worked properly.",
                "author": "webdev_on_rails",
                "score": 1
            },
            {
                "body": "I am getting these same console errors dispute all tags firing as they should do.. Very strange!",
                "author": "Unlikely_Mechanic_98",
                "score": 1
            },
            {
                "body": "I added domains in Google tag cross domain configuration and in conversion linker tag Enabled linking cross domain tracking enter the website in auto link fields. Still it is same error in console.\n\nTag blocked: {function: \"\\_\\_ogt\\_cross\\_domain\", instance\\_name: \"\\_Tagging Activity Tag 16 Named Tagging Activity 7\", priority: 24, vtp\\_rules: , tag\\_id: 16}",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "I am not able to find any consent management system script on the website, I checked for custom script also but there is nothing on the website regarding cookie consent. Also looked into local storage and session storage.",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "The website is currently operating only in India. In browser dev console I see some warning messages about script getting blocked because Chrome is moving towards a new experience that allows users to choose to browse without third-party cookies. I checked the network requests and all are successful. I filtered the network request fir Gtag and collect and all have status 200 OK and content security policy: None.\n\nAnd in console this the warning message.\n\nCookies with the `SameSite=None; Secure` and not `Partitioned` attributes that operate in cross-site contexts are third-party cookies. Chrome is moving towards a new experience that allows users to choose to browse without third-party cookies.Learn more from the linked article about preparing your site to avoid potential breakage.\n\n1. Affected Resources\n   1. 62 cookies\n   2. 14 requests",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "I am using chrome and i did cross check in Edge and both browser shows the same thing. All my network request are successfull  and in Tag manager preview all tags are firing except in google tag console it shows those warning messages.",
                "author": "Working_Ask_6036",
                "score": 1
            },
            {
                "body": "All the requests that showed 200 OK in preview mode, what happens to those requests when you are not in GTM preview?",
                "author": "TG_AnalyticsEngineer",
                "score": 1
            },
            {
                "body": "I checked without GTM preview. Gtag, Collect and other requests has status 200 OK.\n\nThis is the message I am getting in console.\n\n1. This page tried to register an OS trigger using the Attribution Reporting API, but the request was ineligible to do so, so the OS trigger registration was ignored.A request is eligible for OS trigger registration if it has all of the following:Otherwise, any `Attribution-Reporting-Register-OS-Trigger` response header will be ignored.Additionally, a single HTTP redirect chain may register only all sources or all triggers, not a combination of [both.No](http://both.No) `Attribution-Reporting-Eligible` header or an `Attribution-Reporting-Eligible` header whose value is a structured dictionary that contains the key `trigger`An `Attribution-Reporting-Support` header whose value is a structured dictionary that contains the key `os`Affected Resources",
                "author": "Working_Ask_6036",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716299790.0,
        "title": "How do you deal with Shopify Checkout Update & GTM Tracking?",
        "author": "Megaboy5000",
        "id": "1cx8ikv",
        "selftext": "Hey there,\n\nas far as I know there is some kind of update coming to the Shopify checkout, which basically disables the field under Settings -> Checkout that was used up until now to add the GTM container, all kinds of scripts (dataLayer, consent tool...) and other tracking codes.\n\nAccording to Shopify, if you still want to use Google Tag Manager to set up tracking in that way, you'd have to use this relatively new feature called Customer Events, which basically implements the scripts via a sandbox environment, which means you cannot just copy/paste the whole script. Depending on what type of script you want to add you have to modify the javascript (remove script tags, add a few lines here and there...).\n\nThis is the documentation for implementing the GTM container and dataLayer events:\n\n[https://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels/gtm-tutorial](https://help.shopify.com/en/manual/promoting-marketing/pixels/custom-pixels/gtm-tutorial)\n\nI tried this two times on two different shops. While it was possible to add the GTM container in this way, I was just not successful with getting the dataLayer events implemented into the website even though I was exactly following the instructions.  \n\nWhat are your experiences with this whole issue? Does anybody have- or know of a code piece that I could add as a custom pixel that'll implement the GTM container and the whole e-ecommerce dataLayer? Would be greatly appreciated. In principal, I think it's great to have a possiblity of adding the e-comm. dataLayer without being dependent on a developer or buying an expensive plugin like Analyzify. Unfortunately it doesn't seem to work as expected.\n\nThanks a lot and best regards!\n\n",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cx8ikv/how_do_you_deal_with_shopify_checkout_update_gtm/",
        "num_comments": 31,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 3
            },
            {
                "body": "Hey, one of the issues we see most commonly when people are setting up GTM is they use GTM's preview mode to test their tags, and get no results. Unfortunately, GTM's preview mode isn't working with the sandbox at this time. Not as convenient, but for now some console.log statements can help you validate things are working.\n\nAlso, any dataLayer.push calls in your theme liquid files will need to be replaced by Shopify.analytics.publish so that the events can be pushed into the sandbox. Then, in the sandbox, subscribe to those events and push them into GTM using GTM's dataLayer.",
                "author": "Patient_Coconut_6773",
                "score": 2
            },
            {
                "body": "So you added GTM container via Customer Events (I was also successful in doing that) and then you added the e-comm. dataLayer via analytics.subscibe... and it worked, except for DebugViewer not working? When I added the analytics.subscribe... code to a custom pixel it didn't work. Did you make a lot of customizations or did you just copy/paste what's in the Shopify docs?\n\nDid you experience any issues with attribution, with Google Ads f.e., like some comment above suggested? Have you tried implementing a script with a source-attribute that loads a cookie consent tool on the thank-you page?\n\nMy problem at the moment is: I cannot accept any new projects for setting up tracking on Shopify if I cannot say with certainty that there is a way to implement all these scripts that before could be easily integrated via Settings -> Checkout and now might not work properly or at all because of the new sandbox environment. I also don't have the time to study the technicals of the sandbox environment in order to come to my own conclusion. Very annoying situation.",
                "author": "Megaboy5000",
                "score": 2
            },
            {
                "body": "When you talk about server-side tracking as an alternative, you're thinking about a setup that doesn't include a client-side GTM container at all, right? \n\nThe way I implement server-side tracking for my clients at the moment is that in which you set up GA4 tags in the client-side container, send them to a server-container (via transport\\_url parameter) and then from there, via GA4 Client + server-side tags, they get sent to the respective tool like GA4, Meta, Google Ads and so on. \n\nIn a world where GTM client-side tracking for Shopify isn't working anymore, this kind of server-side tracking probably work anymore either, right?\n\nI'd assume that Shopify did all this not because of security issues (although I have no insides into how often the field in Settings -> Checkout was used for hacks or fraud) but rather to kill a very well established and working method for implementing tracking that doesn't make them money and now they're basically supporting apps like Elevar from which they certainly benefit financially in various ways (dont' know if this is also true for the sales channels of Google, Meta and so on). If that's true, it's again one of these cases where a good product dies because there's a worse way of doing it that's more aligned with corporate interests - sad.",
                "author": "Megaboy5000",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yeah, the documentation is slightly lacking, so I also developed my own code template that has worked reliably so far. Feel free to share your code example that isn't working or DM and we can take it from there",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "What Shopify did actually makes a lot of sense, basically they don't allow you to run arbitrary scripts on the checkout page now which can undermine security and affect page performance. The problem is that currently most major platforms expose their functionality via a script you run on the page through GTM like Meta Ads, Google Ads, Google Analytics etc (basically all tags in GTM parlance) This will just stop working now. The sandbox alternative Shopify provides does not support all browser APIs so naturally even if you somehow manage to include GTM, a lot of tags would silently break. \n\nUnfortunately there is no complete solution on the client anymore for Google tag manager. You may be able to implement some tags but like I said, some functionality would silently break and a lot of tags would just not work anymore. \n\n The solution is to implement server side tracking and subscribe to important events like checkout, purchase etc on server side, then you can implement all the tags on server side to process these events. This is a bit more complex than the client side setup but it is (nearly) a 1 to 1 replacement with client side GTM setup. It also has the benefit to track important events which are not generated on website, for example order cancellations, refund etc. You could forward these events to Google Analytics 4 to get a complete picture of customer journey. \n\nHope this helps.",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "Yeah Checkout Extensibility nukes the scripts in Settings -> Checkout on the Order Status page, where a lot of people dropped snippets and GTM container code.🧑‍💻\n\n  \nThe way you linked in your OP is the correct approach.  You have to create a custom Pixel in Customer Events for GTM, and then add the GTM container code and the push events you want to tap into.  Then you need to update your GTM triggers and variables to match the data in those DL push events.\n\n  \nGTM preview mode won't work - which sucks.  But it does work - we've implemented it with a few clients already.",
                "author": "brett_fish",
                "score": 1
            },
            {
                "body": "I've already integrated 10+ stores recently with my dataLayer and it supports the checkout extensibility also session source are perfectly receiving to GA4, let me know if you need me to fix yours",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Is there a tutorial for the implementation? I am using GTM and and load Meta & Google Ads / Analytics via GTM.\n\nThanks",
                "author": "dekuSTAR",
                "score": 1
            },
            {
                "body": "We’ve created a free Shopify Data Layer app to address this. It resolves the issue of placing the data layer on the thank you page and simplifies the implementation process, even with sandboxed customer events. While Web preview mode no longer works, Server-Side preview mode still does.\n\n(We are creating Data Layers plugins / addons for al CMS platform so everyone can have a good data layer.)\n\nVideo how To Solve Checkout Extensibility Problem For GTM: [https://www.youtube.com/watch?v=9xuC88irWII&t=6s](https://www.youtube.com/watch?v=9xuC88irWII&t=6s)",
                "author": "TAGGRS_io",
                "score": 1
            },
            {
                "body": "hi, i know i'm kinda late to the thread, but i'm having huge issues with consent mode, we are using simo ahava's consent mode tags to set the statuses, but they seem to break (?) and i see all the networks request sent with no gcs and gcd=13l3l3l2l1l1. it kinda breaks the whole tracking, any insight would be extremely usefull, thanks!",
                "author": "Longjumping-Smile796",
                "score": 1
            },
            {
                "body": "Hey, I wrote an article explaining how to setup GTM dataLayer in Shopify: [https://data-marketing-school.com/en/blog/google-tag-manager/shopify-datalayer/](https://data-marketing-school.com/en/blog/google-tag-manager/shopify-datalayer/)",
                "author": "lucas-dms",
                "score": 1
            },
            {
                "body": "u/Megaboy5000 \n\nIf you're still struggling, feel free to read this comprehensive tutorial: [https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify)\n\nIf you also want to handle consent on Shopify (including Google Consent Mode v2), checkout this one out: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Thanks for your reply: I just saw there is another thread on this: [https://www.reddit.com/r/GoogleTagManager/comments/166qdgi/comment/l50vgny/?context=3](https://www.reddit.com/r/GoogleTagManager/comments/166qdgi/comment/l50vgny/?context=3)\n\nSomeone over there told me that even if you're successful in adding the GTM container via Customer Event (I was able to do that) and make the dataLayer events work (that didn't work when I was briefly trying it according to the docs) then f.e. a simple thing like Google Ads conversion tracking wouldn't work because of the sandbox environment messing up attribution. If this is true, GTM tracking on Shopify is basically dead. What are your thoughts on this?",
                "author": "Megaboy5000",
                "score": 1
            },
            {
                "body": "I found this video very informative:  \n[https://youtu.be/krFHfkiANjc](https://youtu.be/krFHfkiANjc)\n\nThe speaker, Benjamin, also alludes to this issue. Do you know if this preview mode issue is documented anywhere? I believe it is due to pixel sandboxing, but I am not sure.\n\n  \nedit: nvm, I found more about it here: [https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify)",
                "author": "xorlop",
                "score": 1
            },
            {
                "body": "I am dealing with the same issue here and its been driving me crazy! Having our web dev tweak the code to test it in preview mode.....NOTHING IS WORKING. I sent you a dm lol",
                "author": "Man-Zoe",
                "score": 1
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 1
            },
            {
                "body": "Please tell me how to create custom pixel for elevar chechkout,is there any additional code to be added or it works out of the box?",
                "author": "Safe-Building3185",
                "score": 1
            },
            {
                "body": "hello how can I contact you?",
                "author": "Maximum-Asparagus940",
                "score": 1
            },
            {
                "body": "hi, how can i contact you for the solution?",
                "author": "Human_Advantage_8548",
                "score": 1
            },
            {
                "body": "u/dekuSTAR  this is the most comprehensive tutorial on this topic out there: [https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify)\n\nIf you also want to handle consent on Shopify (including Google Consent Mode v2), checkout this one out: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "what CMP are you using?",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "Yeah I guess but most major platforms have app integrations for Shopify that you can use to track purchases. And GTM would still work outside the checkout process so you can track clicks & forms etc just fine. Do wonder how server side would work if you cannot use GTM for purchases.",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "u/Man-Zoe \n\nThis is the most comprehensive tutorial on this topic out there: [https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify](https://www.analyticsmania.com/post/install-google-tag-manager-and-ga4-on-shopify)\n\nIf you also want to handle consent on Shopify (including Google Consent Mode v2), checkout this one out: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            },
            {
                "body": "I am assuming OP wanted to use Google Tag Manager to centralize tag management. It's a more customizable setup as well, for example let's say you want to redact PII from a URL or IP address before forwarding the hit to Google Ads or Google Analytics 4 for compliance, I don't think functionalities of this kind will be easy to implement with the direct integration. \n\nSecond is tracking server generated events like refunds, order cancellations which can't be tracked client side.",
                "author": "GullibleEngineer4",
                "score": 1
            },
            {
                "body": "I pinged you",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Hi, we are using iubenda, to my knowledge it has been adapted to the new checkout by another agency, but unfortunately they are non collaborating on the matter. the cookie is transferred fine, but it does not seem to help",
                "author": "Longjumping-Smile796",
                "score": 1
            },
            {
                "body": "u/Longjumping-Smile796 not sure about Iubenda, but we've developed Cookifi, which works seamlessly with Shopify and custom pixels. You can reference this article: [https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm](https://karolkrajcir.com/post/ga4-consent-based-conversion-tracking-on-shopify-with-custom-pixels-cookifi-gtm)",
                "author": "puk789",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1745421560.0,
        "title": "Issued with Hubspot CMP Config",
        "author": "Happy_Little_Leaves",
        "id": "1k61sqc",
        "selftext": "Hi everyone!\n\nI’ve been implementing Consent Mode using GTM in conjunction with HubSpot’s cookie banner. Most of the integration seems to work except for one major issue that I haven’t been able to resolve:\n\nProblem:\nConsent values are getting overwritten when a user accepts cookies—even though U.S. visitors should default to “granted.” Instead, the values are either not being set correctly at page load, or they’re being overwritten after a user clicks “Accept.” As a result, GA4 tags are firing inconsistently, and Consent Mode isn’t behaving as expected.\nHere’s what I’ve done so far:\n\n \nSet up HubSpot CMP using their native cookie banner with separate categories for marketing, analytics, functional, etc.\nConfigured GTM with a Consent Initialization Tag to run before any other tags:\njavascript\nCopyEdit\ngtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': 'denied', 'functionality_storage': 'denied', 'personalization_storage': 'denied', 'security_storage': 'granted' });\nEnabled “Respond to Global Privacy Control” in the HubSpot banner settings to respect user browser signals.\nTested behavior in GTM Preview Mode and confirmed:\nConsent values are initially set correctly when the page loads.\nBut once a user interacts with the banner and accepts cookies, the values are being overwritten instead of updated according to category selection.\nThis happens even when no GTM tags are firing at the moment of consent.\nChecked for firing tags and no conflicting tags or triggers seem to be running when the overwrite occurs.\nConfirmed U.S. visitors should be opted in by default, per agency recommendation—but this doesn’t appear to be happening. The defaults are still being treated as denied.\n\nQuestions:\nHas anyone else seen HubSpot CMP override Consent Mode values after interaction?\nHow can I stop consent states from being overwritten when a user accepts?\nIs there a recommended way to intercept or preserve the values during/after banner interaction?\nCould this be a sequencing issue between HubSpot and GTM tags?\n\nAny help would be hugely appreciated—thank you in advance! ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1k61sqc/issued_with_hubspot_cmp_config/",
        "num_comments": 2,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Could you share a preview link of your container?",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743413956.0,
        "title": "GTM installed on my website but Analytics isn't receiving data",
        "author": "crpl1",
        "id": "1jnzcc7",
        "selftext": "Hi! I think this is a pretty simple problem to solve.\n\nHere's the situation:  \nInitially I listened to the analytics of my website through a Google Tag (when you open Google Tag Manager you have two tabs: Account and Google Tags. I had one in Google Tags) I created, that was connected to both Google Ads and Google Analytics. It was working fine, until I had to implement consent.\n\nI created a Google Tag Manager container where I put a custom HTML tag from Sliktide (not relevant) and, after testing it in preview, it worked correctly. Then I was worried because I thought that the Google Tag I had linked to Ads and Analytics was sending data even though the user didn't consent, so I deleted that Google Tag and created one inside the container linked to my measurement id G-BLABLABLA that gets activated only when the user consents, but when I test it (by going, for example, on my website and doing some things, even with a VPN to be sue it doesn't get filtered) I don't get anything in Analytics.\n\nJust to be clear: on my website I only have my GTM-BLABLA tag installed, not any other ID.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jnzcc7/gtm_installed_on_my_website_but_analytics_isnt/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Yes. I solved it BTW. The problem was that I added the Google Analytics stream code when I needed to add the Google Tag that I deleted",
                "author": "crpl1",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I know is a silly question. Did you publish the container?",
                "author": "Chjji22",
                "score": 1
            },
            {
                "body": "Make sure to turn off your Adblock extension if you're using one.",
                "author": "jen-j",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1729483111.0,
        "title": "Google Ads Tag Not Receiving User ID from GTM Data Layer",
        "author": "balamz",
        "id": "1g8h2g5",
        "selftext": "I'm currently working on passing the User ID to Google Ads using Google Tag Manager (GTM). I've successfully configured the data layer to pass the User ID, and I can see this working correctly in GTM's preview mode, as shown in the screenshot below:\n\n[https://imgur.com/7lEkFcO](https://imgur.com/7lEkFcO)\n\nHowever, the User ID does not appear to be pushed into Google Ads. I've followed the steps to configure the Google Ads tag to capture the User ID, but it seems like something is missing or incorrectly set. Here are the steps I've taken so far:\n\n1. Configured the data layer to include the User ID.\n2. Verified in GTM preview mode that the User ID is being passed correctly.\n3. Set up the Google Ads tag to include the User ID variable. [https://imgur.com/FU4kjxb](https://imgur.com/FU4kjxb)\n4. I have setup google tag to pass user\\_id into google Analytics: [https://imgur.com/uk3lnW4](https://imgur.com/uk3lnW4)\n5. I have checked in the debug mode in google analyrics to see if i can find the User ID. But i cant find the ids getting populated there\n\nDespite these steps, the User ID is not showing up in Google Ads.\n\nWhat could be the possible reasons for this issue?\n\n1. Could there be an issue in when i am triggering the tags?\n2. Are there any specific debugging steps i can follow?\n\n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g8h2g5/google_ads_tag_not_receiving_user_id_from_gtm/",
        "num_comments": 18,
        "comments": [
            {
                "body": "You're triggering the Google Tags and Google Ads tags on initialization, but if I'm to go by your pictures the user_id isn't populated until the next event.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Yep this is right. OP you don't want anything other than cookie consent banners firing at initialisation (consent should actually firing on *consent* initialisation), and in this case it's just too early for the user_id to be available to the tag.\n\nAre you in a region that requires user opt-in for tracking?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "No, Opt-in isnt needed in my region.",
                "author": "balamz",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hi, just for me to understand, where do you expect to actually see the user id in google ads? Also whats the goal of feeding google ads with user id? (Not saying this is not relevant, just genuinely trying to understand)",
                "author": "NectarineNo4155",
                "score": 1
            },
            {
                "body": "You can't use a Google Ads tag to send data to a GA4 account. You need to use the GA4 Google tag and include the user\\_id in the event parameter \"user\" section at the bottom. \n\nadd \"user\\_id\" in this location and GA4 will see the user ID.   Google Ads just uses the userID to match within it's own google ads conversion algorithm.",
                "author": "aaronebennett",
                "score": 1
            },
            {
                "body": "Your first pageview in GA4 won't Have user id. But subsequent pageviews should, the way this is set up.\n\nBut you've saying nothing in GA4 has it. Which impmies a deeper problem.\n\nTo solve this, the data layer retrieval needs to happen before pageview, and you can adjust the trigger on the data layer\n\nPlus, there's a \"fire this tag before\" setting in the Google tag that should be considered.\n\nOnce you got that as a variable, there's no reason to fire the get user id tag beyond one time.\n\nI'm addressing the GA4 angle because that's what I know.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "You state that you're pushing user id to the data layer.  Why are you doing that?  Get rid of that because it's unnecessary.\n\nPushing that value to the data layer implies that you have that value ready somehow. Where are you getting it?\n\nUpdate Google tag with the variable that you're pushing to the data layer to simplify this steaming mess.\n\nThe Google tag should handle both GA4 and Ads. If the two are connected.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "**GA4 Flow:**\n\n1. I have updated the GA4 Google Tag to trigger on DOM Ready. ([https://imgur.com/jnOhdeM](https://imgur.com/jnOhdeM))\n\n2. In the debug view, I can see the DataLayer event I triggered, \"factorsUserIdTrack,\" and the userID is accurately pushed into the DataLayer. ([https://imgur.com/cI0EzoX](https://imgur.com/cI0EzoX))\n\n3. The \"Custom User ID\" appears in the pageview tag. ([https://imgur.com/ibHiwbL](https://imgur.com/ibHiwbL))\n\n4. I created another custom event, \"factorsUserVisit,\" with user\\_id as a user property. I also tried removing this step to see if it would resolve the issue, but it didn't. ([https://imgur.com/AD9ySC0](https://imgur.com/AD9ySC0))\n\n5. In the analytics debug view, I don't see the user\\_id. ([https://imgur.com/Hv90ela](https://imgur.com/Hv90ela))\n\n**Google Ads Flow:**\n\n1. I updated the Google Ads tag to trigger on DOM Ready. ([https://imgur.com/PNQlaPd](https://imgur.com/PNQlaPd))\n\n2. The tag is loading after DOM Ready, as expected. ([https://imgur.com/wjlq6VD](https://imgur.com/wjlq6VD)) The userID is present in the parameters sent to Google Ads. ([https://imgur.com/xiCLmAg](https://imgur.com/xiCLmAg))\n\n3. I created an audience in Google Ads by uploading the UserIDs as a CSV, but it is not getting populated.",
                "author": "balamz",
                "score": 1
            },
            {
                "body": "So i am capturing these user ids that i am passing to GTM too. I am building an audience in google ads based on these user Ids. In theory, this should work.",
                "author": "balamz",
                "score": 1
            },
            {
                "body": "Hey, I have done just that\n\n**GA4 Flow:**\n\n1. I have updated the GA4 Google Tag to trigger on DOM Ready. ([https://imgur.com/jnOhdeM](https://imgur.com/jnOhdeM))\n\n2. In the debug view, I can see the DataLayer event I triggered, \"factorsUserIdTrack,\" and the userID is accurately pushed into the DataLayer. ([https://imgur.com/cI0EzoX](https://imgur.com/cI0EzoX))\n\n3. The \"Custom User ID\" appears in the pageview tag. ([https://imgur.com/ibHiwbL](https://imgur.com/ibHiwbL))\n\n4. I created another custom event, \"factorsUserVisit,\" with user\\_id as a user property. I also tried removing this step to see if it would resolve the issue, but it didn't. ([https://imgur.com/AD9ySC0](https://imgur.com/AD9ySC0))\n\n5. In the analytics debug view, I don't see the user\\_id. ([https://imgur.com/Hv90ela](https://imgur.com/Hv90ela))\n\n**Google Ads Flow:**\n\n1. I updated the Google Ads tag to trigger on DOM Ready. ([https://imgur.com/PNQlaPd](https://imgur.com/PNQlaPd))\n\n2. The tag is loading after DOM Ready, as expected. ([https://imgur.com/wjlq6VD](https://imgur.com/wjlq6VD)) The userID is present in the parameters sent to Google Ads. ([https://imgur.com/xiCLmAg](https://imgur.com/xiCLmAg))\n\n3. I created an audience in Google Ads by uploading the UserIDs as a CSV, but it is not getting populated.",
                "author": "balamz",
                "score": 1
            },
            {
                "body": "Is Consent mode televant here?",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "First of all, where are you getting the `User ID` from? If the value originates from a cookie or other browser storage then the value should be immediately available to you. If this is the case I would scrap the event that pushes the value to the `dataLayer` and instead create a variable that immediately accesses the `User ID` from wherever it is stored. This will allow you to trigger your tags on `Container Loaded` instead of waiting for `DOM Ready`.\n\n\nSecond, why am I seeing 2 unique `Container Loaded` events in your preview? There should only be one. Something is not right with your implementation.\n\n\nAs for your list:\n\n**GA4**\n\n5. You are looking at event properties. There is a tab right next to it for user properties. Have you checked that the value shows up there?\n\n\n**Google Ads**\n\n3. What do you mean by not getting populated? Populated with what? This seems like a different issue than the tag setup as the `User ID` is clearly being populated and sent to Google Ads according to your screenshots.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "The first image shows the user I’d in the wrong location. Edit the event parameter template and at the bottom there is a section for user parameters put “user_id” not userID or other and then your value.",
                "author": "aaronebennett",
                "score": 1
            },
            {
                "body": "You're lucky, it takes a bit of getting used to if you're in Europe!",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "You hit the issue exactly about how he's getting user id...but i dont see a response.  I'm theorizing that he meant that the developers placed it there for him to retrieve.  If he put it there. He has additional problems.\n\nUserid is usually a user attribute, but it could be added as event scope too, unless im missing something.",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "I have responded with my flow in the thread. Would be great if you can guide",
                "author": "balamz",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1743621112.0,
        "title": "Custom domain sGTM and Google Ads Remarketing not working",
        "author": "Fit_Statement_428",
        "id": "1jpx18u",
        "selftext": "Hi everyone!\n\ntldr; If I’m serving the GTM / GA4 files from my domain Google Ads sGTM does not emit server or browser events\n\nCould you please help me make my sGTM Google Ads working properly.\n\nI'd really appreciate your help!\n\n***Background:***\n\nI’m setting up a Google Ads Remarketing Tag via Google Tag Manager to send events. But I just can't make it work.\n\nI’m planning to use server-side gtm setup with my custom domain to serve files, aka ~~first-party mode~~\\[edited\\] **First-party serving (same-site, cross-origin)**.\n\n***Ideal setup***\n\nMy ideal setup would look like:\n\n* ***wGTM***\n   * GTM is served via [https://my.domain.com/gtm.js?id=GTM-ABC](https://my.domain.com/gtm.js?id=GTM-ABC)\n   * GA4 is served via [https://my.domain.com/gtag/js?id=G-XYZ](https://my.domain.com/gtag/js?id=G-XYZ)\n* ***sGTM***\n   * Google Ads\n\nWhat I also tried:\n\n* ***wGTM***\n   * GTM is served via [https://my.domain.com/gtm.js?id=GTM-ABC](https://my.domain.com/gtm.js?id=GTM-ABC)\n   * GA4 is served via [https://my.domain.com/gtag/js?id=G-XYZ](https://my.domain.com/gtag/js?id=G-XYZ)\n   * Google Ads is served via [https://my.domain.com/gtag/js?id=AW-123](https://my.domain.com/gtag/js?id=AW-123)\n\nI tried these setups for Google Ads, and it's not working as I expect. Tag firing, tag success, but no requests emitted within server / browser.\n\n**However:** If I’m serving ALL the mentioned files from [googletagmanager.com](http://googletagmanager.com), everything seems to be working fine, and I see Google Ads Server ***Outgoing HTTP Requests from Browser***  requests to [doubleclick.net](http://doubleclick.net)\n\nSo these 2 setups are works fine\n\n***Setup 1***\n\n* wGTM\n   * GTM [https://www.googletagmanager.com/gtm.js?id=GTM-XYZ](https://www.googletagmanager.com/gtm.js?id=GTM-XYZ)\n   * GA4 [https://www.googletagmanager.com/gtag/js?id=G-ABC](https://www.googletagmanager.com/gtag/js?id=G-ABC)\n   * Google Ads [https://www.googletagmanager.com/gtag/js?id=AW-123](https://www.googletagmanager.com/gtag/js?id=AW-123)\n\n***Setup 2***\n\n* wGTM\n   * GTM [https://www.googletagmanager.com/gtm.js?id=GTM-XYZ](https://www.googletagmanager.com/gtm.js?id=GTM-XYZ)\n   * GA4 [https://www.googletagmanager.com/gtag/js?id=G-ABC](https://www.googletagmanager.com/gtag/js?id=G-ABC)\n* sGTM\n   * Google Ads\n\nBut I need my ideal setup to make it work.",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1jpx18u/custom_domain_sgtm_and_google_ads_remarketing_not/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I have a similar problem with GA4. Sometimes the request goes through my domain, other times it goes through analyct.google.com.",
                "author": "realroboto",
                "score": 1
            },
            {
                "body": "The reason for that behavior was the absence of necessary consent for GTM, once we implemented default consent similar to [https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#manual-configuration](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#manual-configuration)\n\nGoogle Ads started to work properly in wGTM and sGTM.\n\nWe deleted Google Ads Remarketing tag from wGTM, and now only sGTM exists.",
                "author": "Fit_Statement_428",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1736974259.0,
        "title": "GA4 vs Google Tag: Attribution Discrepancies Despite Identical Settings - What's Going On?",
        "author": "adamfard",
        "id": "1i27fwd",
        "selftext": "I'm experiencing confusing behavior with conversion tracking between GA4 and Google Tag, and I'd appreciate your insights.\n\n**Current Setup:**\n\nGA4 conversion events imported into Google Ads\n\nGoogle Ads conversion tracking tag implemented on website + GTM (server)\n\nServer-side tracking sending events to both platforms on purchase events.\n\n**GA4 Settings:**\n\n* Count: Every conversion\n* Click-through window: 30 days\n* Engaged-view window: 3 days\n* Attribution: Data-driven / Scope: Google paid channels\n\n**Google Ads Tag Settings:**\n\n* Count: Every conversion\n* Click-through window: 30 days\n* Engaged-view window: 3 days\n* View-through window: 1 day\n* Attribution: Data-driven / Scope: Google paid channels\n\nDespite nearly identical settings, I'm seeing significant differences in attribution. I went through my server events and saw this:\n\n**Google Ads Tag:**\n\n* Only attributes conversions when gclaw cookie is present\n* Seems more conservative in attribution\n\n**GA4**\n\n* Attributes through client id (I assume)\n* Attributes some conversions to ads even without gclaw cookies\n* Attributes conversions even when referring URL lacks UTM parameters = I can't tell if they are from ads or organic search\n* Shows higher conversion numbers in Google Ads than the Google tag\n\nI do have purely organic conversions not reported in google ads, so something else is going on here.\n\n**Questions:**\n\n* Why is GA4 attributing conversions more liberally despite similar settings?\n* Which tracking method should I trust for accurate ad performance?\n* What's the best practice for handling these discrepancies?\n\nWould love to hear from others who've dealt with similar situations or have technical knowledge about how these attribution models differ.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i27fwd/ga4_vs_google_tag_attribution_discrepancies/",
        "num_comments": 9,
        "comments": [
            {
                "body": "Google treats the UK the same as EU even though the UK isn't in the EU anymore. Caused a lot of pain when CoMo v2 came out last year.",
                "author": "goodgoaj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Modelled conversions for non consented users?",
                "author": "TedTheTopCat",
                "score": 1
            },
            {
                "body": "In GA4 can be influenced with cookie scope ... channel grouping ... etc [https://dmcinsight.com/attribution-modelling/](https://dmcinsight.com/attribution-modelling/)",
                "author": "SpecialistScarcity47",
                "score": 1
            },
            {
                "body": "That's a super common and frustrating issue, so you're definitely not alone in seeing these attribution discrepancies.\n\nIt sounds like you have a solid server-side setup, which is the best foundation, but let's dive into the likely reasons why GA4 is being more liberal and what you can do about it.\n\nThe core reason GA4 is attributing more liberally, especially without the `gclaw` cookie, is that GA4 uses Identity Resolution and Conversion Modeling which the standard Google Ads Tag does not.\n\nThe Google Ads Tag primarily relies on first-party cookies, specifically the `gclaw` (Google Click ID) and other click IDs, to link the ad click to the conversion.\n\nIf the `gclaw` cookie is blocked, expires, or the user switches devices, the Google Ads Tag can lose that signal.\n\nGA4, however, employs a user-ID (if implemented), Google Signals (cross-device/cross-platform), and device ID (client ID on the web) to create a more holistic user journey.\n\nWhen it can't observe a direct link, its Data-driven attribution model uses machine learning to model conversions, estimating conversions that would have occurred but for privacy restrictions, linking them back to an ad interaction even without the direct `gclaw` proof.\n\nThis explains why GA4 attributes conversions to ads even without the cookie and without strong UTM parameters - it's using internal signals or modeling to make the connection.\n\nYour observation that GA4 attributes via client ID (or Google Signals) and shows higher numbers is a direct result of this broader, modeled approach, which is why your organic conversions aren't being reported in Google Ads; Google Ads is only concerned with Google-paid channel interactions and their associated conversion value.\n\nRegarding which method to trust, generally, you should use the Google Ads Tag/API data for optimizing Google Ads performance.\n\nGoogle Ads is a self-attributing platform, meaning its data is what your bidding algorithm sees and uses.\n\nFor accurate ad performance, especially for bidding, the Google Ads Tag (or its server-side equivalent) is the primary source of truth for the platform itself.\n\nYou should use the GA4 data for a broader cross-channel understanding of the user journey, how Google Ads is assisting other channels, and a full-funnel view.\n\nThe best practice for handling these discrepancies and ensuring the most accurate data for Google Ads is to transition your tracking to include the Google Ads Conversions API (CAPI), implemented server-side.\n\nA great solution for this is to use Google Tag Manager (server-side container) hosted on a service like Stape.io.\n\nThis setup is superior because you send the conversion data *directly* from your server to Google Ads using the API.\n\nHere's why Google Ads CAPI + Google Tag Manager + Stape.io is the solution:\n\n* Bypasses Browser Restrictions: By sending the data directly from your server (via Stape's managed cloud environment), you bypass many client-side issues like ad blockers and aggressive browser cookie policies that affect the client-side Google Ads Tag.\n\n* Maximizes `gclaw` Preservation: In the server environment, you have more control over the first-party cookies, and Stape's Cookie Keeper feature can help extend the life of essential identifiers like `gclaw` beyond what the browser might allow, improving the match rate.\n\n* Enhanced Conversions: The server-side Google Ads tag allows you to easily implement Enhanced Conversions.\n\nThis means you can securely send hashed first-party user data (like email address) along with the conversion.\n\nThis user data is used by Google to significantly improve the match rate between an ad click and a conversion, especially across devices or when the `gclaw` is unavailable.\n\nThis is crucial for minimizing the data loss the standard Google Ads Tag is experiencing.\n\nSingle Source of Truth (Server): With this setup, your server is the central point for the `purchase` event, and it reliably dispatches the data to *both* GA4 and Google Ads, reducing the risk of one platform failing to track the event correctly while the other succeeds.\n\nIf you implement the Google Ads tag server-side and activate Enhanced Conversions, you'll see your Google Ads conversion numbers rise and the discrepancies narrow, giving you a more complete picture of your ad performance directly within the platform.",
                "author": "Mental_Elk4332",
                "score": 1
            },
            {
                "body": "Oh… but isn’t that only for EU? \nMy campaigns are targeting US, UK and AUS",
                "author": "adamfard",
                "score": 1
            },
            {
                "body": "UK privacy law is based on EU GDPR, etc. What about CCPA in California, etc? Australian APA requires a cookie banner.",
                "author": "TedTheTopCat",
                "score": 1
            },
            {
                "body": "Does google enforce those regulations when tracking (= hide data if no consent signal)? \n\nI only received a GA4 notification regarding consent for EU users.",
                "author": "adamfard",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739361637.0,
        "title": "Large discrepancy in conversions/revenue between Google Ads pixel and GA4 - What could be the reason?",
        "author": "Automatic_Cobbler702",
        "id": "1inp5vy",
        "selftext": "Hi!\n\nHave been experiencing a quite frustrating issue regarding reported conversions/conversion value between GA4 and Google Ads.   \n  \nWould appreciate any ideas/help regarding possible reasons and solutions, as I can't see that the discrepancy is caused by how GA4 and Google Ads counts conversions. \n\n**Background**  \n\\- We are an ecommerce with two websites for country X and country Y.   \n\\- The platforms for both websites should both be identical  \n\\- All tags and triggers in GTM also appear to be identical  \n\\- The same attribution model + window is used.   \n\\- Enhanced conversions + consent mode is set-up in both markets  \n\\- When using GTM preview mode and making test purchases, both GA4 transaction and Google Ads pixel seeem to be triggering correctly on the same event (\"purchase\") with correct values.  \n\\-  There is only one Google Ads pixel set up as \"primary\" in both accounts.\n\n\\- Auto-tagging is enabled  \n\\- Can't see any differences in the set-up in GA4 or Google Ads that is different between the countries.\n\n**Issue**  \n**-** For country X - the discrepancy between Google Ads pixel conversions and imported GA4 transactions is typically between 5-10%. \n\n\\- However, for country Y the discrepancy is very high and the Google Ads pixel typically reports roughly twice the number of conversions + conversion value as GA4.  \n  \n\\- So what I am seeing is that conversions + conversion value are being recorded by GA4 but it seems that it misses a significant amount.\n\n\\- What I find strange is that the technical set-up for both country X and Y seem to be identical, but for some reason, there is a big discrepancy in country Y. \n\n  \nWould appreciate if anyone could give me some pointers on what to investigate further and/or if anyone has experienced a similar situation. \n\n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1inp5vy/large_discrepancy_in_conversionsrevenue_between/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Are you looking at attributed numbers or pure pixel fires? Quite normal to see more on Google Ads vs GA4 based on how attribution works.\nGoogle Ads only sees itself to dedupe, GA4 will see organic/direct/referral/utm traffic etc so last click is less",
                "author": "goodgoaj",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "That’s a tricky issue! Since both setups are identical, the discrepancy could be due to differences in user consent behavior between the two countries. If users in country Y reject tracking cookies more often, GA4 may miss conversions while Google Ads (using modeled data) still attributes them.\n\nYou could also check for cross-domain tracking issues, browser restrictions, and possible tag firing delays in GA4. A great alternative is Qwestify, which doesn’t rely on cookies and can provide more reliable conversion tracking. Hope this helps!",
                "author": "the-fire-in-me",
                "score": 1
            },
            {
                "body": "GA4 is a last click model, Adwords conversion pixel is a window of time after view/interaction. It would be helpful if you mentioned both country X and Y as this seems to be the only differential factor.\n\nRoughly twice the GA4 is the correct amount (check your conversion window in Google ads). So look for errors in the setup that says its about the same.",
                "author": "Mysterious_Swan_9941",
                "score": 1
            },
            {
                "body": "That's a frustrating situation, and it's definitely not uncommon to see discrepancies, though the magnitude you're describing for country Y is certainly unusual.\n\nThe fact that the setup seems identical but the results are so different points to something more subtle than a basic configuration error.\n\nA few things to investigate that might explain the difference:\n\nFirst, let's look at the data collection itself.\n\nSince you've confirmed that the tags are firing correctly in GTM Preview mode, the issue might be happening after the data is sent.\n\nAre there any differences in user behavior or network conditions between country X and country Y?\n\nFor example, is there a higher rate of ad blockers or a different distribution of browsers being used in country Y?\n\nAd blockers can sometimes block the GA4 script but not the Google Ads script, or vice versa, leading to a discrepancy.\n\nNext, consider the cookie and consent settings.\n\nWhile you mentioned consent mode is set up in both markets, are the consent banners or how users interact with them different?\n\nEven subtle differences in the wording or placement of the banner could lead to different opt-in rates, which in turn could affect how many conversions are actually tracked and sent to GA4.\n\nIt's possible that in country Y, more users are declining analytics cookies but still having the Google Ads conversion pixel fire due to a different consent category or a technicality.\n\nAnother area to check is the dataLayer implementation. \n\nWhile the GTM setup might be identical, are the dataLayer pushes themselves truly identical and consistent across both sites?\n\nA small difference in how the purchase event data is pushed to the dataLayer could cause GA4 to miss the transaction.\n\nFor example, a missing or incorrectly formatted `transaction_id` or `value` field for some purchases in country Y could cause GA4 to drop the event, while the Google Ads pixel, which might be configured to grab the value from a different source or has a more forgiving setup, still captures it.\n\nThe GA4 `purchase` event is based on the data sent to it, and if that data is incomplete or malformed for some reason, it won't count.\n\nIt's also worth double-checking that there isn't another GA4 event being triggered as a conversion action in Google Ads that's inflating the numbers.\n\nYou mentioned only one Google Ads pixel is primary, but it's always good to be certain there isn't a secondary conversion action that's counting.\n\nFinally, while you have a native integration for GA4 and Google Ads, you could also consider using a server-side solution to send conversions directly from your server to both GA4 and Google Ads.\n\nThis method can often improve the accuracy of conversion tracking by bypassing client-side issues like ad blockers and flaky connections.\n\nA solution like a Google Ads API (conversion API) combined with Stape.io and Google Tag Manager + dataLayer would be a way to have more control over the data being sent to each platform.\n\nThis ensures that the same data is sent to both GA4 and Google Ads from a reliable source.",
                "author": "Mental_Elk4332",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732025092.0,
        "title": "Problem with Conversion Tracking in Google Ads\n",
        "author": "Longjumping_End5693",
        "id": "1guxvp2",
        "selftext": "Hello everyone,\n\nI am seeking your expertise regarding a recurring issue with conversion tracking on Google Ads. We are using Google Tag Manager (GTM) to send conversion events when our customers submit forms after clicking on a Google Ads advertisement. Despite verifications from Google and a service provider, no conversions are being reported to Google Ads (GADS) and the various objectives. Tagging errors have been ruled out. We use OneTrust as a Consent Management Platform (CMP) - could this be related to a configuration? Is it a setting in Google Ads? Or in GA4? Do you have any leads?\n\nThank you for your help. \n\nPS: The site is a WordPress site with WooCommerce.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1guxvp2/problem_with_conversion_tracking_in_google_ads/",
        "num_comments": 12,
        "comments": [
            {
                "body": "The issue with the Consent Mode could be a reason. Among onther things, probably.  \n\\- Clear the cookies and run the \"preview\" (in the upper right corner of your dashboard) in the GTM (having tag assistant browser plugin installed won't hurt). Open the ladnign page.\n\n\\- the new tab will open (if not, make sure you don't block the poping windows)\n\n\\- accept (or don't) consents and convert as a user would (submit the form)\n\n\\- go back to the previous tab, in the left menu you have a \"summary\" with all steps that was recorded. Click one by one from buttom to up, and look what tags triggered and what didn't trigger.\n\n\\- When you find one that you think should but didn't, click on it to investigate one. If it's a consent setting, it'll be pretty explicit \"Tag blocked by consent mode\", or something like that.",
                "author": null,
                "score": 4
            },
            {
                "body": "Okay, have to got Google Consent Mode set up in both Google Tage Manager and OneTrust?",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What are you based?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Check if your version of GTM container is submited and make sure in „Versions” tab it’s actually live. \n\nRecently I had similar issue and ended up with not enough high level of access to publish changes to the live state… wasted like 20 hours debugging it",
                "author": "Cotusie",
                "score": 1
            },
            {
                "body": "Thanks for your feedback. All my tags are triggering correctly but nothing is coming up in Gads. Conversions remain at 0. But the paid ads coming from GA4 are going up with the conversion. I can't find the root of the problem.",
                "author": "Longjumping_End5693",
                "score": 1
            },
            {
                "body": "Europe",
                "author": "Longjumping_End5693",
                "score": 1
            },
            {
                "body": "Thanks for your reply. My version of the GTM container is submitted and the version tab is online...",
                "author": "Longjumping_End5693",
                "score": 1
            },
            {
                "body": "\"Conversions remain at 0. But the paid ads coming from GA4 are going up with the conversion\"\n\nI didn't get this part. The 0 conversions is in the Google Ads reports, but the in the Google Analytics you see the conversions going up? For the same conversion?",
                "author": null,
                "score": 1
            },
            {
                "body": "Damn, Europe is hard on consent.\n\nLuckily I am in the US and don't need consent.",
                "author": "fappingjack",
                "score": 1
            },
            {
                "body": "I am in Europe and wondering about consent in US. The rules are changing over there right? As in, \"politics are looking into it?\" Or is just one or two states?",
                "author": "MisterMarcoo",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738244975.0,
        "title": "No conversion events counted in GA4 after installing server-side TikTok Events API with Google Tag Manager",
        "author": "Suspicious_Cut_9050",
        "id": "1idncw5",
        "selftext": "Hi there\n\nI am having issues after installing server-side TikTok Events API with Google Tag Manager. After installing the events/Conversions in Ga4 are gone so they are not being sent to GA4. \n\nStrange thing is that when I go in GTM preview mode it still fires all the tags I once implemented for GA4. But somehow they are missing in GA4. \n\nAlso strange is that my Meta Pixel and TikTok Pixel seem to work so in their Events Manager I can see those conversions and events. \n\nOther thing I noticed is that somehow the events \"gtm.init\" and \"gtm.init\\_consent\" started to show in GA4 since the day it stopped working. In GTM preview mode it also looks like those events where somehow triggered by the automatically installed TikTok Tags.\n\nI then checked if there are some consent modes that have been activated with this implementation - but that doesn't seem to be the case. Container settings don't have any consent modes activated.\n\nTo be honest I am super clueless and I know it's very hard from an outside perspective to help me here - I am also trying with TikTok support (so far so bad) - but maybe anyone out here had the same or similar issue and figured out a way or a solution??\n\nThank you so much for your help in advance!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1idncw5/no_conversion_events_counted_in_ga4_after/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Hi there!  \n1. It's Wordpress  \n2. Well I chose automatic implentation of server side tracking with TikTok so it created me a second cotainer in Google Tag Manager (which is the server side container) - I already had GA4 installed i the browser container with all the tags and triggers  \n3. Server plattform name is Google Cloud (automatic tagging server)",
                "author": "Suspicious_Cut_9050",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "TikTok Events API might be causing issues with GA4. Although GTM preview shows events firing, they're not reaching GA4. Since TikTok and Meta Pixels work, it could be a GA4 tag setup issue. Check if server-side tags are conflicting with GA4 or if any consent settings are blocking data. Try ensuring that GA4 tags are set up properly. If it continues to be tricky, consider switching to Qwestify for simpler, cookie-less tracking, which might give you clearer insights and fewer issues with event data. And it also free to use.",
                "author": "the-fire-in-me",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1735110266.0,
        "title": "HELP: Google Tag: GTM-XXXXXXXX not found\n",
        "author": "Available_Issue3323",
        "id": "1hlvtmy",
        "selftext": "Hi guys, I want to run a lead generation campaign on Google Ads but I am facing difficulty with preview mode. On the website, it shows that the tags are connected but on the preview mode I see an error\n\n\n\n**It keeps showing the following error:**\n\nGoogle Tag: GTM-XXXXXXXX not found\n\nPlease verify that the tag:\n\n\\- Is installed on this page\n\n\\- Is not being blocked (by a browser extension or a consent dialog)\n\n**I have tried the following things:**\n\n\\- Tried running it in incognito mode.\n\n\\- Tried with/without GTM legacy extension and new extension.\n\n\\- GTM file shows up in network under developer tools.\n\n\\- Cleared cache.\n\n\\- Tried disabling debug signal in the URL.\n\n\\- Tried on a different system.\n\nI'd be really grateful if someone could help me here!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hlvtmy/help_google_tag_gtmxxxxxxxx_not_found/",
        "num_comments": 9,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "What platform are you on? Shopify?",
                "author": "FigSpecific6210",
                "score": 1
            },
            {
                "body": "Can you show where exactly you install it? GTM code I suppose you paste GTM code snippet in index.HTML",
                "author": "Weekly_Permission688",
                "score": 1
            },
            {
                "body": "**Place the** `<script>` **code**: Add the first code (inside `<script>` tags) in the `<head>` section of your website. It ensures the Google Tag Manager container loads asynchronously, allowing your page to load efficiently.\n\n**Place the** `<noscript>` **code**: Add the second code (inside `<noscript>` tags) immediately after the opening `<body>` tag. This ensures functionality for users with JavaScript disabled.\n\n⚠️ Do not place the `<noscript>` code inside the `<head>` section, as it contains an iframe, which violates HTML standards.",
                "author": "wardogfufu",
                "score": 1
            },
            {
                "body": "On nextjs",
                "author": "Available_Issue3323",
                "score": 1
            },
            {
                "body": "I am working with nextjs can you tell me please",
                "author": "Available_Issue3323",
                "score": 1
            },
            {
                "body": "Hello sir,\n\nI am working with nextjs",
                "author": "Available_Issue3323",
                "score": 1
            },
            {
                "body": "How did you install the code on the website? Try hardcoding it.",
                "author": "zenith66",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1739100977.0,
        "title": "Google Ads Conversion Tracking tags fail after firing",
        "author": "Existing-Delivery417",
        "id": "1ilcvic",
        "selftext": "Hi,\n\n  \nEvery time when Google Ads Conversion Tracking tag is firing, it fails:  \n  \n[https://imgur.com/uYZNaYb](https://imgur.com/uYZNaYb)  \n  \nAll the consent has been set correctly, dataLayer looks also OK. Tag settings are also correct:  \n  \n[https://imgur.com/3vJ5hH8](https://imgur.com/3vJ5hH8)  \n[https://imgur.com/IaXBvGW](https://imgur.com/IaXBvGW)  \n[https://imgur.com/1EPmSHM](https://imgur.com/1EPmSHM)  \n  \nWhy is that? I already tried everything, but all my conversion tags fail - add to basket, begin checkout, and purchase...",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ilcvic/google_ads_conversion_tracking_tags_fail_after/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Update: I added additional \"Google Analytics: GA4 event\" tag with the same trigger. And this one works:\n\n[https://imgur.com/Hj9r2yR](https://imgur.com/Hj9r2yR)",
                "author": "Existing-Delivery417",
                "score": 1
            },
            {
                "body": "Update 2:\n\nSo looks like is very common and known issue, explained in detail here: [https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/](https://www.linkedin.com/pulse/one-reasons-why-google-ads-conversion-tags-gtm-failed-giovani-ftghf/)\n\nI did a workaround described in this post: [https://www.linkedin.com/posts/ugcPost-7276150229123420160-Ms9W/](https://www.linkedin.com/posts/ugcPost-7276150229123420160-Ms9W/) (changing names of the cookies for all conversion tags and linking tag) and it works.",
                "author": "Existing-Delivery417",
                "score": 1
            },
            {
                "body": "Thank you so much!! This worked for me.",
                "author": "Ginseng1992",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1735821030.0,
        "title": "Meta pixel installation",
        "author": "WillyDoesntMiss",
        "id": "1hrsn7w",
        "selftext": "hi very good, sorry if this is a very frequent question, I want to install the meta pixel through google tag manager, previously I had it installed manually with code. I want now to delete the code manually and install it with GTM. I have seen some videos where they select facebook pixel in the tag but now to this day I do not get anything, is this still possible? If it is possible, is it also possible to set up the conversions using GTM, could someone help me with this?",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hrsn7w/meta_pixel_installation/",
        "num_comments": 8,
        "comments": [
            {
                "body": "you can use the Meta (Facebook) Pixel template in GTM! If you don’t see it in the tag options, you can enable it by clicking on \"Discover more tag types in the Community Template Gallery\" and adding the Facebook Pixel template. Then:\n\n1. Create a new tag using the template.\n\n\n2. Enter your Pixel ID.\n\n\n3. Set triggers like \"All Pages\" or specific events.\n\n\n\nFor conversions, you can also define custom events in GTM and map them in Meta Events Manager. Let me know if you need more tips!",
                "author": "marketer_boss",
                "score": 6
            },
            {
                "body": "\nOne more thing to call out - consent. The meta pixel specifically is under major scrutiny in class action lawsuits as of recently. Make sure to set the strictest consent settings. My company won’t even allow us to use it on our sites anymore",
                "author": "elizabeth4156",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Yes, you're on the right track! All of those things are definitely possible with Google Tag Manager.\n\nThe Meta Pixel template is a solid way to start, but for more advanced tracking - especially for specific conversion events - you'll want to get comfortable with the dataLayer.\n\nThis is where you can create all the custom variables you need to pass important information (like product IDs, prices, or user actions) to Facebook.\n\nGetting it set up correctly can be a bit tricky, but it's the best way to ensure you're tracking conversions accurately.\n\nFeel free to reach out if you need a hand with the setup!",
                "author": "Mental_Elk4332",
                "score": 1
            },
            {
                "body": "Also you can use the Custom html tag, where you paste the meta pixel snippet.",
                "author": "Weekly_Permission688",
                "score": 1
            },
            {
                "body": "Yes",
                "author": "HawkeyMan",
                "score": 0
            },
            {
                "body": "Yeah, It's possible. Also you need to include server-side tracking. I can help you to set this up completely.",
                "author": "adswithalamin",
                "score": -5
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738701055.0,
        "title": "Issues with GTM preview",
        "author": "veknoslo",
        "id": "1ihrmux",
        "selftext": "Is anyone else experiencing an issue with GTM preview where when you navigate to another page GTM stops working. It displays an error like the GTM container is installed on the site which isnt true:\n\n  \nGoogle Tag: GTM-XXXXX not found. Please verify that the tag:\n\n* Is installed on this page\n* Is not being blocked (by a browser extension or a consent dialog)\n\n  \nI can watch my GA4 and GTM container load in developer tools. I have to reload GTM preview sometimes SEVERAL times to make it start working again. This is so frustrating and is making previewing the site tagging take so much longer. I have removed ublock (it was already turned off) and still giving me the error. I feel like this started a couple months ago and its just gotten worse. Hopefully someone else has experienced this or knows a solution. Please save my sanity!!",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ihrmux/issues_with_gtm_preview/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Yes. Click on any other page and it shows up again. Mildly annoying.",
                "author": "NoAge358",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you're using Chrome, I have this same issue when chrome has an update I haven't accepted yet. Try rebooting Chrome and see if that helps.",
                "author": "whatkindofhotel",
                "score": 1
            },
            {
                "body": "I also met the problem. I think it's a network problem, just try it again and wait for the page loaded.",
                "author": "Fragrant_Loquat_4548",
                "score": 1
            },
            {
                "body": "Hello I had this same issue a few weeks ago. I didn´t understand why, I disabled the Tag Assistant extension and it started to work right. It's funny because they've been saying they are going to deprecated when everyone love it, and now they are celebrating it stays but they redesigned it and seems sth is not working right. Try it and let me know if you get it works",
                "author": "Historical-Hyena5399",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737621326.0,
        "title": "Google Ads tag is still running problem",
        "author": "CutCompetitive9960",
        "id": "1i7yzav",
        "selftext": "I have been checking on what the problem would be with my tag. Might be consent issues as we are not getting consent in the website right now. It is a sign-up button triggered tag and it is being fired but still stays running and on the ads side it also stays inactive because of it.\n\n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1i7yzav/google_ads_tag_is_still_running_problem/",
        "num_comments": 6,
        "comments": [
            {
                "body": "This is a repeat issue and one of the top search results should lead you here: [https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/](https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/)\n\nIf you're using a link click trigger for a Google Ads conversion, the tag doesn't have enough time to complete before the next page loads.\n\nCan you trigger the conversion instead on the page the user lands on after they click the link?",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Well, we handled the problem by adding a constant and AW-Conversion ID kind of text. Thank you for the support. Helped us to handle more accurate conversions in theory by that.",
                "author": "CutCompetitive9960",
                "score": 1
            },
            {
                "body": "Could you please clarify exactly what you did here. We had this exact same problem occur at the exact same time",
                "author": "Routine_Ad_588",
                "score": 1
            },
            {
                "body": "in particular: a constant and AW-Conversion ID kind of text.",
                "author": "Routine_Ad_588",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732714455.0,
        "title": "Google Ads Conversion Tracking not firing 'still running'",
        "author": "hiimreddy",
        "id": "1h14f15",
        "selftext": "One of my client's conversions stopped tracking in Google Ads. We are only tracking clicks to call, clicks to phone numbers and PDF downloads. When I test them in GTM, it says that the tag is \"still running\". The same triggers for Linkedin and Meta tags say they fired successfully. Even stranger is if I click on the tag that says \"still running\" it will say the tag fired but it's definitely not working since we haven't seen any conversions in weeks. Any help would greatly be appreciated. \n\nScreenshots of both pages: [https://imgur.com/a/1m4NZq5](https://imgur.com/a/1m4NZq5)",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h14f15/google_ads_conversion_tracking_not_firing_still/",
        "num_comments": 10,
        "comments": [
            {
                "body": "[removed]",
                "author": null,
                "score": 2
            },
            {
                "body": "Still running means it hasn't completed firing, thus you're not seeing any data. See if any of these are relevant to you [https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/](https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/)",
                "author": "Etianen7",
                "score": 2
            },
            {
                "body": "I think it's a redirection issue. The page reloads too fast, and it iterups the tag before it finishes processing. Othet tags are just fast enough, so they trigger. Moving the tag to the \"thank you page\" (or whatever page load after the action) will solve it. Alternatively, you could try slowing down whatever interups the tag.",
                "author": null,
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Have you recently changed consent mode?",
                "author": "NoAge358",
                "score": 1
            },
            {
                "body": "Is the billing still in place and a campaign active?. I had the same issue with a new webshop of ours and it was fixed when a payment was added and our campaign was live.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Thanks for this. Looks like it could be because of the Content Security Policy.",
                "author": "hiimreddy",
                "score": 1
            },
            {
                "body": "Tried this one and all the troubleshooting steps that I found when Googling but nothing worked.",
                "author": "hiimreddy",
                "score": 1
            },
            {
                "body": "Unfortunately, there isn't a thank you page. It just opens and downloads a PDF automatically.",
                "author": "hiimreddy",
                "score": 1
            },
            {
                "body": "Do you mean on the website or the beta consent configuration in GTM? I updated the tag configuration where it said consent mode data to 'consent not needed' or something like that but it didn't fix it. Tracking broke long before I updated that.",
                "author": "hiimreddy",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1738254461.0,
        "title": "One trust cmp",
        "author": "Shot-Appointment3569",
        "id": "1idqu7o",
        "selftext": "Hi, please let me know if I need to add more detail, but I've added the onetrust cmp template and it's set up and running correctly. However since putting it live in tag manager our consent banner no longer shows. \n\nI then read that the template from onetrust creates it's own banner and needs to run by itself, so we paused the existing onetrust cookie banner but the new banner still didn't show up.\n\nWhen pausing the cmp tag, our old banner shows up again...I'm not sure what to do and can't currently get through to their support team.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1idqu7o/one_trust_cmp/",
        "num_comments": 4,
        "comments": [
            {
                "body": "Could you share the website? So i can take a look",
                "author": "zombiekop",
                "score": 2
            },
            {
                "body": "First advice: Get a staging server to validate things before pushing them live\n\nSecond advice: Currently for some reason (in some cases) Microsoft Edge is blocking OneTrust banners/security center from loading (so if your workplace uses that be aware.)\n\nThird advice: OneTrust CMP template should be inserted via GTM for maximal efficiency (they offer a template that you can download from the library and you can manipulate when it loads), If you hardcode it there can be issues with the timing/loading of cookies (if the firing trigger for marketing/analytics loads before OneTrust you have a problem).\n\nFourth Advice: Make sure you add the additional consent required on all your GTM cookies.",
                "author": "Mysterious_Swan_9941",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "We just implemented this ourselves in a different onetrust environment. How long ago did you make it active? In onetrust? When you did a preview with tag manager did the banner show when it the tags are live on the site? Sometimes onetrust has issues with other cookie banners and will different aspects to not show if they are not completely taken off the site. We used only tag manager to implement the scripts to our 15+ sites.",
                "author": "Ok-Establishment618",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1733674186.0,
        "title": "GA4 (gtag) stopped working - what might cause it?",
        "author": "Fun_Shape3723",
        "id": "1h9m3nj",
        "selftext": "The data used to be collected correctly for 3 weeks and then it just stopped - IDK why.  \nGA4 tag is cnfigured by GTM, and the tag still fires up (I don't see errors in Values as attached). The config in GTM also attached. 3 attachments with screenshots: [here accessible via wetransfer](https://we.tl/t-UOpIfM76Db).\n\nThe measurement ID is correct. May the consent mode be the problem?\n\nPlease help.\n\n",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1h9m3nj/ga4_gtag_stopped_working_what_might_cause_it/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Have you got Google Consent Mode set up and integrated with the CMS? If not, I'd get this done and fully understand how this is done properly.\n\nAs an absolute basic, Google Tag should not be set to fire in initialization, it should fire on the consent update event.",
                "author": "Taca-F",
                "score": 2
            },
            {
                "body": "OK I see that the script responsible for consentmode - gtag('consent', 'update', { 'ad\\_storage': 'granted', 'analytics\\_storage': 'granted' }); - is not updated after I accept cookies banner, so that means I need to introduce consent mode 2 via GTM for my client, right?",
                "author": "Fun_Shape3723",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "OP, I've had the same thjng happen to me twice this year.  \n\nUnfortunately the problem could be anywhere: forewall, csp, consent in ga4, cpnsenr in gtm.\n\nMuch more info needed.  Otherwise we're speculating",
                "author": "Far_Highlight_4334",
                "score": 1
            },
            {
                "body": "Is this setup with a trigger on the consent update event complicated? Never done it, honestly. For other accounts, it's fired up \"for all pages\" and works well with consent mode from cookiebot.",
                "author": "Fun_Shape3723",
                "score": 1
            },
            {
                "body": "Why shouldn’t the Google tag be fired on initialisation but on the consent update event? The initialisation tag is exactly made for this purpose. If you use advanced consent mode, any Google related tags triggered before consent has been given will still be assigned as consented if consent is given on that specific page. Non Google related tags based on pages however do need to fire on the update event.\n\nIf you set Google tags to fire on an update event and a user ignores the banner and does not trigger  the update event, than no cookieless pings will be sent at all and you already miss out on Googles ability to use modelling.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Yes I would get it in place, it will be easier in the long run and ensure the client in future proofed.",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "No it's not complicated but you need to read and understand the documentation provided by both Google and the CMS.",
                "author": "Taca-F",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734558940.0,
        "title": "Enhanced Conversions Google Ads in GTM, but appears Failed",
        "author": "National_Gear_9172",
        "id": "1hhcwu2",
        "selftext": "Hello,\n\nI got this problem.\n\nI set up Enhanced Conversions (with Consent Mode) Google Ads, but when I tested it Preview Mode, its Status appears as Failed: [https://i.postimg.cc/MTWswfQ2/Captura-de-pantalla-2024-12-18-162843.png](https://i.postimg.cc/MTWswfQ2/Captura-de-pantalla-2024-12-18-162843.png)\n\nIt doesn't seem to be abou Consent Mode, because It doesn't show any error in GTM: [https://i.postimg.cc/V6DKksqS/Captura-de-pantalla-2024-12-18-163816.png](https://i.postimg.cc/V6DKksqS/Captura-de-pantalla-2024-12-18-163816.png)\n\nHowever, when I changed Preview Mode Tab in Gtag and select Page where my Google Ads Tag has to be fired, it shows this warning: [https://i.postimg.cc/Yq4dtHh9/Captura-de-pantalla-2024-12-18-164217.png](https://i.postimg.cc/Yq4dtHh9/Captura-de-pantalla-2024-12-18-164217.png)\n\nAccording to that warning, I have to set up a Google Tag \"AW-957327059\" in GTM with Initialization Trigger, but I already have a Google Tag (which is combined with Google Ads Tag \"AW-957327059\", as it shows in the last image) set up with that mentioned Trigger.\n\nAdditionally, in the same Page where the warning is showed, there are 6 alerts in Console Tab: [https://i.postimg.cc/Dzh6Q45J/Captura-de-pantalla-2024-12-18-165151.png](https://i.postimg.cc/Dzh6Q45J/Captura-de-pantalla-2024-12-18-165151.png) \n\nSomeone know what does it mean? and, how can I fix \"Failed\" Status in Google Ads Conversion Tag?\n\nThanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hhcwu2/enhanced_conversions_google_ads_in_gtm_but/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check your console for content security policy errors. Usually when a tag fails like that it's because of CSP violations.",
                "author": "tresslessone",
                "score": 1
            },
            {
                "body": "Does this sound like the issue you are having?\n\nhttps://www.benluong.com/google-ads-tag-failed-for-no-reason/",
                "author": "benl5442",
                "score": 1
            },
            {
                "body": "I've had (and not yet solved) an issue where a conversion hit sent from website1 is failing to register in a GAds property owned by website2\n\nSimilar, but not the same errors / warnings as in your last screenshot. Difference is the tag says \"succeeded\" in my case.\n\nAre you including more than just an email address in the EC data? What happens if you do only try to send an email address and not also e.g. phone number / address?",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Re check if the GA4 measurement id in your GTM container corresponds with the measurement id in your ga4 property and if that property is connected with the correct google ads property. Also check if the gtm container you use to debug is the actual gtm container that is installed on your website. Check in Google ads under the tools tab > data manager if you see the correct GA4 connection as well. Check the Google tag here as well as it may show other errors. You can do this by clicking manage at your Google tag in the data manager. Also check if auto tagging is enabled.",
                "author": "Pretty-Appearance226",
                "score": 1
            },
            {
                "body": "Thanks for the resource! It's similar. Unfortunately, they doesn't have a solution either",
                "author": "National_Gear_9172",
                "score": 1
            },
            {
                "body": "Yes, I tried what you mention, sending only email address, but it continues failing (\"Failed\" status) :/",
                "author": "National_Gear_9172",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1728574327.0,
        "title": "Which trigger to use?",
        "author": "itsJ92",
        "id": "1g0lj7y",
        "selftext": "I have a question regarding cookie banners and the best trigger to use for sending data to GA4. We often choose between using the consent update event (when the user makes a choice) or the page load event to trigger the Google Tag.\n\nIf we use the page load event, the hit is sent before consent is given on the landing page with UTMs, so it ends up as G100. Are the UTMs lost in this case, since the tag isn’t triggered again after the user accepts consent, meaning the landing page hit doesn’t get recorded as G111?\n\nWhat trigger is recommended to avoid this? Does Consent Mode still attribute the source correctly?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1g0lj7y/which_trigger_to_use/",
        "num_comments": 12,
        "comments": [
            {
                "body": "The UTMs shouldn't be lost if you're using Consent Mode, at least for Google tags. You can fire them on normal triggers without worrying about it. \n\nSimo Ahava has [a good writeup](https://www.simoahava.com/analytics/consent-mode-v2-google-tags/#do-i-need-to-manually-resend-hits-when-consent-is-granted-when-using-google-analytics-4) on this, including some detailed debugging you can do via checking network calls. \n\nFrom what I've seen, when consent becomes granted you can see a call to the Protected Audience API (usually on a user engagement trigger) that sends what the temporary user/session IDs were for earlier calls on the same page in order for GA4 to stitch them together with subsequent calls that are checking the _ga cookies for user/session IDs.",
                "author": "winless",
                "score": 3
            },
            {
                "body": "It would also depend on whether users can navigate the site without making a consent selection",
                "author": "datamelon",
                "score": 2
            },
            {
                "body": "Very interesting, thanks for the ressource!",
                "author": "itsJ92",
                "score": 2
            },
            {
                "body": "Nice word salad. You should apply for work at Google.",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Try this. Fire Google tag with send_page_view false as initializating trigger. Then fire a ga4 event \"page_view\" when the consent is updated",
                "author": "Chjji22",
                "score": 1
            },
            {
                "body": "Absolutely. Navigation is blocked",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "Would this really help if the two events were on the same page?",
                "author": "datamelon",
                "score": 1
            },
            {
                "body": "I’m not tracking users without their permission… I’m saying the Google tag fires in G100 before the user consented because it’s triggered on page load. Then, when the user accepts, since the page has already loaded, it’s not triggered again in G111 on the landing page, which means the source might be lost.",
                "author": "itsJ92",
                "score": 1
            },
            {
                "body": "to ensure that after cookie consent is given, the page\\_view tracking is complete and non-anonymized, to fully leverage the capabilities of GA4\n\nIt may be redundant, but if you're having issues with tracking, I would give it a try",
                "author": "Chjji22",
                "score": 1
            },
            {
                "body": "I also always separate the config tag and the page view tag as it’s good practice, but I was just thinking that if op was using advanced consent mode, this wouldn’t matter as the hits on the same page will get automatically reprocessed to have the granted status.",
                "author": "datamelon",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715192444.0,
        "title": "Remote GTM jobs in agencies",
        "author": "KalaBaZey",
        "id": "1cnbi4x",
        "selftext": "Hello everyone, I’m a Google Ads freelancer and I love working in this field but I enjoy working with tracking & analytics even more. I have consulted for an in house team before where my sole job was to build their tracking in GTM and I recently reached out to an agency for a job & they told me they were relying on someone external for GTM but would be interested to bring it in house. \n\nThat didn’t pan out eventually as they said they dont have many new clients rn but it made me wonder if there’s other agencies that might need a contractor or in house specialist just for Google Tag Manager. Even with my limited number of G Ads clients I often have to redo the tracking because of changes in business goals and landing pages so agencies with more clients would need someone specifically for this. \n\nI’m looking for such agencies or in house teams who might need someone like me. I can setup all sorts of tracking including some simple Javascript & dataLayer.push() stuff, Enhanced Conversions and can also work with cookies & consent modes & what not. \n\nI want to work on more complex stuff in GTM which my small lead gen clients do not have the need for such as Server Side tracking and by being part of a bigger organization with bigger clients & more advanced systems I’d get the opportunity to do so. \n\nAny leads would be greatly appreciated. \n\nP.s I can only work remote since I’m based in Pakistan & the agency scene here is very rudimentary. ",
        "score": 6,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cnbi4x/remote_gtm_jobs_in_agencies/",
        "num_comments": 22,
        "comments": [
            {
                "body": "I’m literally you 😅. Feel like GTM and technical marketing is made for me, but still don’t have enough experience. Anyway, good luck!",
                "author": "Cotusie",
                "score": 6
            },
            {
                "body": "DM me contact details",
                "author": null,
                "score": 3
            },
            {
                "body": "Dm contact info please. Agency owner",
                "author": "found_it_online_01",
                "score": 3
            },
            {
                "body": "I think our agency could use someone specializing in this. Can you send me a DM?",
                "author": "dudieguybro",
                "score": 2
            },
            {
                "body": "DM me",
                "author": "andr3sr",
                "score": 2
            },
            {
                "body": "Send me a DM. I have a firm called TagHero that specializes in tagging/tracking, specifically in the DTC ecomm space, and we're always plenty busy and looking for additional contractors to source projects to.",
                "author": "brett_fish",
                "score": 2
            },
            {
                "body": "Same here! It resonated with me for some reason. Found out from using contentsquare at a prior gig.",
                "author": null,
                "score": 2
            },
            {
                "body": "Thank you.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "Done. ✅",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "Done.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "Done.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "juyst checked don't see any messages!",
                "author": "brett_fish",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "High Five Mate!\nSame here, I even looking for some opportunities.\nBest Wishes.",
                "author": "Evan-Ivan",
                "score": 1
            },
            {
                "body": "I've done over a 100 tag manager jobs on Fiverr to build experience (72 five star reviews) along side my day job.   I'm based in the UK. If anyone wants more info or to work on future projects together,  feel free to DM me.",
                "author": "Zealousideal-Age8860",
                "score": 1
            },
            {
                "body": "Just checking. Did you get my message request?",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Done.",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Thank you. You too.",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "Looks fine on my end. Could you instead initiate the DM maybe its a bug.",
                "author": "KalaBaZey",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1737983268.0,
        "title": "Meaning of the (purple) icon?",
        "author": "Far_Carpet9267",
        "id": "1ib8jgi",
        "selftext": "So I am a noob and I am trying to learn..\n\nI am trying to get a solution regarding a problem with Google Analytics. The problem is with the cookie consent and the problem states: consent signal missing. If I test the consent signal, I get a yellow/golden square or a blue circle below the overview (see below link) and the Event consent status is states as in the image is shown.\n\nImage: [https://freeimage.host/i/2LPiF49](https://freeimage.host/i/2LPiF49)\n\nIs this ok? There is no value in 'default on page' and the problem with cookie consent is still there.\n\n  \nMany thanks in advance",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ib8jgi/meaning_of_the_purple_icon/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "How are you getting your consent?",
                "author": "ds_frm_timbuktu",
                "score": 1
            },
            {
                "body": "It’s to see which venster or tab it’s connected to. You’ll see the exact same purple dot in the opened website preview tab. And has nothing to do with consent.\n\nAnd no it’s not okay to not have a default consent state. This will give problems in your measurement. If you need help pm me. You can pm me in dutch",
                "author": "zombiekop",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1734867429.0,
        "title": "Google Tag / GA4 and Google Ads... what a mess :-)",
        "author": "Holiday_Activity9191",
        "id": "1hjwugr",
        "selftext": "Hej there,\n\n* I recently switched to a cookie banner with Consent Mode V2, which requires Google Tag for the consent setup. This has worked flawlessly.\n* In the past, we integrated GA4 directly via snippets into the website code. However, now that we’re using Google Tag as well, the GA4 snippet would be used twice since our GA4, Google Ads, and Google Tag are connected, this makes the direct snipped redundant, right?\n* Google Tag Manager is already firing our purchase events without any additional GA4 tag setup. Is this normal? Will I lose any tracking if I don’t set up an additional tag for GA4 and GoogleAds?\n* I am using a third-party booking software that sends the purchase event to GA4, and we’ve connected the same purchase event in Google Ads. Am I correct in assuming that I don’t need to install the Google Ads tracking code (AW) additionally since the purchase data is already coming from GA4?\n\nLast but not least, the Google Ads tracking gets quite often lost between my WebSite and the final purchase event on the third-party website... in almost 30-50% of cases (it just indicates direct source in GA4), is there any trick to keep the attribution?\n\nThanks a lot!",
        "score": 7,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1hjwugr/google_tag_ga4_and_google_ads_what_a_mess/",
        "num_comments": 5,
        "comments": [
            {
                "body": "1. Congrats!\n2. Right.\n3. This one is a little confusing. In theory, you don't need GA at all, to connect GTM and Google Ads. You can create a trigger, and, well, trigger the Google Ads conversion tag when it happens.\n\nFor example:  \n\\-> someone visits the \"thank you page\" -> Google Ads Conversion Tracking Tag is firing.\n\nThis will work. You're very likely to use exactly this set up for the Facebook/Twitter/Whatever pixel conversion tracking\n\nBut alternatively (preferably?), you can use the above trigger to trigger not the Google Ads conversion, but to send the event to GA.\n\nExample\n\n\\-> Someone visits the \"thank you page\" -> Google Analytics: GA4 Even Tag is firing.\n\nThat tag sent the event and other information you choose to sent, to Google Analytics, and you'll see it in the settings (admin) -> property -> Data display -> events (note, it may take 24 hours or more before you see it there).\n\nThen you can mark this event as **key event** (if it's named \"purchase\", then it's likely already marked that way)\n\nThen you just need to link the GA and Google Ads(property setting/ product links).\n\nAnd you can go to Google Ads, and you can import your Key events from GA as Goals (Goals -> Create Conversion Action -> Import)\n\n4) So it's more or less the same thing that point 3, but instead of the GTM sending the event to GA, Booking platform do it, right? Sounds like it may work. I would be cautiously optimistic  about it (but not an expert, or experienced in that area).",
                "author": null,
                "score": 4
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "* Great, a lot of people don't even get that far!\n* You need to remove any tracking code which is hardcoded on the site, not just Google, and have it run through Google Tag Manager so that it can be integrated with Consent Mode.\n* See above\n* This could be a problem. Can you get your Google Tag Manager container on to the booking software?",
                "author": "Taca-F",
                "score": 1
            },
            {
                "body": "Have you setup server side tracking?",
                "author": "RogervdMatten",
                "score": 1
            },
            {
                "body": "From your description, it appears that you are using GTM, GA4, Google Ads and Google Tag Script on your website. Yes, I think you have a redundancy problem.\n\n30-50% of traffic from the direct sources because of Incorrect Event Parameters or parameters are not sent with your purchase event\n\nAs a tracking professional, I think your tracking is not done in the right way. You could have done everything with Google Tag Manager so why do you use GA4, GTag, AW script? You also didn't mention how you enabled your Purchase Data Layer which is most important.",
                "author": "motiur_ak07",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1728036341.0,
        "title": "Created a Free Tool to Instantly Check if Your GA4 or GTM Are Implemented Server-Side or Client-Side",
        "author": "Honest-Knee2482",
        "id": "1fvvlm2",
        "selftext": "I’ve been working on a project that I think could be really useful for this community, especially if you’re dealing with a lot of tracking setups or audits.\n\n# I built the Tracker Checker, a free Chrome extension that helps you quickly see:\n\n* **GA4 & GTM Implementation**: It instantly checks if your Google Analytics 4 or Google Tag Manager setup is **server-side** or **client-side**. No more guessing or digging through scripts—you'll know right away!\n* **Detailed Tracker List**: Tracker Checker also scans the site and shows you all the trackers that are running, like Google Ads, Facebook Pixel, TikTok Pixel, LinkedIn Insights, and more.\n* **Google Consent Mode Insights**: Easily check which version of Google Consent Mode is active (v1 or v2) and verify if your consent settings are working as expected.\n* **External Resources Check**: While it's not a full performance monitor, it helps you spot external resources that could be affecting page speed or loading issues.\n\n# Why I Made It:\n\nI was frustrated with how much manual work it takes to verify if tracking setups are working as expected. Whether you're auditing a client’s site or managing your own, I wanted a tool that simplifies this process, and the **Tracker Checker** does just that. It’s free, easy to use, and doesn’t require an expert to understand the results.\n\nYou can get it here on the [Chrome Store: Tracker Checker](https://chromewebstore.google.com/detail/nixon-digital-tracker-che/niamgkmcfickcpmbdheldknknepgibed?utm_source=%2Fr%2FGoogleTagManager&utm_medium=Redditpost&utm_id=%2Fr%2FGoogleTagManager) for free. If you try it out, I’d really appreciate any feedback or suggestions for improvements.\n\nI hope it saves you some frustrations.",
        "score": 17,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fvvlm2/created_a_free_tool_to_instantly_check_if_your/",
        "num_comments": 9,
        "comments": [
            {
                "body": "[deleted]",
                "author": null,
                "score": 4
            },
            {
                "body": "Link to repository?",
                "author": "brannefterlasning",
                "score": 3
            },
            {
                "body": "Niiiice! I'll definitely test this out when I get home!",
                "author": "Beneficial-Pair-9585",
                "score": 2
            },
            {
                "body": "Wasn't able to detect my SSGTM implementation, SSGA4. \n\nI am using a custom subdomain and leveraging Stape.io's custom loader, which makes it hard for browsers and adblockers to detect these things. \n\nOnly thing the custom loader hasn't been able to get around is GA4 event tags, but loading the config with pageviews are still able to get through uBlock Origin. \n\nFirefox and Brave aren't able to stop Stape's custom loader.",
                "author": "the_duck17",
                "score": 2
            },
            {
                "body": "sounds like a super useful tool for anyone working with ga4 or gtm setups! quick checks on whether your setup is server-side or client-side can definitely save a lot of time. i’d suggest also giving qwestify a try—it's another great tool that simplifies digging into your ga4 data and helps you catch tracking issues easily. both tools together could make your tracking audits even smoother!",
                "author": "the-fire-in-me",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Nice work! Tested [renault.fr](http://renault.fr) and works fine.",
                "author": "RCoffee_mug",
                "score": 1
            },
            {
                "body": "Thanks great helpful tool for tracking & analytics tasks. It'a a time saver.",
                "author": "No-Stable1360",
                "score": 1
            },
            {
                "body": "Interesting. Addon shows I am using server tag but testing google tag manger directly doesnt. This is so bizzare.",
                "author": "snakecharmer95",
                "score": 1
            },
            {
                "body": "Great to hear it excites you! Let me know what you think once you get to it and dont hold back, i'm here to learn!",
                "author": "Honest-Knee2482",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1732050376.0,
        "title": "Help RE:  ads_data_redaction",
        "author": "ozzieowner",
        "id": "1gv7ylp",
        "selftext": "I am a rookie on this stuff but when looking at my google ads, I see that 99.9% of my hits have ads\\_data\\_redaction as FALSE.  Isnt this bad?  When I look up that parameter I interpret that a false means that my website is collecting user info even if they do NOT consent.  First of all, I do not think that much of my users are not providing consent.  Any insight would be greatly appreciated.",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1gv7ylp/help_re_ads_data_redaction/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Thank you for your answer but let me make sure I understand:\n\n1. I previously thought that if user denied cookies, ads\\_data\\_redaction would be set as false, but I think you are saying that it is set as true\n2. so that my data which shows 99.9% set at false means that most users are accepting cookies.\n\nDo I have that right?\n\nIf that is correct, now it seems so obvious:  if a user accepts cookies then no need to redact.",
                "author": "ozzieowner",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you run your tags when consent is denied and ads_data_redaction is set to true ads data will not be redacted from cookieless pings",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "The default is false, and it totally ok.  I use false on all my tags when consent management controls the tags if they fire or not.",
                "author": "aaronebennett",
                "score": 1
            },
            {
                "body": "Its actually good to keep it false.  \nWhen someone denies consent then the any data is not stored resulting is your campaign not learning, if ads\\_data\\_redaction is true.\n\nIf its false, even if someone denies consent there values will be stored resulting in data being to passed to google for learning, if ads\\_data\\_redaction is true.",
                "author": "Glittering-Lack8940",
                "score": 1
            },
            {
                "body": "Not quite. Ads data redaction is a separate setting from consent flags. It's an option to further redact ads data when ad_storage is denied. It is set to \"false\" by default, meaning that you have to manually change it to \"true\". Depending on your CMP or consent mode setup in GTM the default value for this flag will differ. \n\n\nRead more in the last info box on this page:\nhttps://support.google.com/google-ads/answer/13802165?hl=en\n\n\nAnd here:\nhttps://developers.google.com/tag-platform/security/guides/consent?consentmode=advanced#redact_ads_data",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thank you very much!",
                "author": "ozzieowner",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715965807.0,
        "title": "How should i do this?",
        "author": "IllustriousLibrary8",
        "id": "1cuamvl",
        "selftext": "Hi, I have a shopify store and I want to enable consent mode v2.\n\nCurrently, I have individual Google Ads tags on my store's homepage and checkout area.\n\nBut it seems I need a actual GTM container for consent mode to work.\n\nDo I just consolidate the tags into the container and then update the Shopify homepage and checkout area, or is it more nuanced than that?\n\nThanks!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cuamvl/how_should_i_do_this/",
        "num_comments": 19,
        "comments": [
            {
                "body": "Thanks michael. i have the google & youtube app installed. i had completely forgotten about that, it's got the analytics property installed inside it.\n\nI still plan to use GTM, as you mention, but when i do, should i include the analytics tag inside of it (or just the google ads and cookie banner tags)?",
                "author": "IllustriousLibrary8",
                "score": 2
            },
            {
                "body": "Yeah so GA4 is integrated in my Shopify with the Google & YouTube App.\n\nMy question is that, at the moment, my Google Ads tag and my Google analytics tags are currently outside of a container (in the Google Tags sections of GTM and not the Accounts section).\n\nShould I migrate them both to the new container or just the Google Ads tag?\n\nYes the Shopify banner is what I'm currently using, however from what I've heard this only complies with consent mode right now, not v2?",
                "author": "IllustriousLibrary8",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You don't need GTM for consent mode.\n\n\nHow have you added Google Ads tags? Where? Are using gtag()?",
                "author": null,
                "score": 1
            },
            {
                "body": "Yes. GTM would be preferable. Controlling the gtag manually is very complicated. With GTM all your tags (like click tracking & page views, purchases etc) are in one place and you can easily configure consent settings to apply to all at once. \n\nIf GTM isn’t too difficult for you then a few videos about consent mode should be enough for you to DIY",
                "author": "KalaBaZey",
                "score": 1
            },
            {
                "body": "You can enable consent mode v2 with the built in GA4 Shopify integration and the customer privacy Shopify settings as well. GTM is preferred because of the control you have but if you are already using the GA4 integration, it’s easier to go that route to enable consent mode v2!",
                "author": "michaelvenia",
                "score": 1
            },
            {
                "body": "The Google verified cookie banner app I chose (illow) recommends that you use GTM if you want it to work with consent mode v2.\n\nGoogle ad tags have been added at the top of theme.liquid in my shopify theme, and also on the checkout settings.\n\nI'm not sure what you mean by gtag, but maybe that's the google ad tag i mentioned - in my theme.liquid it begins like this: \"<!-- Google tag (gtag.js) --> <script async src=\"https://www.googletagmanager.com/gtag/\"\n\nMaybe there's a different/better way (or different cookie company) to use consent mode v2?",
                "author": "IllustriousLibrary8",
                "score": 1
            },
            {
                "body": "As soon as you can drop (directly or via consent banner) consent actions using gtag both Google Ads and Google Analytics 4 should pick up with information without additional configuration and adjust their behaviour - when consent is denied then send only anonymous pings and use cookieless domain.\n\nI built a very lightweight banner with minimal integration, it's not a SaaS thing, it just does what I have described above, not much more. If that could be helpful for you I could share the details and help set it up.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "My pleasure! I would only implement Google Ads tags in GTM if you already have GA4 integrated through the built-in Shopify tracking. Similarly, if you have the Google & YouTube Shopify app channel enabled and connected to Google Ads, you should be all set. Unless you have additional custom tracking needs, GTM technically isn't needed to implement consent mode v2. \n\nTo enable consent mode in your Shopify account, follow these steps:\n\n1. Sign in to your [Shopify account](https://accounts.shopify.com/lookup).\n2. Click **Settings** at the bottom of page menu on the left.\n3. Click **Customer privacy** on the menu.\n4. Open the “Cookie banner” section and click **Set up banner**.\n5. Confirm your appearance and position preferences, then click **Activate cookie banner**.\n6. Confirm which regions the banner should appear in and click **Activate**.\n\nAfter you’ve enabled your consent banner, consent mode is enabled automatically.",
                "author": "michaelvenia",
                "score": 1
            },
            {
                "body": "Can you share more details? How did you create this?",
                "author": "Different-Goose-8367",
                "score": 1
            },
            {
                "body": "Sure. I have released on GitHub a basic small JS consent banner and here is an example code how to integrate with consent mode:\nhttps://github.com/tagconcierge/consent-banner-js/blob/develop/www/gtm.html\n\nthe important parts are:\n- line 17 where default consent mode is set before Google tags\n- line 96 which is a callback called when user provides there consent - this calls consent update\n\nI hope that's not too level, but it should showcase how to use Consent Mode API.\nThis can also be done via dedicated GTM tag template.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "I'm not 100% clear on what you mean by migrate the Google Ads tags to a new container. \n\nI can confirm that the Shopify GA4 integration covers consent mode v2. I see the 4 consent parameters in Google Tag Assistant!",
                "author": "michaelvenia",
                "score": 1
            },
            {
                "body": "It looks great! I’m not used to using GitHub, can you provide a guide to set this up on my website? I code the website myself so its not Wordpress etc Can I download all the files or do they need to be hosted by tagconcierge?",
                "author": "Different-Goose-8367",
                "score": 1
            },
            {
                "body": ">I code the website myself\n\n\n>I’m not used to using GitHub\n\n\n?\n\n\n>can you provide a guide to set this up on my website?\n\n\nThere is literally a guide on the frontpage of that repository. If you want a guide on how to set consent mode without his cookie banner then google has provided documentation on that already:\nhttps://developers.google.com/tag-platform/security/guides/consent?consentmode=basic",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Sorry, missed your comment before. Definitely you can self host CSS/JS and you can follow both the main readme file and the example that I linked earlier.\n\nLet me know if that helps.",
                "author": "small_foot_2490",
                "score": 1
            },
            {
                "body": "I've got this set up through GTM.  I appreciate your work!",
                "author": "Different-Goose-8367",
                "score": 1
            },
            {
                "body": "I forgot to mention.  When using \"wall\" to block the page, if \"settings\" is clicked and then \"close\" without saving any settings, the \"wall\" disappears but the pop up remains.",
                "author": "Different-Goose-8367",
                "score": 1
            },
            {
                "body": "Oh, good catch. Thanks for reporting it. We will refine the library to handle this scenario correctly and release an update.",
                "author": "small_foot_2490",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711120818.0,
        "title": "Experience with trustarc?",
        "author": "mar1_jj",
        "id": "1bl1s94",
        "selftext": "Hi all,\n\ndid anyone implement trustarc for CMP - especially for new consent mode?\n\nCompany decided to buy trustarc so it means we have to implement it as well, but can't find many reviews, and what I find, it says experience is not really intuitive and it is harder to implement.\n\nHow does ti work compared to cookiebot or onetrust? Cookiebot is rather straight forward to implement, but onetrust is very tough, especially because their support is useless.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bl1s94/experience_with_trustarc/",
        "num_comments": 22,
        "comments": [
            {
                "body": "If you Google “TrustArc GTM integration” you’ll find a Reddit post and some code that will help.\n\nAlso, TrustArc now have a native tag template and they implement consent mode as well, which is a recent addition.",
                "author": "DigitalStefan",
                "score": 2
            },
            {
                "body": "They have promised miracles so I asked for trial period, will check soon. Might have more info in a couple of days.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "Worth mentioning... the last time I saw the official \"how to implement\" documentation from TrustArc, it did *not* mention their tag template and didn't mention the Google Consent Mode integration.\n\nHopefully they've updated it by now, because otherwise their documentation wasn't too bad.\n\n[https://gist.github.com/stefanatcroud/cd103ecfabf7dbe37d6a13d01557775f](https://gist.github.com/stefanatcroud/cd103ecfabf7dbe37d6a13d01557775f) \\- Implement as a CHTML tag, All Pages and you'll get \"OneTrust style\" data layer pushes on consent events. Suitable for replacing All Pages trigger for 3rd-party tags.\n\nI'd definitely at least experiment with their tag template though, because you should be able to get excellent results.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "thank you, I have call with them this week so will push for access asap. If I find anything useful, will reply here.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "Hi, finally coming back. Been using it now for a couple of weeks, it works fine. It's not the nicest implementation and it would be a lot of work if I had 10 websites or clients but for one website and with their premium support it was pretty straightforward.\n\nTheir documentation is getting better so that helped.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "Please do! Quite interested to see how you approach this.\n\nI still like \"hardcode your CoMo script and your CMP\", but I've recently come around to thinking that implementing a CMP using a tag template isn't a bad idea so long as CoMo is also handled by the same tag.",
                "author": "StefanAtWork",
                "score": 2
            },
            {
                "body": "Hi, finally coming back. Been using it now for a couple of weeks, it works fine. It's not the nicest implementation and it would be a lot of work if I had 10 websites or clients but for one website and with their premium support it was pretty straightforward.\n\nTheir documentation is getting better so that helped.",
                "author": "mar1_jj",
                "score": 2
            },
            {
                "body": "Alright. Thank you for your replies this morning. This is what makes Reddit great: sometimes it’s trolling, other times it is actually insightful!",
                "author": "Yallone",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Our company currently uses TrustArc for CMP.  \n\nMy experience has been brutal and I would advise to try another provider if not in contract. \n\nThey have updated their guidance but I found their GTM template to be faulty. Apparently their engineering team are looking in to it with no estimated date for resolution. \n\nI would be very interested to hear your experience with TrustArc.",
                "author": "data_analytics_dude",
                "score": 1
            },
            {
                "body": "We're a web agency from The Netherlands that were a bit fed up with Cookiebot. Especially their pricing, but also the amount of code and missing multi-tenancy. If you want to, I can hook you up with our in-house developed CMP. We have it running on about 15 sites now, mostly of our own make, but are looking for ways to help others as well.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Thank you, will check it out.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Can you maybe shortlist some issues? So I keep an eye on that.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Honestly, trustarc is working good for us.\n\nAnd having to go through procurement again would be pain in the ass. But thank you for the offer.",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "**Reporting tools are not accurate.** Been an outstanding issue for over 14 months. On one day this month we had an 'opt in' rate of 33340% and an opt out rate of 13340%. \n\nJust starting to get accurate looking data 2 weeks ago. TA still increased our pricing during this time. \n\n\n\n**Consent Mode GTM template doesn't work as expected.** Showing errors and custom events (sent via the template) firing more than expected. No estimated date for a solution. Had to find work around to deploy. \n\n\n\n**Overall support is lower than expected.** No expected turn around time advised on tickets.\n\nHaving to repeat myself 3 or 4 times with details, videos and screenshots of issues. Then tickets are marked as complete for me to review and I notice immediately that the issue still exists.  \n\nIt feels like a delay tactic to avoid long support ticket resolution times. \n\n\n\n**Communication is poor.** I planned to update our consent banner, provided a timeline and blocked off time to coordinate and implement the change. On the date of the change TA were awol. Unable to be contacted.  Arrived in to work the next day to an email saying they made the change at some point overnight...",
                "author": "data_analytics_dude",
                "score": 1
            },
            {
                "body": "Thank you for the friendly answer! I completely understand. I get what you’re talking about from experience 🥲. \n\nEdit: I was about to ask what your company thinks about Google Tag Manager as we also have one client (EU50) that are reluctant to using GTM and have switched to another provider. If that’s common, that would be something to learn from. But since you’re already in the GTM subreddit, I think it’s safe to assume that you’re fine with GTM, haha.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Ok, will hopefully reply soon. If I'm not back in 5-6 days, it's because internal blockers and will share info when I find out more. Thanks for this.\n\nPersonally, I would just use cookiebot selfserve solution but...",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "Send me a dm",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "I just edited my post, the question is in there.",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "Not sure what the context is, but GTM works great for us.\n\nIf they have some privacy concerns or similar, it is what it is...",
                "author": "mar1_jj",
                "score": 1
            },
            {
                "body": "No worries :)",
                "author": "mar1_jj",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717513548.0,
        "title": "GTM no collect outgoing request from website",
        "author": "SupremeSalvatore",
        "id": "1d7zfap",
        "selftext": "Hello Everyone, I have an issue which I can't seem to grasp.\n\nI set up GTM on my website 4 years ago, analytics is working as it should be, only monitoring sessions etc, no conversion or custom, bare minimum MVP.\n\nFour days ago suddenly even without deployment or anything, just stopped working out of the blue.\n\nAfter looking at everything related, I found out that the GTM script is loaded correctly with a tag, but there is no collect outgoing event for google-analytics to log it hence, there is no data.\n\nI have tried GA Debugger, and everything works, but there is no collect.\n\nGoogleTagAssistance, logs all the events however on the hits column it's empty, probably because that collect request is not fired off.\n\nMy suspicion is on some random consent which started right now (by default  I haven't touched anything)\n\nI can provide a link if it is allowed [https://izletijada.rs](https://izletijada.rs)\n\nThanks a lot, everyone!\n\n",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d7zfap/gtm_no_collect_outgoing_request_from_website/",
        "num_comments": 14,
        "comments": [
            {
                "body": "It does look like the gtag is not configured correctly.   \n  \nIt points to the GTM ID instead of the measurement ID\n\nHope this helps!",
                "author": "zappypeople",
                "score": 3
            },
            {
                "body": "Your config is incorrectly implemented. Re-visit the documentation. You need to at least include a measurement ID and currently you are not.\n\n\nYour config event is being pushed as a string to the datalayer and has the value of \"config\". This is not formatted correctly and will not activate the GA tag",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "I have added config event upfront same as docs are suggesting, it's working now, however, 4 years without this, and working is interesting, but can't investigate more :) Thanks for all the help!",
                "author": "SupremeSalvatore",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "That is interesting, for sure -- consent mode is usually catching folks integrating between GA4 and Ads, not just deploying the GA4 tag from GTM. \n\nIt sounds like a relatively quick fix, sure doesn't make sense since you have not touched anything, but take a look at deploying the Google Tag from GTM and make sure you're tracking outbound clicks (enabled by default)\n\n[https://zappypeople.com/wp-content/uploads/2024/06/Screenshot-2024-06-04-125002.png](https://zappypeople.com/wp-content/uploads/2024/06/Screenshot-2024-06-04-125002.png)",
                "author": "zappypeople",
                "score": 1
            },
            {
                "body": "Whatever you have going on here I can tell you that your implementation very much incorrectly implemented. Not only are you mixing gtag-calls with dataLayer-pushes, theyre both also not formated correctly.\n\n\nBut right now your biggest problem is the config event. First of all, youre pushing an empty configuration to the datalager, and even if you did it corrently it would still be wrong because you should be using gtag-calls, not datalayer.push if youre going to be using the google tag instead of google tag manager.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "You need to move to Server side Tracking will sort everything out",
                "author": "flymehighnz",
                "score": 1
            },
            {
                "body": "4 years ago. 4 years ago using GA3? Or 4 years ago using GA4? You may need to tag your site using GA4. ",
                "author": "Humble_Elderberry_25",
                "score": 1
            },
            {
                "body": "Hey mate thanks for reply, all these thibgs are on you can check that in data layer, at the end it just misses to send collect endpoint or ping it, since data is present on datalayer and in debugger as well",
                "author": "SupremeSalvatore",
                "score": 1
            },
            {
                "body": "I have followed proccedure, which was working for 4 years without an issue for my setup everything was informative just for ke to track demand for some events organised.\n\nYeah i believe something could ve wrong but why it stopped working out of the blue?\n\nWould you have any advice how to setup with my gtag bare minimum to work with basic and native events?\n\nAll the stuff i copied for snippet and there its also data layer and my script, also im not constructing any event to ve sent im reliant on auto events which are tracked by default.",
                "author": "SupremeSalvatore",
                "score": 1
            },
            {
                "body": "Its using ga4 and it's working as a charm after fix.",
                "author": "SupremeSalvatore",
                "score": 1
            },
            {
                "body": "You were correct, I have adapted it now to get arguments as function, working like a charm.\n\nThe biggest question is how this was working for 4 years without any issues, but at least now I know the full lifecycle or events :)",
                "author": "SupremeSalvatore",
                "score": 1
            },
            {
                "body": "Of course! Glad its resolved :D⚡",
                "author": "zappypeople",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718152540.0,
        "title": "Cookie banner missing in preview",
        "author": "Nemesi_361",
        "id": "1ddts3l",
        "selftext": "Hi guys, i created a tag in GTM for cookiebot for consent mode v2 but when i click in preview open website, but without cookiebanner. How can i solve it? ",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ddts3l/cookie_banner_missing_in_preview/",
        "num_comments": 12,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are there any errors in your console? If not, maybe you have already given your consent, after which, of course, you won’t be asked again for a while. So if that is the case, clear your browser’s storage for that specific domain and you should be able to see your banner again. By the way, what trigger have you used for Cookiebot?",
                "author": "Yallone",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "Also make sure you're testing on the same domain that you've entered in your Cookiebot account. Otherwise it won't show.\n\nPlease let us know what the solution was :-)",
                "author": "Drendo",
                "score": 1
            },
            {
                "body": "I've faced the same issue some times for my clients. Here are some things you can check:\n\n1. Ensure the tag is set up correctly and the domain matches in Cookiebot.\n\n2. In Cookiebot, check if it's set to \"Visible only in EU.\" If you are outside the EU, select \"All visitors.\"\n\n3. If you have given consent once it won't show again, you have to remove the cookiebot cookie to see it again.\n\n4. Sometimes the cookie banner takes time to appear due to old cached data. Clear your cache or try publishing the container and then use an incognito tab.\n\nThese steps should fix your problem. If you still face issues or need assistance, feel free to reach out.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "Did you already select thr settings for the cookie banner? If yes, then you won’t see the banner again for 30 days or whatever timeframe u set it to appear again. Clear you cache when u want to test it. If that doesnt work, check the domain you set it with on the platform.",
                "author": "SparkScaler",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            },
            {
                "body": "Thanks for your reply! I'll try!",
                "author": "Nemesi_361",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719997013.0,
        "title": "Google Ads Tag 'still running'",
        "author": "Ziggy-sent-me",
        "id": "1du9qr0",
        "selftext": "All Google Ads tags show 'still running' when I click on the relevant events, but 'fired' in the summary view.\n\nThere's no problem with GA4 tags.\n\nThere's no consent banner on this website, so I don't think it's privacy related.\n\nAny ideas what might be the issue?\n\nP.S. - When I look in Google Ads, conversions are tracked, but relatively few (less than 10 per conversion)\n\n  \nThanks!",
        "score": 5,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1du9qr0/google_ads_tag_still_running/",
        "num_comments": 10,
        "comments": [
            {
                "body": "It’s exactly that issue and can often easily be mitigated because its caused by issues like, in my clients case, they were using Unbounce custom HTML listener for a form fill followed instantly by a thank you page redirect. I added a delay so that the form won’t go to thank you page, instead display a thank you banner and then after delay go to thank you page. It worked with 3 seconds delay.",
                "author": "KalaBaZey",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "If you're tracking a conversion event on a page and that event fires just prior to the user being redirected to a thank-you page, the Gads tag is likely not having enough time to complete. The tag fires, starts processing and then gets interrupted by the next page load.\n\nThe straightforward solution is to instead trigger the Gads tag on the thank-you page.\n\nThe complex version is to do trickery to delay the redirect. Not something I've done, but I believe Simo has published an article on this. There are definitely some \"how to's\" out there. I don't think I'm a fan of this because it could perhaps break due to changes in new browser versions.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "The tag is still running bcs consent mode is not configured. I'm sure setting up v2 will fix the bug. Or if its due to the fast redirect to the thank you page - then just simply removing the thank you page should fix the issue. If you don't want to remove the thank you page then you can add a delay timer script so that your conversion tags have enough time to process the data",
                "author": "myyouthisyourz",
                "score": 1
            },
            {
                "body": "There are also some tag settings that can cause this. Make sure the G- or GT- tags are combined with the AW- tag, or try to add a tag to initialize the AW- tag as well.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "The GA4 and G-Ads tags use the same trigger - GA4 fires successfully while the G-Ads tag shows 'still running'.\n\nThis happens with all G-Ads tags - regardless of whether there's a redirect (e.g. add to cart > start checkout), or not (submit form - show a success message on the same page).\n\nCan this still be related to consent mode?",
                "author": "Ziggy-sent-me",
                "score": 1
            },
            {
                "body": "The clients I work with most often  tell me something like \"err, if I have to get our dev to do something it's going to be 3 weeks from now before they get to it\"\n\nAdding a delay / replacing with a banner is definitely a good way to resolve it, if it can be done (in time!). It's 100% my preference, but a pure GTM solution is 99% what I have to figure out.\n\nIt can be done. I speed-read an article and it seemed like the logic was \"fire a CHTML tag that runs a script that overrides redirects and inserts a delay\", which sounds like a sledgehammer to crack a nut to me. I don't like overpowered solutions. Especially ones that rely on \"standard\" web browser behaviour, which we know can and will change unexpectedly.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Yep it's 100% consent related. Make sure the consent tag fires before the form is submitted",
                "author": "myyouthisyourz",
                "score": 1
            },
            {
                "body": "Haha I should have clarified, my client was actually an agency who specifically hired me to solve this issue so I had access to everything & was authorized to do whatever is needed. \n\nYes you can add a delay script to the HTML listener too or you can add to individual pages. I had to do pages because each page had separate redirects. But generally this issue comes from when you’re using a datalayer push followed immediately by a page redirect so if that push is in GTM then you can just add delay there. If its from the website then its better to add it there.",
                "author": "KalaBaZey",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1727252149.0,
        "title": "Is this a big problem?",
        "author": "IllustriousLibrary8",
        "id": "1fozd54",
        "selftext": "Is this a problem (I think it's a consent mode v2 issue, but not sure).\n\nIn my Google Ads account, in goals > custom variables, there's the following:\n\nads\\_data\\_redaction | ads\\_data\\_redaction | Activation needed | false | Sep 23, 2024 | Activate\n\nIs this an issue?\n\nThanks",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fozd54/is_this_a_big_problem/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Not that I am aware of it shouldnt be an issue but why its coming through as custom var no idea. It's a consent mode gtag call that basically for denied consent users you are still letting google's (cookieless) servers process gclid (assuming you do advance cm). It's more if it's legal from a gdpr perspective and this is another grey area. If you pro compliance I would set this call to true and if you don't care then leave it to false. Google haven't said anything about caring about this param if this is true or false as far as I am aware so shouldn't affect your google ads",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "From google dev doc:\n\nWhen ads_data_redaction is true and ad_storage is denied, ad click identifiers sent in network requests by Google Ads and Floodlight tags will be redacted. Network requests will also be sent through a cookieless domain.\n\nSo in this case you set it to false so opposite will occur",
                "author": "dowmi12",
                "score": 1
            },
            {
                "body": "Thanks! I don't use advanced consent mode because my store doesn't get 1000 daily visitors. So in this case would it not matter if I set it to true?",
                "author": "IllustriousLibrary8",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723379075.0,
        "title": "I created a Web-Tool for automatically generating a gtm container",
        "author": "tracking-tiger",
        "id": "1epjjwk",
        "selftext": "You can choose, which Plattforms you want to implement tracking codes for. The tool supports Facebook Pixel, TikTok Pixel, GA4, Google Ads and Pinterest Pixel as of now. Depending on your choices in the form it will generate the necessary tags, triggers and variables. You then need to import the container and just change the Pixel/Datastream ID Variables, thats it.\n\nHere is the Tool:\n\n[https://tracking-tiger.de/](https://tracking-tiger.de/)\n\nYou would need to create a free account, since I want to prevent spam.\n\nThe E-Commerce Tracking works with the GA4 Enhanced Ecommerce Datalayer.\n\nThe premium version also has the capability to modify the triggers to only fire with consent, which could be interesting especially for people in the EU. It also only works, if you have Consent Mode V2 enabled in your CMP.\n\nDo you think this would be interesting for digital marketing agencies to automate the process of implementing standard tracking?\n\nI would appreciate some feedback, also in regards to the pricing.",
        "score": 8,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1epjjwk/i_created_a_webtool_for_automatically_generating/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Can't complain much about the free version (as it is free) but if I'm to be frank, in the time it would take me to visit your page, select the tags, download the JSON and import it to my container, I could have used that time to simply click into the Tag gallery and add these tags myself. On top of that, a lot of sites will still need additional customization added to the triggers so I might as well do that myself from the start.\n\n\n\n\nAs for the premium version. A monthly subscription for 49€ makes no sense in this context and is insanely overpriced for what the tool does. Since the generated container will always be identical (as it assumes ecommerce integration with the dataLayer according to Google documentation) you would only ever need to use this tool once. Either I have one site I want to tag or if I'm a consultant and want to re-use the template for future clients I'll just use the original JSON (or one that I've added additional template tags to after the initial export).\n\n\n\n\nYou would be better off cutting the price down to something like 5€ or less and make it a pay-per-use instead of monthly subscription.",
                "author": "brannefterlasning",
                "score": 6
            },
            {
                "body": "Thank you for taking the time to test it, i really appreciate it. My thinking for the pricing was that there are so many cmps out there so that users would have my tool to quickly implement tracking that listens to the consent signals. You have very good points though, i was thinking about the pricing a lot and this is definitely good input for my considerations. I also want to expand the tool, so that it scans the site first and then creates the container based on the data found, maybe that would be more interesting and could be a paid feature instead. Thanks again!",
                "author": "tracking-tiger",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Looks really helpful, will test it with my team and give feedback!",
                "author": "ppcquestioning",
                "score": 1
            },
            {
                "body": "Language selector doesn't work. At least on Firefox on Android.",
                "author": "brannefterlasning",
                "score": 1
            },
            {
                "body": "Thank you!",
                "author": "tracking-tiger",
                "score": 1
            },
            {
                "body": "Ok, thanks. I’ll check it out",
                "author": "tracking-tiger",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721742538.0,
        "title": "Google Tag Manager Mentor",
        "author": "Federal-Dot4580",
        "id": "1ea8ao2",
        "selftext": "Hi guys,\n\nI was wondering if someone would be interested helping me expand on the current knowlege about GTM.\n\nA bit of context: I can set up GA4 base codes on websites trough GTM and directly. \n\nI create google ads facebook Linkedin and bing conversions. \n\nI can create shopify conversions as well as woocommerece and presta shop conv. \n\nI implement consent mode v2 and can find my way around most platforms when I need to.\n\nNow for the important part I know that the GTM is much more than this and that it has a lot more capabilities so it would be cool to have someone reccomend how to expand my knowlege in GTM.",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1ea8ao2/google_tag_manager_mentor/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Follow Analytics Mania and Measure School on YouTube. They have great how-to videos on \"intermediate\" lessons.",
                "author": "Direct-Foundation909",
                "score": 10
            },
            {
                "body": "Then after this go in the lands of simo ahava for more complex stuff.",
                "author": "dowmi12",
                "score": 6
            },
            {
                "body": "Or just to learn stuff you'll never use lol. No idea who is using batch_order_id and batch_page_id in bigquery and why but god bless you guys.",
                "author": "TheHobbyist_",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "One thing to know about GTM is it can only track conversion with page loads, so if it’s a SPA then it needs script inserted to create history source for it to work.",
                "author": "JoanLockwood",
                "score": 1
            },
            {
                "body": ">Or just to learn stuff you'll never use lol.\n\nThat's the entire education system, mate!",
                "author": "Direct-Foundation909",
                "score": 1
            },
            {
                "body": "The difference between working with a client with $100k turnover versus one that spends that much each month on Facebook ads.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "I can teach you : \n\n-GTM installation on other CMS \n\n-useful but less known triggers \n\n -must know variables and what they are for\n\n- how to install and troubleshoot a GA4 Ecommerce with the Datalayer\n\n-how to read and use the Datalayer for conversions\n\n-how to setup classic and dynamic remarketing with GTM\n\n-implementing enhanced conversions tracking\n\n  \nI can make you a quote based on what you need, feel free to DM for more informations",
                "author": "Tricarrier",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717404434.0,
        "title": "Cookieless pings. Getting different results.",
        "author": "Agreeable_Anteater21",
        "id": "1d6zsx5",
        "selftext": "Hi there,\n\nI recently landed a job as a data analyst and I take care of the integration with GTM, GA4, Ads, etc. It has been really fun so far, except dealing with cookie management, especially Consent Mode V2.\n\nNow to my question: I have a CMP installed, which supposedly already integrates the \"advanced consent mode\" that is supposed to send cookieless pings with anonymous data from users who do not accept consent. So far, my experiments have returned 0 information in GA4. I've also made conversion tests, and in 1 out of 2 cases, the conversion has shown up in Google Ads but not in GA4.\n\nIs anybody else experiencing such inconsistencies? Has anybody been able to set things up so that it's reliable and actually understands what is going on?\n\nThank you a lot in advance.\n\n",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d6zsx5/cookieless_pings_getting_different_results/",
        "num_comments": 11,
        "comments": [
            {
                "body": "Are you expecting to see the cookieless pings data in GA4? Correct me if I'm wrong but I think the whole point is that this data won't show up directly in GA4 reporting and will \"only\" be used for data modelling behind blended identity reporting option.",
                "author": "small_foot_2490",
                "score": 7
            },
            {
                "body": "[deleted]",
                "author": null,
                "score": 4
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "You’re correct - hope OP sees this response!",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Thank you u/parkrangerDK , I found the menu in the GA4 admin section. Data modeling shows up as inactive still, probably due to lack of enough visitors.",
                "author": "Agreeable_Anteater21",
                "score": 1
            },
            {
                "body": "It's reasonable considering it's not easy to understand it since it's not really clear how it works, and nobody is getting the cookie banners/gdpr correct.",
                "author": "ResearchScience2000",
                "score": 1
            },
            {
                "body": "Got it. I don’t fully understand that either. I just thought that data analysts are exactly the people I would ask for help if needed.",
                "author": "jakub_curik",
                "score": 1
            },
            {
                "body": "You don't need to thank me. My comment is not related to problem with cookieless pings. Other redditors already answered and they're right.",
                "author": "jakub_curik",
                "score": 1
            },
            {
                "body": "u/jakub_curik thanks for your very useful comment.",
                "author": "Agreeable_Anteater21",
                "score": 0
            },
            {
                "body": "You landed job as a data analyst and still you are asking that? Don't get me wrong. I am happy for you and wish you the best but holy fuck.",
                "author": "jakub_curik",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1726846933.0,
        "title": "No tag was found",
        "author": "LayerAdmirable3379",
        "id": "1flf3do",
        "selftext": "Hello,\n\n  \nI placed my google tag code on every website page I have. It looks like this works, since GTM says the 'tags' are being found. But when im previewing in the debug, it says no tags found, but when inspecting the page, I literally see the tag...\n\n  \nAnyone who has some recommendations?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1flf3do/no_tag_was_found/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Make sure your tag is the correct tag and the placement is correct. The script tag should be placed as high in the <head> as possible. \n\nScreenshots of your debug preview would be useful as well!",
                "author": "growthiqdigital",
                "score": 1
            },
            {
                "body": "Clear your browser's cookies for that site and then preview it again. When prompted for cookie consent, accept all of them and see you GTM debug.",
                "author": "Smooth_Dingo_8436",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1725459759.0,
        "title": "Google Tag Manager Help",
        "author": "Hutchieeeeee",
        "id": "1f8ulwq",
        "selftext": "Hellooo everyone, \n\nHoping someone can help, all the posts seem to be complicated issues that go over my head. I am hoping my issue is just a lack of basic understanding of how this all works. I decided to DIY Google ads for my business. I have used google tag manager to set everything up. However, it didn't work at first and my conversions were not going through to google ads. After hours of messing about, I have made this mess.... \n\n--------------------------------------------------------------------------------------------------------------------\n\nI cant post photos... so no clue how to show this but. i have made a Tag with the below triggers.\n\n**Tag type**: Google Ads Conversion Tracking - Google ads\n\n**Triggering**\n\nAll Pages : *Page view*\n\nConsent Intialization - All Pages - *Consent Initialisation*\n\nInitialization - All Pages - *Initialization*\n\nPage Url Equals Booking Complete - *Page View*\n\nTag - *Page view* \n\n---------------------------------------------------------------------------------------------------------------------\n\nI have no clue what I actually need in this mess... but once i had the above it started to work. I assume a lot of this is doubled up and i dont actually need them all. The most important is the Page Url equals booking complete as that tracks when someone sucessfully books on. \n\nIt also tells me that my conversion linker tag is missing in the container? But pages are triggering otherwise and heading over to google.\n\nAny advice would be much appreciated. ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1f8ulwq/google_tag_manager_help/",
        "num_comments": 5,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Set up the Conversion Linker; it's important for Google Ads. Click on the warning to create the Conversion Linker with the configured tag and trigger. Then, create the tag and remove any unnecessary tags and triggers to avoid confusion. If you need assistance with advanced tracking, such as enhanced conversion tracking or any other tracking needs, feel free to reach out. I can help with that.",
                "author": "MarketerErfan_",
                "score": 1
            },
            {
                "body": "To setup conversion tracking in Google Ads create a conversion action using manual method copy, you will be end up having three options to setup conversion, choose google tag manager as an option and copy the conversion id and conversion label. Now create a tag in GTM add tag type as google ads conversion tracking now paste the conversion id and conversion label in Google Tag (Google Ads Conversion Tracking ) and save the tag, now add the conversion linker tag. Now add trigger where trigger type will be page view and page url will be your booking page URL. Now test using preview in GTM if your tag is firing.",
                "author": "sandip_routh",
                "score": 1
            },
            {
                "body": "If you share the site, we can check your GTM setup with tagstack.io",
                "author": "RCoffee_mug",
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1723847196.0,
        "title": "Tag getting fired even when the trigger is setup",
        "author": "Recent_Marsupial_392",
        "id": "1eu1ur8",
        "selftext": "So currently i have a consent form which when accepted should trigger a tag only if the page path contains /test.  If i accept the consent cookie on page that doesnt have the page path /test, it shouldn't fire that tag but right now it's still firing even when i accept it from another page which doesnt have it.   \n  \nPlease help\n\n\n\n ",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1eu1ur8/tag_getting_fired_even_when_the_trigger_is_setup/",
        "num_comments": 6,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you screenshot the tag setup ?",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "Trigger too please",
                "author": "Otto_Maller",
                "score": 1
            },
            {
                "body": "Yeah OP, you've described what SHOULD happen, but the devil is going to be in how you technically implemented this. \n\n\nWe need those details.",
                "author": "spiteful-vengeance",
                "score": 1
            },
            {
                "body": "Images are not allowed so unable to post it :(",
                "author": "Recent_Marsupial_392",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1727416407.0,
        "title": "GTM and Shopify Headless",
        "author": "philonik",
        "id": "1fqgxns",
        "selftext": "So here's my situation, I am running an eCom store using Webflow & Shopify Headless to manage the checkout. I have successfully installed GTM on the Webflow side and that's sending the events to GA4. I can't get it to send over the purchase event to GA4 though, it's sent over the begin\\_checkout though.\n\nAttached a copy of my code I have in my shopify checkout page...  \n  \n `// GTM for Shopify Custom Pixel`\n\n`window.dataLayer = window.dataLayer || [];`\n\n`function gtag(){dataLayer.push(arguments);}`\n\n\n\n`(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':`\n\n`new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],`\n\n`j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=`\n\n`'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);`\n\n`})(window,document,'script','dataLayer', 'GTM-T2KW982S');`\n\n\n\n`//Google Consent Mode v2`\n\n`gtag('consent', 'update', {`\n\n  `'ad_storage': 'granted',`\n\n  `'analytics_storage': 'granted',`\n\n  `'ad_user_data': 'granted',`\n\n  `'ad_personalization': 'granted',`\n\n`});`\n\n\n\n`analytics.subscribe(\"checkout_completed\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `const items =` [`event.data?.checkout?.lineItems?.map((item)`](http://event.data?.checkout?.lineItems?.map((item)) `=> {`\n\n`return {`\n\n`item_id:` [`item.variant.product.id`](http://item.variant.product.id)`,`\n\n`item_name: item.variant.product.title,`\n\n`price: item.variant.price.amount,`\n\n`quantity: item.quantity`\n\n`}`\n\n  `});`\n\n  `dataLayer.push({`\n\n`event: \"purchase\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.checkout?.currencyCode`](http://event.data?.checkout?.currencyCode)`,`\n\n`value:` [`event.data?.checkout?.subtotalPrice?.amount`](http://event.data?.checkout?.subtotalPrice?.amount)`,`\n\n`transaction_id:` [`event.data?.checkout?.order?.id`](http://event.data?.checkout?.order?.id)`,`\n\n`coupon:` [`event.data?.checkout?.discountAllocations`](http://event.data?.checkout?.discountAllocations)`,`\n\n`shipping:` [`event.data?.checkout?.shippingLine?.price?.amount`](http://event.data?.checkout?.shippingLine?.price?.amount)`,`\n\n`tax:` [`event.data?.checkout?.totalTax?.amount`](http://event.data?.checkout?.totalTax?.amount)`,`\n\n`items: items`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"payment_info_submitted\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `const items =` [`event.data?.checkout?.lineItems?.map((item)`](http://event.data?.checkout?.lineItems?.map((item)) `=> {`\n\n`return {`\n\n`item_id:` [`item.variant.product.id`](http://item.variant.product.id)`,`\n\n`item_name: item.variant.product.title,`\n\n`price: item.variant.price.amount,`\n\n`quantity: item.quantity`\n\n`}`\n\n  `});`\n\n  `dataLayer.push({`\n\n`event: \"add_payment_info\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.checkout?.currencyCode`](http://event.data?.checkout?.currencyCode)`,`\n\n`value:` [`event.data?.checkout?.subtotalPrice?.amount`](http://event.data?.checkout?.subtotalPrice?.amount)`,`\n\n`items: items`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"checkout_shipping_info_submitted\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `const items =` [`event.data?.checkout?.lineItems?.map((item)`](http://event.data?.checkout?.lineItems?.map((item)) `=> {`\n\n`return {`\n\n`item_id:` [`item.variant.product.id`](http://item.variant.product.id)`,`\n\n`item_name: item.variant.product.title,`\n\n`price: item.variant.price.amount,`\n\n`quantity: item.quantity`\n\n`}`\n\n  `});`\n\n  `dataLayer.push({`\n\n`event: \"add_shipping_info\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.checkout?.currencyCode`](http://event.data?.checkout?.currencyCode)`,`\n\n`value:` [`event.data?.checkout?.subtotalPrice?.amount`](http://event.data?.checkout?.subtotalPrice?.amount)`,`\n\n`items: items`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"checkout_started\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `const items =` [`event.data?.checkout?.lineItems?.map((item)`](http://event.data?.checkout?.lineItems?.map((item)) `=> {`\n\n`return {`\n\n`item_id:` [`item.variant.product.id`](http://item.variant.product.id)`,`\n\n`item_name: item.variant.product.title,`\n\n`price: item.variant.price.amount,`\n\n`quantity: item.quantity`\n\n`}`\n\n  `});`\n\n  `dataLayer.push({`\n\n`event: \"begin_checkout\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.checkout?.currencyCode`](http://event.data?.checkout?.currencyCode)`,`\n\n`value:` [`event.data?.checkout?.subtotalPrice?.amount`](http://event.data?.checkout?.subtotalPrice?.amount)`,`\n\n`items: items`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"cart_viewed\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `const items =` [`event.data?.cart?.lines?.map((item)`](http://event.data?.cart?.lines?.map((item)) `=> {`\n\n`return {`\n\n`item_id:` [`item.merchandise.product.id`](http://item.merchandise.product.id)`,`\n\n`item_name: item.merchandise.product.title,`\n\n`price: item.merchandise.price.amount,`\n\n`quantity: item.quantity`\n\n`}`\n\n  `});`\n\n  `dataLayer.push({`\n\n`event: \"view_cart\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.cart?.cost?.totalAmount?.currencyCode`](http://event.data?.cart?.cost?.totalAmount?.currencyCode)`,`\n\n`value:` [`event.data?.cart?.cost?.totalAmount?.amount`](http://event.data?.cart?.cost?.totalAmount?.amount)`,`\n\n`items: items`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"product_added_to_cart\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `dataLayer.push({`\n\n`event: \"add_to_cart\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.cartLine?.cost?.totalAmount?.currencyCode`](http://event.data?.cartLine?.cost?.totalAmount?.currencyCode)`,`\n\n`value:` [`event.data?.cartLine?.cost?.totalAmount?.amount`](http://event.data?.cartLine?.cost?.totalAmount?.amount)`,`\n\n`items: [`\n\n`{`\n\n`item_id:` [`event.data?.cartLine?.merchandise?.product?.id`](http://event.data?.cartLine?.merchandise?.product?.id)`,`\n\n`item_name:` [`event.data?.cartLine?.merchandise?.product?.title`](http://event.data?.cartLine?.merchandise?.product?.title)`,`\n\n`price:` [`event.data?.cartLine?.merchandise?.price?.amount`](http://event.data?.cartLine?.merchandise?.price?.amount)`,`\n\n`quantity:` [`event.data?.cartLine?.quantity`](http://event.data?.cartLine?.quantity)\n\n`}`\n\n`]`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"product_viewed\", (event) => {`\n\n  `dataLayer.push({ ecommerce: null });`\n\n  `dataLayer.push({`\n\n`event: \"view_item\",`\n\n`url: event.context.document.location.href,`\n\n`ecommerce: {`\n\n`currency:` [`event.data?.productVariant?.price?.currencyCode`](http://event.data?.productVariant?.price?.currencyCode)`,`\n\n`value:` [`event.data?.productVariant?.price?.amount`](http://event.data?.productVariant?.price?.amount)`,`\n\n`items: [`\n\n`{`\n\n`item_id:` [`event.data?.productVariant?.product?.id`](http://event.data?.productVariant?.product?.id)`,`\n\n`item_name:` [`event.data?.productVariant?.product?.title`](http://event.data?.productVariant?.product?.title)`,`\n\n`price:` [`event.data?.productVariant?.price?.amount`](http://event.data?.productVariant?.price?.amount)`,`\n\n`quantity: 1`\n\n`}`\n\n`]`\n\n`}`\n\n  `});`\n\n`});`\n\n\n\n`analytics.subscribe(\"page_viewed\", (event) => {`\n\n  `window.dataLayer.push({`\n\n`event: \"shopify_page_view\",`\n\n`url: event.context.document.location.href`\n\n  `});`\n\n`});`",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fqgxns/gtm_and_shopify_headless/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "So just to be clear here that code is for customer events sandbox api only. Have you put this directly in the source code or via the customer events section in shopify admin? If its the first then that's likely your problem as this won't work directly in source code of your checkout pages. If it's the latter then I've read that customer events is not yet compatible with headless shopify (although shopify plan to do this and may have done this recently but I haven't heard anything). Therefore for headless stores, it is recommended that purchase and other order success related events be triggered through the Order Status Page field. \n\nHope this helps.",
                "author": "knowanalytics",
                "score": 1
            },
            {
                "body": "It's the later! Ok so how do I set up a trigger through the Order Status Page field?",
                "author": "philonik",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719846147.0,
        "title": "Loading conversion linker on DOM ready",
        "author": "mapitchf",
        "id": "1dsv61w",
        "selftext": "Hi,\n\nWondering if anyone knows if it would be a problem in GTM to load the google conversion linker on DOM ready rather than container loaded. We have consent mode enabled but the linker tag is firing before consent so I think we are losing a lot of data\n\nThe recommendation seems to be to load the linker on Container Loaded, but right now we have another problem which means we can't load consent mode before the container is loaded, so as a solution I wanted to try and fire the linker on DOM Ready.\n\n  \nAny thoughts if it would be a problem? Or would the problem persist if we are loading cookie consent after the container has loaded anyway?\n\n  \nThanks for any help.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dsv61w/loading_conversion_linker_on_dom_ready/",
        "num_comments": 8,
        "comments": [
            {
                "body": "Thanks both. Yes I know ideally firing it on initialization but that right now is out of our control unfortunately. Working towards it as someone else has implemented CM in a pretty weird way. Thanks though appreciate it",
                "author": "mapitchf",
                "score": 3
            },
            {
                "body": "thanks, good shout I've just done the test and can see the cookie there. Current people have done a custom setup directly on site rather than through GTM and Im sure its causing problems but they are reluctant to roll back and use and easier solution",
                "author": "mapitchf",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "No issues. If you want to make sure a tag fires after a specific event (e.g. consent) , you can use a trigger group with consent and gtm.dom, for example. This works if the consent event is fired on all pages",
                "author": "MariusGMG",
                "score": 1
            },
            {
                "body": "Frustrates me that there's plenty of best practise info out there and people still manage to tie themselves up in knots with the implementation!\n\nIf you have advanced CoMo, firing Conversion Linker \"too early\" is not a risk. As soon as the CoMo 'update' happens, Conversion Linker will do its thing. It won't reflect that in Tag Assistant, but it will e.g. copy gclid into the relevant cookie(s).\n\nYou can test it by manually putting ?gclid=TEST123 in the URL and then searching TEST123 in the Application tab in dev tools.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "The practise I follow usually involves a hardcoded consent mode 'default' script on site (assuming there isn't a complex / likely to change consent policy), followed by the hardcoded script for the CMP (Consent Management Platform, i.e. the cookie banner provider).\n\nThe CMP takes care of the CoMo 'update' API call.\n\nGTM is then not an active participant in the set up of CoMo or the CMP, but is able to perfectly respond to everything going on.\n\nImplementing CoMo (and the CMP!) via a tag in GTM can be fine and I've done a setup for my employer's site recently where their main brand site is all hardcoded CoMo setup, but a sister brand on a subdomain uses the OneTrust tag template. Same GTM container on both, just to have something to demo to clients who are undecided on best approach.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": -1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1726527353.0,
        "title": "Setting up server-side tagging. Page views way overcounting and source medium not passing...",
        "author": "Btw_Adon",
        "id": "1fiip60",
        "selftext": "As per title, it's 10x overcounting page views and the source-medium isn't passing (and I'm presuming these 2 things are connected)\n\nI have a react/next.js Single Page App, so I explicitly set page\\_views to be triggered in my client-side container by either consent initialization or a historychange (with the condition it's a pushState). I set my ga4 config tag on page initialization and set send\\_page\\_views to false. When debugging, my tags are firing exactly right within my client-side debugger.\n\nWhen I preview both though, while my client side debugger is fine my server side debugger is picking up tons of extra page\\_view events that I just can't track down (I'm not sending them)...it must be auto-triggering from historychanges or some sort of thing, but I don't see how this is happening without it being clear which tag is picking up these requests and how they're being sent.\n\n1 - any tips to look for?  \n2 - does this page\\_view issue explain source/medium data not passing?",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1fiip60/setting_up_serverside_tagging_page_views_way/",
        "num_comments": 3,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I should add, I also had \"send\\_page\\_view\" set to false, but it's just not blocking stuff as it should (it seems)",
                "author": "Btw_Adon",
                "score": 1
            },
            {
                "body": "Go into your GTag settings and then into your enhanced event tracking (these are the events Google tracks automatically) under page views,  click the drop-down and make sure the track page views on history change is disabled. See if this fixes your issue.",
                "author": "growthiqdigital",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1714471349.0,
        "title": "Conversion Tag issue (Still running)",
        "author": "bhyeeraw0w",
        "id": "1cgp4tt",
        "selftext": "Hi,  \nI am reaching out in the hopes that someone can help me... I have a tag manager setup with with everything in place. Everything was working fine untill the 12th of April.  \nWe setup the consent V2 last month and it is still set currently. When debugging I noticed that the conversion request was not being sent to Google on the network panel for the conversion tag when a \"begin\\_checkout\" trigger was fired (which is our conversion trigger), so I proceeded to manually do the dataLayer.push from the trigger into the console (just like google does on the background) and for some reason the conversion tag fired and it sent the request. I thought it would be something with the implementation of our tag manager setup and consent but I then tried something different: I reloaded the page and manually did the dataLayer push twice in a row for the conversion trigger (begin\\_checkout) and the first time once again didn't sent the request and the second did? Has something changed recently? Why is the trigger not sending the request the first time?  \nAll help would be appreciated, thank you.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cgp4tt/conversion_tag_issue_still_running/",
        "num_comments": 11,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hey, I'm in the exact same boat. The Google conversion tag is still running in preview mode. I heard it has something to do with consent mode v2 which uses a new parameter called GCS. Have you figured out the solution? Are conversions passing through to Google ads?",
                "author": "myyouthisyourz",
                "score": 1
            },
            {
                "body": "no, i am still trying to figure this problem out...\nconversions are not passing as the tag is not \"succeeded\" after it starts, it is always \"still running\"...\neverything is set, consent is set, i don't understand were the problem is, but can you give me the source of information for the GCS parameter you talked about? i want to look into it please",
                "author": "bhyeeraw0w",
                "score": 1
            },
            {
                "body": "If you're using an older version of Chrome, then it may not support the GCS parameter. You can try testing it on a different browser to see if your issue is related to Consent Mode V2",
                "author": "myyouthisyourz",
                "score": 1
            },
            {
                "body": "i have been working with both Firefox and Chrome, everything was working fine with the current setup until the 12th",
                "author": "bhyeeraw0w",
                "score": 1
            },
            {
                "body": "I have checked and i currently have the parameter present.. My problem is that if a conversion tag fires once it doesnt work but if the SAME conversion tag is fired twice, it only works fine the second time...  It never works the first time, so I have to have two triggers which is strange and doesn't make sense to be consent related I guess... My first conversion tag stays \"still running\" while the second shows \"succeeded\" and there is in fact a XHR network request to send the conversion to Google..",
                "author": "bhyeeraw0w",
                "score": 1
            },
            {
                "body": "Not sure if I could be of any help to you, but here's a [guide by Analytics Mania. ](https://www.analyticsmania.com/post/google-analytics-tag-in-gtm-still-running/)Give it a read",
                "author": "myyouthisyourz",
                "score": 1
            },
            {
                "body": "thanks for your help... gladly and not so gladly the problem aparently sorted itself out.. the same way it stopped working on its own it is now working again.. strangest thing this is...",
                "author": "bhyeeraw0w",
                "score": 1
            },
            {
                "body": "Happy to know it's all good. How did you fix it? Did you make any specific changes?",
                "author": "myyouthisyourz",
                "score": 1
            },
            {
                "body": "I can't say I did.. I did changes across different days and none of them work.. I didn't change anything for 3 or 4 days and it started working again so it is very hard to figure if I did change something or not that made it work and also depends on the configuration you have...",
                "author": "bhyeeraw0w",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1719163866.0,
        "title": "Trigger tag once per page issue",
        "author": "trp_wip",
        "id": "1dmrfij",
        "selftext": "Let's imagine this scenario: I have a tag that I fire on Initialization - All Pages, but the tag requires consent. The tag is set up to only fire once per page. However, for new users, because it fires before cookie consent banner loads, it gets blocked due to the lack of consent. If I set the trigger both on Initialization - All Pages and Consent update custom event, the tag will not fire since it is set to only fire once per page (Consent update would mean firing the tag for the second time). \n\nI had this problem and I found a solution in my setup. However, my question is: is there a way to set a tag to fire once per page, but to ignore that rule if it was blocked due to the consent in the tag settings? In the case above, I would be able to fire it again on Consent update because it was blocked the first time.",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dmrfij/trigger_tag_once_per_page_issue/",
        "num_comments": 7,
        "comments": [
            {
                "body": "You could do it the old-fashioned way. Create an exception trigger that blocks your tag from firing unless the proper consent is given. ",
                "author": "brannefterlasning",
                "score": 2
            },
            {
                "body": "Oh wow, that's actually ridiculously simple, but didn't cross my mind. Exactly why I posted this. Thanks for the idea!",
                "author": "trp_wip",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Depending on your CMP platform, use `cookie_cat_necessary` or `cookie_consent_update` as your new `All Pages` trigger, and then use the built-in Consent feature to control triggering.",
                "author": "mbkjeldsen",
                "score": 1
            },
            {
                "body": "There’s no such config option within GTM that achieves what you’re asking. The best way to deal with it is to avoid painting yourself into that particular corner in the first place.",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "Yeah, that's what I did basically. Since cookie\\_consent\\_update happens before anything else, I set it to fire on that and also set up tag sequencing on other tags, so Google Tag fires before any other tag if not fired already. I wanted to see if there is another way to solve it.",
                "author": "trp_wip",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1718723511.0,
        "title": "GTM tags: Google Ads Conversion Tracking vs GA4 events?",
        "author": "topperdoggle",
        "id": "1dit277",
        "selftext": "Hi all,\n\nI'm very techie but not a PPC guru and I only got into PPC relatively recently so when I'm reading docs etc, a lot is taken for granted.\n\nI have a couple of SME customers, I do their websites and a bit of PPC,nothing too complicated. Using GTM, GA4 and Google Ads.\n\nI generally want to track the following conversions:\n\n* Form filled in\n* (Optional) Message sent via [tawk.to](http://tawk.to) chatbot\n* (Optional) Link to phone number (tel: URL) clicked\n\nI've always set up each conversion in Google Ads as a custom conversion action (\"Create conversion actions manually using code\") then gone to GTM and added a corresponding \"Google Ads Conversion Tracking\" tag which I get to fire on the relevant event.\n\nSo far, so good.\n\nThen I came across a client who has (key?) events tracked in GA4 (also via GTM) which you then see in the Google Ads conversion screen which means I don't have to create the custom conversion action in Google Ads (but do have to in GA4 / GTM). What is the use case for this approach and when is it preferred to the method I'm using?\n\n(Also GA4 seems to automatically track events like form\\_submit so I don't see the need to add them in GTM -> GA4 Event.)\n\nThanks in advance and hope it's not too silly a question.",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dit277/gtm_tags_google_ads_conversion_tracking_vs_ga4/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Can't enable Google ads enhanced conversions on conversions that were imported from ga4, they need to be Website. \n\nThat's only thing I ran into recently.",
                "author": "thesickdoctor",
                "score": 3
            },
            {
                "body": "The only reason for importing from google analytics is:\n\n-\tit’s easier to set up on GA4 tag instead of a GA4 tag and a Google Ads tag for the same action\n-\tyou have an integration that only reports to GA4 which forces you to have to import that conversion\n\nHowever, using the native Google Ads website conversion tag allows you to keep tracking your conversions even if someone messes with your GA settings. It also allows you to track view-through conversions (mostly used for display ads).\n\nThat said, I use both just to make sure things are working. You can set your imported GA4 conversions as secondary so they don’t skew your conversions column.\n\nP.S. for tracking calls in google ads, don’t forget to set up both “Calls from ads” and “Calls from website.” Calls from websites has its own conversion tag type in GTM.",
                "author": "HawkeyMan",
                "score": 2
            },
            {
                "body": "I also like to recommend to implement Google Ads conversions seperately and indeed import GA4 key events as secondary conversion, just to easily compare. The ads tag has view-through conversions and you can use enhanced conversions, which both are ideal. \n\nBut another thing that MIGHT be important is GDPR. Not sure where you are of course, but if the website target European countries, GDPR is very important. \n\n- Google Ads conversion tracking: marketing consent is always needed. \n\n- Google Analytics 4 without GAds exporting: if you do not share any data to other Google platforms: analytical consent is needed.\n\n- Google Analytics 4 without GAds exporting and anonymized data: if you do not share it AND did some extra setting to anonymize the data in GA4: no consent is needed at all for GA4. \n\n- Google Analytics 4 with GAds exporting: now your GA4 property also needs marketing consent. \n\nAs I said, it depends on where the companies are targeting, but for Europe I always advice to not share any GA4 data to any other platform.",
                "author": "MisterMarcoo",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Importing conversions into GAds from GA4 is s good *backup solution* to directly measuring conversions using GTM.\n\ni.e., I would always recommend implementing conversion tracking in GTM with the data sent direct to GAds, but I would also have those same conversions sent to GA4.\n\nStuff happens. Having a backup source of conversion data will get you out of a jam at some point.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "That's a great question.\n\nIt touches on a key decision point in modern conversion tracking.\n\nThe client's approach of importing GA4 events as conversions into Google Ads is often preferred because it streamlines management and maintains consistency.\n\nBy focusing your conversion setup in GA4, you only need one set of events tracked via GTM (or automatically).\n\nThen, you simply tell Google Ads which of those GA4 key events to count as a conversion.\n\nThis single source of truth for all your user interactions (GA4) makes reporting and auditing much cleaner.\n\nIt's especially useful if you rely heavily on GA4's cross-platform or event-rich data for a full view of the customer journey, not just the path from a Google ad.\n\nHowever, your original method of using the \"Google Ads Conversion Tracking\" tag for direct Google Ads conversions is generally considered more accurate and reliable *specifically for Google Ads bidding and optimization*.\n\nThis is because the direct Google Ads tag reports the conversion data immediately and directly to Google Ads, often providing faster reporting, and it’s the data source Google Ads prefers for its machine learning and automated bidding strategies.\n\nConversions imported from GA4 can have data discrepancies due to differences in attribution models, processing times, and other factors.\n\nFor the absolute best performance in Google Ads, many PPC experts still recommend using the dedicated Google Ads tag, setting the imported GA4 conversions as \"Secondary\" actions to avoid double-counting for bidding.\n\nRegarding the automatic GA4 events, like `form_submit`, you're right that they exist through Enhanced Measurement.\n\nHowever, these auto-tracked events are often unreliable for precise conversion tracking because they can sometimes fire even when a form submission fails due to validation errors (e.g., a required field is left blank).\n\nTherefore, for critical conversions like a form fill, the best practice is still to create a custom event in GTM that fires only on a successful submission, such as when a user reaches a 'thank you' page or when the data layer confirms a successful submission, then mark that custom event as a key event in GA4.\n\nThis gives you control and accuracy.\n\nA very good modern solution that maximizes accuracy and compliance is integrating the Google Ads Conversions API (also known as Server-Side Tagging) using Google Tag Manager with a service like Stape.io.\n\nThis method sends the conversion data directly from your server to Google Ads, bypassing the user's browser, which can otherwise be blocked by ad blockers or privacy settings (like Intelligent Tracking Prevention or ITP).\n\nThe benefits are a significant increase in conversion tracking accuracy (sometimes 15-30% more conversions tracked), which directly improves the performance of automated bidding.\n\nStape.io simplifies the complex server-side GTM setup, making it accessible for SME customers without needing a dedicated server infrastructure and development team.\n\nIt essentially creates a more robust, private, and accurate channel for your most important data, giving Google Ads better information for its Smart Bidding algorithms.",
                "author": "Mental_Elk4332",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1706051964.0,
        "title": "GTM event not visible in GA4 debug",
        "author": "trp_wip",
        "id": "19e26z2",
        "selftext": "I have several events that I set up in GTM and they are firing properly. I can see all of them in GA4 debug. Some of them are modified click events, some are custom events.\n\nI have created a tag with an event called purchase\\_acc. When I test it in GTM preview, it fires properly.  But when I look at GA4 debug view, I can see page\\_view, click, my other custom events, but not this one. What can be the cause of this?\n\nI do not have consent mode activated, it is not  a server-side setup, I used the same constant with my measurement ID that I used for other tags. I'd really appreciate help.\n\nThanks in advance!\n\nEDIT: I figured it out. I needed to add gtag to Shopify's checkout.liquid. Does anyone know why since other stores work fine without gtag in checkout.liquid?",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/19e26z2/gtm_event_not_visible_in_ga4_debug/",
        "num_comments": 14,
        "comments": [
            {
                "body": "I figured it out. This is a Shopify store and I needed to put a gtag for some reason in checkout.liquid. No other client needs this, everyone is doing fine with only GTM, but  at least I managed to get it work partially. I am still not getting all parameters I need in GA4, but at least it is registering it.",
                "author": "trp_wip",
                "score": 2
            },
            {
                "body": "Yes. This is a Shopify store and it needed gtag script in checkout.liquid. Usually it is not necessary, since there is GTM script there. I only came up with this solution since I had a similar issue with another event before.",
                "author": "trp_wip",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Ensure that the parameters associated with the \"purchase\\_acc\" event are correctly configured both in GTM and in the GA4 tag setup. Mismatched or missing parameters can sometimes cause events not to be tracked properly.\n\nUse the GTM preview mode to check the values of variables associated with the \"purchase\\_acc\" event. This can help ensure that the necessary data is being passed to GA4.",
                "author": "Powerful_Yesterday31",
                "score": 1
            },
            {
                "body": "In Chrome dev console network tab, does the event successfully send data to Google's endpoint?\n\nAre you able to wait until the data processes and check in GA4 if the event logged?\n\nSometimes debug mode is...buggy and doesn't always display events correctly",
                "author": "hashtag_RIP",
                "score": 1
            },
            {
                "body": "[removed]",
                "author": null,
                "score": 1
            },
            {
                "body": "this is the AI response lol but I'm not sure what it means",
                "author": "joevaded",
                "score": 1
            },
            {
                "body": "All of the parameters I am sending are known parameters. I am sending ecommerce.items as list of items, transaction\\_id, affiliation, tax, shipping, value, coupon, currency. It works in GTM, they are all there.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "My debut is always empty, console network shows the send to google but I always get a 302 or the other one (never a 200)",
                "author": "joevaded",
                "score": 1
            },
            {
                "body": "If I can review it, maybe I will understand what the problem is.",
                "author": "Powerful_Yesterday31",
                "score": 1
            },
            {
                "body": "What event name have you given in tag manager if it is ppurchase\\_acc  then change it and give the event name purchase.",
                "author": "Powerful_Yesterday31",
                "score": 1
            },
            {
                "body": "Sorry, would be happy to, but I am under NDA with my company, so this is as far as I can stretch it. I cannot show any data.",
                "author": "trp_wip",
                "score": 1
            },
            {
                "body": "I don't want to call it purchase, that's the whole point of this. I need a purchase event tracked differently than regular purchase event.",
                "author": "trp_wip",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1720079987.0,
        "title": "invalid \"Google Analytics Settings\" field",
        "author": "SternchenX",
        "id": "1dv1iuf",
        "selftext": "I encountered a problem where I cannot publish the variables in GTM. The issue is an invalid \"Google Analytics Settings\" field. I am trying to use GTM to track GA4, Google Ads, and Consent Mode V2.\n\n  \nI am totally new to GTM.\n\ncan some one helps me!!\n\nthanks in front. \n\n|Location|Description|\n|:-|:-|\n|Invalid “Google Analytics Settings” field||Incompatible variable reference “pxl - User Provided Data (For Enhanced Conversions)” found in this tag. Please either revert your changes or update the “Google Analytics Settings” field in the tag.|\n\n  \n",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1dv1iuf/invalid_google_analytics_settings_field/",
        "num_comments": 5,
        "comments": [
            {
                "body": "Please keep all answers in this post and don't request original poster to inbox you. No one learns from this if questions are answered outside of this forum.",
                "author": "rlewis2019",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Hmmm screenshot the error your seeing",
                "author": "MustacheManiaDotCom",
                "score": 1
            },
            {
                "body": "Yes, I cal help you.",
                "author": "Everson1",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1716979560.0,
        "title": "Tag Still Running - Google Ads Purchase Tag (Not Feeding Data to Google Ads)",
        "author": "TCoxy23",
        "id": "1d397ag",
        "selftext": "Hi guys,\n\n&#x200B;\n\nI'm wondering if anybody could help me out. I cannot figure it out for my life, and neither have I had any problems with any tag manager accounts in the past. I have set up a Google Tag that is supposed to be tracking purchase events. The tag fires when I make a test purchase, although its status is not \"succeeded\" but is in fact \"still running.\"   \n\n\nMy shop is WooCommerce, if that has anything to do with it, and the GTM is installed on the website via GTM4WP.  \n\n\nDoes anybody have any suggestions as to what I could be missing? I'd appreciate any help you can give me so I can resolve this as soon as possible. All suggestions and help are welcome!",
        "score": 2,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d397ag/tag_still_running_google_ads_purchase_tag_not/",
        "num_comments": 7,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "I am also facing this issue currently. For now, you can check your AW and Gtag and see if any problem shows within preview.",
                "author": "OldAirport2135",
                "score": 1
            },
            {
                "body": "My understanding is that the usual cause of this is the tag being fired on an event that happens immediately prior to a page (re)load. Thus the tag is triggered, but doesn't complete before the current page is unloaded.\n\nI haven't had to try to fix this one, but I've seen one strategy where you try to delay the next page load. I'm not a fan of that, because it just seems a fraglie way to do things that can be changed by a browser at any time.\n\nThe other strategy is to carry over all of the data you need to the next page and then fire the tag on page load. That seems a more sensible option.",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Go and connect the AW- destination to the current Google Tag, or try and combine all tags for that business. See if it still happens.",
                "author": "zenith66",
                "score": 1
            },
            {
                "body": "Using any CMP?",
                "author": "analyst_bappy",
                "score": 1
            },
            {
                "body": "Check consent status. Are you using any CMP plugin?",
                "author": "Low_Inspection6571",
                "score": 0
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1721290279.0,
        "title": "Google Ads Tags show status \"Still running\" in debug mode for no apparent reason. Any ideas?",
        "author": "ApprehensiveTale6164",
        "id": "1e664lz",
        "selftext": "Google Ads tags show \"still running\" status in debug mode for no apparent reason. Other tags (GA4, FB, Linkedin) with the same trigger are fine and show as \"secceeded\". I've tried multiple solutions but still won't work.\n\n- More milliseconds   \n- tried changing the tag firing options\n\n- Tried all the \"additional consent checks\" options\n\n- even forced all cookies to be granted to try\n\n  \nThis randomly started happening across many gtm containers i have access to maybe 1 month ago and it's been going on since then. Does anyone have any idea what might be causing this and how to fix it? Is anyone else experiencing this? Atm i'm completely clueless. Thanks in advance to everyone for the help!!",
        "score": 1,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1e664lz/google_ads_tags_show_status_still_running_in/",
        "num_comments": 4,
        "comments": [
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Check things like your websites CSP policy. You may need to add the googleadservices.com domain to your sites CSP to allow the script to run on your site. \n\nCheck the network tab in dev tools and see what’s taking the script ‘so long’ to run. Do debug this properly you’ll need to get out of tag manager ‘preview debugging’ and go to devTools.",
                "author": "Gullible_Attitude_20",
                "score": 1
            },
            {
                "body": "Are your GAds tags being triggered by an event that happens immediately before a page load?",
                "author": "DigitalStefan",
                "score": 1
            },
            {
                "body": "In addition to this it might not be an issue and more a bug in gtm preview mode. Fundamentally check the network tab in dev tools and see if the network hits are occuring and if they are panic over.",
                "author": "dowmi12",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1711105757.0,
        "title": "No conversions in GA4 with cookieless setup and server-side tagging.",
        "author": "T-Ik-zei-emes",
        "id": "1bkwofa",
        "selftext": "I have implemented Google Consent Mode V2 and server-side tagging on multiple accounts to meet privacy requirements and still collect important analytics data. However, since this implementation, I notice that none of the accounts are recording conversions in Google Analytics 4 for users who do not accept cookies, despite this configuration being intended to collect certain data via cookieess pings anyway (advanced mode). This problem occurs consistently across all accounts since switching to Consent Mode V2. I have carefully checked the implementation of both the cookie consent solution and server-side tagging, and I have also looked at any delays in data reporting, but the problem persists. I am looking for insight or solutions to understand why these conversions are not showing up in GA4 and how to fix this.\n\nEDIT: I use GTM to load the cookiebanner, and I see all my tags firing in preview mode, however the events don't appear in GA4 (even when I check days later).",
        "score": 3,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1bkwofa/no_conversions_in_ga4_with_cookieless_setup_and/",
        "num_comments": 10,
        "comments": [
            {
                "body": "Absolutely correct. You need a certain level of traffic to build the model. I'm assuming it's because the model really does need a decent amount of data to be anywhere near useful / accurate.\n\nThere's some detail about it as part of this article: [https://www.optimizesmart.com/ga4-behavioral-conversion-modeling-and-consent-mode-guide/](https://www.optimizesmart.com/ga4-behavioral-conversion-modeling-and-consent-mode-guide/)\n\nI couldn't immediately find Google's own documentation on this.\n\nIf you have half a million events per day, I'd expect the model to kick in quickly. Close to the lower limit... maybe 2 weeks.\n\nThat's assuming everything is set up perfectly.",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Did you set up GTM as technically necessary in your cookie banner?",
                "author": "kathars1s-",
                "score": 1
            },
            {
                "body": "Look in GA4 admin > Reporting Identity.\n\nYou will need \"Blended\" as the selected identity to be able to see the modeled data that CoMo enables. Modelling is available for both basic and advanced CoMo, but advanced will obviously give more / better data.\n\nIf you see \"1 inactive method\", the model isn't active yet and either may take some time to build or it will never build if there's not enough traffic (consented and non-consented).",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Hi, how do I do this? I do use GTM to load the cookiebanner, and I see al my tags firing in preview mode, however the events don't appear in GA4 (even when I check days later).",
                "author": "T-Ik-zei-emes",
                "score": 1
            },
            {
                "body": "So you are saying that the Cookieless Pings (Advanced Consent Mode setup) only work when you have enough traffic for modelling? So: no modelling = no data from cookieless pings in GA4?",
                "author": "T-Ik-zei-emes",
                "score": 1
            },
            {
                "body": "Probably in the backend of your banner provider.",
                "author": "kathars1s-",
                "score": 1
            },
            {
                "body": "Thanks you so much for your reply! I was under the impression that GA4 would directly record the Cookieless Pings but anonymized (so without IP or any other Personal Information). But sadly, that doesn't seem to be reality...\n\nEDIT: In the article it also says that Server Side Tagging is a way to fix this, but I don't understand how. In my experience: if users do not consent, GA4 just does not accept the data coming in. And it does not matter if the data is comming in through Server Side Tagging or Client Side Tagging.",
                "author": "T-Ik-zei-emes",
                "score": 1
            },
            {
                "body": "\"turn 3rd-party data into 1st-party\". I'm not a legal professional, but in my opinion that *sounds* like a faulty interpretation.\n\nYou expressly are not allowed to use server-side to in any way circumvent user privacy laws.\n\nYou either have consent or you don't. Server-side can move data into a 1st-party context, but that's nothing to do with being able to get around the user's wishes in terms of what they allow their data to be used for.",
                "author": "StefanAtWork",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1717580519.0,
        "title": "GA4/Tag manager issue",
        "author": "RecentBaseball2180",
        "id": "1d8lxg2",
        "selftext": "Since a week all our visitors are attributed to direct traffic. We didnt make any changes in our data layer or other settings. Does anyone know what issue can cause this problem\n\n[https://ibb.co/Fb59dtK](https://ibb.co/Fb59dtK)  \n",
        "score": 0,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1d8lxg2/ga4tag_manager_issue/",
        "num_comments": 6,
        "comments": [
            {
                "body": "Either UTMs were messed with if it was paid traffic or there is a bug you're seeing in ga4.\n\nThis has happened to me before and it ended up being a google issue that was resolved several days or weeks later. Check UTMs are working correctly first.",
                "author": "TheHobbyist_",
                "score": 3
            },
            {
                "body": "Just to be sure, check the publish history in GTM as well. Perhaps something faulty was published recently.",
                "author": "WorkingBetter",
                "score": 2
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "We had a similar issue on the 22nd of may. In our case it was due to a faulty consent state send bij the CMP.",
                "author": "agarss",
                "score": 1
            },
            {
                "body": "So many reasons this could be happening and all the results of intentional errors. Have you recently changed your site to use UTMs on internal links? That error will wipe out the true traffic source. Have you recently set up server side redirects that employ a combination of protocol redirect errors and URL query parameter truncation? That will wipe out the true traffic source.",
                "author": "Humble_Elderberry_25",
                "score": 1
            }
        ]
    },
    {
        "subreddit": "GoogleTagManager",
        "created": 1715251103.0,
        "title": "How to find clients in this neeche?",
        "author": "Helpful_Sundaee",
        "id": "1cnu3lw",
        "selftext": "Looking to transition from agency work to freelancing in GA4 and GTM. With agency experience under my belt, I'm ready to dive into freelancing to further develop my skills and establish myself as a brand in the digital realm. Seeking guidance and referrals on finding clients in this niche. Willing to compensate for valuable referrals.",
        "score": 4,
        "url": "https://www.reddit.com/r/GoogleTagManager/comments/1cnu3lw/how_to_find_clients_in_this_neeche/",
        "num_comments": 7,
        "comments": [
            {
                "body": "Post useful content here and on LinkedIn.\n\nI *wasn't* offering freelance services, but posting here (using my non-work account) resulted in contacts from clients who were looking for help with speicifc things.\n\nMy first client had been driven to tears with the frustration of getting cookie consent + Google Consent mode to work. I'd been posting help and advice on that topic, so they reached out.\n\nWorked out really well.",
                "author": "StefanAtWork",
                "score": 3
            },
            {
                "body": "If this post doesn't follow the rules [report it to the mods](https://www.reddit.com/r/GoogleTagManager/about/rules/). Have more questions? [Join our community Discord!](https://discord.gg/looking-for-marketing-discussion-811236647760298024)\n\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Are you a marketing professional and have 15 minutes to share your insights? [Take our 2023 State of Marketing Survey](https://lookingformarketing.com/survey/state-of-marketing?utm_source=r_googletagmanager&utm_medium=social).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/GoogleTagManager) if you have any questions or concerns.*",
                "author": "AutoModerator",
                "score": 1
            },
            {
                "body": "Can you be more specific..\n\nYou posted good practice on reddit? And how much did you charge them?\n\nActually I have created a website for my service called \nMindknot Digital India. Where I post blogs related to ga4 and martech and post them on LinkedIn.\n\nBut still no clients!",
                "author": "Helpful_Sundaee",
                "score": 1
            },
            {
                "body": "There wasn't really anything specific for me to be specific about!\n\nBe helpful. Reply to Reddit posts with useful information. Be prepared to run experiments based on things someone is asking. Either you will find the answer and you can help them, or you won't, but at least you'll have run an experiment and learned something.\n\nOn LinkedIn it's just a case of adding to the conversation with something useful, plus now it's quite a good place to author original content. I've recently shared a technical implementation guide for Enhanced Conversions using pre-hashed data.\n\nI'm sure there are other and possibly more effective ways to build a freelance client pool, but I can only talk about my experience.\n\nMy website is terrible. I don't know if it really matters. 90% of my clients have contacted my via Reddit, or they've seen something I posted on Reddit and contacted me on LinkedIn.\n\n  \nEDIT: Worth a mention... I'm not a full-time freelancer. I have a full-time regular job. Thankfully, that job is with an agency where I get to \"do\" GTM all day. More than one time I've had a client tell me they were searching for a solution to an issue and they found a Reddit post from me that was helpful. The same thing happened when my manager was looking for something, the first result was one of my posts.\n\nIt's obvious that Reddit is greedily indexed by Google, so if you post a reply or something original and you're talking about a specific topic, it's likely that a Google search will return your post / comment as a result so long as you have given accurate information and there has been positive engagement (not necessarily lots of upvotes!)",
                "author": "StefanAtWork",
                "score": 1
            },
            {
                "body": "Got it.",
                "author": "Helpful_Sundaee",
                "score": 1
            }
        ]
    }
]